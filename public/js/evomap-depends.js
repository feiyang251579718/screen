!(function (e, t) {
  'object' == typeof exports && 'undefined' != typeof module
    ? t(exports)
    : 'function' == typeof define && define.amd
    ? define(['exports'], t)
    : t((e.THREE = {}));
})(this, function (e) {
  'use strict';
  function r() {}
  void 0 === Number.EPSILON && (Number.EPSILON = Math.pow(2, -52)),
    void 0 === Number.isInteger &&
      (Number.isInteger = function (e) {
        return 'number' == typeof e && isFinite(e) && Math.floor(e) === e;
      }),
    void 0 === Math.sign &&
      (Math.sign = function (e) {
        return e < 0 ? -1 : 0 < e ? 1 : +e;
      }),
    'name' in Function.prototype == !1 &&
      Object.defineProperty(Function.prototype, 'name', {
        get: function () {
          return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1];
        },
      }),
    void 0 === Object.assign &&
      (Object.assign = function (e) {
        if (null == e)
          throw new TypeError('Cannot convert undefined or null to object');
        for (var t = Object(e), A = 1; A < arguments.length; A++) {
          var r = arguments[A];
          if (null != r)
            for (var n in r)
              Object.prototype.hasOwnProperty.call(r, n) && (t[n] = r[n]);
        }
        return t;
      }),
    Object.assign(r.prototype, {
      addEventListener: function (e, t) {
        void 0 === this._listeners && (this._listeners = {});
        var A = this._listeners;
        void 0 === A[e] && (A[e] = []), -1 === A[e].indexOf(t) && A[e].push(t);
      },
      hasEventListener: function (e, t) {
        var A;
        return (
          void 0 !== this._listeners &&
          void 0 !== (A = this._listeners)[e] &&
          -1 !== A[e].indexOf(t)
        );
      },
      removeEventListener: function (e, t) {
        var A;
        void 0 !== this._listeners &&
          void 0 !== (e = this._listeners[e]) &&
          -1 !== (A = e.indexOf(t)) &&
          e.splice(A, 1);
      },
      dispatchEvent: function (e) {
        if (void 0 !== this._listeners) {
          var t = this._listeners[e.type];
          if (void 0 !== t) {
            e.target = this;
            for (var A = t.slice(0), r = 0, n = A.length; r < n; r++)
              A[r].call(this, e);
          }
        }
      },
    });
  var c,
    u,
    d,
    w,
    _,
    M,
    S,
    n,
    Q,
    L,
    H,
    I,
    R,
    P,
    D,
    O,
    N,
    G,
    V,
    k,
    z,
    K,
    X = 0,
    j = 1,
    W = 2,
    Y = 1,
    J = 2,
    Z = 0,
    Ee = 1,
    ee = 2,
    te = 0,
    Ae = 1,
    re = 2,
    ne = 3,
    ie = 4,
    ae = 5,
    oe = 100,
    se = 101,
    le = 102,
    ce = 103,
    ue = 104,
    fe = 200,
    ge = 201,
    me = 202,
    ve = 203,
    Be = 204,
    we = 205,
    ye = 206,
    Ue = 207,
    Me = 208,
    Se = 209,
    Qe = 210,
    Le = 0,
    He = 1,
    Ie = 2,
    Re = 3,
    Pe = 4,
    De = 5,
    Oe = 6,
    Ne = 7,
    Ge = 0,
    Ve = 1,
    ke = 2,
    ze = 0,
    Ke = 301,
    Xe = 302,
    je = 303,
    We = 304,
    Ye = 305,
    Je = 306,
    Ze = 307,
    qe = 1e3,
    $e = 1001,
    et = 1002,
    tt = 1003,
    At = 1004,
    rt = 1005,
    U = 1006,
    nt = 1007,
    it = 1008,
    at = 1009,
    ot = 1010,
    st = 1011,
    lt = 1012,
    ct = 1013,
    ut = 1014,
    ht = 1015,
    dt = 1016,
    pt = 1017,
    ft = 1018,
    gt = 1019,
    mt = 1020,
    vt = 1021,
    Bt = 1022,
    wt = 1023,
    yt = 1024,
    Et = 1025,
    xt = wt,
    bt = 1026,
    Ct = 1027,
    Ft = 33776,
    Tt = 33777,
    _t = 33778,
    Ut = 33779,
    Mt = 35840,
    St = 35841,
    Qt = 35842,
    Lt = 35843,
    Ht = 36196,
    It = 37808,
    Rt = 37809,
    Pt = 37810,
    Dt = 37811,
    Ot = 37812,
    Nt = 37813,
    Gt = 37814,
    Vt = 37815,
    kt = 37816,
    zt = 37817,
    Kt = 37818,
    Xt = 37819,
    jt = 37820,
    Wt = 37821,
    Yt = 2300,
    Jt = 2301,
    Zt = 2400,
    qt = 2401,
    $t = 2402,
    eA = 0,
    tA = 3e3,
    AA = 3007,
    rA = 3200,
    nA = 3201,
    iA = 1,
    xe = {
      DEG2RAD: Math.PI / 180,
      RAD2DEG: 180 / Math.PI,
      generateUUID: (function () {
        for (var n = [], e = 0; e < 256; e++)
          n[e] = (e < 16 ? '0' : '') + e.toString(16);
        return function () {
          var e = (4294967295 * Math.random()) | 0,
            t = (4294967295 * Math.random()) | 0,
            A = (4294967295 * Math.random()) | 0,
            r = (4294967295 * Math.random()) | 0;
          return (
            n[255 & e] +
            n[(e >> 8) & 255] +
            n[(e >> 16) & 255] +
            n[(e >> 24) & 255] +
            '-' +
            n[255 & t] +
            n[(t >> 8) & 255] +
            '-' +
            n[((t >> 16) & 15) | 64] +
            n[(t >> 24) & 255] +
            '-' +
            n[(63 & A) | 128] +
            n[(A >> 8) & 255] +
            '-' +
            n[(A >> 16) & 255] +
            n[(A >> 24) & 255] +
            n[255 & r] +
            n[(r >> 8) & 255] +
            n[(r >> 16) & 255] +
            n[(r >> 24) & 255]
          ).toUpperCase();
        };
      })(),
      clamp: function (e, t, A) {
        return Math.max(t, Math.min(A, e));
      },
      euclideanModulo: function (e, t) {
        return ((e % t) + t) % t;
      },
      mapLinear: function (e, t, A, r, n) {
        return r + ((e - t) * (n - r)) / (A - t);
      },
      lerp: function (e, t, A) {
        return (1 - A) * e + A * t;
      },
      smoothstep: function (e, t, A) {
        return e <= t
          ? 0
          : A <= e
          ? 1
          : (e = (e - t) / (A - t)) * e * (3 - 2 * e);
      },
      smootherstep: function (e, t, A) {
        return e <= t
          ? 0
          : A <= e
          ? 1
          : (e = (e - t) / (A - t)) * e * e * (e * (6 * e - 15) + 10);
      },
      randInt: function (e, t) {
        return e + Math.floor(Math.random() * (t - e + 1));
      },
      randFloat: function (e, t) {
        return e + Math.random() * (t - e);
      },
      randFloatSpread: function (e) {
        return e * (0.5 - Math.random());
      },
      degToRad: function (e) {
        return e * xe.DEG2RAD;
      },
      radToDeg: function (e) {
        return e * xe.RAD2DEG;
      },
      isPowerOfTwo: function (e) {
        return 0 == (e & (e - 1)) && 0 !== e;
      },
      ceilPowerOfTwo: function (e) {
        return Math.pow(2, Math.ceil(Math.log(e) / Math.LN2));
      },
      floorPowerOfTwo: function (e) {
        return Math.pow(2, Math.floor(Math.log(e) / Math.LN2));
      },
    };
  function he(e, t) {
    (this.x = e || 0), (this.y = t || 0);
  }
  function be() {
    (this.elements = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]),
      0 < arguments.length &&
        console.error(
          'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.',
        );
  }
  function E(e, t, A, r) {
    (this._x = e || 0),
      (this._y = t || 0),
      (this._z = A || 0),
      (this._w = void 0 !== r ? r : 1);
  }
  function Ce(e, t, A) {
    (this.x = e || 0), (this.y = t || 0), (this.z = A || 0);
  }
  function F() {
    (this.elements = [1, 0, 0, 0, 1, 0, 0, 0, 1]),
      0 < arguments.length &&
        console.error(
          'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.',
        );
  }
  Object.defineProperties(he.prototype, {
    width: {
      get: function () {
        return this.x;
      },
      set: function (e) {
        this.x = e;
      },
    },
    height: {
      get: function () {
        return this.y;
      },
      set: function (e) {
        this.y = e;
      },
    },
  }),
    Object.assign(he.prototype, {
      isVector2: !0,
      set: function (e, t) {
        return (this.x = e), (this.y = t), this;
      },
      setScalar: function (e) {
        return (this.x = e), (this.y = e), this;
      },
      setX: function (e) {
        return (this.x = e), this;
      },
      setY: function (e) {
        return (this.y = e), this;
      },
      setComponent: function (e, t) {
        switch (e) {
          case 0:
            this.x = t;
            break;
          case 1:
            this.y = t;
            break;
          default:
            throw new Error('index is out of range: ' + e);
        }
        return this;
      },
      getComponent: function (e) {
        switch (e) {
          case 0:
            return this.x;
          case 1:
            return this.y;
          default:
            throw new Error('index is out of range: ' + e);
        }
      },
      clone: function () {
        return new this.constructor(this.x, this.y);
      },
      copy: function (e) {
        return (this.x = e.x), (this.y = e.y), this;
      },
      add: function (e, t) {
        return void 0 !== t
          ? (console.warn(
              'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.',
            ),
            this.addVectors(e, t))
          : ((this.x += e.x), (this.y += e.y), this);
      },
      addScalar: function (e) {
        return (this.x += e), (this.y += e), this;
      },
      addVectors: function (e, t) {
        return (this.x = e.x + t.x), (this.y = e.y + t.y), this;
      },
      addScaledVector: function (e, t) {
        return (this.x += e.x * t), (this.y += e.y * t), this;
      },
      sub: function (e, t) {
        return void 0 !== t
          ? (console.warn(
              'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.',
            ),
            this.subVectors(e, t))
          : ((this.x -= e.x), (this.y -= e.y), this);
      },
      subScalar: function (e) {
        return (this.x -= e), (this.y -= e), this;
      },
      subVectors: function (e, t) {
        return (this.x = e.x - t.x), (this.y = e.y - t.y), this;
      },
      multiply: function (e) {
        return (this.x *= e.x), (this.y *= e.y), this;
      },
      multiplyScalar: function (e) {
        return (this.x *= e), (this.y *= e), this;
      },
      divide: function (e) {
        return (this.x /= e.x), (this.y /= e.y), this;
      },
      divideScalar: function (e) {
        return this.multiplyScalar(1 / e);
      },
      applyMatrix3: function (e) {
        var t = this.x,
          A = this.y,
          e = e.elements;
        return (
          (this.x = e[0] * t + e[3] * A + e[6]),
          (this.y = e[1] * t + e[4] * A + e[7]),
          this
        );
      },
      min: function (e) {
        return (
          (this.x = Math.min(this.x, e.x)),
          (this.y = Math.min(this.y, e.y)),
          this
        );
      },
      max: function (e) {
        return (
          (this.x = Math.max(this.x, e.x)),
          (this.y = Math.max(this.y, e.y)),
          this
        );
      },
      clamp: function (e, t) {
        return (
          (this.x = Math.max(e.x, Math.min(t.x, this.x))),
          (this.y = Math.max(e.y, Math.min(t.y, this.y))),
          this
        );
      },
      clampScalar:
        ((c = new he()),
        (u = new he()),
        function (e, t) {
          return c.set(e, e), u.set(t, t), this.clamp(c, u);
        }),
      clampLength: function (e, t) {
        var A = this.length();
        return this.divideScalar(A || 1).multiplyScalar(
          Math.max(e, Math.min(t, A)),
        );
      },
      floor: function () {
        return (
          (this.x = Math.floor(this.x)), (this.y = Math.floor(this.y)), this
        );
      },
      ceil: function () {
        return (this.x = Math.ceil(this.x)), (this.y = Math.ceil(this.y)), this;
      },
      round: function () {
        return (
          (this.x = Math.round(this.x)), (this.y = Math.round(this.y)), this
        );
      },
      roundToZero: function () {
        return (
          (this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x)),
          (this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y)),
          this
        );
      },
      negate: function () {
        return (this.x = -this.x), (this.y = -this.y), this;
      },
      dot: function (e) {
        return this.x * e.x + this.y * e.y;
      },
      cross: function (e) {
        return this.x * e.y - this.y * e.x;
      },
      lengthSq: function () {
        return this.x * this.x + this.y * this.y;
      },
      length: function () {
        return Math.sqrt(this.x * this.x + this.y * this.y);
      },
      manhattanLength: function () {
        return Math.abs(this.x) + Math.abs(this.y);
      },
      normalize: function () {
        return this.divideScalar(this.length() || 1);
      },
      angle: function () {
        var e = Math.atan2(this.y, this.x);
        return e < 0 && (e += 2 * Math.PI), e;
      },
      distanceTo: function (e) {
        return Math.sqrt(this.distanceToSquared(e));
      },
      distanceToSquared: function (e) {
        var t = this.x - e.x,
          e = this.y - e.y;
        return t * t + e * e;
      },
      manhattanDistanceTo: function (e) {
        return Math.abs(this.x - e.x) + Math.abs(this.y - e.y);
      },
      setLength: function (e) {
        return this.normalize().multiplyScalar(e);
      },
      lerp: function (e, t) {
        return (
          (this.x += (e.x - this.x) * t), (this.y += (e.y - this.y) * t), this
        );
      },
      lerpVectors: function (e, t, A) {
        return this.subVectors(t, e).multiplyScalar(A).add(e);
      },
      equals: function (e) {
        return e.x === this.x && e.y === this.y;
      },
      fromArray: function (e, t) {
        return (
          (this.x = e[(t = void 0 === t ? 0 : t)]), (this.y = e[t + 1]), this
        );
      },
      toArray: function (e, t) {
        return (
          ((e = void 0 === e ? [] : e)[(t = void 0 === t ? 0 : t)] = this.x),
          (e[t + 1] = this.y),
          e
        );
      },
      fromBufferAttribute: function (e, t, A) {
        return (
          void 0 !== A &&
            console.warn(
              'THREE.Vector2: offset has been removed from .fromBufferAttribute().',
            ),
          (this.x = e.getX(t)),
          (this.y = e.getY(t)),
          this
        );
      },
      rotateAround: function (e, t) {
        var A = Math.cos(t),
          t = Math.sin(t),
          r = this.x - e.x,
          n = this.y - e.y;
        return (
          (this.x = r * A - n * t + e.x), (this.y = r * t + n * A + e.y), this
        );
      },
    }),
    Object.assign(be.prototype, {
      isMatrix4: !0,
      set: function (e, t, A, r, n, i, a, o, s, l, c, u, h, d, p, f) {
        var g = this.elements;
        return (
          (g[0] = e),
          (g[4] = t),
          (g[8] = A),
          (g[12] = r),
          (g[1] = n),
          (g[5] = i),
          (g[9] = a),
          (g[13] = o),
          (g[2] = s),
          (g[6] = l),
          (g[10] = c),
          (g[14] = u),
          (g[3] = h),
          (g[7] = d),
          (g[11] = p),
          (g[15] = f),
          this
        );
      },
      identity: function () {
        return this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this;
      },
      clone: function () {
        return new be().fromArray(this.elements);
      },
      copy: function (e) {
        var t = this.elements,
          e = e.elements;
        return (
          (t[0] = e[0]),
          (t[1] = e[1]),
          (t[2] = e[2]),
          (t[3] = e[3]),
          (t[4] = e[4]),
          (t[5] = e[5]),
          (t[6] = e[6]),
          (t[7] = e[7]),
          (t[8] = e[8]),
          (t[9] = e[9]),
          (t[10] = e[10]),
          (t[11] = e[11]),
          (t[12] = e[12]),
          (t[13] = e[13]),
          (t[14] = e[14]),
          (t[15] = e[15]),
          this
        );
      },
      copyPosition: function (e) {
        var t = this.elements,
          e = e.elements;
        return (t[12] = e[12]), (t[13] = e[13]), (t[14] = e[14]), this;
      },
      extractBasis: function (e, t, A) {
        return (
          e.setFromMatrixColumn(this, 0),
          t.setFromMatrixColumn(this, 1),
          A.setFromMatrixColumn(this, 2),
          this
        );
      },
      makeBasis: function (e, t, A) {
        return (
          this.set(
            e.x,
            t.x,
            A.x,
            0,
            e.y,
            t.y,
            A.y,
            0,
            e.z,
            t.z,
            A.z,
            0,
            0,
            0,
            0,
            1,
          ),
          this
        );
      },
      extractRotation:
        ((H = new Ce()),
        function (e) {
          var t = this.elements,
            A = e.elements,
            r = 1 / H.setFromMatrixColumn(e, 0).length(),
            n = 1 / H.setFromMatrixColumn(e, 1).length(),
            e = 1 / H.setFromMatrixColumn(e, 2).length();
          return (
            (t[0] = A[0] * r),
            (t[1] = A[1] * r),
            (t[2] = A[2] * r),
            (t[3] = 0),
            (t[4] = A[4] * n),
            (t[5] = A[5] * n),
            (t[6] = A[6] * n),
            (t[7] = 0),
            (t[8] = A[8] * e),
            (t[9] = A[9] * e),
            (t[10] = A[10] * e),
            (t[11] = 0),
            (t[12] = 0),
            (t[13] = 0),
            (t[14] = 0),
            (t[15] = 1),
            this
          );
        }),
      makeRotationFromEuler: function (e) {
        (e && e.isEuler) ||
          console.error(
            'THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.',
          );
        var t,
          A,
          r,
          n,
          i,
          a,
          o,
          s,
          l,
          c,
          u,
          h,
          d = this.elements,
          p = e.x,
          f = e.y,
          g = e.z,
          m = Math.cos(p),
          p = Math.sin(p),
          v = Math.cos(f),
          f = Math.sin(f),
          B = Math.cos(g),
          g = Math.sin(g);
        return (
          'XYZ' === e.order
            ? ((i = m * B),
              (a = m * g),
              (o = p * B),
              (s = p * g),
              (d[0] = v * B),
              (d[4] = -v * g),
              (d[8] = f),
              (d[1] = a + o * f),
              (d[5] = i - s * f),
              (d[9] = -p * v),
              (d[2] = s - i * f),
              (d[6] = o + a * f),
              (d[10] = m * v))
            : 'YXZ' === e.order
            ? ((A = v * g),
              (r = f * B),
              (d[0] = (t = v * B) + (n = f * g) * p),
              (d[4] = r * p - A),
              (d[8] = m * f),
              (d[1] = m * g),
              (d[5] = m * B),
              (d[9] = -p),
              (d[2] = A * p - r),
              (d[6] = n + t * p),
              (d[10] = m * v))
            : 'ZXY' === e.order
            ? ((A = v * g),
              (r = f * B),
              (d[0] = (t = v * B) - (n = f * g) * p),
              (d[4] = -m * g),
              (d[8] = r + A * p),
              (d[1] = A + r * p),
              (d[5] = m * B),
              (d[9] = n - t * p),
              (d[2] = -m * f),
              (d[6] = p),
              (d[10] = m * v))
            : 'ZYX' === e.order
            ? ((i = m * B),
              (a = m * g),
              (o = p * B),
              (s = p * g),
              (d[0] = v * B),
              (d[4] = o * f - a),
              (d[8] = i * f + s),
              (d[1] = v * g),
              (d[5] = s * f + i),
              (d[9] = a * f - o),
              (d[2] = -f),
              (d[6] = p * v),
              (d[10] = m * v))
            : 'YZX' === e.order
            ? ((l = m * v),
              (c = m * f),
              (u = p * v),
              (h = p * f),
              (d[0] = v * B),
              (d[4] = h - l * g),
              (d[8] = u * g + c),
              (d[1] = g),
              (d[5] = m * B),
              (d[9] = -p * B),
              (d[2] = -f * B),
              (d[6] = c * g + u),
              (d[10] = l - h * g))
            : 'XZY' === e.order &&
              ((l = m * v),
              (c = m * f),
              (u = p * v),
              (h = p * f),
              (d[0] = v * B),
              (d[4] = -g),
              (d[8] = f * B),
              (d[1] = l * g + h),
              (d[5] = m * B),
              (d[9] = c * g - u),
              (d[2] = u * g - c),
              (d[6] = p * B),
              (d[10] = h * g + l)),
          (d[3] = 0),
          (d[7] = 0),
          (d[11] = 0),
          (d[12] = 0),
          (d[13] = 0),
          (d[14] = 0),
          (d[15] = 1),
          this
        );
      },
      makeRotationFromQuaternion:
        ((Q = new Ce(0, 0, 0)),
        (L = new Ce(1, 1, 1)),
        function (e) {
          return this.compose(Q, e, L);
        }),
      lookAt:
        ((M = new Ce()),
        (S = new Ce()),
        (n = new Ce()),
        function (e, t, A) {
          var r = this.elements;
          return (
            n.subVectors(e, t),
            0 === n.lengthSq() && (n.z = 1),
            n.normalize(),
            M.crossVectors(A, n),
            0 === M.lengthSq() &&
              (1 === Math.abs(A.z) ? (n.x += 1e-4) : (n.z += 1e-4),
              n.normalize(),
              M.crossVectors(A, n)),
            M.normalize(),
            S.crossVectors(n, M),
            (r[0] = M.x),
            (r[4] = S.x),
            (r[8] = n.x),
            (r[1] = M.y),
            (r[5] = S.y),
            (r[9] = n.y),
            (r[2] = M.z),
            (r[6] = S.z),
            (r[10] = n.z),
            this
          );
        }),
      multiply: function (e, t) {
        return void 0 !== t
          ? (console.warn(
              'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.',
            ),
            this.multiplyMatrices(e, t))
          : this.multiplyMatrices(this, e);
      },
      premultiply: function (e) {
        return this.multiplyMatrices(e, this);
      },
      multiplyMatrices: function (e, t) {
        var e = e.elements,
          t = t.elements,
          A = this.elements,
          r = e[0],
          n = e[4],
          i = e[8],
          a = e[12],
          o = e[1],
          s = e[5],
          l = e[9],
          c = e[13],
          u = e[2],
          h = e[6],
          d = e[10],
          p = e[14],
          f = e[3],
          g = e[7],
          m = e[11],
          e = e[15],
          v = t[0],
          B = t[4],
          w = t[8],
          y = t[12],
          E = t[1],
          x = t[5],
          b = t[9],
          C = t[13],
          F = t[2],
          T = t[6],
          _ = t[10],
          U = t[14],
          M = t[3],
          S = t[7],
          Q = t[11],
          t = t[15];
        return (
          (A[0] = r * v + n * E + i * F + a * M),
          (A[4] = r * B + n * x + i * T + a * S),
          (A[8] = r * w + n * b + i * _ + a * Q),
          (A[12] = r * y + n * C + i * U + a * t),
          (A[1] = o * v + s * E + l * F + c * M),
          (A[5] = o * B + s * x + l * T + c * S),
          (A[9] = o * w + s * b + l * _ + c * Q),
          (A[13] = o * y + s * C + l * U + c * t),
          (A[2] = u * v + h * E + d * F + p * M),
          (A[6] = u * B + h * x + d * T + p * S),
          (A[10] = u * w + h * b + d * _ + p * Q),
          (A[14] = u * y + h * C + d * U + p * t),
          (A[3] = f * v + g * E + m * F + e * M),
          (A[7] = f * B + g * x + m * T + e * S),
          (A[11] = f * w + g * b + m * _ + e * Q),
          (A[15] = f * y + g * C + m * U + e * t),
          this
        );
      },
      multiplyScalar: function (e) {
        var t = this.elements;
        return (
          (t[0] *= e),
          (t[4] *= e),
          (t[8] *= e),
          (t[12] *= e),
          (t[1] *= e),
          (t[5] *= e),
          (t[9] *= e),
          (t[13] *= e),
          (t[2] *= e),
          (t[6] *= e),
          (t[10] *= e),
          (t[14] *= e),
          (t[3] *= e),
          (t[7] *= e),
          (t[11] *= e),
          (t[15] *= e),
          this
        );
      },
      applyToBufferAttribute:
        ((_ = new Ce()),
        function (e) {
          for (var t = 0, A = e.count; t < A; t++)
            (_.x = e.getX(t)),
              (_.y = e.getY(t)),
              (_.z = e.getZ(t)),
              _.applyMatrix4(this),
              e.setXYZ(t, _.x, _.y, _.z);
          return e;
        }),
      determinant: function () {
        var e = this.elements,
          t = e[0],
          A = e[4],
          r = e[8],
          n = e[12],
          i = e[1],
          a = e[5],
          o = e[9],
          s = e[13],
          l = e[2],
          c = e[6],
          u = e[10],
          h = e[14];
        return (
          e[3] *
            (+n * o * c -
              r * s * c -
              n * a * u +
              A * s * u +
              r * a * h -
              A * o * h) +
          e[7] *
            (+t * o * h -
              t * s * u +
              n * i * u -
              r * i * h +
              r * s * l -
              n * o * l) +
          e[11] *
            (+t * s * c -
              t * a * h -
              n * i * c +
              A * i * h +
              n * a * l -
              A * s * l) +
          e[15] *
            (-r * a * l -
              t * o * c +
              t * a * u +
              r * i * c -
              A * i * u +
              A * o * l)
        );
      },
      transpose: function () {
        var e = this.elements,
          t = e[1];
        return (
          (e[1] = e[4]),
          (e[4] = t),
          (t = e[2]),
          (e[2] = e[8]),
          (e[8] = t),
          (t = e[6]),
          (e[6] = e[9]),
          (e[9] = t),
          (t = e[3]),
          (e[3] = e[12]),
          (e[12] = t),
          (t = e[7]),
          (e[7] = e[13]),
          (e[13] = t),
          (t = e[11]),
          (e[11] = e[14]),
          (e[14] = t),
          this
        );
      },
      setPosition: function (e) {
        var t = this.elements;
        return (t[12] = e.x), (t[13] = e.y), (t[14] = e.z), this;
      },
      getInverse: function (e, t) {
        var A = this.elements,
          e = e.elements,
          r = e[0],
          n = e[1],
          i = e[2],
          a = e[3],
          o = e[4],
          s = e[5],
          l = e[6],
          c = e[7],
          u = e[8],
          h = e[9],
          d = e[10],
          p = e[11],
          f = e[12],
          g = e[13],
          m = e[14],
          e = e[15],
          v =
            h * m * c -
            g * d * c +
            g * l * p -
            s * m * p -
            h * l * e +
            s * d * e,
          B =
            f * d * c -
            u * m * c -
            f * l * p +
            o * m * p +
            u * l * e -
            o * d * e,
          w =
            u * g * c -
            f * h * c +
            f * s * p -
            o * g * p -
            u * s * e +
            o * h * e,
          y =
            f * h * l -
            u * g * l -
            f * s * d +
            o * g * d +
            u * s * m -
            o * h * m,
          E = r * v + n * B + i * w + a * y;
        if (0 == E) {
          var x =
            "THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";
          if (!0 === t) throw new Error(x);
          return console.warn(x), this.identity();
        }
        t = 1 / E;
        return (
          (A[0] = v * t),
          (A[1] =
            (g * d * a -
              h * m * a -
              g * i * p +
              n * m * p +
              h * i * e -
              n * d * e) *
            t),
          (A[2] =
            (s * m * a -
              g * l * a +
              g * i * c -
              n * m * c -
              s * i * e +
              n * l * e) *
            t),
          (A[3] =
            (h * l * a -
              s * d * a -
              h * i * c +
              n * d * c +
              s * i * p -
              n * l * p) *
            t),
          (A[4] = B * t),
          (A[5] =
            (u * m * a -
              f * d * a +
              f * i * p -
              r * m * p -
              u * i * e +
              r * d * e) *
            t),
          (A[6] =
            (f * l * a -
              o * m * a -
              f * i * c +
              r * m * c +
              o * i * e -
              r * l * e) *
            t),
          (A[7] =
            (o * d * a -
              u * l * a +
              u * i * c -
              r * d * c -
              o * i * p +
              r * l * p) *
            t),
          (A[8] = w * t),
          (A[9] =
            (f * h * a -
              u * g * a -
              f * n * p +
              r * g * p +
              u * n * e -
              r * h * e) *
            t),
          (A[10] =
            (o * g * a -
              f * s * a +
              f * n * c -
              r * g * c -
              o * n * e +
              r * s * e) *
            t),
          (A[11] =
            (u * s * a -
              o * h * a -
              u * n * c +
              r * h * c +
              o * n * p -
              r * s * p) *
            t),
          (A[12] = y * t),
          (A[13] =
            (u * g * i -
              f * h * i +
              f * n * d -
              r * g * d -
              u * n * m +
              r * h * m) *
            t),
          (A[14] =
            (f * s * i -
              o * g * i -
              f * n * l +
              r * g * l +
              o * n * m -
              r * s * m) *
            t),
          (A[15] =
            (o * h * i -
              u * s * i +
              u * n * l -
              r * h * l -
              o * n * d +
              r * s * d) *
            t),
          this
        );
      },
      scale: function (e) {
        var t = this.elements,
          A = e.x,
          r = e.y,
          e = e.z;
        return (
          (t[0] *= A),
          (t[4] *= r),
          (t[8] *= e),
          (t[1] *= A),
          (t[5] *= r),
          (t[9] *= e),
          (t[2] *= A),
          (t[6] *= r),
          (t[10] *= e),
          (t[3] *= A),
          (t[7] *= r),
          (t[11] *= e),
          this
        );
      },
      getMaxScaleOnAxis: function () {
        var e = this.elements,
          t = e[0] * e[0] + e[1] * e[1] + e[2] * e[2],
          A = e[4] * e[4] + e[5] * e[5] + e[6] * e[6],
          e = e[8] * e[8] + e[9] * e[9] + e[10] * e[10];
        return Math.sqrt(Math.max(t, A, e));
      },
      makeTranslation: function (e, t, A) {
        return this.set(1, 0, 0, e, 0, 1, 0, t, 0, 0, 1, A, 0, 0, 0, 1), this;
      },
      makeRotationX: function (e) {
        var t = Math.cos(e),
          e = Math.sin(e);
        return this.set(1, 0, 0, 0, 0, t, -e, 0, 0, e, t, 0, 0, 0, 0, 1), this;
      },
      makeRotationY: function (e) {
        var t = Math.cos(e),
          e = Math.sin(e);
        return this.set(t, 0, e, 0, 0, 1, 0, 0, -e, 0, t, 0, 0, 0, 0, 1), this;
      },
      makeRotationZ: function (e) {
        var t = Math.cos(e),
          e = Math.sin(e);
        return this.set(t, -e, 0, 0, e, t, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this;
      },
      makeRotationAxis: function (e, t) {
        var A = Math.cos(t),
          t = Math.sin(t),
          r = 1 - A,
          n = e.x,
          i = e.y,
          e = e.z,
          a = r * n,
          o = r * i;
        return (
          this.set(
            a * n + A,
            a * i - t * e,
            a * e + t * i,
            0,
            a * i + t * e,
            o * i + A,
            o * e - t * n,
            0,
            a * e - t * i,
            o * e + t * n,
            r * e * e + A,
            0,
            0,
            0,
            0,
            1,
          ),
          this
        );
      },
      makeScale: function (e, t, A) {
        return this.set(e, 0, 0, 0, 0, t, 0, 0, 0, 0, A, 0, 0, 0, 0, 1), this;
      },
      makeShear: function (e, t, A) {
        return this.set(1, t, A, 0, e, 1, A, 0, e, t, 1, 0, 0, 0, 0, 1), this;
      },
      compose: function (e, t, A) {
        var r = this.elements,
          n = t._x,
          i = t._y,
          a = t._z,
          t = t._w,
          o = n + n,
          s = i + i,
          l = a + a,
          c = n * o,
          u = n * s,
          n = n * l,
          h = i * s,
          i = i * l,
          a = a * l,
          o = t * o,
          s = t * s,
          t = t * l,
          l = A.x,
          d = A.y,
          A = A.z;
        return (
          (r[0] = (1 - (h + a)) * l),
          (r[1] = (u + t) * l),
          (r[2] = (n - s) * l),
          (r[3] = 0),
          (r[4] = (u - t) * d),
          (r[5] = (1 - (c + a)) * d),
          (r[6] = (i + o) * d),
          (r[7] = 0),
          (r[8] = (n + s) * A),
          (r[9] = (i - o) * A),
          (r[10] = (1 - (c + h)) * A),
          (r[11] = 0),
          (r[12] = e.x),
          (r[13] = e.y),
          (r[14] = e.z),
          (r[15] = 1),
          this
        );
      },
      decompose:
        ((d = new Ce()),
        (w = new be()),
        function (e, t, A) {
          var r = this.elements,
            n = d.set(r[0], r[1], r[2]).length(),
            i = d.set(r[4], r[5], r[6]).length(),
            a = d.set(r[8], r[9], r[10]).length(),
            e =
              (this.determinant() < 0 && (n = -n),
              (e.x = r[12]),
              (e.y = r[13]),
              (e.z = r[14]),
              w.copy(this),
              1 / n),
            r = 1 / i,
            o = 1 / a;
          return (
            (w.elements[0] *= e),
            (w.elements[1] *= e),
            (w.elements[2] *= e),
            (w.elements[4] *= r),
            (w.elements[5] *= r),
            (w.elements[6] *= r),
            (w.elements[8] *= o),
            (w.elements[9] *= o),
            (w.elements[10] *= o),
            t.setFromRotationMatrix(w),
            (A.x = n),
            (A.y = i),
            (A.z = a),
            this
          );
        }),
      makePerspective: function (e, t, A, r, n, i) {
        void 0 === i &&
          console.warn(
            'THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.',
          );
        var a = this.elements,
          o = (2 * n) / (A - r),
          s = (t + e) / (t - e),
          A = (A + r) / (A - r),
          r = -(i + n) / (i - n),
          i = (-2 * i * n) / (i - n);
        return (
          (a[0] = (2 * n) / (t - e)),
          (a[4] = 0),
          (a[8] = s),
          (a[12] = 0),
          (a[1] = 0),
          (a[5] = o),
          (a[9] = A),
          (a[13] = 0),
          (a[2] = 0),
          (a[6] = 0),
          (a[10] = r),
          (a[14] = i),
          (a[3] = 0),
          (a[7] = 0),
          (a[11] = -1),
          (a[15] = 0),
          this
        );
      },
      makeOrthographic: function (e, t, A, r, n, i) {
        var a = this.elements,
          o = 1 / (t - e),
          s = 1 / (A - r),
          l = 1 / (i - n),
          t = (t + e) * o,
          e = (A + r) * s,
          A = (i + n) * l;
        return (
          (a[0] = 2 * o),
          (a[4] = 0),
          (a[8] = 0),
          (a[12] = -t),
          (a[1] = 0),
          (a[5] = 2 * s),
          (a[9] = 0),
          (a[13] = -e),
          (a[2] = 0),
          (a[6] = 0),
          (a[10] = -2 * l),
          (a[14] = -A),
          (a[3] = 0),
          (a[7] = 0),
          (a[11] = 0),
          (a[15] = 1),
          this
        );
      },
      equals: function (e) {
        for (var t = this.elements, A = e.elements, r = 0; r < 16; r++)
          if (t[r] !== A[r]) return !1;
        return !0;
      },
      fromArray: function (e, t) {
        void 0 === t && (t = 0);
        for (var A = 0; A < 16; A++) this.elements[A] = e[A + t];
        return this;
      },
      toArray: function (e, t) {
        var A = this.elements;
        return (
          ((e = void 0 === e ? [] : e)[(t = void 0 === t ? 0 : t)] = A[0]),
          (e[t + 1] = A[1]),
          (e[t + 2] = A[2]),
          (e[t + 3] = A[3]),
          (e[t + 4] = A[4]),
          (e[t + 5] = A[5]),
          (e[t + 6] = A[6]),
          (e[t + 7] = A[7]),
          (e[t + 8] = A[8]),
          (e[t + 9] = A[9]),
          (e[t + 10] = A[10]),
          (e[t + 11] = A[11]),
          (e[t + 12] = A[12]),
          (e[t + 13] = A[13]),
          (e[t + 14] = A[14]),
          (e[t + 15] = A[15]),
          e
        );
      },
    }),
    Object.assign(E, {
      slerp: function (e, t, A, r) {
        return A.copy(e).slerp(t, r);
      },
      slerpFlat: function (e, t, A, r, n, i, a) {
        var o,
          s,
          l,
          c = A[r + 0],
          u = A[r + 1],
          h = A[r + 2],
          A = A[r + 3],
          r = n[i + 0],
          d = n[i + 1],
          p = n[i + 2],
          n = n[i + 3];
        (A === n && c === r && u === d && h === p) ||
          ((i = 1 - a),
          (o = 0 <= (s = c * r + u * d + h * p + A * n) ? 1 : -1),
          (l = 1 - s * s) > Number.EPSILON &&
            ((l = Math.sqrt(l)),
            (s = Math.atan2(l, s * o)),
            (i = Math.sin(i * s) / l),
            (a = Math.sin(a * s) / l)),
          (c = c * i + r * (s = a * o)),
          (u = u * i + d * s),
          (h = h * i + p * s),
          (A = A * i + n * s),
          i === 1 - a &&
            ((c *= l = 1 / Math.sqrt(c * c + u * u + h * h + A * A)),
            (u *= l),
            (h *= l),
            (A *= l))),
          (e[t] = c),
          (e[t + 1] = u),
          (e[t + 2] = h),
          (e[t + 3] = A);
      },
    }),
    Object.defineProperties(E.prototype, {
      x: {
        get: function () {
          return this._x;
        },
        set: function (e) {
          (this._x = e), this.onChangeCallback();
        },
      },
      y: {
        get: function () {
          return this._y;
        },
        set: function (e) {
          (this._y = e), this.onChangeCallback();
        },
      },
      z: {
        get: function () {
          return this._z;
        },
        set: function (e) {
          (this._z = e), this.onChangeCallback();
        },
      },
      w: {
        get: function () {
          return this._w;
        },
        set: function (e) {
          (this._w = e), this.onChangeCallback();
        },
      },
    }),
    Object.assign(E.prototype, {
      set: function (e, t, A, r) {
        return (
          (this._x = e),
          (this._y = t),
          (this._z = A),
          (this._w = r),
          this.onChangeCallback(),
          this
        );
      },
      clone: function () {
        return new this.constructor(this._x, this._y, this._z, this._w);
      },
      copy: function (e) {
        return (
          (this._x = e.x),
          (this._y = e.y),
          (this._z = e.z),
          (this._w = e.w),
          this.onChangeCallback(),
          this
        );
      },
      setFromEuler: function (e, t) {
        var A, r, n, i, a, o, s;
        if (e && e.isEuler)
          return (
            (a = e._x),
            (o = e._y),
            (A = e._z),
            (e = e.order),
            (i = Math.cos),
            (s = Math.sin),
            (r = i(a / 2)),
            (n = i(o / 2)),
            (i = i(A / 2)),
            (a = s(a / 2)),
            (o = s(o / 2)),
            (s = s(A / 2)),
            'XYZ' === e
              ? ((this._x = a * n * i + r * o * s),
                (this._y = r * o * i - a * n * s),
                (this._z = r * n * s + a * o * i),
                (this._w = r * n * i - a * o * s))
              : 'YXZ' === e
              ? ((this._x = a * n * i + r * o * s),
                (this._y = r * o * i - a * n * s),
                (this._z = r * n * s - a * o * i),
                (this._w = r * n * i + a * o * s))
              : 'ZXY' === e
              ? ((this._x = a * n * i - r * o * s),
                (this._y = r * o * i + a * n * s),
                (this._z = r * n * s + a * o * i),
                (this._w = r * n * i - a * o * s))
              : 'ZYX' === e
              ? ((this._x = a * n * i - r * o * s),
                (this._y = r * o * i + a * n * s),
                (this._z = r * n * s - a * o * i),
                (this._w = r * n * i + a * o * s))
              : 'YZX' === e
              ? ((this._x = a * n * i + r * o * s),
                (this._y = r * o * i + a * n * s),
                (this._z = r * n * s - a * o * i),
                (this._w = r * n * i - a * o * s))
              : 'XZY' === e &&
                ((this._x = a * n * i - r * o * s),
                (this._y = r * o * i - a * n * s),
                (this._z = r * n * s + a * o * i),
                (this._w = r * n * i + a * o * s)),
            !1 !== t && this.onChangeCallback(),
            this
          );
        throw new Error(
          'THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.',
        );
      },
      setFromAxisAngle: function (e, t) {
        var t = t / 2,
          A = Math.sin(t);
        return (
          (this._x = e.x * A),
          (this._y = e.y * A),
          (this._z = e.z * A),
          (this._w = Math.cos(t)),
          this.onChangeCallback(),
          this
        );
      },
      setFromRotationMatrix: function (e) {
        var t,
          e = e.elements,
          A = e[0],
          r = e[4],
          n = e[8],
          i = e[1],
          a = e[5],
          o = e[9],
          s = e[2],
          l = e[6],
          e = e[10],
          c = A + a + e;
        return (
          0 < c
            ? ((t = 0.5 / Math.sqrt(c + 1)),
              (this._w = 0.25 / t),
              (this._x = (l - o) * t),
              (this._y = (n - s) * t),
              (this._z = (i - r) * t))
            : a < A && e < A
            ? ((t = 2 * Math.sqrt(1 + A - a - e)),
              (this._w = (l - o) / t),
              (this._x = 0.25 * t),
              (this._y = (r + i) / t),
              (this._z = (n + s) / t))
            : e < a
            ? ((t = 2 * Math.sqrt(1 + a - A - e)),
              (this._w = (n - s) / t),
              (this._x = (r + i) / t),
              (this._y = 0.25 * t),
              (this._z = (o + l) / t))
            : ((t = 2 * Math.sqrt(1 + e - A - a)),
              (this._w = (i - r) / t),
              (this._x = (n + s) / t),
              (this._y = (o + l) / t),
              (this._z = 0.25 * t)),
          this.onChangeCallback(),
          this
        );
      },
      setFromUnitVectors:
        ((R = new Ce()),
        function (e, t) {
          return (
            void 0 === R && (R = new Ce()),
            (I = e.dot(t) + 1) < 1e-6
              ? ((I = 0),
                Math.abs(e.x) > Math.abs(e.z)
                  ? R.set(-e.y, e.x, 0)
                  : R.set(0, -e.z, e.y))
              : R.crossVectors(e, t),
            (this._x = R.x),
            (this._y = R.y),
            (this._z = R.z),
            (this._w = I),
            this.normalize()
          );
        }),
      angleTo: function (e) {
        return 2 * Math.acos(Math.abs(xe.clamp(this.dot(e), -1, 1)));
      },
      rotateTowards: function (e, t) {
        var A = this.angleTo(e);
        return 0 !== A && ((t = Math.min(1, t / A)), this.slerp(e, t)), this;
      },
      inverse: function () {
        return this.conjugate();
      },
      conjugate: function () {
        return (
          (this._x *= -1),
          (this._y *= -1),
          (this._z *= -1),
          this.onChangeCallback(),
          this
        );
      },
      dot: function (e) {
        return (
          this._x * e._x + this._y * e._y + this._z * e._z + this._w * e._w
        );
      },
      lengthSq: function () {
        return (
          this._x * this._x +
          this._y * this._y +
          this._z * this._z +
          this._w * this._w
        );
      },
      length: function () {
        return Math.sqrt(
          this._x * this._x +
            this._y * this._y +
            this._z * this._z +
            this._w * this._w,
        );
      },
      normalize: function () {
        var e = this.length();
        return (
          0 === e
            ? ((this._x = 0), (this._y = 0), (this._z = 0), (this._w = 1))
            : ((this._x = this._x * (e = 1 / e)),
              (this._y = this._y * e),
              (this._z = this._z * e),
              (this._w = this._w * e)),
          this.onChangeCallback(),
          this
        );
      },
      multiply: function (e, t) {
        return void 0 !== t
          ? (console.warn(
              'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.',
            ),
            this.multiplyQuaternions(e, t))
          : this.multiplyQuaternions(this, e);
      },
      premultiply: function (e) {
        return this.multiplyQuaternions(e, this);
      },
      multiplyQuaternions: function (e, t) {
        var A = e._x,
          r = e._y,
          n = e._z,
          e = e._w,
          i = t._x,
          a = t._y,
          o = t._z,
          t = t._w;
        return (
          (this._x = A * t + e * i + r * o - n * a),
          (this._y = r * t + e * a + n * i - A * o),
          (this._z = n * t + e * o + A * a - r * i),
          (this._w = e * t - A * i - r * a - n * o),
          this.onChangeCallback(),
          this
        );
      },
      slerp: function (e, t) {
        if (0 !== t) {
          if (1 === t) return this.copy(e);
          var A = this._x,
            r = this._y,
            n = this._z,
            i = this._w,
            a = i * e._w + A * e._x + r * e._y + n * e._z;
          if (
            (a < 0
              ? ((this._w = -e._w),
                (this._x = -e._x),
                (this._y = -e._y),
                (this._z = -e._z),
                (a = -a))
              : this.copy(e),
            1 <= a)
          )
            (this._w = i), (this._x = A), (this._y = r), (this._z = n);
          else {
            e = 1 - a * a;
            if (e <= Number.EPSILON)
              return (
                (this._w = (o = 1 - t) * i + t * this._w),
                (this._x = o * A + t * this._x),
                (this._y = o * r + t * this._y),
                (this._z = o * n + t * this._z),
                this.normalize()
              );
            var o = Math.sqrt(e),
              e = Math.atan2(o, a),
              a = Math.sin((1 - t) * e) / o,
              t = Math.sin(t * e) / o;
            (this._w = i * a + this._w * t),
              (this._x = A * a + this._x * t),
              (this._y = r * a + this._y * t),
              (this._z = n * a + this._z * t),
              this.onChangeCallback();
          }
        }
        return this;
      },
      equals: function (e) {
        return (
          e._x === this._x &&
          e._y === this._y &&
          e._z === this._z &&
          e._w === this._w
        );
      },
      fromArray: function (e, t) {
        return (
          (this._x = e[(t = void 0 === t ? 0 : t)]),
          (this._y = e[t + 1]),
          (this._z = e[t + 2]),
          (this._w = e[t + 3]),
          this.onChangeCallback(),
          this
        );
      },
      toArray: function (e, t) {
        return (
          ((e = void 0 === e ? [] : e)[(t = void 0 === t ? 0 : t)] = this._x),
          (e[t + 1] = this._y),
          (e[t + 2] = this._z),
          (e[t + 3] = this._w),
          e
        );
      },
      onChange: function (e) {
        return (this.onChangeCallback = e), this;
      },
      onChangeCallback: function () {},
    }),
    Object.assign(Ce.prototype, {
      isVector3: !0,
      set: function (e, t, A) {
        return (this.x = e), (this.y = t), (this.z = A), this;
      },
      setScalar: function (e) {
        return (this.x = e), (this.y = e), (this.z = e), this;
      },
      setX: function (e) {
        return (this.x = e), this;
      },
      setY: function (e) {
        return (this.y = e), this;
      },
      setZ: function (e) {
        return (this.z = e), this;
      },
      setComponent: function (e, t) {
        switch (e) {
          case 0:
            this.x = t;
            break;
          case 1:
            this.y = t;
            break;
          case 2:
            this.z = t;
            break;
          default:
            throw new Error('index is out of range: ' + e);
        }
        return this;
      },
      getComponent: function (e) {
        switch (e) {
          case 0:
            return this.x;
          case 1:
            return this.y;
          case 2:
            return this.z;
          default:
            throw new Error('index is out of range: ' + e);
        }
      },
      clone: function () {
        return new this.constructor(this.x, this.y, this.z);
      },
      copy: function (e) {
        return (this.x = e.x), (this.y = e.y), (this.z = e.z), this;
      },
      add: function (e, t) {
        return void 0 !== t
          ? (console.warn(
              'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.',
            ),
            this.addVectors(e, t))
          : ((this.x += e.x), (this.y += e.y), (this.z += e.z), this);
      },
      addScalar: function (e) {
        return (this.x += e), (this.y += e), (this.z += e), this;
      },
      addVectors: function (e, t) {
        return (
          (this.x = e.x + t.x), (this.y = e.y + t.y), (this.z = e.z + t.z), this
        );
      },
      addScaledVector: function (e, t) {
        return (
          (this.x += e.x * t), (this.y += e.y * t), (this.z += e.z * t), this
        );
      },
      sub: function (e, t) {
        return void 0 !== t
          ? (console.warn(
              'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.',
            ),
            this.subVectors(e, t))
          : ((this.x -= e.x), (this.y -= e.y), (this.z -= e.z), this);
      },
      subScalar: function (e) {
        return (this.x -= e), (this.y -= e), (this.z -= e), this;
      },
      subVectors: function (e, t) {
        return (
          (this.x = e.x - t.x), (this.y = e.y - t.y), (this.z = e.z - t.z), this
        );
      },
      multiply: function (e, t) {
        return void 0 !== t
          ? (console.warn(
              'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.',
            ),
            this.multiplyVectors(e, t))
          : ((this.x *= e.x), (this.y *= e.y), (this.z *= e.z), this);
      },
      multiplyScalar: function (e) {
        return (this.x *= e), (this.y *= e), (this.z *= e), this;
      },
      multiplyVectors: function (e, t) {
        return (
          (this.x = e.x * t.x), (this.y = e.y * t.y), (this.z = e.z * t.z), this
        );
      },
      applyEuler:
        ((z = new E()),
        function (e) {
          return (
            (e && e.isEuler) ||
              console.error(
                'THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.',
              ),
            this.applyQuaternion(z.setFromEuler(e))
          );
        }),
      applyAxisAngle:
        ((k = new E()),
        function (e, t) {
          return this.applyQuaternion(k.setFromAxisAngle(e, t));
        }),
      applyMatrix3: function (e) {
        var t = this.x,
          A = this.y,
          r = this.z,
          e = e.elements;
        return (
          (this.x = e[0] * t + e[3] * A + e[6] * r),
          (this.y = e[1] * t + e[4] * A + e[7] * r),
          (this.z = e[2] * t + e[5] * A + e[8] * r),
          this
        );
      },
      applyMatrix4: function (e) {
        var t = this.x,
          A = this.y,
          r = this.z,
          e = e.elements,
          n = 1 / (e[3] * t + e[7] * A + e[11] * r + e[15]);
        return (
          (this.x = (e[0] * t + e[4] * A + e[8] * r + e[12]) * n),
          (this.y = (e[1] * t + e[5] * A + e[9] * r + e[13]) * n),
          (this.z = (e[2] * t + e[6] * A + e[10] * r + e[14]) * n),
          this
        );
      },
      applyQuaternion: function (e) {
        var t = this.x,
          A = this.y,
          r = this.z,
          n = e.x,
          i = e.y,
          a = e.z,
          e = e.w,
          o = e * t + i * r - a * A,
          s = e * A + a * t - n * r,
          l = e * r + n * A - i * t,
          t = -n * t - i * A - a * r;
        return (
          (this.x = o * e + t * -n + s * -a - l * -i),
          (this.y = s * e + t * -i + l * -n - o * -a),
          (this.z = l * e + t * -a + o * -i - s * -n),
          this
        );
      },
      project:
        ((V = new be()),
        function (e) {
          return (
            V.multiplyMatrices(e.projectionMatrix, V.getInverse(e.matrixWorld)),
            this.applyMatrix4(V)
          );
        }),
      unproject:
        ((G = new be()),
        function (e) {
          return (
            G.multiplyMatrices(e.matrixWorld, G.getInverse(e.projectionMatrix)),
            this.applyMatrix4(G)
          );
        }),
      transformDirection: function (e) {
        var t = this.x,
          A = this.y,
          r = this.z,
          e = e.elements;
        return (
          (this.x = e[0] * t + e[4] * A + e[8] * r),
          (this.y = e[1] * t + e[5] * A + e[9] * r),
          (this.z = e[2] * t + e[6] * A + e[10] * r),
          this.normalize()
        );
      },
      divide: function (e) {
        return (this.x /= e.x), (this.y /= e.y), (this.z /= e.z), this;
      },
      divideScalar: function (e) {
        return this.multiplyScalar(1 / e);
      },
      min: function (e) {
        return (
          (this.x = Math.min(this.x, e.x)),
          (this.y = Math.min(this.y, e.y)),
          (this.z = Math.min(this.z, e.z)),
          this
        );
      },
      max: function (e) {
        return (
          (this.x = Math.max(this.x, e.x)),
          (this.y = Math.max(this.y, e.y)),
          (this.z = Math.max(this.z, e.z)),
          this
        );
      },
      clamp: function (e, t) {
        return (
          (this.x = Math.max(e.x, Math.min(t.x, this.x))),
          (this.y = Math.max(e.y, Math.min(t.y, this.y))),
          (this.z = Math.max(e.z, Math.min(t.z, this.z))),
          this
        );
      },
      clampScalar:
        ((O = new Ce()),
        (N = new Ce()),
        function (e, t) {
          return O.set(e, e, e), N.set(t, t, t), this.clamp(O, N);
        }),
      clampLength: function (e, t) {
        var A = this.length();
        return this.divideScalar(A || 1).multiplyScalar(
          Math.max(e, Math.min(t, A)),
        );
      },
      floor: function () {
        return (
          (this.x = Math.floor(this.x)),
          (this.y = Math.floor(this.y)),
          (this.z = Math.floor(this.z)),
          this
        );
      },
      ceil: function () {
        return (
          (this.x = Math.ceil(this.x)),
          (this.y = Math.ceil(this.y)),
          (this.z = Math.ceil(this.z)),
          this
        );
      },
      round: function () {
        return (
          (this.x = Math.round(this.x)),
          (this.y = Math.round(this.y)),
          (this.z = Math.round(this.z)),
          this
        );
      },
      roundToZero: function () {
        return (
          (this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x)),
          (this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y)),
          (this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z)),
          this
        );
      },
      negate: function () {
        return (this.x = -this.x), (this.y = -this.y), (this.z = -this.z), this;
      },
      dot: function (e) {
        return this.x * e.x + this.y * e.y + this.z * e.z;
      },
      lengthSq: function () {
        return this.x * this.x + this.y * this.y + this.z * this.z;
      },
      length: function () {
        return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);
      },
      manhattanLength: function () {
        return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z);
      },
      normalize: function () {
        return this.divideScalar(this.length() || 1);
      },
      setLength: function (e) {
        return this.normalize().multiplyScalar(e);
      },
      lerp: function (e, t) {
        return (
          (this.x += (e.x - this.x) * t),
          (this.y += (e.y - this.y) * t),
          (this.z += (e.z - this.z) * t),
          this
        );
      },
      lerpVectors: function (e, t, A) {
        return this.subVectors(t, e).multiplyScalar(A).add(e);
      },
      cross: function (e, t) {
        return void 0 !== t
          ? (console.warn(
              'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.',
            ),
            this.crossVectors(e, t))
          : this.crossVectors(this, e);
      },
      crossVectors: function (e, t) {
        var A = e.x,
          r = e.y,
          e = e.z,
          n = t.x,
          i = t.y,
          t = t.z;
        return (
          (this.x = r * t - e * i),
          (this.y = e * n - A * t),
          (this.z = A * i - r * n),
          this
        );
      },
      projectOnVector: function (e) {
        var t = e.dot(this) / e.lengthSq();
        return this.copy(e).multiplyScalar(t);
      },
      projectOnPlane:
        ((D = new Ce()),
        function (e) {
          return D.copy(this).projectOnVector(e), this.sub(D);
        }),
      reflect:
        ((P = new Ce()),
        function (e) {
          return this.sub(P.copy(e).multiplyScalar(2 * this.dot(e)));
        }),
      angleTo: function (e) {
        e = this.dot(e) / Math.sqrt(this.lengthSq() * e.lengthSq());
        return Math.acos(xe.clamp(e, -1, 1));
      },
      distanceTo: function (e) {
        return Math.sqrt(this.distanceToSquared(e));
      },
      distanceToSquared: function (e) {
        var t = this.x - e.x,
          A = this.y - e.y,
          e = this.z - e.z;
        return t * t + A * A + e * e;
      },
      manhattanDistanceTo: function (e) {
        return (
          Math.abs(this.x - e.x) +
          Math.abs(this.y - e.y) +
          Math.abs(this.z - e.z)
        );
      },
      setFromSpherical: function (e) {
        var t = Math.sin(e.phi) * e.radius;
        return (
          (this.x = t * Math.sin(e.theta)),
          (this.y = Math.cos(e.phi) * e.radius),
          (this.z = t * Math.cos(e.theta)),
          this
        );
      },
      setFromCylindrical: function (e) {
        return (
          (this.x = e.radius * Math.sin(e.theta)),
          (this.y = e.y),
          (this.z = e.radius * Math.cos(e.theta)),
          this
        );
      },
      setFromMatrixPosition: function (e) {
        e = e.elements;
        return (this.x = e[12]), (this.y = e[13]), (this.z = e[14]), this;
      },
      setFromMatrixScale: function (e) {
        var t = this.setFromMatrixColumn(e, 0).length(),
          A = this.setFromMatrixColumn(e, 1).length(),
          e = this.setFromMatrixColumn(e, 2).length();
        return (this.x = t), (this.y = A), (this.z = e), this;
      },
      setFromMatrixColumn: function (e, t) {
        return this.fromArray(e.elements, 4 * t);
      },
      equals: function (e) {
        return e.x === this.x && e.y === this.y && e.z === this.z;
      },
      fromArray: function (e, t) {
        return (
          (this.x = e[(t = void 0 === t ? 0 : t)]),
          (this.y = e[t + 1]),
          (this.z = e[t + 2]),
          this
        );
      },
      toArray: function (e, t) {
        return (
          ((e = void 0 === e ? [] : e)[(t = void 0 === t ? 0 : t)] = this.x),
          (e[t + 1] = this.y),
          (e[t + 2] = this.z),
          e
        );
      },
      fromBufferAttribute: function (e, t, A) {
        return (
          void 0 !== A &&
            console.warn(
              'THREE.Vector3: offset has been removed from .fromBufferAttribute().',
            ),
          (this.x = e.getX(t)),
          (this.y = e.getY(t)),
          (this.z = e.getZ(t)),
          this
        );
      },
    }),
    Object.assign(F.prototype, {
      isMatrix3: !0,
      set: function (e, t, A, r, n, i, a, o, s) {
        var l = this.elements;
        return (
          (l[0] = e),
          (l[1] = r),
          (l[2] = a),
          (l[3] = t),
          (l[4] = n),
          (l[5] = o),
          (l[6] = A),
          (l[7] = i),
          (l[8] = s),
          this
        );
      },
      identity: function () {
        return this.set(1, 0, 0, 0, 1, 0, 0, 0, 1), this;
      },
      clone: function () {
        return new this.constructor().fromArray(this.elements);
      },
      copy: function (e) {
        var t = this.elements,
          e = e.elements;
        return (
          (t[0] = e[0]),
          (t[1] = e[1]),
          (t[2] = e[2]),
          (t[3] = e[3]),
          (t[4] = e[4]),
          (t[5] = e[5]),
          (t[6] = e[6]),
          (t[7] = e[7]),
          (t[8] = e[8]),
          this
        );
      },
      setFromMatrix4: function (e) {
        e = e.elements;
        return (
          this.set(e[0], e[4], e[8], e[1], e[5], e[9], e[2], e[6], e[10]), this
        );
      },
      applyToBufferAttribute:
        ((K = new Ce()),
        function (e) {
          for (var t = 0, A = e.count; t < A; t++)
            (K.x = e.getX(t)),
              (K.y = e.getY(t)),
              (K.z = e.getZ(t)),
              K.applyMatrix3(this),
              e.setXYZ(t, K.x, K.y, K.z);
          return e;
        }),
      multiply: function (e) {
        return this.multiplyMatrices(this, e);
      },
      premultiply: function (e) {
        return this.multiplyMatrices(e, this);
      },
      multiplyMatrices: function (e, t) {
        var e = e.elements,
          t = t.elements,
          A = this.elements,
          r = e[0],
          n = e[3],
          i = e[6],
          a = e[1],
          o = e[4],
          s = e[7],
          l = e[2],
          c = e[5],
          e = e[8],
          u = t[0],
          h = t[3],
          d = t[6],
          p = t[1],
          f = t[4],
          g = t[7],
          m = t[2],
          v = t[5],
          t = t[8];
        return (
          (A[0] = r * u + n * p + i * m),
          (A[3] = r * h + n * f + i * v),
          (A[6] = r * d + n * g + i * t),
          (A[1] = a * u + o * p + s * m),
          (A[4] = a * h + o * f + s * v),
          (A[7] = a * d + o * g + s * t),
          (A[2] = l * u + c * p + e * m),
          (A[5] = l * h + c * f + e * v),
          (A[8] = l * d + c * g + e * t),
          this
        );
      },
      multiplyScalar: function (e) {
        var t = this.elements;
        return (
          (t[0] *= e),
          (t[3] *= e),
          (t[6] *= e),
          (t[1] *= e),
          (t[4] *= e),
          (t[7] *= e),
          (t[2] *= e),
          (t[5] *= e),
          (t[8] *= e),
          this
        );
      },
      determinant: function () {
        var e = this.elements,
          t = e[0],
          A = e[1],
          r = e[2],
          n = e[3],
          i = e[4],
          a = e[5],
          o = e[6],
          s = e[7],
          e = e[8];
        return (
          t * i * e - t * a * s - A * n * e + A * a * o + r * n * s - r * i * o
        );
      },
      getInverse: function (e, t) {
        e &&
          e.isMatrix4 &&
          console.error(
            'THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.',
          );
        var e = e.elements,
          A = this.elements,
          r = e[0],
          n = e[1],
          i = e[2],
          a = e[3],
          o = e[4],
          s = e[5],
          l = e[6],
          c = e[7],
          e = e[8],
          u = e * o - s * c,
          h = s * l - e * a,
          d = c * a - o * l,
          p = r * u + n * h + i * d;
        if (0 == p) {
          var f =
            "THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";
          if (!0 === t) throw new Error(f);
          return console.warn(f), this.identity();
        }
        t = 1 / p;
        return (
          (A[0] = u * t),
          (A[1] = (i * c - e * n) * t),
          (A[2] = (s * n - i * o) * t),
          (A[3] = h * t),
          (A[4] = (e * r - i * l) * t),
          (A[5] = (i * a - s * r) * t),
          (A[6] = d * t),
          (A[7] = (n * l - c * r) * t),
          (A[8] = (o * r - n * a) * t),
          this
        );
      },
      transpose: function () {
        var e = this.elements,
          t = e[1];
        return (
          (e[1] = e[3]),
          (e[3] = t),
          (t = e[2]),
          (e[2] = e[6]),
          (e[6] = t),
          (t = e[5]),
          (e[5] = e[7]),
          (e[7] = t),
          this
        );
      },
      getNormalMatrix: function (e) {
        return this.setFromMatrix4(e).getInverse(this).transpose();
      },
      transposeIntoArray: function (e) {
        var t = this.elements;
        return (
          (e[0] = t[0]),
          (e[1] = t[3]),
          (e[2] = t[6]),
          (e[3] = t[1]),
          (e[4] = t[4]),
          (e[5] = t[7]),
          (e[6] = t[2]),
          (e[7] = t[5]),
          (e[8] = t[8]),
          this
        );
      },
      setUvTransform: function (e, t, A, r, n, i, a) {
        var o = Math.cos(n),
          n = Math.sin(n);
        this.set(
          A * o,
          A * n,
          -A * (o * i + n * a) + i + e,
          -r * n,
          r * o,
          -r * (-n * i + o * a) + a + t,
          0,
          0,
          1,
        );
      },
      scale: function (e, t) {
        var A = this.elements;
        return (
          (A[0] *= e),
          (A[3] *= e),
          (A[6] *= e),
          (A[1] *= t),
          (A[4] *= t),
          (A[7] *= t),
          this
        );
      },
      rotate: function (e) {
        var t = Math.cos(e),
          e = Math.sin(e),
          A = this.elements,
          r = A[0],
          n = A[3],
          i = A[6],
          a = A[1],
          o = A[4],
          s = A[7];
        return (
          (A[0] = t * r + e * a),
          (A[3] = t * n + e * o),
          (A[6] = t * i + e * s),
          (A[1] = -e * r + t * a),
          (A[4] = -e * n + t * o),
          (A[7] = -e * i + t * s),
          this
        );
      },
      translate: function (e, t) {
        var A = this.elements;
        return (
          (A[0] += e * A[2]),
          (A[3] += e * A[5]),
          (A[6] += e * A[8]),
          (A[1] += t * A[2]),
          (A[4] += t * A[5]),
          (A[7] += t * A[8]),
          this
        );
      },
      equals: function (e) {
        for (var t = this.elements, A = e.elements, r = 0; r < 9; r++)
          if (t[r] !== A[r]) return !1;
        return !0;
      },
      fromArray: function (e, t) {
        void 0 === t && (t = 0);
        for (var A = 0; A < 9; A++) this.elements[A] = e[A + t];
        return this;
      },
      toArray: function (e, t) {
        var A = this.elements;
        return (
          ((e = void 0 === e ? [] : e)[(t = void 0 === t ? 0 : t)] = A[0]),
          (e[t + 1] = A[1]),
          (e[t + 2] = A[2]),
          (e[t + 3] = A[3]),
          (e[t + 4] = A[4]),
          (e[t + 5] = A[5]),
          (e[t + 6] = A[6]),
          (e[t + 7] = A[7]),
          (e[t + 8] = A[8]),
          e
        );
      },
    });
  var aA,
    oA,
    sA,
    lA,
    cA,
    uA,
    hA,
    dA,
    pA,
    fA,
    gA,
    mA,
    vA,
    BA,
    wA,
    yA,
    EA,
    xA,
    bA,
    CA,
    FA,
    TA,
    _A,
    UA,
    MA,
    SA,
    QA,
    LA,
    HA,
    IA = {
      getDataURL: function (e) {
        var t, A;
        return (
          e instanceof HTMLCanvasElement
            ? (t = e)
            : ('undefined' != typeof OffscreenCanvas
                ? (t = new OffscreenCanvas(e.width, e.height))
                : (((t = document.createElementNS(
                    'http://www.w3.org/1999/xhtml',
                    'canvas',
                  )).width = e.width),
                  (t.height = e.height)),
              (A = t.getContext('2d')),
              e instanceof ImageData
                ? A.putImageData(e, 0, 0)
                : A.drawImage(e, 0, 0, e.width, e.height)),
          2048 < t.width || 2048 < t.height
            ? t.toDataURL('image/jpeg', 0.6)
            : t.toDataURL('image/png')
        );
      },
    },
    RA = 0;
  function h(e, t, A, r, n, i, a, o, s, l) {
    Object.defineProperty(this, 'id', { value: RA++ }),
      (this.uuid = xe.generateUUID()),
      (this.name = ''),
      (this.image = void 0 !== e ? e : h.DEFAULT_IMAGE),
      (this.mipmaps = []),
      (this.mapping = void 0 !== t ? t : h.DEFAULT_MAPPING),
      (this.wrapS = void 0 !== A ? A : $e),
      (this.wrapT = void 0 !== r ? r : $e),
      (this.magFilter = void 0 !== n ? n : U),
      (this.minFilter = void 0 !== i ? i : it),
      (this.anisotropy = void 0 !== s ? s : 1),
      (this.format = void 0 !== a ? a : wt),
      (this.type = void 0 !== o ? o : at),
      (this.offset = new he(0, 0)),
      (this.repeat = new he(1, 1)),
      (this.center = new he(0, 0)),
      (this.rotation = 0),
      (this.matrixAutoUpdate = !0),
      (this.matrix = new F()),
      (this.generateMipmaps = !0),
      (this.premultiplyAlpha = !1),
      (this.flipY = !0),
      (this.unpackAlignment = 4),
      (this.encoding = void 0 !== l ? l : tA),
      (this.version = 0),
      (this.onUpdate = null);
  }
  function Fe(e, t, A, r) {
    (this.x = e || 0),
      (this.y = t || 0),
      (this.z = A || 0),
      (this.w = void 0 !== r ? r : 1);
  }
  function PA(e, t, A) {
    (this.width = e),
      (this.height = t),
      (this.scissor = new Fe(0, 0, e, t)),
      (this.scissorTest = !1),
      (this.viewport = new Fe(0, 0, e, t)),
      void 0 === (A = A || {}).minFilter && (A.minFilter = U),
      (this.texture = new h(
        void 0,
        void 0,
        A.wrapS,
        A.wrapT,
        A.magFilter,
        A.minFilter,
        A.format,
        A.type,
        A.anisotropy,
        A.encoding,
      )),
      (this.texture.generateMipmaps =
        void 0 === A.generateMipmaps || A.generateMipmaps),
      (this.depthBuffer = void 0 === A.depthBuffer || A.depthBuffer),
      (this.stencilBuffer = void 0 === A.stencilBuffer || A.stencilBuffer),
      (this.depthTexture = void 0 !== A.depthTexture ? A.depthTexture : null);
  }
  function DA(e, t, A) {
    PA.call(this, e, t, A),
      (this.activeCubeFace = 0),
      (this.activeMipMapLevel = 0);
  }
  function OA(e, t, A, r, n, i, a, o, s, l, c, u) {
    h.call(this, null, i, a, o, s, l, r, n, c, u),
      (this.image = { data: e, width: t, height: A }),
      (this.magFilter = void 0 !== s ? s : tt),
      (this.minFilter = void 0 !== l ? l : tt),
      (this.generateMipmaps = !1),
      (this.flipY = !1),
      (this.unpackAlignment = 1);
  }
  function NA(e, t) {
    (this.min = void 0 !== e ? e : new Ce(1 / 0, 1 / 0, 1 / 0)),
      (this.max = void 0 !== t ? t : new Ce(-1 / 0, -1 / 0, -1 / 0));
  }
  function GA(e) {
    for (var t = 0, A = e.length - 3; t <= A; t += 3) {
      gA.fromArray(e, t);
      var r =
          vA.x * Math.abs(gA.x) + vA.y * Math.abs(gA.y) + vA.z * Math.abs(gA.z),
        n = cA.dot(gA),
        i = uA.dot(gA),
        a = hA.dot(gA);
      if (Math.max(-Math.max(n, i, a), Math.min(n, i, a)) > r) return !1;
    }
    return !0;
  }
  function VA(e) {
    var t = e.geometry;
    if (void 0 !== t)
      if (t.isGeometry) {
        var A = t.vertices;
        for (EA = 0, xA = A.length; EA < xA; EA++)
          bA.copy(A[EA]), bA.applyMatrix4(e.matrixWorld), yA.expandByPoint(bA);
      } else if (t.isBufferGeometry) {
        var r = t.attributes.position;
        if (void 0 !== r)
          for (EA = 0, xA = r.count; EA < xA; EA++)
            bA.fromBufferAttribute(r, EA).applyMatrix4(e.matrixWorld),
              yA.expandByPoint(bA);
      }
  }
  function kA(e, t) {
    (this.center = void 0 !== e ? e : new Ce()),
      (this.radius = void 0 !== t ? t : 0);
  }
  function zA(e, t) {
    (this.normal = void 0 !== e ? e : new Ce(1, 0, 0)),
      (this.constant = void 0 !== t ? t : 0);
  }
  function KA(e, t, A, r, n, i) {
    this.planes = [
      void 0 !== e ? e : new zA(),
      void 0 !== t ? t : new zA(),
      void 0 !== A ? A : new zA(),
      void 0 !== r ? r : new zA(),
      void 0 !== n ? n : new zA(),
      void 0 !== i ? i : new zA(),
    ];
  }
  (h.DEFAULT_IMAGE = void 0),
    (h.DEFAULT_MAPPING = 300),
    (h.prototype = Object.assign(Object.create(r.prototype), {
      constructor: h,
      isTexture: !0,
      updateMatrix: function () {
        this.matrix.setUvTransform(
          this.offset.x,
          this.offset.y,
          this.repeat.x,
          this.repeat.y,
          this.rotation,
          this.center.x,
          this.center.y,
        );
      },
      clone: function () {
        return new this.constructor().copy(this);
      },
      copy: function (e) {
        return (
          (this.name = e.name),
          (this.image = e.image),
          (this.mipmaps = e.mipmaps.slice(0)),
          (this.mapping = e.mapping),
          (this.wrapS = e.wrapS),
          (this.wrapT = e.wrapT),
          (this.magFilter = e.magFilter),
          (this.minFilter = e.minFilter),
          (this.anisotropy = e.anisotropy),
          (this.format = e.format),
          (this.type = e.type),
          this.offset.copy(e.offset),
          this.repeat.copy(e.repeat),
          this.center.copy(e.center),
          (this.rotation = e.rotation),
          (this.matrixAutoUpdate = e.matrixAutoUpdate),
          this.matrix.copy(e.matrix),
          (this.generateMipmaps = e.generateMipmaps),
          (this.premultiplyAlpha = e.premultiplyAlpha),
          (this.flipY = e.flipY),
          (this.unpackAlignment = e.unpackAlignment),
          (this.encoding = e.encoding),
          this
        );
      },
      toJSON: function (e) {
        var t = void 0 === e || 'string' == typeof e;
        if (!t && void 0 !== e.textures[this.uuid])
          return e.textures[this.uuid];
        var A = {
          metadata: {
            version: 4.5,
            type: 'Texture',
            generator: 'Texture.toJSON',
          },
          uuid: this.uuid,
          name: this.name,
          mapping: this.mapping,
          repeat: [this.repeat.x, this.repeat.y],
          offset: [this.offset.x, this.offset.y],
          center: [this.center.x, this.center.y],
          rotation: this.rotation,
          wrap: [this.wrapS, this.wrapT],
          format: this.format,
          minFilter: this.minFilter,
          magFilter: this.magFilter,
          anisotropy: this.anisotropy,
          flipY: this.flipY,
        };
        if (void 0 !== this.image) {
          var r = this.image;
          if (
            (void 0 === r.uuid && (r.uuid = xe.generateUUID()),
            !t && void 0 === e.images[r.uuid])
          ) {
            if (Array.isArray(r))
              for (var n = [], i = 0, a = r.length; i < a; i++)
                n.push(IA.getDataURL(r[i]));
            else n = IA.getDataURL(r);
            e.images[r.uuid] = { uuid: r.uuid, url: n };
          }
          A.image = r.uuid;
        }
        return t || (e.textures[this.uuid] = A), A;
      },
      dispose: function () {
        this.dispatchEvent({ type: 'dispose' });
      },
      transformUv: function (e) {
        if (300 === this.mapping) {
          if ((e.applyMatrix3(this.matrix), e.x < 0 || 1 < e.x))
            switch (this.wrapS) {
              case qe:
                e.x = e.x - Math.floor(e.x);
                break;
              case $e:
                e.x = e.x < 0 ? 0 : 1;
                break;
              case et:
                1 === Math.abs(Math.floor(e.x) % 2)
                  ? (e.x = Math.ceil(e.x) - e.x)
                  : (e.x = e.x - Math.floor(e.x));
            }
          if (e.y < 0 || 1 < e.y)
            switch (this.wrapT) {
              case qe:
                e.y = e.y - Math.floor(e.y);
                break;
              case $e:
                e.y = e.y < 0 ? 0 : 1;
                break;
              case et:
                1 === Math.abs(Math.floor(e.y) % 2)
                  ? (e.y = Math.ceil(e.y) - e.y)
                  : (e.y = e.y - Math.floor(e.y));
            }
          this.flipY && (e.y = 1 - e.y);
        }
      },
    })),
    Object.defineProperty(h.prototype, 'needsUpdate', {
      set: function (e) {
        !0 === e && this.version++;
      },
    }),
    Object.assign(Fe.prototype, {
      isVector4: !0,
      set: function (e, t, A, r) {
        return (this.x = e), (this.y = t), (this.z = A), (this.w = r), this;
      },
      setScalar: function (e) {
        return (this.x = e), (this.y = e), (this.z = e), (this.w = e), this;
      },
      setX: function (e) {
        return (this.x = e), this;
      },
      setY: function (e) {
        return (this.y = e), this;
      },
      setZ: function (e) {
        return (this.z = e), this;
      },
      setW: function (e) {
        return (this.w = e), this;
      },
      setComponent: function (e, t) {
        switch (e) {
          case 0:
            this.x = t;
            break;
          case 1:
            this.y = t;
            break;
          case 2:
            this.z = t;
            break;
          case 3:
            this.w = t;
            break;
          default:
            throw new Error('index is out of range: ' + e);
        }
        return this;
      },
      getComponent: function (e) {
        switch (e) {
          case 0:
            return this.x;
          case 1:
            return this.y;
          case 2:
            return this.z;
          case 3:
            return this.w;
          default:
            throw new Error('index is out of range: ' + e);
        }
      },
      clone: function () {
        return new this.constructor(this.x, this.y, this.z, this.w);
      },
      copy: function (e) {
        return (
          (this.x = e.x),
          (this.y = e.y),
          (this.z = e.z),
          (this.w = void 0 !== e.w ? e.w : 1),
          this
        );
      },
      add: function (e, t) {
        return void 0 !== t
          ? (console.warn(
              'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.',
            ),
            this.addVectors(e, t))
          : ((this.x += e.x),
            (this.y += e.y),
            (this.z += e.z),
            (this.w += e.w),
            this);
      },
      addScalar: function (e) {
        return (this.x += e), (this.y += e), (this.z += e), (this.w += e), this;
      },
      addVectors: function (e, t) {
        return (
          (this.x = e.x + t.x),
          (this.y = e.y + t.y),
          (this.z = e.z + t.z),
          (this.w = e.w + t.w),
          this
        );
      },
      addScaledVector: function (e, t) {
        return (
          (this.x += e.x * t),
          (this.y += e.y * t),
          (this.z += e.z * t),
          (this.w += e.w * t),
          this
        );
      },
      sub: function (e, t) {
        return void 0 !== t
          ? (console.warn(
              'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.',
            ),
            this.subVectors(e, t))
          : ((this.x -= e.x),
            (this.y -= e.y),
            (this.z -= e.z),
            (this.w -= e.w),
            this);
      },
      subScalar: function (e) {
        return (this.x -= e), (this.y -= e), (this.z -= e), (this.w -= e), this;
      },
      subVectors: function (e, t) {
        return (
          (this.x = e.x - t.x),
          (this.y = e.y - t.y),
          (this.z = e.z - t.z),
          (this.w = e.w - t.w),
          this
        );
      },
      multiplyScalar: function (e) {
        return (this.x *= e), (this.y *= e), (this.z *= e), (this.w *= e), this;
      },
      applyMatrix4: function (e) {
        var t = this.x,
          A = this.y,
          r = this.z,
          n = this.w,
          e = e.elements;
        return (
          (this.x = e[0] * t + e[4] * A + e[8] * r + e[12] * n),
          (this.y = e[1] * t + e[5] * A + e[9] * r + e[13] * n),
          (this.z = e[2] * t + e[6] * A + e[10] * r + e[14] * n),
          (this.w = e[3] * t + e[7] * A + e[11] * r + e[15] * n),
          this
        );
      },
      divideScalar: function (e) {
        return this.multiplyScalar(1 / e);
      },
      setAxisAngleFromQuaternion: function (e) {
        this.w = 2 * Math.acos(e.w);
        var t = Math.sqrt(1 - e.w * e.w);
        return (
          t < 1e-4
            ? ((this.x = 1), (this.y = 0), (this.z = 0))
            : ((this.x = e.x / t), (this.y = e.y / t), (this.z = e.z / t)),
          this
        );
      },
      setAxisAngleFromRotationMatrix: function (e) {
        var t,
          A,
          r,
          n,
          i,
          a,
          o,
          s,
          l,
          c,
          e = e.elements,
          u = e[0],
          h = e[4],
          d = e[8],
          p = e[1],
          f = e[5],
          g = e[9],
          m = e[2],
          v = e[6],
          e = e[10];
        return (
          Math.abs(h - p) < 0.01 &&
          Math.abs(d - m) < 0.01 &&
          Math.abs(g - v) < 0.01
            ? Math.abs(h + p) < 0.1 &&
              Math.abs(d + m) < 0.1 &&
              Math.abs(g + v) < 0.1 &&
              Math.abs(u + f + e - 3) < 0.1
              ? this.set(1, 0, 0, 0)
              : ((n = Math.PI),
                (a = (e + 1) / 2),
                (o = (h + p) / 4),
                (s = (d + m) / 4),
                (l = (g + v) / 4),
                (i = (f + 1) / 2) < (c = (u + 1) / 2) && a < c
                  ? (r =
                      c < 0.01
                        ? ((t = 0), (A = 0.707106781))
                        : ((A = o / (t = Math.sqrt(c))), s / t))
                  : a < i
                  ? (r =
                      i < 0.01
                        ? ((A = 0), (t = 0.707106781))
                        : ((t = o / (A = Math.sqrt(i))), l / A))
                  : a < 0.01
                  ? ((A = t = 0.707106781), (r = 0))
                  : ((t = s / (r = Math.sqrt(a))), (A = l / r)),
                this.set(t, A, r, n))
            : ((c = Math.sqrt(
                (v - g) * (v - g) + (d - m) * (d - m) + (p - h) * (p - h),
              )),
              Math.abs(c) < 0.001 && (c = 1),
              (this.x = (v - g) / c),
              (this.y = (d - m) / c),
              (this.z = (p - h) / c),
              (this.w = Math.acos((u + f + e - 1) / 2))),
          this
        );
      },
      min: function (e) {
        return (
          (this.x = Math.min(this.x, e.x)),
          (this.y = Math.min(this.y, e.y)),
          (this.z = Math.min(this.z, e.z)),
          (this.w = Math.min(this.w, e.w)),
          this
        );
      },
      max: function (e) {
        return (
          (this.x = Math.max(this.x, e.x)),
          (this.y = Math.max(this.y, e.y)),
          (this.z = Math.max(this.z, e.z)),
          (this.w = Math.max(this.w, e.w)),
          this
        );
      },
      clamp: function (e, t) {
        return (
          (this.x = Math.max(e.x, Math.min(t.x, this.x))),
          (this.y = Math.max(e.y, Math.min(t.y, this.y))),
          (this.z = Math.max(e.z, Math.min(t.z, this.z))),
          (this.w = Math.max(e.w, Math.min(t.w, this.w))),
          this
        );
      },
      clampScalar: function (e, t) {
        return (
          void 0 === aA && ((aA = new Fe()), (oA = new Fe())),
          aA.set(e, e, e, e),
          oA.set(t, t, t, t),
          this.clamp(aA, oA)
        );
      },
      clampLength: function (e, t) {
        var A = this.length();
        return this.divideScalar(A || 1).multiplyScalar(
          Math.max(e, Math.min(t, A)),
        );
      },
      floor: function () {
        return (
          (this.x = Math.floor(this.x)),
          (this.y = Math.floor(this.y)),
          (this.z = Math.floor(this.z)),
          (this.w = Math.floor(this.w)),
          this
        );
      },
      ceil: function () {
        return (
          (this.x = Math.ceil(this.x)),
          (this.y = Math.ceil(this.y)),
          (this.z = Math.ceil(this.z)),
          (this.w = Math.ceil(this.w)),
          this
        );
      },
      round: function () {
        return (
          (this.x = Math.round(this.x)),
          (this.y = Math.round(this.y)),
          (this.z = Math.round(this.z)),
          (this.w = Math.round(this.w)),
          this
        );
      },
      roundToZero: function () {
        return (
          (this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x)),
          (this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y)),
          (this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z)),
          (this.w = this.w < 0 ? Math.ceil(this.w) : Math.floor(this.w)),
          this
        );
      },
      negate: function () {
        return (
          (this.x = -this.x),
          (this.y = -this.y),
          (this.z = -this.z),
          (this.w = -this.w),
          this
        );
      },
      dot: function (e) {
        return this.x * e.x + this.y * e.y + this.z * e.z + this.w * e.w;
      },
      lengthSq: function () {
        return (
          this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w
        );
      },
      length: function () {
        return Math.sqrt(
          this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w,
        );
      },
      manhattanLength: function () {
        return (
          Math.abs(this.x) +
          Math.abs(this.y) +
          Math.abs(this.z) +
          Math.abs(this.w)
        );
      },
      normalize: function () {
        return this.divideScalar(this.length() || 1);
      },
      setLength: function (e) {
        return this.normalize().multiplyScalar(e);
      },
      lerp: function (e, t) {
        return (
          (this.x += (e.x - this.x) * t),
          (this.y += (e.y - this.y) * t),
          (this.z += (e.z - this.z) * t),
          (this.w += (e.w - this.w) * t),
          this
        );
      },
      lerpVectors: function (e, t, A) {
        return this.subVectors(t, e).multiplyScalar(A).add(e);
      },
      equals: function (e) {
        return (
          e.x === this.x && e.y === this.y && e.z === this.z && e.w === this.w
        );
      },
      fromArray: function (e, t) {
        return (
          (this.x = e[(t = void 0 === t ? 0 : t)]),
          (this.y = e[t + 1]),
          (this.z = e[t + 2]),
          (this.w = e[t + 3]),
          this
        );
      },
      toArray: function (e, t) {
        return (
          ((e = void 0 === e ? [] : e)[(t = void 0 === t ? 0 : t)] = this.x),
          (e[t + 1] = this.y),
          (e[t + 2] = this.z),
          (e[t + 3] = this.w),
          e
        );
      },
      fromBufferAttribute: function (e, t, A) {
        return (
          void 0 !== A &&
            console.warn(
              'THREE.Vector4: offset has been removed from .fromBufferAttribute().',
            ),
          (this.x = e.getX(t)),
          (this.y = e.getY(t)),
          (this.z = e.getZ(t)),
          (this.w = e.getW(t)),
          this
        );
      },
    }),
    (PA.prototype = Object.assign(Object.create(r.prototype), {
      constructor: PA,
      isWebGLRenderTarget: !0,
      setSize: function (e, t) {
        (this.width === e && this.height === t) ||
          ((this.width = e), (this.height = t), this.dispose()),
          this.viewport.set(0, 0, e, t),
          this.scissor.set(0, 0, e, t);
      },
      clone: function () {
        return new this.constructor().copy(this);
      },
      copy: function (e) {
        return (
          (this.width = e.width),
          (this.height = e.height),
          this.viewport.copy(e.viewport),
          (this.texture = e.texture.clone()),
          (this.depthBuffer = e.depthBuffer),
          (this.stencilBuffer = e.stencilBuffer),
          (this.depthTexture = e.depthTexture),
          this
        );
      },
      dispose: function () {
        this.dispatchEvent({ type: 'dispose' });
      },
    })),
    (((DA.prototype = Object.create(PA.prototype)).constructor =
      DA).prototype.isWebGLRenderTargetCube = !0),
    (((OA.prototype = Object.create(h.prototype)).constructor =
      OA).prototype.isDataTexture = !0),
    Object.assign(NA.prototype, {
      isBox3: !0,
      set: function (e, t) {
        return this.min.copy(e), this.max.copy(t), this;
      },
      setFromArray: function (e) {
        for (
          var t = 1 / 0,
            A = 1 / 0,
            r = 1 / 0,
            n = -1 / 0,
            i = -1 / 0,
            a = -1 / 0,
            o = 0,
            s = e.length;
          o < s;
          o += 3
        ) {
          var l = e[o],
            c = e[o + 1],
            u = e[o + 2];
          l < t && (t = l),
            c < A && (A = c),
            u < r && (r = u),
            n < l && (n = l),
            i < c && (i = c),
            a < u && (a = u);
        }
        return this.min.set(t, A, r), this.max.set(n, i, a), this;
      },
      setFromBufferAttribute: function (e) {
        for (
          var t = 1 / 0,
            A = 1 / 0,
            r = 1 / 0,
            n = -1 / 0,
            i = -1 / 0,
            a = -1 / 0,
            o = 0,
            s = e.count;
          o < s;
          o++
        ) {
          var l = e.getX(o),
            c = e.getY(o),
            u = e.getZ(o);
          l < t && (t = l),
            c < A && (A = c),
            u < r && (r = u),
            n < l && (n = l),
            i < c && (i = c),
            a < u && (a = u);
        }
        return this.min.set(t, A, r), this.max.set(n, i, a), this;
      },
      setFromPoints: function (e) {
        this.makeEmpty();
        for (var t = 0, A = e.length; t < A; t++) this.expandByPoint(e[t]);
        return this;
      },
      setFromCenterAndSize:
        ((CA = new Ce()),
        function (e, t) {
          t = CA.copy(t).multiplyScalar(0.5);
          return this.min.copy(e).sub(t), this.max.copy(e).add(t), this;
        }),
      setFromObject: function (e) {
        return this.makeEmpty(), this.expandByObject(e);
      },
      clone: function () {
        return new this.constructor().copy(this);
      },
      copy: function (e) {
        return this.min.copy(e.min), this.max.copy(e.max), this;
      },
      makeEmpty: function () {
        return (
          (this.min.x = this.min.y = this.min.z = 1 / 0),
          (this.max.x = this.max.y = this.max.z = -1 / 0),
          this
        );
      },
      isEmpty: function () {
        return (
          this.max.x < this.min.x ||
          this.max.y < this.min.y ||
          this.max.z < this.min.z
        );
      },
      getCenter: function (e) {
        return (
          void 0 === e &&
            (console.warn('THREE.Box3: .getCenter() target is now required'),
            (e = new Ce())),
          this.isEmpty()
            ? e.set(0, 0, 0)
            : e.addVectors(this.min, this.max).multiplyScalar(0.5)
        );
      },
      getSize: function (e) {
        return (
          void 0 === e &&
            (console.warn('THREE.Box3: .getSize() target is now required'),
            (e = new Ce())),
          this.isEmpty() ? e.set(0, 0, 0) : e.subVectors(this.max, this.min)
        );
      },
      expandByPoint: function (e) {
        return this.min.min(e), this.max.max(e), this;
      },
      expandByVector: function (e) {
        return this.min.sub(e), this.max.add(e), this;
      },
      expandByScalar: function (e) {
        return this.min.addScalar(-e), this.max.addScalar(e), this;
      },
      expandByObject:
        ((bA = new Ce()),
        function (e) {
          return (yA = this), e.updateMatrixWorld(!0), e.traverse(VA), this;
        }),
      containsPoint: function (e) {
        return !(
          e.x < this.min.x ||
          e.x > this.max.x ||
          e.y < this.min.y ||
          e.y > this.max.y ||
          e.z < this.min.z ||
          e.z > this.max.z
        );
      },
      containsBox: function (e) {
        return (
          this.min.x <= e.min.x &&
          e.max.x <= this.max.x &&
          this.min.y <= e.min.y &&
          e.max.y <= this.max.y &&
          this.min.z <= e.min.z &&
          e.max.z <= this.max.z
        );
      },
      getParameter: function (e, t) {
        return (
          void 0 === t &&
            (console.warn('THREE.Box3: .getParameter() target is now required'),
            (t = new Ce())),
          t.set(
            (e.x - this.min.x) / (this.max.x - this.min.x),
            (e.y - this.min.y) / (this.max.y - this.min.y),
            (e.z - this.min.z) / (this.max.z - this.min.z),
          )
        );
      },
      intersectsBox: function (e) {
        return !(
          e.max.x < this.min.x ||
          e.min.x > this.max.x ||
          e.max.y < this.min.y ||
          e.min.y > this.max.y ||
          e.max.z < this.min.z ||
          e.min.z > this.max.z
        );
      },
      intersectsSphere:
        ((wA = new Ce()),
        function (e) {
          return (
            this.clampPoint(e.center, wA),
            wA.distanceToSquared(e.center) <= e.radius * e.radius
          );
        }),
      intersectsPlane: function (e) {
        var t,
          A =
            0 < e.normal.x
              ? ((t = e.normal.x * this.min.x), e.normal.x * this.max.x)
              : ((t = e.normal.x * this.max.x), e.normal.x * this.min.x);
        return (
          0 < e.normal.y
            ? ((t += e.normal.y * this.min.y), (A += e.normal.y * this.max.y))
            : ((t += e.normal.y * this.max.y), (A += e.normal.y * this.min.y)),
          0 < e.normal.z
            ? ((t += e.normal.z * this.min.z), (A += e.normal.z * this.max.z))
            : ((t += e.normal.z * this.max.z), (A += e.normal.z * this.min.z)),
          t <= e.constant && A >= e.constant
        );
      },
      intersectsTriangle:
        ((cA = new Ce()),
        (uA = new Ce()),
        (hA = new Ce()),
        (dA = new Ce()),
        (pA = new Ce()),
        (fA = new Ce()),
        (gA = new Ce()),
        (mA = new Ce()),
        (vA = new Ce()),
        (BA = new Ce()),
        function (e) {
          return (
            !this.isEmpty() &&
            (this.getCenter(mA),
            vA.subVectors(this.max, mA),
            cA.subVectors(e.a, mA),
            uA.subVectors(e.b, mA),
            hA.subVectors(e.c, mA),
            dA.subVectors(uA, cA),
            pA.subVectors(hA, uA),
            fA.subVectors(cA, hA),
            !!GA([
              0,
              -dA.z,
              dA.y,
              0,
              -pA.z,
              pA.y,
              0,
              -fA.z,
              fA.y,
              dA.z,
              0,
              -dA.x,
              pA.z,
              0,
              -pA.x,
              fA.z,
              0,
              -fA.x,
              -dA.y,
              dA.x,
              0,
              -pA.y,
              pA.x,
              0,
              -fA.y,
              fA.x,
              0,
            ])) &&
            !!GA([1, 0, 0, 0, 1, 0, 0, 0, 1]) &&
            (BA.crossVectors(dA, pA), GA([BA.x, BA.y, BA.z]))
          );
        }),
      clampPoint: function (e, t) {
        return (
          void 0 === t &&
            (console.warn('THREE.Box3: .clampPoint() target is now required'),
            (t = new Ce())),
          t.copy(e).clamp(this.min, this.max)
        );
      },
      distanceToPoint:
        ((lA = new Ce()),
        function (e) {
          return lA.copy(e).clamp(this.min, this.max).sub(e).length();
        }),
      getBoundingSphere:
        ((sA = new Ce()),
        function (e) {
          return (
            void 0 === e &&
              (console.warn(
                'THREE.Box3: .getBoundingSphere() target is now required',
              ),
              (e = new kA())),
            this.getCenter(e.center),
            (e.radius = 0.5 * this.getSize(sA).length()),
            e
          );
        }),
      intersect: function (e) {
        return (
          this.min.max(e.min),
          this.max.min(e.max),
          this.isEmpty() && this.makeEmpty(),
          this
        );
      },
      union: function (e) {
        return this.min.min(e.min), this.max.max(e.max), this;
      },
      applyMatrix4: function (e) {
        var t, A, r, n, i, a, o, s, l, c, u, h, d, p, f, g, m, v;
        return (
          this.isEmpty() ||
            ((t = (e = e.elements)[0] * this.min.x),
            (A = e[1] * this.min.x),
            (r = e[2] * this.min.x),
            (n = e[0] * this.max.x),
            (i = e[1] * this.max.x),
            (a = e[2] * this.max.x),
            (o = e[4] * this.min.y),
            (s = e[5] * this.min.y),
            (l = e[6] * this.min.y),
            (c = e[4] * this.max.y),
            (u = e[5] * this.max.y),
            (h = e[6] * this.max.y),
            (d = e[8] * this.min.z),
            (p = e[9] * this.min.z),
            (f = e[10] * this.min.z),
            (g = e[8] * this.max.z),
            (m = e[9] * this.max.z),
            (v = e[10] * this.max.z),
            (this.min.x =
              Math.min(t, n) + Math.min(o, c) + Math.min(d, g) + e[12]),
            (this.min.y =
              Math.min(A, i) + Math.min(s, u) + Math.min(p, m) + e[13]),
            (this.min.z =
              Math.min(r, a) + Math.min(l, h) + Math.min(f, v) + e[14]),
            (this.max.x =
              Math.max(t, n) + Math.max(o, c) + Math.max(d, g) + e[12]),
            (this.max.y =
              Math.max(A, i) + Math.max(s, u) + Math.max(p, m) + e[13]),
            (this.max.z =
              Math.max(r, a) + Math.max(l, h) + Math.max(f, v) + e[14])),
          this
        );
      },
      translate: function (e) {
        return this.min.add(e), this.max.add(e), this;
      },
      equals: function (e) {
        return e.min.equals(this.min) && e.max.equals(this.max);
      },
    }),
    Object.assign(kA.prototype, {
      set: function (e, t) {
        return this.center.copy(e), (this.radius = t), this;
      },
      setFromPoints:
        ((FA = new NA()),
        function (e, t) {
          for (
            var A = this.center,
              r =
                (void 0 !== t ? A.copy(t) : FA.setFromPoints(e).getCenter(A),
                0),
              n = 0,
              i = e.length;
            n < i;
            n++
          )
            r = Math.max(r, A.distanceToSquared(e[n]));
          return (this.radius = Math.sqrt(r)), this;
        }),
      clone: function () {
        return new this.constructor().copy(this);
      },
      copy: function (e) {
        return this.center.copy(e.center), (this.radius = e.radius), this;
      },
      empty: function () {
        return this.radius <= 0;
      },
      containsPoint: function (e) {
        return e.distanceToSquared(this.center) <= this.radius * this.radius;
      },
      distanceToPoint: function (e) {
        return e.distanceTo(this.center) - this.radius;
      },
      intersectsSphere: function (e) {
        var t = this.radius + e.radius;
        return e.center.distanceToSquared(this.center) <= t * t;
      },
      intersectsBox: function (e) {
        return e.intersectsSphere(this);
      },
      intersectsPlane: function (e) {
        return Math.abs(e.distanceToPoint(this.center)) <= this.radius;
      },
      clampPoint: function (e, t) {
        var A = this.center.distanceToSquared(e);
        return (
          void 0 === t &&
            (console.warn('THREE.Sphere: .clampPoint() target is now required'),
            (t = new Ce())),
          t.copy(e),
          A > this.radius * this.radius &&
            (t.sub(this.center).normalize(),
            t.multiplyScalar(this.radius).add(this.center)),
          t
        );
      },
      getBoundingBox: function (e) {
        return (
          void 0 === e &&
            (console.warn(
              'THREE.Sphere: .getBoundingBox() target is now required',
            ),
            (e = new NA())),
          e.set(this.center, this.center),
          e.expandByScalar(this.radius),
          e
        );
      },
      applyMatrix4: function (e) {
        return (
          this.center.applyMatrix4(e),
          (this.radius = this.radius * e.getMaxScaleOnAxis()),
          this
        );
      },
      translate: function (e) {
        return this.center.add(e), this;
      },
      equals: function (e) {
        return e.center.equals(this.center) && e.radius === this.radius;
      },
    }),
    Object.assign(zA.prototype, {
      set: function (e, t) {
        return this.normal.copy(e), (this.constant = t), this;
      },
      setComponents: function (e, t, A, r) {
        return this.normal.set(e, t, A), (this.constant = r), this;
      },
      setFromNormalAndCoplanarPoint: function (e, t) {
        return this.normal.copy(e), (this.constant = -t.dot(this.normal)), this;
      },
      setFromCoplanarPoints:
        ((MA = new Ce()),
        (SA = new Ce()),
        function (e, t, A) {
          A = MA.subVectors(A, t).cross(SA.subVectors(e, t)).normalize();
          return this.setFromNormalAndCoplanarPoint(A, e), this;
        }),
      clone: function () {
        return new this.constructor().copy(this);
      },
      copy: function (e) {
        return this.normal.copy(e.normal), (this.constant = e.constant), this;
      },
      normalize: function () {
        var e = 1 / this.normal.length();
        return this.normal.multiplyScalar(e), (this.constant *= e), this;
      },
      negate: function () {
        return (this.constant *= -1), this.normal.negate(), this;
      },
      distanceToPoint: function (e) {
        return this.normal.dot(e) + this.constant;
      },
      distanceToSphere: function (e) {
        return this.distanceToPoint(e.center) - e.radius;
      },
      projectPoint: function (e, t) {
        return (
          void 0 === t &&
            (console.warn(
              'THREE.Plane: .projectPoint() target is now required',
            ),
            (t = new Ce())),
          t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)
        );
      },
      intersectLine:
        ((UA = new Ce()),
        function (e, t) {
          void 0 === t &&
            (console.warn(
              'THREE.Plane: .intersectLine() target is now required',
            ),
            (t = new Ce()));
          var A = e.delta(UA),
            r = this.normal.dot(A);
          return 0 === r
            ? 0 === this.distanceToPoint(e.start)
              ? t.copy(e.start)
              : void 0
            : (r = -(e.start.dot(this.normal) + this.constant) / r) < 0 || 1 < r
            ? void 0
            : t.copy(A).multiplyScalar(r).add(e.start);
        }),
      intersectsLine: function (e) {
        var t = this.distanceToPoint(e.start),
          e = this.distanceToPoint(e.end);
        return (t < 0 && 0 < e) || (e < 0 && 0 < t);
      },
      intersectsBox: function (e) {
        return e.intersectsPlane(this);
      },
      intersectsSphere: function (e) {
        return e.intersectsPlane(this);
      },
      coplanarPoint: function (e) {
        return (
          void 0 === e &&
            (console.warn(
              'THREE.Plane: .coplanarPoint() target is now required',
            ),
            (e = new Ce())),
          e.copy(this.normal).multiplyScalar(-this.constant)
        );
      },
      applyMatrix4:
        ((TA = new Ce()),
        (_A = new F()),
        function (e, t) {
          (t = t || _A.getNormalMatrix(e)),
            (e = this.coplanarPoint(TA).applyMatrix4(e)),
            (t = this.normal.applyMatrix3(t).normalize());
          return (this.constant = -e.dot(t)), this;
        }),
      translate: function (e) {
        return (this.constant -= e.dot(this.normal)), this;
      },
      equals: function (e) {
        return e.normal.equals(this.normal) && e.constant === this.constant;
      },
    }),
    Object.assign(KA.prototype, {
      set: function (e, t, A, r, n, i) {
        var a = this.planes;
        return (
          a[0].copy(e),
          a[1].copy(t),
          a[2].copy(A),
          a[3].copy(r),
          a[4].copy(n),
          a[5].copy(i),
          this
        );
      },
      clone: function () {
        return new this.constructor().copy(this);
      },
      copy: function (e) {
        for (var t = this.planes, A = 0; A < 6; A++) t[A].copy(e.planes[A]);
        return this;
      },
      setFromMatrix: function (e) {
        var t = this.planes,
          e = e.elements,
          A = e[0],
          r = e[1],
          n = e[2],
          i = e[3],
          a = e[4],
          o = e[5],
          s = e[6],
          l = e[7],
          c = e[8],
          u = e[9],
          h = e[10],
          d = e[11],
          p = e[12],
          f = e[13],
          g = e[14],
          e = e[15];
        return (
          t[0].setComponents(i - A, l - a, d - c, e - p).normalize(),
          t[1].setComponents(i + A, l + a, d + c, e + p).normalize(),
          t[2].setComponents(i + r, l + o, d + u, e + f).normalize(),
          t[3].setComponents(i - r, l - o, d - u, e - f).normalize(),
          t[4].setComponents(i - n, l - s, d - h, e - g).normalize(),
          t[5].setComponents(i + n, l + s, d + h, e + g).normalize(),
          this
        );
      },
      intersectsObject:
        ((HA = new kA()),
        function (e) {
          var t = e.geometry;
          return (
            null === t.boundingSphere && t.computeBoundingSphere(),
            HA.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),
            this.intersectsSphere(HA)
          );
        }),
      intersectsSprite:
        ((LA = new kA()),
        function (e) {
          return (
            LA.center.set(0, 0, 0),
            (LA.radius = 0.7071067811865476),
            LA.applyMatrix4(e.matrixWorld),
            this.intersectsSphere(LA)
          );
        }),
      intersectsSphere: function (e) {
        for (
          var t = this.planes, A = e.center, r = -e.radius, n = 0;
          n < 6;
          n++
        )
          if (t[n].distanceToPoint(A) < r) return !1;
        return !0;
      },
      intersectsBox:
        ((QA = new Ce()),
        function (e) {
          for (var t = this.planes, A = 0; A < 6; A++) {
            var r = t[A];
            if (
              ((QA.x = (0 < r.normal.x ? e.max : e.min).x),
              (QA.y = (0 < r.normal.y ? e.max : e.min).y),
              (QA.z = (0 < r.normal.z ? e.max : e.min).z),
              r.distanceToPoint(QA) < 0)
            )
              return !1;
          }
          return !0;
        }),
      containsPoint: function (e) {
        for (var t = this.planes, A = 0; A < 6; A++)
          if (t[A].distanceToPoint(e) < 0) return !1;
        return !0;
      },
    });
  var XA,
    b = {
      alphamap_fragment:
        '#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n',
      alphamap_pars_fragment:
        '#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n',
      alphatest_fragment:
        '#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n',
      aomap_fragment:
        '#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n',
      aomap_pars_fragment:
        '#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif',
      begin_vertex: '\nvec3 transformed = vec3( position );\n',
      beginnormal_vertex: '\nvec3 objectNormal = vec3( normal );\n',
      bsdfs:
        'float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n',
      bumpmap_pars_fragment:
        '#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n',
      clipping_planes_fragment:
        '#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n',
      clipping_planes_pars_fragment:
        '#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n',
      clipping_planes_pars_vertex:
        '#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n',
      clipping_planes_vertex:
        '#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n',
      color_fragment: '#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif',
      color_pars_fragment: '#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n',
      color_pars_vertex: '#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif',
      color_vertex: '#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif',
      common:
        '#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n',
      cube_uv_reflection_fragment:
        '#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n',
      defaultnormal_vertex:
        'vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n',
      displacementmap_pars_vertex:
        '#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n',
      displacementmap_vertex:
        '#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n',
      emissivemap_fragment:
        '#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n',
      emissivemap_pars_fragment:
        '#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n',
      encodings_fragment:
        '  gl_FragColor = linearToOutputTexel( gl_FragColor );\n',
      encodings_pars_fragment:
        '\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n',
      envmap_fragment:
        '#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n',
      envmap_pars_fragment:
        '#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n',
      envmap_pars_vertex:
        '#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n',
      envmap_physical_pars_fragment:
        '#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n',
      envmap_vertex:
        '#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n',
      fog_vertex: '\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif',
      fog_pars_vertex: '#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n',
      fog_fragment:
        '#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n',
      fog_pars_fragment:
        '#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n',
      gradientmap_pars_fragment:
        '#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n',
      lightmap_fragment:
        '#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n',
      lightmap_pars_fragment:
        '#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif',
      lights_lambert_vertex:
        'vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n',
      lights_pars_begin:
        'uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n',
      lights_phong_fragment:
        'BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n',
      lights_phong_pars_fragment:
        'varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n',
      lights_physical_fragment:
        'PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n',
      lights_physical_pars_fragment:
        'struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n',
      lights_fragment_begin:
        '\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n',
      lights_fragment_maps:
        '#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n',
      lights_fragment_end:
        '#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n',
      logdepthbuf_fragment:
        '#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif',
      logdepthbuf_pars_fragment:
        '#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n',
      logdepthbuf_pars_vertex:
        '#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif',
      logdepthbuf_vertex:
        '#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n',
      map_fragment:
        '#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n',
      map_pars_fragment: '#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n',
      map_particle_fragment:
        '#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n',
      map_particle_pars_fragment:
        '#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n',
      metalnessmap_fragment:
        'float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n',
      metalnessmap_pars_fragment:
        '#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif',
      morphnormal_vertex:
        '#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n',
      morphtarget_pars_vertex:
        '#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif',
      morphtarget_vertex:
        '#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n',
      normal_fragment_begin:
        '#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n',
      normal_fragment_maps:
        '#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n',
      normalmap_pars_fragment:
        '#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif\n',
      packing:
        'vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n',
      premultiplied_alpha_fragment:
        '#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n',
      project_vertex:
        'vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n',
      dithering_fragment:
        '#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n',
      dithering_pars_fragment:
        '#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n',
      roughnessmap_fragment:
        'float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n',
      roughnessmap_pars_fragment:
        '#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif',
      shadowmap_pars_fragment:
        '#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n',
      shadowmap_pars_vertex:
        '#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n',
      shadowmap_vertex:
        '#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n',
      shadowmask_pars_fragment:
        'float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n',
      skinbase_vertex:
        '#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif',
      skinning_pars_vertex:
        '#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n',
      skinning_vertex:
        '#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n',
      skinnormal_vertex:
        '#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n',
      specularmap_fragment:
        'float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif',
      specularmap_pars_fragment:
        '#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif',
      tonemapping_fragment:
        '#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n',
      tonemapping_pars_fragment:
        '#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n',
      uv_pars_fragment:
        '#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif',
      uv_pars_vertex:
        '#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n',
      uv_vertex:
        '#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif',
      uv2_pars_fragment:
        '#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif',
      uv2_pars_vertex:
        '#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif',
      uv2_vertex:
        '#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif',
      worldpos_vertex:
        '#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n',
      cube_frag:
        'uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n',
      cube_vert:
        'varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n',
      depth_frag:
        '#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n',
      depth_vert:
        '#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n',
      distanceRGBA_frag:
        '#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n',
      distanceRGBA_vert:
        '#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n',
      equirect_frag:
        'uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n',
      equirect_vert:
        'varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n',
      linedashed_frag:
        'uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n',
      linedashed_vert:
        'uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n',
      meshbasic_frag:
        'uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n',
      meshbasic_vert:
        '#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n',
      meshlambert_frag:
        'uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n',
      meshlambert_vert:
        '#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n',
      meshphong_frag:
        '#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n',
      meshphong_vert:
        '#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n',
      meshphysical_frag:
        '#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n',
      meshphysical_vert:
        '#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n',
      normal_frag:
        '#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n',
      normal_vert:
        '#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n',
      points_frag:
        'uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n',
      points_vert:
        'uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}\n',
      shadow_frag:
        'uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n',
      shadow_vert:
        '#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n',
      sprite_frag:
        'uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n',
      sprite_vert:
        'uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tvec4 mvPosition;\n\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n',
    },
    Te = {
      merge: function (e) {
        for (var t = {}, A = 0; A < e.length; A++) {
          var r,
            n = this.clone(e[A]);
          for (r in n) t[r] = n[r];
        }
        return t;
      },
      clone: function (e) {
        var t,
          A = {};
        for (t in e)
          for (var r in ((A[t] = {}), e[t])) {
            var n = e[t][r];
            n &&
            (n.isColor ||
              n.isMatrix3 ||
              n.isMatrix4 ||
              n.isVector2 ||
              n.isVector3 ||
              n.isVector4 ||
              n.isTexture)
              ? (A[t][r] = n.clone())
              : Array.isArray(n)
              ? (A[t][r] = n.slice())
              : (A[t][r] = n);
          }
        return A;
      },
    },
    jA = {
      aliceblue: 15792383,
      antiquewhite: 16444375,
      aqua: 65535,
      aquamarine: 8388564,
      azure: 15794175,
      beige: 16119260,
      bisque: 16770244,
      black: 0,
      blanchedalmond: 16772045,
      blue: 255,
      blueviolet: 9055202,
      brown: 10824234,
      burlywood: 14596231,
      cadetblue: 6266528,
      chartreuse: 8388352,
      chocolate: 13789470,
      coral: 16744272,
      cornflowerblue: 6591981,
      cornsilk: 16775388,
      crimson: 14423100,
      cyan: 65535,
      darkblue: 139,
      darkcyan: 35723,
      darkgoldenrod: 12092939,
      darkgray: 11119017,
      darkgreen: 25600,
      darkgrey: 11119017,
      darkkhaki: 12433259,
      darkmagenta: 9109643,
      darkolivegreen: 5597999,
      darkorange: 16747520,
      darkorchid: 10040012,
      darkred: 9109504,
      darksalmon: 15308410,
      darkseagreen: 9419919,
      darkslateblue: 4734347,
      darkslategray: 3100495,
      darkslategrey: 3100495,
      darkturquoise: 52945,
      darkviolet: 9699539,
      deeppink: 16716947,
      deepskyblue: 49151,
      dimgray: 6908265,
      dimgrey: 6908265,
      dodgerblue: 2003199,
      firebrick: 11674146,
      floralwhite: 16775920,
      forestgreen: 2263842,
      fuchsia: 16711935,
      gainsboro: 14474460,
      ghostwhite: 16316671,
      gold: 16766720,
      goldenrod: 14329120,
      gray: 8421504,
      green: 32768,
      greenyellow: 11403055,
      grey: 8421504,
      honeydew: 15794160,
      hotpink: 16738740,
      indianred: 13458524,
      indigo: 4915330,
      ivory: 16777200,
      khaki: 15787660,
      lavender: 15132410,
      lavenderblush: 16773365,
      lawngreen: 8190976,
      lemonchiffon: 16775885,
      lightblue: 11393254,
      lightcoral: 15761536,
      lightcyan: 14745599,
      lightgoldenrodyellow: 16448210,
      lightgray: 13882323,
      lightgreen: 9498256,
      lightgrey: 13882323,
      lightpink: 16758465,
      lightsalmon: 16752762,
      lightseagreen: 2142890,
      lightskyblue: 8900346,
      lightslategray: 7833753,
      lightslategrey: 7833753,
      lightsteelblue: 11584734,
      lightyellow: 16777184,
      lime: 65280,
      limegreen: 3329330,
      linen: 16445670,
      magenta: 16711935,
      maroon: 8388608,
      mediumaquamarine: 6737322,
      mediumblue: 205,
      mediumorchid: 12211667,
      mediumpurple: 9662683,
      mediumseagreen: 3978097,
      mediumslateblue: 8087790,
      mediumspringgreen: 64154,
      mediumturquoise: 4772300,
      mediumvioletred: 13047173,
      midnightblue: 1644912,
      mintcream: 16121850,
      mistyrose: 16770273,
      moccasin: 16770229,
      navajowhite: 16768685,
      navy: 128,
      oldlace: 16643558,
      olive: 8421376,
      olivedrab: 7048739,
      orange: 16753920,
      orangered: 16729344,
      orchid: 14315734,
      palegoldenrod: 15657130,
      palegreen: 10025880,
      paleturquoise: 11529966,
      palevioletred: 14381203,
      papayawhip: 16773077,
      peachpuff: 16767673,
      peru: 13468991,
      pink: 16761035,
      plum: 14524637,
      powderblue: 11591910,
      purple: 8388736,
      rebeccapurple: 6697881,
      red: 16711680,
      rosybrown: 12357519,
      royalblue: 4286945,
      saddlebrown: 9127187,
      salmon: 16416882,
      sandybrown: 16032864,
      seagreen: 3050327,
      seashell: 16774638,
      sienna: 10506797,
      silver: 12632256,
      skyblue: 8900331,
      slateblue: 6970061,
      slategray: 7372944,
      slategrey: 7372944,
      snow: 16775930,
      springgreen: 65407,
      steelblue: 4620980,
      tan: 13808780,
      teal: 32896,
      thistle: 14204888,
      tomato: 16737095,
      turquoise: 4251856,
      violet: 15631086,
      wheat: 16113331,
      white: 16777215,
      whitesmoke: 16119285,
      yellow: 16776960,
      yellowgreen: 10145074,
    };
  function de(e, t, A) {
    return void 0 === t && void 0 === A ? this.set(e) : this.setRGB(e, t, A);
  }
  function WA(e) {
    return e < 0.0031308 ? 12.92 * e : 1.055 * Math.pow(e, 0.41666) - 0.055;
  }
  function YA(e) {
    return e < 0.04045
      ? 0.0773993808 * e
      : Math.pow(0.9478672986 * e + 0.0521327014, 2.4);
  }
  function JA(e, t, A) {
    return (
      A < 0 && (A += 1),
      1 < A && --A,
      A < 1 / 6
        ? e + 6 * (t - e) * A
        : A < 0.5
        ? t
        : A < 2 / 3
        ? e + 6 * (t - e) * (2 / 3 - A)
        : e
    );
  }
  Object.assign(de.prototype, {
    isColor: !0,
    r: 1,
    g: 1,
    b: 1,
    set: function (e) {
      return (
        e && e.isColor
          ? this.copy(e)
          : 'number' == typeof e
          ? this.setHex(e)
          : 'string' == typeof e && this.setStyle(e),
        this
      );
    },
    setScalar: function (e) {
      return (this.r = e), (this.g = e), (this.b = e), this;
    },
    setHex: function (e) {
      return (
        (e = Math.floor(e)),
        (this.r = ((e >> 16) & 255) / 255),
        (this.g = ((e >> 8) & 255) / 255),
        (this.b = (255 & e) / 255),
        this
      );
    },
    setRGB: function (e, t, A) {
      return (this.r = e), (this.g = t), (this.b = A), this;
    },
    setHSL: function (e, t, A) {
      return (
        (e = xe.euclideanModulo(e, 1)),
        (t = xe.clamp(t, 0, 1)),
        (A = xe.clamp(A, 0, 1)),
        0 === t
          ? (this.r = this.g = this.b = A)
          : ((this.r = JA(
              (t = 2 * A - (A = A <= 0.5 ? A * (1 + t) : A + t - A * t)),
              A,
              e + 1 / 3,
            )),
            (this.g = JA(t, A, e)),
            (this.b = JA(t, A, e - 1 / 3))),
        this
      );
    },
    setStyle: function (t) {
      function e(e) {
        void 0 !== e &&
          parseFloat(e) < 1 &&
          console.warn(
            'THREE.Color: Alpha component of ' + t + ' will be ignored.',
          );
      }
      var A;
      if ((A = /^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t))) {
        var r,
          n,
          i,
          a,
          o = A[1],
          s = A[2];
        switch (o) {
          case 'rgb':
          case 'rgba':
            if (
              (r =
                /^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(
                  s,
                ))
            )
              return (
                (this.r = Math.min(255, parseInt(r[1], 10)) / 255),
                (this.g = Math.min(255, parseInt(r[2], 10)) / 255),
                (this.b = Math.min(255, parseInt(r[3], 10)) / 255),
                e(r[5]),
                this
              );
            if (
              (r =
                /^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(
                  s,
                ))
            )
              return (
                (this.r = Math.min(100, parseInt(r[1], 10)) / 100),
                (this.g = Math.min(100, parseInt(r[2], 10)) / 100),
                (this.b = Math.min(100, parseInt(r[3], 10)) / 100),
                e(r[5]),
                this
              );
            break;
          case 'hsl':
          case 'hsla':
            if (
              (r =
                /^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(
                  s,
                ))
            )
              return (
                (n = parseFloat(r[1]) / 360),
                (i = parseInt(r[2], 10) / 100),
                (a = parseInt(r[3], 10) / 100),
                e(r[5]),
                this.setHSL(n, i, a)
              );
        }
      } else if ((A = /^\#([A-Fa-f0-9]+)$/.exec(t))) {
        var l,
          o = (l = A[1]).length;
        if (3 === o)
          return (
            (this.r = parseInt(l.charAt(0) + l.charAt(0), 16) / 255),
            (this.g = parseInt(l.charAt(1) + l.charAt(1), 16) / 255),
            (this.b = parseInt(l.charAt(2) + l.charAt(2), 16) / 255),
            this
          );
        if (6 === o)
          return (
            (this.r = parseInt(l.charAt(0) + l.charAt(1), 16) / 255),
            (this.g = parseInt(l.charAt(2) + l.charAt(3), 16) / 255),
            (this.b = parseInt(l.charAt(4) + l.charAt(5), 16) / 255),
            this
          );
      }
      return (
        t &&
          0 < t.length &&
          (void 0 !== (l = jA[t])
            ? this.setHex(l)
            : console.warn('THREE.Color: Unknown color ' + t)),
        this
      );
    },
    clone: function () {
      return new this.constructor(this.r, this.g, this.b);
    },
    copy: function (e) {
      return (this.r = e.r), (this.g = e.g), (this.b = e.b), this;
    },
    copyGammaToLinear: function (e, t) {
      return (
        void 0 === t && (t = 2),
        (this.r = Math.pow(e.r, t)),
        (this.g = Math.pow(e.g, t)),
        (this.b = Math.pow(e.b, t)),
        this
      );
    },
    copyLinearToGamma: function (e, t) {
      t = 0 < (t = void 0 === t ? 2 : t) ? 1 / t : 1;
      return (
        (this.r = Math.pow(e.r, t)),
        (this.g = Math.pow(e.g, t)),
        (this.b = Math.pow(e.b, t)),
        this
      );
    },
    convertGammaToLinear: function (e) {
      return this.copyGammaToLinear(this, e), this;
    },
    convertLinearToGamma: function (e) {
      return this.copyLinearToGamma(this, e), this;
    },
    copySRGBToLinear: function (e) {
      return (this.r = YA(e.r)), (this.g = YA(e.g)), (this.b = YA(e.b)), this;
    },
    copyLinearToSRGB: function (e) {
      return (this.r = WA(e.r)), (this.g = WA(e.g)), (this.b = WA(e.b)), this;
    },
    convertSRGBToLinear: function () {
      return this.copySRGBToLinear(this), this;
    },
    convertLinearToSRGB: function () {
      return this.copyLinearToSRGB(this), this;
    },
    getHex: function () {
      return (
        ((255 * this.r) << 16) ^ ((255 * this.g) << 8) ^ ((255 * this.b) << 0)
      );
    },
    getHexString: function () {
      return ('000000' + this.getHex().toString(16)).slice(-6);
    },
    getHSL: function (e) {
      void 0 === e &&
        (console.warn('THREE.Color: .getHSL() target is now required'),
        (e = { h: 0, s: 0, l: 0 }));
      var t,
        A = this.r,
        r = this.g,
        n = this.b,
        i = Math.max(A, r, n),
        a = Math.min(A, r, n),
        o = (a + i) / 2;
      if (a === i) l = t = 0;
      else {
        var s = i - a,
          l = o <= 0.5 ? s / (i + a) : s / (2 - i - a);
        switch (i) {
          case A:
            t = (r - n) / s + (r < n ? 6 : 0);
            break;
          case r:
            t = (n - A) / s + 2;
            break;
          case n:
            t = (A - r) / s + 4;
        }
        t /= 6;
      }
      return (e.h = t), (e.s = l), (e.l = o), e;
    },
    getStyle: function () {
      return (
        'rgb(' +
        ((255 * this.r) | 0) +
        ',' +
        ((255 * this.g) | 0) +
        ',' +
        ((255 * this.b) | 0) +
        ')'
      );
    },
    offsetHSL:
      ((XA = {}),
      function (e, t, A) {
        return (
          this.getHSL(XA),
          (XA.h += e),
          (XA.s += t),
          (XA.l += A),
          this.setHSL(XA.h, XA.s, XA.l),
          this
        );
      }),
    add: function (e) {
      return (this.r += e.r), (this.g += e.g), (this.b += e.b), this;
    },
    addColors: function (e, t) {
      return (
        (this.r = e.r + t.r), (this.g = e.g + t.g), (this.b = e.b + t.b), this
      );
    },
    addScalar: function (e) {
      return (this.r += e), (this.g += e), (this.b += e), this;
    },
    sub: function (e) {
      return (
        (this.r = Math.max(0, this.r - e.r)),
        (this.g = Math.max(0, this.g - e.g)),
        (this.b = Math.max(0, this.b - e.b)),
        this
      );
    },
    multiply: function (e) {
      return (this.r *= e.r), (this.g *= e.g), (this.b *= e.b), this;
    },
    multiplyScalar: function (e) {
      return (this.r *= e), (this.g *= e), (this.b *= e), this;
    },
    lerp: function (e, t) {
      return (
        (this.r += (e.r - this.r) * t),
        (this.g += (e.g - this.g) * t),
        (this.b += (e.b - this.b) * t),
        this
      );
    },
    equals: function (e) {
      return e.r === this.r && e.g === this.g && e.b === this.b;
    },
    fromArray: function (e, t) {
      return (
        (this.r = e[(t = void 0 === t ? 0 : t)]),
        (this.g = e[t + 1]),
        (this.b = e[t + 2]),
        this
      );
    },
    toArray: function (e, t) {
      return (
        ((e = void 0 === e ? [] : e)[(t = void 0 === t ? 0 : t)] = this.r),
        (e[t + 1] = this.g),
        (e[t + 2] = this.b),
        e
      );
    },
    toJSON: function () {
      return this.getHex();
    },
  });
  var ZA,
    qA,
    _e = {
      common: {
        diffuse: { value: new de(15658734) },
        opacity: { value: 1 },
        map: { value: null },
        uvTransform: { value: new F() },
        alphaMap: { value: null },
      },
      specularmap: { specularMap: { value: null } },
      envmap: {
        envMap: { value: null },
        flipEnvMap: { value: -1 },
        reflectivity: { value: 1 },
        refractionRatio: { value: 0.98 },
        maxMipLevel: { value: 0 },
      },
      aomap: { aoMap: { value: null }, aoMapIntensity: { value: 1 } },
      lightmap: { lightMap: { value: null }, lightMapIntensity: { value: 1 } },
      emissivemap: { emissiveMap: { value: null } },
      bumpmap: { bumpMap: { value: null }, bumpScale: { value: 1 } },
      normalmap: {
        normalMap: { value: null },
        normalScale: { value: new he(1, 1) },
      },
      displacementmap: {
        displacementMap: { value: null },
        displacementScale: { value: 1 },
        displacementBias: { value: 0 },
      },
      roughnessmap: { roughnessMap: { value: null } },
      metalnessmap: { metalnessMap: { value: null } },
      gradientmap: { gradientMap: { value: null } },
      fog: {
        fogDensity: { value: 25e-5 },
        fogNear: { value: 1 },
        fogFar: { value: 2e3 },
        fogColor: { value: new de(16777215) },
      },
      lights: {
        ambientLightColor: { value: [] },
        directionalLights: {
          value: [],
          properties: {
            direction: {},
            color: {},
            shadow: {},
            shadowBias: {},
            shadowRadius: {},
            shadowMapSize: {},
          },
        },
        directionalShadowMap: { value: [] },
        directionalShadowMatrix: { value: [] },
        spotLights: {
          value: [],
          properties: {
            color: {},
            position: {},
            direction: {},
            distance: {},
            coneCos: {},
            penumbraCos: {},
            decay: {},
            shadow: {},
            shadowBias: {},
            shadowRadius: {},
            shadowMapSize: {},
          },
        },
        spotShadowMap: { value: [] },
        spotShadowMatrix: { value: [] },
        pointLights: {
          value: [],
          properties: {
            color: {},
            position: {},
            decay: {},
            distance: {},
            shadow: {},
            shadowBias: {},
            shadowRadius: {},
            shadowMapSize: {},
            shadowCameraNear: {},
            shadowCameraFar: {},
          },
        },
        pointShadowMap: { value: [] },
        pointShadowMatrix: { value: [] },
        hemisphereLights: {
          value: [],
          properties: { direction: {}, skyColor: {}, groundColor: {} },
        },
        rectAreaLights: {
          value: [],
          properties: { color: {}, position: {}, width: {}, height: {} },
        },
      },
      points: {
        diffuse: { value: new de(15658734) },
        opacity: { value: 1 },
        size: { value: 1 },
        scale: { value: 1 },
        map: { value: null },
        uvTransform: { value: new F() },
      },
      sprite: {
        diffuse: { value: new de(15658734) },
        opacity: { value: 1 },
        center: { value: new he(0.5, 0.5) },
        rotation: { value: 0 },
        map: { value: null },
        uvTransform: { value: new F() },
      },
    },
    $A = {
      basic: {
        uniforms: Te.merge([
          _e.common,
          _e.specularmap,
          _e.envmap,
          _e.aomap,
          _e.lightmap,
          _e.fog,
        ]),
        vertexShader: b.meshbasic_vert,
        fragmentShader: b.meshbasic_frag,
      },
      lambert: {
        uniforms: Te.merge([
          _e.common,
          _e.specularmap,
          _e.envmap,
          _e.aomap,
          _e.lightmap,
          _e.emissivemap,
          _e.fog,
          _e.lights,
          { emissive: { value: new de(0) } },
        ]),
        vertexShader: b.meshlambert_vert,
        fragmentShader: b.meshlambert_frag,
      },
      phong: {
        uniforms: Te.merge([
          _e.common,
          _e.specularmap,
          _e.envmap,
          _e.aomap,
          _e.lightmap,
          _e.emissivemap,
          _e.bumpmap,
          _e.normalmap,
          _e.displacementmap,
          _e.gradientmap,
          _e.fog,
          _e.lights,
          {
            emissive: { value: new de(0) },
            specular: { value: new de(1118481) },
            shininess: { value: 30 },
          },
        ]),
        vertexShader: b.meshphong_vert,
        fragmentShader: b.meshphong_frag,
      },
      standard: {
        uniforms: Te.merge([
          _e.common,
          _e.envmap,
          _e.aomap,
          _e.lightmap,
          _e.emissivemap,
          _e.bumpmap,
          _e.normalmap,
          _e.displacementmap,
          _e.roughnessmap,
          _e.metalnessmap,
          _e.fog,
          _e.lights,
          {
            emissive: { value: new de(0) },
            roughness: { value: 0.5 },
            metalness: { value: 0.5 },
            envMapIntensity: { value: 1 },
          },
        ]),
        vertexShader: b.meshphysical_vert,
        fragmentShader: b.meshphysical_frag,
      },
      points: {
        uniforms: Te.merge([_e.points, _e.fog]),
        vertexShader: b.points_vert,
        fragmentShader: b.points_frag,
      },
      dashed: {
        uniforms: Te.merge([
          _e.common,
          _e.fog,
          {
            scale: { value: 1 },
            dashSize: { value: 1 },
            totalSize: { value: 2 },
          },
        ]),
        vertexShader: b.linedashed_vert,
        fragmentShader: b.linedashed_frag,
      },
      depth: {
        uniforms: Te.merge([_e.common, _e.displacementmap]),
        vertexShader: b.depth_vert,
        fragmentShader: b.depth_frag,
      },
      normal: {
        uniforms: Te.merge([
          _e.common,
          _e.bumpmap,
          _e.normalmap,
          _e.displacementmap,
          { opacity: { value: 1 } },
        ]),
        vertexShader: b.normal_vert,
        fragmentShader: b.normal_frag,
      },
      sprite: {
        uniforms: Te.merge([_e.sprite, _e.fog]),
        vertexShader: b.sprite_vert,
        fragmentShader: b.sprite_frag,
      },
      cube: {
        uniforms: {
          tCube: { value: null },
          tFlip: { value: -1 },
          opacity: { value: 1 },
        },
        vertexShader: b.cube_vert,
        fragmentShader: b.cube_frag,
      },
      equirect: {
        uniforms: { tEquirect: { value: null } },
        vertexShader: b.equirect_vert,
        fragmentShader: b.equirect_frag,
      },
      distanceRGBA: {
        uniforms: Te.merge([
          _e.common,
          _e.displacementmap,
          {
            referencePosition: { value: new Ce() },
            nearDistance: { value: 1 },
            farDistance: { value: 1e3 },
          },
        ]),
        vertexShader: b.distanceRGBA_vert,
        fragmentShader: b.distanceRGBA_frag,
      },
      shadow: {
        uniforms: Te.merge([
          _e.lights,
          _e.fog,
          { color: { value: new de(0) }, opacity: { value: 1 } },
        ]),
        vertexShader: b.shadow_vert,
        fragmentShader: b.shadow_frag,
      },
    };
  function er() {
    var A = null,
      r = !1,
      n = null;
    function i(e, t) {
      !1 !== r && (n(e, t), A.requestAnimationFrame(i));
    }
    return {
      start: function () {
        !0 !== r && null !== n && (A.requestAnimationFrame(i), (r = !0));
      },
      stop: function () {
        r = !1;
      },
      setAnimationLoop: function (e) {
        n = e;
      },
      setContext: function (e) {
        A = e;
      },
    };
  }
  function tr(s) {
    var l = new WeakMap();
    return {
      get: function (e) {
        return e.isInterleavedBufferAttribute && (e = e.data), l.get(e);
      },
      remove: function (e) {
        e.isInterleavedBufferAttribute && (e = e.data);
        var t = l.get(e);
        t && (s.deleteBuffer(t.buffer), l.delete(e));
      },
      update: function (e, t) {
        e.isInterleavedBufferAttribute && (e = e.data);
        var A,
          r,
          n,
          i,
          a,
          o = l.get(e);
        void 0 === o
          ? l.set(
              e,
              ((r = t),
              (n = (A = e).array),
              (i = A.dynamic ? s.DYNAMIC_DRAW : s.STATIC_DRAW),
              (a = s.createBuffer()),
              s.bindBuffer(r, a),
              s.bufferData(r, n, i),
              A.onUploadCallback(),
              (r = s.FLOAT),
              n instanceof Float32Array
                ? (r = s.FLOAT)
                : n instanceof Float64Array
                ? console.warn(
                    'THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.',
                  )
                : n instanceof Uint16Array
                ? (r = s.UNSIGNED_SHORT)
                : n instanceof Int16Array
                ? (r = s.SHORT)
                : n instanceof Uint32Array
                ? (r = s.UNSIGNED_INT)
                : n instanceof Int32Array
                ? (r = s.INT)
                : n instanceof Int8Array
                ? (r = s.BYTE)
                : n instanceof Uint8Array && (r = s.UNSIGNED_BYTE),
              {
                buffer: a,
                type: r,
                bytesPerElement: n.BYTES_PER_ELEMENT,
                version: A.version,
              }),
            )
          : o.version < e.version &&
            ((i = o.buffer),
            (a = t),
            (n = (r = e).array),
            (A = r.updateRange),
            s.bindBuffer(a, i),
            !1 === r.dynamic
              ? s.bufferData(a, n, s.STATIC_DRAW)
              : -1 === A.count
              ? s.bufferSubData(a, 0, n)
              : 0 === A.count
              ? console.error(
                  'THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.',
                )
              : (s.bufferSubData(
                  a,
                  A.offset * n.BYTES_PER_ELEMENT,
                  n.subarray(A.offset, A.offset + A.count),
                ),
                (A.count = -1)),
            (o.version = e.version));
      },
    };
  }
  function Ar(e, t, A, r) {
    (this._x = e || 0),
      (this._y = t || 0),
      (this._z = A || 0),
      (this._order = r || Ar.DefaultOrder);
  }
  function rr() {
    this.mask = 1;
  }
  ($A.physical = {
    uniforms: Te.merge([
      $A.standard.uniforms,
      { clearCoat: { value: 0 }, clearCoatRoughness: { value: 0 } },
    ]),
    vertexShader: b.meshphysical_vert,
    fragmentShader: b.meshphysical_frag,
  }),
    (Ar.RotationOrders = ['XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX']),
    (Ar.DefaultOrder = 'XYZ'),
    Object.defineProperties(Ar.prototype, {
      x: {
        get: function () {
          return this._x;
        },
        set: function (e) {
          (this._x = e), this.onChangeCallback();
        },
      },
      y: {
        get: function () {
          return this._y;
        },
        set: function (e) {
          (this._y = e), this.onChangeCallback();
        },
      },
      z: {
        get: function () {
          return this._z;
        },
        set: function (e) {
          (this._z = e), this.onChangeCallback();
        },
      },
      order: {
        get: function () {
          return this._order;
        },
        set: function (e) {
          (this._order = e), this.onChangeCallback();
        },
      },
    }),
    Object.assign(Ar.prototype, {
      isEuler: !0,
      set: function (e, t, A, r) {
        return (
          (this._x = e),
          (this._y = t),
          (this._z = A),
          (this._order = r || this._order),
          this.onChangeCallback(),
          this
        );
      },
      clone: function () {
        return new this.constructor(this._x, this._y, this._z, this._order);
      },
      copy: function (e) {
        return (
          (this._x = e._x),
          (this._y = e._y),
          (this._z = e._z),
          (this._order = e._order),
          this.onChangeCallback(),
          this
        );
      },
      setFromRotationMatrix: function (e, t, A) {
        var r = xe.clamp,
          e = e.elements,
          n = e[0],
          i = e[4],
          a = e[8],
          o = e[1],
          s = e[5],
          l = e[9],
          c = e[2],
          u = e[6],
          e = e[10];
        return (
          'XYZ' === (t = t || this._order)
            ? ((this._y = Math.asin(r(a, -1, 1))),
              Math.abs(a) < 0.99999
                ? ((this._x = Math.atan2(-l, e)), (this._z = Math.atan2(-i, n)))
                : ((this._x = Math.atan2(u, s)), (this._z = 0)))
            : 'YXZ' === t
            ? ((this._x = Math.asin(-r(l, -1, 1))),
              Math.abs(l) < 0.99999
                ? ((this._y = Math.atan2(a, e)), (this._z = Math.atan2(o, s)))
                : ((this._y = Math.atan2(-c, n)), (this._z = 0)))
            : 'ZXY' === t
            ? ((this._x = Math.asin(r(u, -1, 1))),
              Math.abs(u) < 0.99999
                ? ((this._y = Math.atan2(-c, e)), (this._z = Math.atan2(-i, s)))
                : ((this._y = 0), (this._z = Math.atan2(o, n))))
            : 'ZYX' === t
            ? ((this._y = Math.asin(-r(c, -1, 1))),
              Math.abs(c) < 0.99999
                ? ((this._x = Math.atan2(u, e)), (this._z = Math.atan2(o, n)))
                : ((this._x = 0), (this._z = Math.atan2(-i, s))))
            : 'YZX' === t
            ? ((this._z = Math.asin(r(o, -1, 1))),
              Math.abs(o) < 0.99999
                ? ((this._x = Math.atan2(-l, s)), (this._y = Math.atan2(-c, n)))
                : ((this._x = 0), (this._y = Math.atan2(a, e))))
            : 'XZY' === t
            ? ((this._z = Math.asin(-r(i, -1, 1))),
              Math.abs(i) < 0.99999
                ? ((this._x = Math.atan2(u, s)), (this._y = Math.atan2(a, n)))
                : ((this._x = Math.atan2(-l, e)), (this._y = 0)))
            : console.warn(
                'THREE.Euler: .setFromRotationMatrix() given unsupported order: ' +
                  t,
              ),
          (this._order = t),
          !1 !== A && this.onChangeCallback(),
          this
        );
      },
      setFromQuaternion:
        ((qA = new be()),
        function (e, t, A) {
          return (
            qA.makeRotationFromQuaternion(e),
            this.setFromRotationMatrix(qA, t, A)
          );
        }),
      setFromVector3: function (e, t) {
        return this.set(e.x, e.y, e.z, t || this._order);
      },
      reorder:
        ((ZA = new E()),
        function (e) {
          return ZA.setFromEuler(this), this.setFromQuaternion(ZA, e);
        }),
      equals: function (e) {
        return (
          e._x === this._x &&
          e._y === this._y &&
          e._z === this._z &&
          e._order === this._order
        );
      },
      fromArray: function (e) {
        return (
          (this._x = e[0]),
          (this._y = e[1]),
          (this._z = e[2]),
          void 0 !== e[3] && (this._order = e[3]),
          this.onChangeCallback(),
          this
        );
      },
      toArray: function (e, t) {
        return (
          ((e = void 0 === e ? [] : e)[(t = void 0 === t ? 0 : t)] = this._x),
          (e[t + 1] = this._y),
          (e[t + 2] = this._z),
          (e[t + 3] = this._order),
          e
        );
      },
      toVector3: function (e) {
        return e
          ? e.set(this._x, this._y, this._z)
          : new Ce(this._x, this._y, this._z);
      },
      onChange: function (e) {
        return (this.onChangeCallback = e), this;
      },
      onChangeCallback: function () {},
    }),
    Object.assign(rr.prototype, {
      set: function (e) {
        this.mask = (1 << e) | 0;
      },
      enable: function (e) {
        this.mask |= (1 << e) | 0;
      },
      toggle: function (e) {
        this.mask ^= (1 << e) | 0;
      },
      disable: function (e) {
        this.mask &= ~((1 << e) | 0);
      },
      test: function (e) {
        return 0 != (this.mask & e.mask);
      },
    });
  var nr,
    ir,
    ar,
    or,
    sr,
    lr,
    cr,
    ur,
    hr,
    dr,
    pr,
    fr,
    gr,
    mr,
    vr,
    Br,
    wr,
    yr,
    Er = 0;
  function p() {
    Object.defineProperty(this, 'id', { value: Er++ }),
      (this.uuid = xe.generateUUID()),
      (this.name = ''),
      (this.type = 'Object3D'),
      (this.parent = null),
      (this.children = []),
      (this.up = p.DefaultUp.clone());
    var e = new Ce(),
      t = new Ar(),
      A = new E(),
      r = new Ce(1, 1, 1);
    t.onChange(function () {
      A.setFromEuler(t, !1);
    }),
      A.onChange(function () {
        t.setFromQuaternion(A, void 0, !1);
      }),
      Object.defineProperties(this, {
        position: { enumerable: !0, value: e },
        rotation: { enumerable: !0, value: t },
        quaternion: { enumerable: !0, value: A },
        scale: { enumerable: !0, value: r },
        modelViewMatrix: { value: new be() },
        normalMatrix: { value: new F() },
      }),
      (this.matrix = new be()),
      (this.matrixWorld = new be()),
      (this.matrixAutoUpdate = p.DefaultMatrixAutoUpdate),
      (this.matrixWorldNeedsUpdate = !1),
      (this.layers = new rr()),
      (this.visible = !0),
      (this.castShadow = !1),
      (this.receiveShadow = !1),
      (this.frustumCulled = !0),
      (this.renderOrder = 0),
      (this.userData = {});
  }
  function xr() {
    p.call(this),
      (this.type = 'Camera'),
      (this.matrixWorldInverse = new be()),
      (this.projectionMatrix = new be());
  }
  function br(e, t, A, r, n, i) {
    xr.call(this),
      (this.type = 'OrthographicCamera'),
      (this.zoom = 1),
      (this.view = null),
      (this.left = e),
      (this.right = t),
      (this.top = A),
      (this.bottom = r),
      (this.near = void 0 !== n ? n : 0.1),
      (this.far = void 0 !== i ? i : 2e3),
      this.updateProjectionMatrix();
  }
  function Cr(e, t, A, r, n, i) {
    (this.a = e),
      (this.b = t),
      (this.c = A),
      (this.normal = r && r.isVector3 ? r : new Ce()),
      (this.vertexNormals = Array.isArray(r) ? r : []),
      (this.color = n && n.isColor ? n : new de()),
      (this.vertexColors = Array.isArray(n) ? n : []),
      (this.materialIndex = void 0 !== i ? i : 0);
  }
  (p.DefaultUp = new Ce(0, 1, 0)),
    (p.DefaultMatrixAutoUpdate = !0),
    (p.prototype = Object.assign(Object.create(r.prototype), {
      constructor: p,
      isObject3D: !0,
      onBeforeRender: function () {},
      onAfterRender: function () {},
      applyMatrix: function (e) {
        this.matrix.multiplyMatrices(e, this.matrix),
          this.matrix.decompose(this.position, this.quaternion, this.scale);
      },
      applyQuaternion: function (e) {
        return this.quaternion.premultiply(e), this;
      },
      setRotationFromAxisAngle: function (e, t) {
        this.quaternion.setFromAxisAngle(e, t);
      },
      setRotationFromEuler: function (e) {
        this.quaternion.setFromEuler(e, !0);
      },
      setRotationFromMatrix: function (e) {
        this.quaternion.setFromRotationMatrix(e);
      },
      setRotationFromQuaternion: function (e) {
        this.quaternion.copy(e);
      },
      rotateOnAxis:
        ((wr = new E()),
        function (e, t) {
          return wr.setFromAxisAngle(e, t), this.quaternion.multiply(wr), this;
        }),
      rotateOnWorldAxis:
        ((Br = new E()),
        function (e, t) {
          return (
            Br.setFromAxisAngle(e, t), this.quaternion.premultiply(Br), this
          );
        }),
      rotateX:
        ((vr = new Ce(1, 0, 0)),
        function (e) {
          return this.rotateOnAxis(vr, e);
        }),
      rotateY:
        ((mr = new Ce(0, 1, 0)),
        function (e) {
          return this.rotateOnAxis(mr, e);
        }),
      rotateZ:
        ((gr = new Ce(0, 0, 1)),
        function (e) {
          return this.rotateOnAxis(gr, e);
        }),
      translateOnAxis:
        ((fr = new Ce()),
        function (e, t) {
          return (
            fr.copy(e).applyQuaternion(this.quaternion),
            this.position.add(fr.multiplyScalar(t)),
            this
          );
        }),
      translateX:
        ((pr = new Ce(1, 0, 0)),
        function (e) {
          return this.translateOnAxis(pr, e);
        }),
      translateY:
        ((dr = new Ce(0, 1, 0)),
        function (e) {
          return this.translateOnAxis(dr, e);
        }),
      translateZ:
        ((hr = new Ce(0, 0, 1)),
        function (e) {
          return this.translateOnAxis(hr, e);
        }),
      localToWorld: function (e) {
        return e.applyMatrix4(this.matrixWorld);
      },
      worldToLocal:
        ((ur = new be()),
        function (e) {
          return e.applyMatrix4(ur.getInverse(this.matrixWorld));
        }),
      lookAt:
        ((lr = new be()),
        (cr = new Ce()),
        function (e, t, A) {
          e.isVector3 ? cr.copy(e) : cr.set(e, t, A),
            this.isCamera
              ? lr.lookAt(this.position, cr, this.up)
              : lr.lookAt(cr, this.position, this.up),
            this.quaternion.setFromRotationMatrix(lr);
        }),
      add: function (e) {
        if (1 < arguments.length)
          for (var t = 0; t < arguments.length; t++) this.add(arguments[t]);
        else
          e === this
            ? console.error(
                "THREE.Object3D.add: object can't be added as a child of itself.",
                e,
              )
            : e && e.isObject3D
            ? (null !== e.parent && e.parent.remove(e),
              (e.parent = this),
              e.dispatchEvent({ type: 'added' }),
              this.children.push(e))
            : console.error(
                'THREE.Object3D.add: object not an instance of THREE.Object3D.',
                e,
              );
        return this;
      },
      remove: function (e) {
        if (1 < arguments.length)
          for (var t = 0; t < arguments.length; t++) this.remove(arguments[t]);
        else {
          var A = this.children.indexOf(e);
          -1 !== A &&
            ((e.parent = null),
            e.dispatchEvent({ type: 'removed' }),
            this.children.splice(A, 1));
        }
        return this;
      },
      getObjectById: function (e) {
        return this.getObjectByProperty('id', e);
      },
      getObjectByName: function (e) {
        return this.getObjectByProperty('name', e);
      },
      getObjectByProperty: function (e, t) {
        if (this[e] === t) return this;
        for (var A = 0, r = this.children.length; A < r; A++) {
          var n = this.children[A].getObjectByProperty(e, t);
          if (void 0 !== n) return n;
        }
      },
      getWorldPosition: function (e) {
        return (
          void 0 === e &&
            (console.warn(
              'THREE.Object3D: .getWorldPosition() target is now required',
            ),
            (e = new Ce())),
          this.updateMatrixWorld(!0),
          e.setFromMatrixPosition(this.matrixWorld)
        );
      },
      getWorldQuaternion:
        ((or = new Ce()),
        (sr = new Ce()),
        function (e) {
          return (
            void 0 === e &&
              (console.warn(
                'THREE.Object3D: .getWorldQuaternion() target is now required',
              ),
              (e = new E())),
            this.updateMatrixWorld(!0),
            this.matrixWorld.decompose(or, e, sr),
            e
          );
        }),
      getWorldScale:
        ((ir = new Ce()),
        (ar = new E()),
        function (e) {
          return (
            void 0 === e &&
              (console.warn(
                'THREE.Object3D: .getWorldScale() target is now required',
              ),
              (e = new Ce())),
            this.updateMatrixWorld(!0),
            this.matrixWorld.decompose(ir, ar, e),
            e
          );
        }),
      getWorldDirection:
        ((nr = new E()),
        function (e) {
          return (
            void 0 === e &&
              (console.warn(
                'THREE.Object3D: .getWorldDirection() target is now required',
              ),
              (e = new Ce())),
            this.getWorldQuaternion(nr),
            e.set(0, 0, 1).applyQuaternion(nr)
          );
        }),
      raycast: function () {},
      traverse: function (e) {
        e(this);
        for (var t = this.children, A = 0, r = t.length; A < r; A++)
          t[A].traverse(e);
      },
      traverseVisible: function (e) {
        if (!1 !== this.visible) {
          e(this);
          for (var t = this.children, A = 0, r = t.length; A < r; A++)
            t[A].traverseVisible(e);
        }
      },
      traverseAncestors: function (e) {
        var t = this.parent;
        null !== t && (e(t), t.traverseAncestors(e));
      },
      updateMatrix: function () {
        this.matrix.compose(this.position, this.quaternion, this.scale),
          (this.matrixWorldNeedsUpdate = !0);
      },
      updateMatrixWorld: function (e) {
        this.matrixAutoUpdate && this.updateMatrix(),
          (this.matrixWorldNeedsUpdate || e) &&
            (null === this.parent
              ? this.matrixWorld.copy(this.matrix)
              : this.matrixWorld.multiplyMatrices(
                  this.parent.matrixWorld,
                  this.matrix,
                ),
            (e = !(this.matrixWorldNeedsUpdate = !1)));
        for (var t = this.children, A = 0, r = t.length; A < r; A++)
          t[A].updateMatrixWorld(e);
      },
      toJSON: function (A) {
        var e,
          t,
          r = void 0 === A || 'string' == typeof A,
          n = {},
          i =
            (r &&
              ((A = {
                geometries: {},
                materials: {},
                textures: {},
                images: {},
                shapes: {},
              }),
              (n.metadata = {
                version: 4.5,
                type: 'Object',
                generator: 'Object3D.toJSON',
              })),
            {});
        function a(e, t) {
          return void 0 === e[t.uuid] && (e[t.uuid] = t.toJSON(A)), t.uuid;
        }
        if (
          ((i.uuid = this.uuid),
          (i.type = this.type),
          '' !== this.name && (i.name = this.name),
          !0 === this.castShadow && (i.castShadow = !0),
          !0 === this.receiveShadow && (i.receiveShadow = !0),
          !1 === this.visible && (i.visible = !1),
          !1 === this.frustumCulled && (i.frustumCulled = !1),
          0 !== this.renderOrder && (i.renderOrder = this.renderOrder),
          '{}' !== JSON.stringify(this.userData) &&
            (i.userData = this.userData),
          (i.layers = this.layers.mask),
          (i.matrix = this.matrix.toArray()),
          !1 === this.matrixAutoUpdate && (i.matrixAutoUpdate = !1),
          this.isMesh || this.isLine || this.isPoints)
        ) {
          i.geometry = a(A.geometries, this.geometry);
          var o = this.geometry.parameters;
          if (void 0 !== o && void 0 !== o.shapes) {
            var s = o.shapes;
            if (Array.isArray(s))
              for (var l = 0, c = s.length; l < c; l++) {
                var u = s[l];
                a(A.shapes, u);
              }
            else a(A.shapes, s);
          }
        }
        if (void 0 !== this.material)
          if (Array.isArray(this.material)) {
            for (var h = [], l = 0, c = this.material.length; l < c; l++)
              h.push(a(A.materials, this.material[l]));
            i.material = h;
          } else i.material = a(A.materials, this.material);
        if (0 < this.children.length) {
          i.children = [];
          for (l = 0; l < this.children.length; l++)
            i.children.push(this.children[l].toJSON(A).object);
        }
        return (
          r &&
            ((o = d(A.geometries)),
            (r = d(A.materials)),
            (e = d(A.textures)),
            (t = d(A.images)),
            (s = d(A.shapes)),
            0 < o.length && (n.geometries = o),
            0 < r.length && (n.materials = r),
            0 < e.length && (n.textures = e),
            0 < t.length && (n.images = t),
            0 < s.length) &&
            (n.shapes = s),
          (n.object = i),
          n
        );
        function d(e) {
          var t,
            A = [];
          for (t in e) {
            var r = e[t];
            delete r.metadata, A.push(r);
          }
          return A;
        }
      },
      clone: function (e) {
        return new this.constructor().copy(this, e);
      },
      copy: function (e, t) {
        if (
          (void 0 === t && (t = !0),
          (this.name = e.name),
          this.up.copy(e.up),
          this.position.copy(e.position),
          this.quaternion.copy(e.quaternion),
          this.scale.copy(e.scale),
          this.matrix.copy(e.matrix),
          this.matrixWorld.copy(e.matrixWorld),
          (this.matrixAutoUpdate = e.matrixAutoUpdate),
          (this.matrixWorldNeedsUpdate = e.matrixWorldNeedsUpdate),
          (this.layers.mask = e.layers.mask),
          (this.visible = e.visible),
          (this.castShadow = e.castShadow),
          (this.receiveShadow = e.receiveShadow),
          (this.frustumCulled = e.frustumCulled),
          (this.renderOrder = e.renderOrder),
          (this.userData = JSON.parse(JSON.stringify(e.userData))),
          !0 === t)
        )
          for (var A = 0; A < e.children.length; A++) {
            var r = e.children[A];
            this.add(r.clone());
          }
        return this;
      },
    })),
    (xr.prototype = Object.assign(Object.create(p.prototype), {
      constructor: xr,
      isCamera: !0,
      copy: function (e, t) {
        return (
          p.prototype.copy.call(this, e, t),
          this.matrixWorldInverse.copy(e.matrixWorldInverse),
          this.projectionMatrix.copy(e.projectionMatrix),
          this
        );
      },
      getWorldDirection:
        ((yr = new E()),
        function (e) {
          return (
            void 0 === e &&
              (console.warn(
                'THREE.Camera: .getWorldDirection() target is now required',
              ),
              (e = new Ce())),
            this.getWorldQuaternion(yr),
            e.set(0, 0, -1).applyQuaternion(yr)
          );
        }),
      updateMatrixWorld: function (e) {
        p.prototype.updateMatrixWorld.call(this, e),
          this.matrixWorldInverse.getInverse(this.matrixWorld);
      },
      clone: function () {
        return new this.constructor().copy(this);
      },
    })),
    (br.prototype = Object.assign(Object.create(xr.prototype), {
      constructor: br,
      isOrthographicCamera: !0,
      copy: function (e, t) {
        return (
          xr.prototype.copy.call(this, e, t),
          (this.left = e.left),
          (this.right = e.right),
          (this.top = e.top),
          (this.bottom = e.bottom),
          (this.near = e.near),
          (this.far = e.far),
          (this.zoom = e.zoom),
          (this.view = null === e.view ? null : Object.assign({}, e.view)),
          this
        );
      },
      setViewOffset: function (e, t, A, r, n, i) {
        null === this.view &&
          (this.view = {
            enabled: !0,
            fullWidth: 1,
            fullHeight: 1,
            offsetX: 0,
            offsetY: 0,
            width: 1,
            height: 1,
          }),
          (this.view.enabled = !0),
          (this.view.fullWidth = e),
          (this.view.fullHeight = t),
          (this.view.offsetX = A),
          (this.view.offsetY = r),
          (this.view.width = n),
          (this.view.height = i),
          this.updateProjectionMatrix();
      },
      clearViewOffset: function () {
        null !== this.view && (this.view.enabled = !1),
          this.updateProjectionMatrix();
      },
      updateProjectionMatrix: function () {
        var e,
          t,
          A,
          r = (this.right - this.left) / (2 * this.zoom),
          n = (this.top - this.bottom) / (2 * this.zoom),
          i = (this.right + this.left) / 2,
          a = (this.top + this.bottom) / 2,
          o = i - r,
          i = i + r,
          r = a + n,
          a = a - n;
        null !== this.view &&
          this.view.enabled &&
          ((n = this.zoom / (this.view.width / this.view.fullWidth)),
          (e = this.zoom / (this.view.height / this.view.fullHeight)),
          (t = (this.right - this.left) / this.view.width),
          (A = (this.top - this.bottom) / this.view.height),
          (i = (o += t * (this.view.offsetX / n)) + t * (this.view.width / n)),
          (a =
            (r -= A * (this.view.offsetY / e)) - A * (this.view.height / e))),
          this.projectionMatrix.makeOrthographic(
            o,
            i,
            r,
            a,
            this.near,
            this.far,
          );
      },
      toJSON: function (e) {
        e = p.prototype.toJSON.call(this, e);
        return (
          (e.object.zoom = this.zoom),
          (e.object.left = this.left),
          (e.object.right = this.right),
          (e.object.top = this.top),
          (e.object.bottom = this.bottom),
          (e.object.near = this.near),
          (e.object.far = this.far),
          null !== this.view && (e.object.view = Object.assign({}, this.view)),
          e
        );
      },
    })),
    Object.assign(Cr.prototype, {
      clone: function () {
        return new this.constructor().copy(this);
      },
      copy: function (e) {
        (this.a = e.a),
          (this.b = e.b),
          (this.c = e.c),
          this.normal.copy(e.normal),
          this.color.copy(e.color),
          (this.materialIndex = e.materialIndex);
        for (var t = 0, A = e.vertexNormals.length; t < A; t++)
          this.vertexNormals[t] = e.vertexNormals[t].clone();
        for (t = 0, A = e.vertexColors.length; t < A; t++)
          this.vertexColors[t] = e.vertexColors[t].clone();
        return this;
      },
    });
  var Fr,
    Tr,
    _r,
    Ur,
    Mr,
    Sr,
    Qr,
    Lr = 0;
  function pe() {
    Object.defineProperty(this, 'id', { value: (Lr += 2) }),
      (this.uuid = xe.generateUUID()),
      (this.name = ''),
      (this.type = 'Geometry'),
      (this.vertices = []),
      (this.colors = []),
      (this.faces = []),
      (this.faceVertexUvs = [[]]),
      (this.morphTargets = []),
      (this.morphNormals = []),
      (this.skinWeights = []),
      (this.skinIndices = []),
      (this.lineDistances = []),
      (this.boundingBox = null),
      (this.boundingSphere = null),
      (this.elementsNeedUpdate = !1),
      (this.verticesNeedUpdate = !1),
      (this.uvsNeedUpdate = !1),
      (this.normalsNeedUpdate = !1),
      (this.colorsNeedUpdate = !1),
      (this.lineDistancesNeedUpdate = !1),
      (this.groupsNeedUpdate = !1);
  }
  function y(e, t, A) {
    if (Array.isArray(e))
      throw new TypeError(
        'THREE.BufferAttribute: array should be a Typed Array.',
      );
    (this.name = ''),
      (this.array = e),
      (this.itemSize = t),
      (this.count = void 0 !== e ? e.length / t : 0),
      (this.normalized = !0 === A),
      (this.dynamic = !1),
      (this.updateRange = { offset: 0, count: -1 }),
      (this.version = 0);
  }
  function Hr(e, t, A) {
    y.call(this, new Int8Array(e), t, A);
  }
  function Ir(e, t, A) {
    y.call(this, new Uint8Array(e), t, A);
  }
  function Rr(e, t, A) {
    y.call(this, new Uint8ClampedArray(e), t, A);
  }
  function Pr(e, t, A) {
    y.call(this, new Int16Array(e), t, A);
  }
  function Dr(e, t, A) {
    y.call(this, new Uint16Array(e), t, A);
  }
  function Or(e, t, A) {
    y.call(this, new Int32Array(e), t, A);
  }
  function Nr(e, t, A) {
    y.call(this, new Uint32Array(e), t, A);
  }
  function q(e, t, A) {
    y.call(this, new Float32Array(e), t, A);
  }
  function Gr(e, t, A) {
    y.call(this, new Float64Array(e), t, A);
  }
  function Vr() {
    (this.vertices = []),
      (this.normals = []),
      (this.colors = []),
      (this.uvs = []),
      (this.uvs2 = []),
      (this.groups = []),
      (this.morphTargets = {}),
      (this.skinWeights = []),
      (this.skinIndices = []),
      (this.boundingBox = null),
      (this.boundingSphere = null),
      (this.verticesNeedUpdate = !1),
      (this.normalsNeedUpdate = !1),
      (this.colorsNeedUpdate = !1),
      (this.uvsNeedUpdate = !1),
      (this.groupsNeedUpdate = !1);
  }
  function kr(e) {
    if (0 === e.length) return -1 / 0;
    for (var t = e[0], A = 1, r = e.length; A < r; ++A) e[A] > t && (t = e[A]);
    return t;
  }
  (pe.prototype = Object.assign(Object.create(r.prototype), {
    constructor: pe,
    isGeometry: !0,
    applyMatrix: function (e) {
      for (
        var t = new F().getNormalMatrix(e), A = 0, r = this.vertices.length;
        A < r;
        A++
      )
        this.vertices[A].applyMatrix4(e);
      for (A = 0, r = this.faces.length; A < r; A++) {
        var n = this.faces[A];
        n.normal.applyMatrix3(t).normalize();
        for (var i = 0, a = n.vertexNormals.length; i < a; i++)
          n.vertexNormals[i].applyMatrix3(t).normalize();
      }
      return (
        null !== this.boundingBox && this.computeBoundingBox(),
        null !== this.boundingSphere && this.computeBoundingSphere(),
        (this.verticesNeedUpdate = !0),
        (this.normalsNeedUpdate = !0),
        this
      );
    },
    rotateX:
      ((Qr = new be()),
      function (e) {
        return Qr.makeRotationX(e), this.applyMatrix(Qr), this;
      }),
    rotateY:
      ((Sr = new be()),
      function (e) {
        return Sr.makeRotationY(e), this.applyMatrix(Sr), this;
      }),
    rotateZ:
      ((Mr = new be()),
      function (e) {
        return Mr.makeRotationZ(e), this.applyMatrix(Mr), this;
      }),
    translate:
      ((Ur = new be()),
      function (e, t, A) {
        return Ur.makeTranslation(e, t, A), this.applyMatrix(Ur), this;
      }),
    scale:
      ((_r = new be()),
      function (e, t, A) {
        return _r.makeScale(e, t, A), this.applyMatrix(_r), this;
      }),
    lookAt:
      ((Tr = new p()),
      function (e) {
        Tr.lookAt(e), Tr.updateMatrix(), this.applyMatrix(Tr.matrix);
      }),
    fromBufferGeometry: function (e) {
      for (
        var n = this,
          t = null !== e.index ? e.index.array : void 0,
          A = e.attributes,
          r = A.position.array,
          i = void 0 !== A.normal ? A.normal.array : void 0,
          a = void 0 !== A.color ? A.color.array : void 0,
          o = void 0 !== A.uv ? A.uv.array : void 0,
          s = void 0 !== A.uv2 ? A.uv2.array : void 0,
          l = (void 0 !== s && (this.faceVertexUvs[1] = []), []),
          c = [],
          u = [],
          h = 0,
          d = 0;
        h < r.length;
        h += 3, d += 2
      )
        n.vertices.push(new Ce(r[h], r[h + 1], r[h + 2])),
          void 0 !== i && l.push(new Ce(i[h], i[h + 1], i[h + 2])),
          void 0 !== a && n.colors.push(new de(a[h], a[h + 1], a[h + 2])),
          void 0 !== o && c.push(new he(o[d], o[d + 1])),
          void 0 !== s && u.push(new he(s[d], s[d + 1]));
      function p(e, t, A, r) {
        r = new Cr(
          e,
          t,
          A,
          void 0 !== i ? [l[e].clone(), l[t].clone(), l[A].clone()] : [],
          void 0 !== a
            ? [n.colors[e].clone(), n.colors[t].clone(), n.colors[A].clone()]
            : [],
          r,
        );
        n.faces.push(r),
          void 0 !== o &&
            n.faceVertexUvs[0].push([c[e].clone(), c[t].clone(), c[A].clone()]),
          void 0 !== s &&
            n.faceVertexUvs[1].push([u[e].clone(), u[t].clone(), u[A].clone()]);
      }
      var f = e.groups;
      if (0 < f.length)
        for (h = 0; h < f.length; h++)
          for (var g = f[h], m = g.start, d = m, v = m + g.count; d < v; d += 3)
            void 0 !== t
              ? p(t[d], t[d + 1], t[d + 2], g.materialIndex)
              : p(d, d + 1, d + 2, g.materialIndex);
      else if (void 0 !== t)
        for (h = 0; h < t.length; h += 3) p(t[h], t[h + 1], t[h + 2]);
      else for (h = 0; h < r.length / 3; h += 3) p(h, h + 1, h + 2);
      return (
        this.computeFaceNormals(),
        null !== e.boundingBox && (this.boundingBox = e.boundingBox.clone()),
        null !== e.boundingSphere &&
          (this.boundingSphere = e.boundingSphere.clone()),
        this
      );
    },
    center:
      ((Fr = new Ce()),
      function () {
        return (
          this.computeBoundingBox(),
          this.boundingBox.getCenter(Fr).negate(),
          this.translate(Fr.x, Fr.y, Fr.z),
          this
        );
      }),
    normalize: function () {
      this.computeBoundingSphere();
      var e = this.boundingSphere.center,
        t = this.boundingSphere.radius,
        t = 0 === t ? 1 : 1 / t,
        A = new be();
      return (
        A.set(
          t,
          0,
          0,
          -t * e.x,
          0,
          t,
          0,
          -t * e.y,
          0,
          0,
          t,
          -t * e.z,
          0,
          0,
          0,
          1,
        ),
        this.applyMatrix(A),
        this
      );
    },
    computeFaceNormals: function () {
      for (
        var e = new Ce(), t = new Ce(), A = 0, r = this.faces.length;
        A < r;
        A++
      ) {
        var n = this.faces[A],
          i = this.vertices[n.a],
          a = this.vertices[n.b],
          o = this.vertices[n.c];
        e.subVectors(o, a),
          t.subVectors(i, a),
          e.cross(t),
          e.normalize(),
          n.normal.copy(e);
      }
    },
    computeVertexNormals: function (e) {
      var t, A, r;
      for (
        void 0 === e && (e = !0),
          r = new Array(this.vertices.length),
          t = 0,
          A = this.vertices.length;
        t < A;
        t++
      )
        r[t] = new Ce();
      if (e)
        for (
          var n, i, a, o = new Ce(), s = new Ce(), l = 0, c = this.faces.length;
          l < c;
          l++
        )
          (u = this.faces[l]),
            (n = this.vertices[u.a]),
            (i = this.vertices[u.b]),
            (a = this.vertices[u.c]),
            o.subVectors(a, i),
            s.subVectors(n, i),
            o.cross(s),
            r[u.a].add(o),
            r[u.b].add(o),
            r[u.c].add(o);
      else
        for (
          this.computeFaceNormals(), l = 0, c = this.faces.length;
          l < c;
          l++
        )
          r[(u = this.faces[l]).a].add(u.normal),
            r[u.b].add(u.normal),
            r[u.c].add(u.normal);
      for (t = 0, A = this.vertices.length; t < A; t++) r[t].normalize();
      for (l = 0, c = this.faces.length; l < c; l++) {
        var u,
          h = (u = this.faces[l]).vertexNormals;
        3 === h.length
          ? (h[0].copy(r[u.a]), h[1].copy(r[u.b]), h[2].copy(r[u.c]))
          : ((h[0] = r[u.a].clone()),
            (h[1] = r[u.b].clone()),
            (h[2] = r[u.c].clone()));
      }
      0 < this.faces.length && (this.normalsNeedUpdate = !0);
    },
    computeFlatVertexNormals: function () {
      var e, t;
      for (
        this.computeFaceNormals(), e = 0, t = this.faces.length;
        e < t;
        e++
      ) {
        var A,
          r = (A = this.faces[e]).vertexNormals;
        3 === r.length
          ? (r[0].copy(A.normal), r[1].copy(A.normal), r[2].copy(A.normal))
          : ((r[0] = A.normal.clone()),
            (r[1] = A.normal.clone()),
            (r[2] = A.normal.clone()));
      }
      0 < this.faces.length && (this.normalsNeedUpdate = !0);
    },
    computeMorphNormals: function () {
      var e, t, A;
      for (a = 0, o = this.faces.length; a < o; a++)
        for (
          (A = this.faces[a]).__originalFaceNormal
            ? A.__originalFaceNormal.copy(A.normal)
            : (A.__originalFaceNormal = A.normal.clone()),
            A.__originalVertexNormals || (A.__originalVertexNormals = []),
            e = 0,
            t = A.vertexNormals.length;
          e < t;
          e++
        )
          A.__originalVertexNormals[e]
            ? A.__originalVertexNormals[e].copy(A.vertexNormals[e])
            : (A.__originalVertexNormals[e] = A.vertexNormals[e].clone());
      var r = new pe();
      for (
        r.faces = this.faces, e = 0, t = this.morphTargets.length;
        e < t;
        e++
      ) {
        if (!this.morphNormals[e]) {
          (this.morphNormals[e] = {}),
            (this.morphNormals[e].faceNormals = []),
            (this.morphNormals[e].vertexNormals = []);
          for (
            var n = this.morphNormals[e].faceNormals,
              i = this.morphNormals[e].vertexNormals,
              a = 0,
              o = this.faces.length;
            a < o;
            a++
          )
            (s = new Ce()),
              (l = { a: new Ce(), b: new Ce(), c: new Ce() }),
              n.push(s),
              i.push(l);
        }
        var s,
          l,
          c = this.morphNormals[e];
        for (
          r.vertices = this.morphTargets[e].vertices,
            r.computeFaceNormals(),
            r.computeVertexNormals(),
            a = 0,
            o = this.faces.length;
          a < o;
          a++
        )
          (A = this.faces[a]),
            (s = c.faceNormals[a]),
            (l = c.vertexNormals[a]),
            s.copy(A.normal),
            l.a.copy(A.vertexNormals[0]),
            l.b.copy(A.vertexNormals[1]),
            l.c.copy(A.vertexNormals[2]);
      }
      for (a = 0, o = this.faces.length; a < o; a++)
        ((A = this.faces[a]).normal = A.__originalFaceNormal),
          (A.vertexNormals = A.__originalVertexNormals);
    },
    computeBoundingBox: function () {
      null === this.boundingBox && (this.boundingBox = new NA()),
        this.boundingBox.setFromPoints(this.vertices);
    },
    computeBoundingSphere: function () {
      null === this.boundingSphere && (this.boundingSphere = new kA()),
        this.boundingSphere.setFromPoints(this.vertices);
    },
    merge: function (e, t, A) {
      if (e && e.isGeometry) {
        var r,
          n = this.vertices.length,
          i = this.vertices,
          a = e.vertices,
          o = this.faces,
          s = e.faces,
          l = this.faceVertexUvs[0],
          c = e.faceVertexUvs[0],
          u = this.colors,
          h = e.colors;
        void 0 === A && (A = 0),
          void 0 !== t && (r = new F().getNormalMatrix(t));
        for (var d = 0, p = a.length; d < p; d++) {
          var f = a[d].clone();
          void 0 !== t && f.applyMatrix4(t), i.push(f);
        }
        for (d = 0, p = h.length; d < p; d++) u.push(h[d].clone());
        for (d = 0, p = s.length; d < p; d++) {
          var g,
            m,
            v = s[d],
            B = v.vertexNormals,
            w = v.vertexColors,
            y = new Cr(v.a + n, v.b + n, v.c + n);
          y.normal.copy(v.normal),
            void 0 !== r && y.normal.applyMatrix3(r).normalize();
          for (var E = 0, x = B.length; E < x; E++)
            (g = B[E].clone()),
              void 0 !== r && g.applyMatrix3(r).normalize(),
              y.vertexNormals.push(g);
          y.color.copy(v.color);
          for (E = 0, x = w.length; E < x; E++)
            (m = w[E]), y.vertexColors.push(m.clone());
          (y.materialIndex = v.materialIndex + A), o.push(y);
        }
        for (d = 0, p = c.length; d < p; d++) {
          var b = c[d],
            C = [];
          if (void 0 !== b) {
            for (E = 0, x = b.length; E < x; E++) C.push(b[E].clone());
            l.push(C);
          }
        }
      } else
        console.error(
          'THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.',
          e,
        );
    },
    mergeMesh: function (e) {
      e && e.isMesh
        ? (e.matrixAutoUpdate && e.updateMatrix(),
          this.merge(e.geometry, e.matrix))
        : console.error(
            'THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.',
            e,
          );
    },
    mergeVertices: function () {
      for (
        var e,
          t,
          A,
          r,
          n = {},
          i = [],
          a = [],
          o = Math.pow(10, 4),
          s = 0,
          l = this.vertices.length;
        s < l;
        s++
      )
        (e = this.vertices[s]),
          void 0 ===
          n[
            (e =
              Math.round(e.x * o) +
              '_' +
              Math.round(e.y * o) +
              '_' +
              Math.round(e.z * o))
          ]
            ? ((n[e] = s), i.push(this.vertices[s]), (a[s] = i.length - 1))
            : (a[s] = a[n[e]]);
      var c = [];
      for (s = 0, l = this.faces.length; s < l; s++) {
        ((t = this.faces[s]).a = a[t.a]), (t.b = a[t.b]), (t.c = a[t.c]);
        for (var u = [t.a, t.b, t.c], h = 0; h < 3; h++)
          if (u[h] === u[(h + 1) % 3]) {
            c.push(s);
            break;
          }
      }
      for (s = c.length - 1; 0 <= s; s--) {
        var d = c[s];
        for (
          this.faces.splice(d, 1), A = 0, r = this.faceVertexUvs.length;
          A < r;
          A++
        )
          this.faceVertexUvs[A].splice(d, 1);
      }
      var p = this.vertices.length - i.length;
      return (this.vertices = i), p;
    },
    setFromPoints: function (e) {
      this.vertices = [];
      for (var t = 0, A = e.length; t < A; t++) {
        var r = e[t];
        this.vertices.push(new Ce(r.x, r.y, r.z || 0));
      }
      return this;
    },
    sortFacesByMaterialIndex: function () {
      for (var e = this.faces, t = e.length, A = 0; A < t; A++) e[A]._id = A;
      e.sort(function (e, t) {
        return e.materialIndex - t.materialIndex;
      });
      var r,
        n,
        i = this.faceVertexUvs[0],
        a = this.faceVertexUvs[1];
      i && i.length === t && (r = []), a && a.length === t && (n = []);
      for (A = 0; A < t; A++) {
        var o = e[A]._id;
        r && r.push(i[o]), n && n.push(a[o]);
      }
      r && (this.faceVertexUvs[0] = r), n && (this.faceVertexUvs[1] = n);
    },
    toJSON: function () {
      var e = {
        metadata: {
          version: 4.5,
          type: 'Geometry',
          generator: 'Geometry.toJSON',
        },
      };
      if (
        ((e.uuid = this.uuid),
        (e.type = this.type),
        '' !== this.name && (e.name = this.name),
        void 0 !== this.parameters)
      ) {
        var t,
          A = this.parameters;
        for (t in A) void 0 !== A[t] && (e[t] = A[t]);
      } else {
        for (var r = [], n = 0; n < this.vertices.length; n++) {
          var i = this.vertices[n];
          r.push(i.x, i.y, i.z);
        }
        for (
          var a = [], o = [], s = {}, l = [], c = {}, u = [], h = {}, n = 0;
          n < this.faces.length;
          n++
        ) {
          var d,
            p = this.faces[n],
            f = void 0 !== this.faceVertexUvs[0][n],
            g = 0 < p.normal.length(),
            m = 0 < p.vertexNormals.length,
            v = 1 !== p.color.r || 1 !== p.color.g || 1 !== p.color.b,
            B = 0 < p.vertexColors.length;
          (d = w(2, 3, f)),
            (d = w(d, 4, g)),
            (d = w(d, 5, m)),
            (d = w(d, 6, v)),
            (d = w(d, 7, B)),
            a.push(d),
            a.push(p.a, p.b, p.c),
            a.push(p.materialIndex),
            f &&
              ((d = this.faceVertexUvs[0][n]),
              a.push(x(d[0]), x(d[1]), x(d[2]))),
            g && a.push(y(p.normal)),
            m && ((f = p.vertexNormals), a.push(y(f[0]), y(f[1]), y(f[2]))),
            v && a.push(E(p.color)),
            B && ((d = p.vertexColors), a.push(E(d[0]), E(d[1]), E(d[2])));
        }
        (e.data = {}),
          (e.data.vertices = r),
          (e.data.normals = o),
          0 < l.length && (e.data.colors = l),
          0 < u.length && (e.data.uvs = [u]),
          (e.data.faces = a);
      }
      return e;
      function w(e, t, A) {
        return A ? e | (1 << t) : e & ~(1 << t);
      }
      function y(e) {
        var t = e.x.toString() + e.y.toString() + e.z.toString();
        return (
          void 0 === s[t] && ((s[t] = o.length / 3), o.push(e.x, e.y, e.z)),
          s[t]
        );
      }
      function E(e) {
        var t = e.r.toString() + e.g.toString() + e.b.toString();
        return void 0 === c[t] && ((c[t] = l.length), l.push(e.getHex())), c[t];
      }
      function x(e) {
        var t = e.x.toString() + e.y.toString();
        return (
          void 0 === h[t] && ((h[t] = u.length / 2), u.push(e.x, e.y)), h[t]
        );
      }
    },
    clone: function () {
      return new pe().copy(this);
    },
    copy: function (e) {
      (this.vertices = []),
        (this.colors = []),
        (this.faces = []),
        (this.faceVertexUvs = [[]]),
        (this.morphTargets = []),
        (this.morphNormals = []),
        (this.skinWeights = []),
        (this.skinIndices = []),
        (this.lineDistances = []),
        (this.boundingBox = null),
        (this.boundingSphere = null),
        (this.name = e.name);
      for (var t, A, r = e.vertices, n = 0, i = r.length; n < i; n++)
        this.vertices.push(r[n].clone());
      var a = e.colors;
      for (n = 0, i = a.length; n < i; n++) this.colors.push(a[n].clone());
      var o = e.faces;
      for (n = 0, i = o.length; n < i; n++) this.faces.push(o[n].clone());
      for (n = 0, i = e.faceVertexUvs.length; n < i; n++) {
        var s = e.faceVertexUvs[n];
        for (
          void 0 === this.faceVertexUvs[n] && (this.faceVertexUvs[n] = []),
            t = 0,
            A = s.length;
          t < A;
          t++
        ) {
          for (var l = s[t], c = [], u = 0, h = l.length; u < h; u++) {
            var d = l[u];
            c.push(d.clone());
          }
          this.faceVertexUvs[n].push(c);
        }
      }
      var p = e.morphTargets;
      for (n = 0, i = p.length; n < i; n++) {
        var f = {};
        if (((f.name = p[n].name), void 0 !== p[n].vertices))
          for (f.vertices = [], t = 0, A = p[n].vertices.length; t < A; t++)
            f.vertices.push(p[n].vertices[t].clone());
        if (void 0 !== p[n].normals)
          for (f.normals = [], t = 0, A = p[n].normals.length; t < A; t++)
            f.normals.push(p[n].normals[t].clone());
        this.morphTargets.push(f);
      }
      var g = e.morphNormals;
      for (n = 0, i = g.length; n < i; n++) {
        var m = {};
        if (void 0 !== g[n].vertexNormals)
          for (
            m.vertexNormals = [], t = 0, A = g[n].vertexNormals.length;
            t < A;
            t++
          ) {
            var v = g[n].vertexNormals[t],
              B = {};
            (B.a = v.a.clone()),
              (B.b = v.b.clone()),
              (B.c = v.c.clone()),
              m.vertexNormals.push(B);
          }
        if (void 0 !== g[n].faceNormals)
          for (
            m.faceNormals = [], t = 0, A = g[n].faceNormals.length;
            t < A;
            t++
          )
            m.faceNormals.push(g[n].faceNormals[t].clone());
        this.morphNormals.push(m);
      }
      var w = e.skinWeights;
      for (n = 0, i = w.length; n < i; n++) this.skinWeights.push(w[n].clone());
      var y = e.skinIndices;
      for (n = 0, i = y.length; n < i; n++) this.skinIndices.push(y[n].clone());
      var E = e.lineDistances;
      for (n = 0, i = E.length; n < i; n++) this.lineDistances.push(E[n]);
      var x = e.boundingBox,
        x = (null !== x && (this.boundingBox = x.clone()), e.boundingSphere);
      return (
        null !== x && (this.boundingSphere = x.clone()),
        (this.elementsNeedUpdate = e.elementsNeedUpdate),
        (this.verticesNeedUpdate = e.verticesNeedUpdate),
        (this.uvsNeedUpdate = e.uvsNeedUpdate),
        (this.normalsNeedUpdate = e.normalsNeedUpdate),
        (this.colorsNeedUpdate = e.colorsNeedUpdate),
        (this.lineDistancesNeedUpdate = e.lineDistancesNeedUpdate),
        (this.groupsNeedUpdate = e.groupsNeedUpdate),
        this
      );
    },
    dispose: function () {
      this.dispatchEvent({ type: 'dispose' });
    },
  })),
    Object.defineProperty(y.prototype, 'needsUpdate', {
      set: function (e) {
        !0 === e && this.version++;
      },
    }),
    Object.assign(y.prototype, {
      isBufferAttribute: !0,
      onUploadCallback: function () {},
      setArray: function (e) {
        if (Array.isArray(e))
          throw new TypeError(
            'THREE.BufferAttribute: array should be a Typed Array.',
          );
        return (
          (this.count = void 0 !== e ? e.length / this.itemSize : 0),
          (this.array = e),
          this
        );
      },
      setDynamic: function (e) {
        return (this.dynamic = e), this;
      },
      copy: function (e) {
        return (
          (this.name = e.name),
          (this.array = new e.array.constructor(e.array)),
          (this.itemSize = e.itemSize),
          (this.count = e.count),
          (this.normalized = e.normalized),
          (this.dynamic = e.dynamic),
          this
        );
      },
      copyAt: function (e, t, A) {
        (e *= this.itemSize), (A *= t.itemSize);
        for (var r = 0, n = this.itemSize; r < n; r++)
          this.array[e + r] = t.array[A + r];
        return this;
      },
      copyArray: function (e) {
        return this.array.set(e), this;
      },
      copyColorsArray: function (e) {
        for (var t = this.array, A = 0, r = 0, n = e.length; r < n; r++) {
          var i = e[r];
          void 0 === i &&
            (console.warn(
              'THREE.BufferAttribute.copyColorsArray(): color is undefined',
              r,
            ),
            (i = new de())),
            (t[A++] = i.r),
            (t[A++] = i.g),
            (t[A++] = i.b);
        }
        return this;
      },
      copyVector2sArray: function (e) {
        for (var t = this.array, A = 0, r = 0, n = e.length; r < n; r++) {
          var i = e[r];
          void 0 === i &&
            (console.warn(
              'THREE.BufferAttribute.copyVector2sArray(): vector is undefined',
              r,
            ),
            (i = new he())),
            (t[A++] = i.x),
            (t[A++] = i.y);
        }
        return this;
      },
      copyVector3sArray: function (e) {
        for (var t = this.array, A = 0, r = 0, n = e.length; r < n; r++) {
          var i = e[r];
          void 0 === i &&
            (console.warn(
              'THREE.BufferAttribute.copyVector3sArray(): vector is undefined',
              r,
            ),
            (i = new Ce())),
            (t[A++] = i.x),
            (t[A++] = i.y),
            (t[A++] = i.z);
        }
        return this;
      },
      copyVector4sArray: function (e) {
        for (var t = this.array, A = 0, r = 0, n = e.length; r < n; r++) {
          var i = e[r];
          void 0 === i &&
            (console.warn(
              'THREE.BufferAttribute.copyVector4sArray(): vector is undefined',
              r,
            ),
            (i = new Fe())),
            (t[A++] = i.x),
            (t[A++] = i.y),
            (t[A++] = i.z),
            (t[A++] = i.w);
        }
        return this;
      },
      set: function (e, t) {
        return this.array.set(e, (t = void 0 === t ? 0 : t)), this;
      },
      getX: function (e) {
        return this.array[e * this.itemSize];
      },
      setX: function (e, t) {
        return (this.array[e * this.itemSize] = t), this;
      },
      getY: function (e) {
        return this.array[e * this.itemSize + 1];
      },
      setY: function (e, t) {
        return (this.array[e * this.itemSize + 1] = t), this;
      },
      getZ: function (e) {
        return this.array[e * this.itemSize + 2];
      },
      setZ: function (e, t) {
        return (this.array[e * this.itemSize + 2] = t), this;
      },
      getW: function (e) {
        return this.array[e * this.itemSize + 3];
      },
      setW: function (e, t) {
        return (this.array[e * this.itemSize + 3] = t), this;
      },
      setXY: function (e, t, A) {
        return (
          (e *= this.itemSize),
          (this.array[e + 0] = t),
          (this.array[e + 1] = A),
          this
        );
      },
      setXYZ: function (e, t, A, r) {
        return (
          (e *= this.itemSize),
          (this.array[e + 0] = t),
          (this.array[e + 1] = A),
          (this.array[e + 2] = r),
          this
        );
      },
      setXYZW: function (e, t, A, r, n) {
        return (
          (e *= this.itemSize),
          (this.array[e + 0] = t),
          (this.array[e + 1] = A),
          (this.array[e + 2] = r),
          (this.array[e + 3] = n),
          this
        );
      },
      onUpload: function (e) {
        return (this.onUploadCallback = e), this;
      },
      clone: function () {
        return new this.constructor(this.array, this.itemSize).copy(this);
      },
    }),
    ((Hr.prototype = Object.create(y.prototype)).constructor = Hr),
    ((Ir.prototype = Object.create(y.prototype)).constructor = Ir),
    ((Rr.prototype = Object.create(y.prototype)).constructor = Rr),
    ((Pr.prototype = Object.create(y.prototype)).constructor = Pr),
    (Dr.prototype = Object.create(y.prototype)),
    (Dr.prototype.constructor = Dr),
    ((Or.prototype = Object.create(y.prototype)).constructor = Or),
    (Nr.prototype = Object.create(y.prototype)),
    (Nr.prototype.constructor = Nr),
    ((q.prototype = Object.create(y.prototype)).constructor = q),
    ((Gr.prototype = Object.create(y.prototype)).constructor = Gr),
    Object.assign(Vr.prototype, {
      computeGroups: function (e) {
        for (var t, A = [], r = void 0, n = e.faces, i = 0; i < n.length; i++) {
          var a = n[i];
          a.materialIndex !== r &&
            ((r = a.materialIndex),
            void 0 !== t && ((t.count = 3 * i - t.start), A.push(t)),
            (t = { start: 3 * i, materialIndex: r }));
        }
        void 0 !== t && ((t.count = 3 * i - t.start), A.push(t)),
          (this.groups = A);
      },
      fromGeometry: function (e) {
        var t = e.faces,
          A = e.vertices,
          r = e.faceVertexUvs,
          n = r[0] && 0 < r[0].length,
          i = r[1] && 0 < r[1].length,
          a = e.morphTargets,
          o = a.length;
        if (0 < o) {
          for (var s = [], l = 0; l < o; l++) s[l] = [];
          this.morphTargets.position = s;
        }
        var c = e.morphNormals,
          u = c.length;
        if (0 < u) {
          for (var h = [], l = 0; l < u; l++) h[l] = [];
          this.morphTargets.normal = h;
        }
        var d = e.skinIndices,
          p = e.skinWeights,
          f = d.length === A.length,
          g = p.length === A.length;
        0 < A.length &&
          0 === t.length &&
          console.error(
            'THREE.DirectGeometry: Faceless geometries are not supported.',
          );
        for (l = 0; l < t.length; l++) {
          var m,
            v = t[l],
            B = (this.vertices.push(A[v.a], A[v.b], A[v.c]), v.vertexNormals),
            B =
              (3 === B.length
                ? this.normals.push(B[0], B[1], B[2])
                : ((B = v.normal), this.normals.push(B, B, B)),
              v.vertexColors);
          3 === B.length
            ? this.colors.push(B[0], B[1], B[2])
            : ((B = v.color), this.colors.push(B, B, B)),
            !0 === n &&
              (void 0 !== (m = r[0][l])
                ? this.uvs.push(m[0], m[1], m[2])
                : (console.warn(
                    'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ',
                    l,
                  ),
                  this.uvs.push(new he(), new he(), new he()))),
            !0 === i &&
              (void 0 !== (m = r[1][l])
                ? this.uvs2.push(m[0], m[1], m[2])
                : (console.warn(
                    'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ',
                    l,
                  ),
                  this.uvs2.push(new he(), new he(), new he())));
          for (var w = 0; w < o; w++) {
            var y = a[w].vertices;
            s[w].push(y[v.a], y[v.b], y[v.c]);
          }
          for (w = 0; w < u; w++) {
            var E = c[w].vertexNormals[l];
            h[w].push(E.a, E.b, E.c);
          }
          f && this.skinIndices.push(d[v.a], d[v.b], d[v.c]),
            g && this.skinWeights.push(p[v.a], p[v.b], p[v.c]);
        }
        return (
          this.computeGroups(e),
          (this.verticesNeedUpdate = e.verticesNeedUpdate),
          (this.normalsNeedUpdate = e.normalsNeedUpdate),
          (this.colorsNeedUpdate = e.colorsNeedUpdate),
          (this.uvsNeedUpdate = e.uvsNeedUpdate),
          (this.groupsNeedUpdate = e.groupsNeedUpdate),
          this
        );
      },
    });
  var zr,
    Kr,
    Xr,
    jr,
    Wr,
    Yr,
    Jr,
    Zr,
    qr,
    $r,
    en = 1;
  function $() {
    Object.defineProperty(this, 'id', { value: (en += 2) }),
      (this.uuid = xe.generateUUID()),
      (this.name = ''),
      (this.type = 'BufferGeometry'),
      (this.index = null),
      (this.attributes = {}),
      (this.morphAttributes = {}),
      (this.groups = []),
      (this.boundingBox = null),
      (this.boundingSphere = null),
      (this.drawRange = { start: 0, count: 1 / 0 }),
      (this.userData = {});
  }
  function tn(e, t, A, r, n, i) {
    pe.call(this),
      (this.type = 'BoxGeometry'),
      (this.parameters = {
        width: e,
        height: t,
        depth: A,
        widthSegments: r,
        heightSegments: n,
        depthSegments: i,
      }),
      this.fromBufferGeometry(new An(e, t, A, r, n, i)),
      this.mergeVertices();
  }
  function An(e, t, A, r, n, i) {
    $.call(this),
      (this.type = 'BoxBufferGeometry'),
      (this.parameters = {
        width: e,
        height: t,
        depth: A,
        widthSegments: r,
        heightSegments: n,
        depthSegments: i,
      });
    var _ = this,
      U =
        ((e = e || 1),
        (t = t || 1),
        (A = A || 1),
        (r = Math.floor(r) || 1),
        (n = Math.floor(n) || 1),
        (i = Math.floor(i) || 1),
        []),
      M = [],
      S = [],
      Q = [],
      L = 0,
      H = 0;
    function a(e, t, A, r, n, i, a, o, s, l, c) {
      for (
        var u = i / s,
          h = a / l,
          d = i / 2,
          p = a / 2,
          f = o / 2,
          g = s + 1,
          m = l + 1,
          v = 0,
          B = 0,
          w = new Ce(),
          y = 0;
        y < m;
        y++
      )
        for (var E = y * h - p, x = 0; x < g; x++)
          (w[e] = (x * u - d) * r),
            (w[t] = E * n),
            (w[A] = f),
            M.push(w.x, w.y, w.z),
            (w[e] = 0),
            (w[t] = 0),
            (w[A] = 0 < o ? 1 : -1),
            S.push(w.x, w.y, w.z),
            Q.push(x / s),
            Q.push(1 - y / l),
            (v += 1);
      for (y = 0; y < l; y++)
        for (x = 0; x < s; x++) {
          var b = L + x + g * y,
            C = L + x + g * (y + 1),
            F = L + (x + 1) + g * (y + 1),
            T = L + (x + 1) + g * y;
          U.push(b, C, T), U.push(C, F, T), (B += 6);
        }
      _.addGroup(H, B, c), (H += B), (L += v);
    }
    a('z', 'y', 'x', -1, -1, A, t, e, i, n, 0),
      a('z', 'y', 'x', 1, -1, A, t, -e, i, n, 1),
      a('x', 'z', 'y', 1, 1, e, A, t, r, i, 2),
      a('x', 'z', 'y', 1, -1, e, A, -t, r, i, 3),
      a('x', 'y', 'z', 1, -1, e, t, A, r, n, 4),
      a('x', 'y', 'z', -1, -1, e, t, -A, r, n, 5),
      this.setIndex(U),
      this.addAttribute('position', new q(M, 3)),
      this.addAttribute('normal', new q(S, 3)),
      this.addAttribute('uv', new q(Q, 2));
  }
  function rn(e, t, A, r) {
    pe.call(this),
      (this.type = 'PlaneGeometry'),
      (this.parameters = {
        width: e,
        height: t,
        widthSegments: A,
        heightSegments: r,
      }),
      this.fromBufferGeometry(new nn(e, t, A, r)),
      this.mergeVertices();
  }
  function nn(e, t, A, r) {
    $.call(this),
      (this.type = 'PlaneBufferGeometry'),
      (this.parameters = {
        width: e,
        height: t,
        widthSegments: A,
        heightSegments: r,
      });
    for (
      var n = (e = e || 1) / 2,
        i = (t = t || 1) / 2,
        a = Math.floor(A) || 1,
        o = Math.floor(r) || 1,
        s = a + 1,
        l = o + 1,
        c = e / a,
        u = t / o,
        h = [],
        d = [],
        p = [],
        f = [],
        g = 0;
      g < l;
      g++
    )
      for (var m = g * u - i, v = 0; v < s; v++)
        d.push(v * c - n, -m, 0),
          p.push(0, 0, 1),
          f.push(v / a),
          f.push(1 - g / o);
    for (g = 0; g < o; g++)
      for (v = 0; v < a; v++) {
        var B = v + s * (g + 1),
          w = v + 1 + s * (g + 1),
          y = v + 1 + s * g;
        h.push(v + s * g, B, y), h.push(B, w, y);
      }
    this.setIndex(h),
      this.addAttribute('position', new q(d, 3)),
      this.addAttribute('normal', new q(p, 3)),
      this.addAttribute('uv', new q(f, 2));
  }
  ($.prototype = Object.assign(Object.create(r.prototype), {
    constructor: $,
    isBufferGeometry: !0,
    getIndex: function () {
      return this.index;
    },
    setIndex: function (e) {
      Array.isArray(e)
        ? (this.index = new (65535 < kr(e) ? Nr : Dr)(e, 1))
        : (this.index = e);
    },
    addAttribute: function (e, t) {
      return (t && t.isBufferAttribute) || (t && t.isInterleavedBufferAttribute)
        ? ('index' === e
            ? (console.warn(
                'THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.',
              ),
              this.setIndex(t))
            : (this.attributes[e] = t),
          this)
        : (console.warn(
            'THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).',
          ),
          this.addAttribute(e, new y(t, arguments[2])));
    },
    getAttribute: function (e) {
      return this.attributes[e];
    },
    removeAttribute: function (e) {
      return delete this.attributes[e], this;
    },
    addGroup: function (e, t, A) {
      this.groups.push({
        start: e,
        count: t,
        materialIndex: void 0 !== A ? A : 0,
      });
    },
    clearGroups: function () {
      this.groups = [];
    },
    setDrawRange: function (e, t) {
      (this.drawRange.start = e), (this.drawRange.count = t);
    },
    applyMatrix: function (e) {
      var t = this.attributes.position,
        t =
          (void 0 !== t && (e.applyToBufferAttribute(t), (t.needsUpdate = !0)),
          this.attributes.normal);
      return (
        void 0 !== t &&
          (new F().getNormalMatrix(e).applyToBufferAttribute(t),
          (t.needsUpdate = !0)),
        null !== this.boundingBox && this.computeBoundingBox(),
        null !== this.boundingSphere && this.computeBoundingSphere(),
        this
      );
    },
    rotateX:
      (($r = new be()),
      function (e) {
        return $r.makeRotationX(e), this.applyMatrix($r), this;
      }),
    rotateY:
      ((qr = new be()),
      function (e) {
        return qr.makeRotationY(e), this.applyMatrix(qr), this;
      }),
    rotateZ:
      ((Zr = new be()),
      function (e) {
        return Zr.makeRotationZ(e), this.applyMatrix(Zr), this;
      }),
    translate:
      ((Jr = new be()),
      function (e, t, A) {
        return Jr.makeTranslation(e, t, A), this.applyMatrix(Jr), this;
      }),
    scale:
      ((Yr = new be()),
      function (e, t, A) {
        return Yr.makeScale(e, t, A), this.applyMatrix(Yr), this;
      }),
    lookAt:
      ((Wr = new p()),
      function (e) {
        Wr.lookAt(e), Wr.updateMatrix(), this.applyMatrix(Wr.matrix);
      }),
    center:
      ((jr = new Ce()),
      function () {
        return (
          this.computeBoundingBox(),
          this.boundingBox.getCenter(jr).negate(),
          this.translate(jr.x, jr.y, jr.z),
          this
        );
      }),
    setFromObject: function (e) {
      var t,
        A,
        r = e.geometry;
      return (
        e.isPoints || e.isLine
          ? ((A = new q(3 * r.vertices.length, 3)),
            (t = new q(3 * r.colors.length, 3)),
            this.addAttribute('position', A.copyVector3sArray(r.vertices)),
            this.addAttribute('color', t.copyColorsArray(r.colors)),
            r.lineDistances &&
              r.lineDistances.length === r.vertices.length &&
              ((A = new q(r.lineDistances.length, 1)),
              this.addAttribute('lineDistance', A.copyArray(r.lineDistances))),
            null !== r.boundingSphere &&
              (this.boundingSphere = r.boundingSphere.clone()),
            null !== r.boundingBox &&
              (this.boundingBox = r.boundingBox.clone()))
          : e.isMesh && r && r.isGeometry && this.fromGeometry(r),
        this
      );
    },
    setFromPoints: function (e) {
      for (var t = [], A = 0, r = e.length; A < r; A++) {
        var n = e[A];
        t.push(n.x, n.y, n.z || 0);
      }
      return this.addAttribute('position', new q(t, 3)), this;
    },
    updateFromObject: function (e) {
      var t,
        A = e.geometry;
      if (e.isMesh) {
        var r = A.__directGeometry;
        if (
          (!0 === A.elementsNeedUpdate &&
            ((r = void 0), (A.elementsNeedUpdate = !1)),
          void 0 === r)
        )
          return this.fromGeometry(A);
        (r.verticesNeedUpdate = A.verticesNeedUpdate),
          (r.normalsNeedUpdate = A.normalsNeedUpdate),
          (r.colorsNeedUpdate = A.colorsNeedUpdate),
          (r.uvsNeedUpdate = A.uvsNeedUpdate),
          (r.groupsNeedUpdate = A.groupsNeedUpdate),
          (A.verticesNeedUpdate = !1),
          (A.normalsNeedUpdate = !1),
          (A.colorsNeedUpdate = !1),
          (A.uvsNeedUpdate = !1),
          (A.groupsNeedUpdate = !1),
          (A = r);
      }
      return (
        !0 === A.verticesNeedUpdate &&
          (void 0 !== (t = this.attributes.position) &&
            (t.copyVector3sArray(A.vertices), (t.needsUpdate = !0)),
          (A.verticesNeedUpdate = !1)),
        !0 === A.normalsNeedUpdate &&
          (void 0 !== (t = this.attributes.normal) &&
            (t.copyVector3sArray(A.normals), (t.needsUpdate = !0)),
          (A.normalsNeedUpdate = !1)),
        !0 === A.colorsNeedUpdate &&
          (void 0 !== (t = this.attributes.color) &&
            (t.copyColorsArray(A.colors), (t.needsUpdate = !0)),
          (A.colorsNeedUpdate = !1)),
        A.uvsNeedUpdate &&
          (void 0 !== (t = this.attributes.uv) &&
            (t.copyVector2sArray(A.uvs), (t.needsUpdate = !0)),
          (A.uvsNeedUpdate = !1)),
        A.lineDistancesNeedUpdate &&
          (void 0 !== (t = this.attributes.lineDistance) &&
            (t.copyArray(A.lineDistances), (t.needsUpdate = !0)),
          (A.lineDistancesNeedUpdate = !1)),
        A.groupsNeedUpdate &&
          (A.computeGroups(e.geometry),
          (this.groups = A.groups),
          (A.groupsNeedUpdate = !1)),
        this
      );
    },
    fromGeometry: function (e) {
      return (
        (e.__directGeometry = new Vr().fromGeometry(e)),
        this.fromDirectGeometry(e.__directGeometry)
      );
    },
    fromDirectGeometry: function (e) {
      var t,
        A = new Float32Array(3 * e.vertices.length);
      for (t in (this.addAttribute(
        'position',
        new y(A, 3).copyVector3sArray(e.vertices),
      ),
      0 < e.normals.length &&
        ((A = new Float32Array(3 * e.normals.length)),
        this.addAttribute('normal', new y(A, 3).copyVector3sArray(e.normals))),
      0 < e.colors.length &&
        ((A = new Float32Array(3 * e.colors.length)),
        this.addAttribute('color', new y(A, 3).copyColorsArray(e.colors))),
      0 < e.uvs.length &&
        ((A = new Float32Array(2 * e.uvs.length)),
        this.addAttribute('uv', new y(A, 2).copyVector2sArray(e.uvs))),
      0 < e.uvs2.length &&
        ((A = new Float32Array(2 * e.uvs2.length)),
        this.addAttribute('uv2', new y(A, 2).copyVector2sArray(e.uvs2))),
      (this.groups = e.groups),
      e.morphTargets)) {
        for (
          var r = [], n = e.morphTargets[t], i = 0, a = n.length;
          i < a;
          i++
        ) {
          var o = n[i],
            s = new q(3 * o.length, 3);
          r.push(s.copyVector3sArray(o));
        }
        this.morphAttributes[t] = r;
      }
      return (
        0 < e.skinIndices.length &&
          ((A = new q(4 * e.skinIndices.length, 4)),
          this.addAttribute('skinIndex', A.copyVector4sArray(e.skinIndices))),
        0 < e.skinWeights.length &&
          ((A = new q(4 * e.skinWeights.length, 4)),
          this.addAttribute('skinWeight', A.copyVector4sArray(e.skinWeights))),
        null !== e.boundingSphere &&
          (this.boundingSphere = e.boundingSphere.clone()),
        null !== e.boundingBox && (this.boundingBox = e.boundingBox.clone()),
        this
      );
    },
    computeBoundingBox: function () {
      null === this.boundingBox && (this.boundingBox = new NA());
      var e = this.attributes.position;
      void 0 !== e
        ? this.boundingBox.setFromBufferAttribute(e)
        : this.boundingBox.makeEmpty(),
        (isNaN(this.boundingBox.min.x) ||
          isNaN(this.boundingBox.min.y) ||
          isNaN(this.boundingBox.min.z)) &&
          console.error(
            'THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',
            this,
          );
    },
    computeBoundingSphere:
      ((Kr = new NA()),
      (Xr = new Ce()),
      function () {
        null === this.boundingSphere && (this.boundingSphere = new kA());
        var e = this.attributes.position;
        if (e) {
          for (
            var t = this.boundingSphere.center,
              A = (Kr.setFromBufferAttribute(e), Kr.getCenter(t), 0),
              r = 0,
              n = e.count;
            r < n;
            r++
          )
            (Xr.x = e.getX(r)),
              (Xr.y = e.getY(r)),
              (Xr.z = e.getZ(r)),
              (A = Math.max(A, t.distanceToSquared(Xr)));
          (this.boundingSphere.radius = Math.sqrt(A)),
            isNaN(this.boundingSphere.radius) &&
              console.error(
                'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',
                this,
              );
        }
      }),
    computeFaceNormals: function () {},
    computeVertexNormals: function () {
      var e = this.index,
        t = this.attributes,
        A = this.groups;
      if (t.position) {
        var r = t.position.array;
        if (void 0 === t.normal)
          this.addAttribute('normal', new y(new Float32Array(r.length), 3));
        else
          for (var n = t.normal.array, i = 0, a = n.length; i < a; i++)
            n[i] = 0;
        var o,
          s,
          l,
          c = t.normal.array,
          u = new Ce(),
          h = new Ce(),
          d = new Ce(),
          p = new Ce(),
          f = new Ce();
        if (e) {
          var g = e.array;
          0 === A.length && this.addGroup(0, g.length);
          for (var m = 0, v = A.length; m < v; ++m)
            for (
              var B = A[m], w = B.start, i = w, a = w + B.count;
              i < a;
              i += 3
            )
              (o = 3 * g[i + 0]),
                (s = 3 * g[i + 1]),
                (l = 3 * g[i + 2]),
                u.fromArray(r, o),
                h.fromArray(r, s),
                d.fromArray(r, l),
                p.subVectors(d, h),
                f.subVectors(u, h),
                p.cross(f),
                (c[o] += p.x),
                (c[1 + o] += p.y),
                (c[2 + o] += p.z),
                (c[s] += p.x),
                (c[1 + s] += p.y),
                (c[2 + s] += p.z),
                (c[l] += p.x),
                (c[1 + l] += p.y),
                (c[2 + l] += p.z);
        } else
          for (i = 0, a = r.length; i < a; i += 9)
            u.fromArray(r, i),
              h.fromArray(r, i + 3),
              d.fromArray(r, i + 6),
              p.subVectors(d, h),
              f.subVectors(u, h),
              p.cross(f),
              (c[i] = p.x),
              (c[i + 1] = p.y),
              (c[i + 2] = p.z),
              (c[i + 3] = p.x),
              (c[i + 4] = p.y),
              (c[i + 5] = p.z),
              (c[i + 6] = p.x),
              (c[i + 7] = p.y),
              (c[i + 8] = p.z);
        this.normalizeNormals(), (t.normal.needsUpdate = !0);
      }
    },
    merge: function (e, t) {
      if (e && e.isBufferGeometry) {
        void 0 === t &&
          ((t = 0),
          console.warn(
            'THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge.',
          ));
        var A,
          r = this.attributes;
        for (A in r)
          if (void 0 !== e.attributes[A])
            for (
              var n = r[A].array,
                i = e.attributes[A],
                a = i.array,
                o = 0,
                s = i.itemSize * t;
              o < a.length;
              o++, s++
            )
              n[s] = a[o];
        return this;
      }
      console.error(
        'THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.',
        e,
      );
    },
    normalizeNormals:
      ((zr = new Ce()),
      function () {
        for (var e = this.attributes.normal, t = 0, A = e.count; t < A; t++)
          (zr.x = e.getX(t)),
            (zr.y = e.getY(t)),
            (zr.z = e.getZ(t)),
            zr.normalize(),
            e.setXYZ(t, zr.x, zr.y, zr.z);
      }),
    toNonIndexed: function () {
      if (null === this.index)
        return (
          console.warn(
            'THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.',
          ),
          this
        );
      var e,
        t = new $(),
        A = this.index.array,
        r = this.attributes;
      for (e in r) {
        for (
          var n = r[e],
            i = n.array,
            a = n.itemSize,
            o = new i.constructor(A.length * a),
            s = 0,
            l = 0,
            c = 0,
            u = A.length;
          c < u;
          c++
        )
          for (var s = A[c] * a, h = 0; h < a; h++) o[l++] = i[s++];
        t.addAttribute(e, new y(o, a));
      }
      for (var d = this.groups, c = 0, u = d.length; c < u; c++) {
        var p = d[c];
        t.addGroup(p.start, p.count, p.materialIndex);
      }
      return t;
    },
    toJSON: function () {
      var e = {
        metadata: {
          version: 4.5,
          type: 'BufferGeometry',
          generator: 'BufferGeometry.toJSON',
        },
      };
      if (
        ((e.uuid = this.uuid),
        (e.type = this.type),
        '' !== this.name && (e.name = this.name),
        0 < Object.keys(this.userData).length && (e.userData = this.userData),
        void 0 !== this.parameters)
      ) {
        var t = this.parameters;
        for (A in t) void 0 !== t[A] && (e[A] = t[A]);
      } else {
        e.data = { attributes: {} };
        var A,
          r = this.index,
          n =
            (null !== r &&
              ((a = Array.prototype.slice.call(r.array)),
              (e.data.index = { type: r.array.constructor.name, array: a })),
            this.attributes);
        for (A in n) {
          var i = n[A],
            a = Array.prototype.slice.call(i.array);
          e.data.attributes[A] = {
            itemSize: i.itemSize,
            type: i.array.constructor.name,
            array: a,
            normalized: i.normalized,
          };
        }
        (r = this.groups),
          (r =
            (0 < r.length && (e.data.groups = JSON.parse(JSON.stringify(r))),
            this.boundingSphere));
        null !== r &&
          (e.data.boundingSphere = {
            center: r.center.toArray(),
            radius: r.radius,
          });
      }
      return e;
    },
    clone: function () {
      return new $().copy(this);
    },
    copy: function (e) {
      (this.index = null),
        (this.attributes = {}),
        (this.morphAttributes = {}),
        (this.groups = []),
        (this.boundingBox = null),
        (this.boundingSphere = null),
        (this.name = e.name);
      var t,
        A = e.index,
        r = (null !== A && this.setIndex(A.clone()), e.attributes);
      for (t in r) {
        var n = r[t];
        this.addAttribute(t, n.clone());
      }
      var i = e.morphAttributes;
      for (t in i) {
        for (var a = [], o = i[t], s = 0, l = o.length; s < l; s++)
          a.push(o[s].clone());
        this.morphAttributes[t] = a;
      }
      var c = e.groups;
      for (s = 0, l = c.length; s < l; s++) {
        var u = c[s];
        this.addGroup(u.start, u.count, u.materialIndex);
      }
      (A = e.boundingBox),
        null !== A && (this.boundingBox = A.clone()),
        (A = e.boundingSphere);
      return (
        null !== A && (this.boundingSphere = A.clone()),
        (this.drawRange.start = e.drawRange.start),
        (this.drawRange.count = e.drawRange.count),
        (this.userData = e.userData),
        this
      );
    },
    dispose: function () {
      this.dispatchEvent({ type: 'dispose' });
    },
  })),
    ((tn.prototype = Object.create(pe.prototype)).constructor = tn),
    ((An.prototype = Object.create($.prototype)).constructor = An),
    ((rn.prototype = Object.create(pe.prototype)).constructor = rn),
    ((nn.prototype = Object.create($.prototype)).constructor = nn);
  var an,
    on,
    sn,
    ln,
    cn,
    un,
    hn,
    dn,
    pn,
    fn,
    gn,
    mn,
    vn,
    Bn,
    wn,
    yn,
    En,
    xn,
    bn,
    Cn,
    Fn,
    Tn,
    _n,
    Un,
    Mn,
    Sn,
    Qn,
    Ln,
    Hn,
    In,
    Rn,
    Pn,
    Dn,
    On,
    Nn,
    Gn,
    Vn,
    kn,
    zn,
    Kn = 0;
  function t() {
    Object.defineProperty(this, 'id', { value: Kn++ }),
      (this.uuid = xe.generateUUID()),
      (this.name = ''),
      (this.type = 'Material'),
      (this.fog = !0),
      (this.lights = !0),
      (this.blending = Ae),
      (this.side = Z),
      (this.flatShading = !1),
      (this.vertexColors = 0),
      (this.opacity = 1),
      (this.transparent = !1),
      (this.blendSrc = Be),
      (this.blendDst = we),
      (this.blendEquation = oe),
      (this.blendSrcAlpha = null),
      (this.blendDstAlpha = null),
      (this.blendEquationAlpha = null),
      (this.depthFunc = Re),
      (this.depthTest = !0),
      (this.depthWrite = !0),
      (this.clippingPlanes = null),
      (this.clipIntersection = !1),
      (this.clipShadows = !1),
      (this.shadowSide = null),
      (this.colorWrite = !0),
      (this.precision = null),
      (this.polygonOffset = !1),
      (this.polygonOffsetFactor = 0),
      (this.polygonOffsetUnits = 0),
      (this.dithering = !1),
      (this.alphaTest = 0),
      (this.premultipliedAlpha = !1),
      (this.overdraw = 0),
      (this.visible = !0),
      (this.userData = {}),
      (this.needsUpdate = !0);
  }
  function Xn(e) {
    t.call(this),
      (this.type = 'MeshBasicMaterial'),
      (this.color = new de(16777215)),
      (this.map = null),
      (this.lightMap = null),
      (this.lightMapIntensity = 1),
      (this.aoMap = null),
      (this.aoMapIntensity = 1),
      (this.specularMap = null),
      (this.alphaMap = null),
      (this.envMap = null),
      (this.combine = Ge),
      (this.reflectivity = 1),
      (this.refractionRatio = 0.98),
      (this.wireframe = !1),
      (this.wireframeLinewidth = 1),
      (this.wireframeLinecap = 'round'),
      (this.wireframeLinejoin = 'round'),
      (this.skinning = !1),
      (this.morphTargets = !1),
      (this.lights = !1),
      this.setValues(e);
  }
  function jn(e) {
    t.call(this),
      (this.type = 'ShaderMaterial'),
      (this.defines = {}),
      (this.uniforms = {}),
      (this.vertexShader =
        'void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}'),
      (this.fragmentShader =
        'void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}'),
      (this.linewidth = 1),
      (this.wireframe = !1),
      (this.wireframeLinewidth = 1),
      (this.fog = !1),
      (this.lights = !1),
      (this.clipping = !1),
      (this.skinning = !1),
      (this.morphTargets = !1),
      (this.morphNormals = !1),
      (this.extensions = {
        derivatives: !1,
        fragDepth: !1,
        drawBuffers: !1,
        shaderTextureLOD: !1,
      }),
      (this.defaultAttributeValues = {
        color: [1, 1, 1],
        uv: [0, 0],
        uv2: [0, 0],
      }),
      (this.index0AttributeName = void 0),
      (this.uniformsNeedUpdate = !1),
      void 0 !== e &&
        (void 0 !== e.attributes &&
          console.error(
            'THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.',
          ),
        this.setValues(e));
  }
  function Wn(e, t) {
    (this.origin = void 0 !== e ? e : new Ce()),
      (this.direction = void 0 !== t ? t : new Ce());
  }
  function Yn(e, t, A) {
    (this.a = void 0 !== e ? e : new Ce()),
      (this.b = void 0 !== t ? t : new Ce()),
      (this.c = void 0 !== A ? A : new Ce());
  }
  function f(e, t) {
    p.call(this),
      (this.type = 'Mesh'),
      (this.geometry = void 0 !== e ? e : new $()),
      (this.material =
        void 0 !== t ? t : new Xn({ color: 16777215 * Math.random() })),
      (this.drawMode = eA),
      this.updateMorphTargets();
  }
  function Jn(e, t, A, r, n, i, a) {
    return (
      Yn.getBarycoord(e, t, A, r, Vn),
      n.multiplyScalar(Vn.x),
      i.multiplyScalar(Vn.y),
      a.multiplyScalar(Vn.z),
      n.add(i).add(a),
      n.clone()
    );
  }
  function Zn(e, t, A, r, n, i, a, o) {
    r =
      t.side === Ee
        ? r.intersectTriangle(a, i, n, !0, o)
        : r.intersectTriangle(n, i, a, t.side !== ee, o);
    if (null === r) return null;
    zn.copy(o), zn.applyMatrix4(e.matrixWorld);
    n = A.ray.origin.distanceTo(zn);
    return n < A.near || n > A.far
      ? null
      : { distance: n, point: zn.clone(), object: e };
  }
  function qn(e, t, A, r, n, i, a, o, s) {
    Ln.fromBufferAttribute(n, a),
      Hn.fromBufferAttribute(n, o),
      In.fromBufferAttribute(n, s);
    n = Zn(e, t, A, r, Ln, Hn, In, kn);
    return (
      n &&
        (i &&
          (On.fromBufferAttribute(i, a),
          Nn.fromBufferAttribute(i, o),
          Gn.fromBufferAttribute(i, s),
          (n.uv = Jn(kn, Ln, Hn, In, On, Nn, Gn))),
        (e = new Cr(a, o, s)),
        Yn.getNormal(Ln, Hn, In, e.normal),
        (n.face = e)),
      n
    );
  }
  function $n(n, A, i, r) {
    var a,
      o,
      s,
      l = new de(0),
      c = 0;
    function u(e, t) {
      A.buffers.color.setClear(e.r, e.g, e.b, t, r);
    }
    return {
      getClearColor: function () {
        return l;
      },
      setClearColor: function (e, t) {
        l.set(e), u(l, (c = void 0 !== t ? t : 1));
      },
      getClearAlpha: function () {
        return c;
      },
      setClearAlpha: function (e) {
        u(l, (c = e));
      },
      render: function (e, t, A, r) {
        null === (t = t.background)
          ? u(l, c)
          : t && t.isColor && (u(t, 1), (r = !0)),
          (n.autoClear || r) &&
            n.clear(n.autoClearColor, n.autoClearDepth, n.autoClearStencil),
          t && t.isCubeTexture
            ? (void 0 === s &&
                ((s = new f(
                  new An(1, 1, 1),
                  new jn({
                    uniforms: $A.cube.uniforms,
                    vertexShader: $A.cube.vertexShader,
                    fragmentShader: $A.cube.fragmentShader,
                    side: Ee,
                    depthTest: !0,
                    depthWrite: !1,
                    fog: !1,
                  }),
                )).geometry.removeAttribute('normal'),
                s.geometry.removeAttribute('uv'),
                (s.onBeforeRender = function (e, t, A) {
                  this.matrixWorld.copyPosition(A.matrixWorld);
                }),
                i.update(s)),
              (s.material.uniforms.tCube.value = t),
              e.push(s, s.geometry, s.material, 0, null))
            : t &&
              t.isTexture &&
              (void 0 === a &&
                ((a = new br(-1, 1, 1, -1, 0, 1)),
                (o = new f(
                  new nn(2, 2),
                  new Xn({ depthTest: !1, depthWrite: !1, fog: !1 }),
                )),
                i.update(o)),
              (o.material.map = t),
              n.renderBufferDirect(a, null, o.geometry, o.material, o, null));
      },
    };
  }
  function ei(n, i, a, o) {
    var s;
    (this.setMode = function (e) {
      s = e;
    }),
      (this.render = function (e, t) {
        n.drawArrays(s, e, t), a.update(t, s);
      }),
      (this.renderInstances = function (e, t, A) {
        var r;
        if (o.isWebGL2) r = n;
        else if (null === (r = i.get('ANGLE_instanced_arrays')))
          return void console.error(
            'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.',
          );
        r[o.isWebGL2 ? 'drawArraysInstanced' : 'drawArraysInstancedANGLE'](
          s,
          t,
          A,
          e.maxInstancedCount,
        ),
          a.update(A, s, e.maxInstancedCount);
      });
  }
  function ti(t, A, e) {
    var r;
    function n(e) {
      if ('highp' === e) {
        if (
          0 <
            t.getShaderPrecisionFormat(t.VERTEX_SHADER, t.HIGH_FLOAT)
              .precision &&
          0 <
            t.getShaderPrecisionFormat(t.FRAGMENT_SHADER, t.HIGH_FLOAT)
              .precision
        )
          return 'highp';
        e = 'mediump';
      }
      return 'mediump' === e &&
        0 <
          t.getShaderPrecisionFormat(t.VERTEX_SHADER, t.MEDIUM_FLOAT)
            .precision &&
        0 <
          t.getShaderPrecisionFormat(t.FRAGMENT_SHADER, t.MEDIUM_FLOAT)
            .precision
        ? 'mediump'
        : 'lowp';
    }
    var i =
        'undefined' != typeof WebGL2RenderingContext &&
        t instanceof WebGL2RenderingContext,
      a = void 0 !== e.precision ? e.precision : 'highp',
      o = n(a),
      o =
        (o !== a &&
          (console.warn(
            'THREE.WebGLRenderer:',
            a,
            'not supported, using',
            o,
            'instead.',
          ),
          (a = o)),
        !0 === e.logarithmicDepthBuffer),
      e = t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),
      s = t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),
      l = t.getParameter(t.MAX_TEXTURE_SIZE),
      c = t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),
      u = t.getParameter(t.MAX_VERTEX_ATTRIBS),
      h = t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),
      d = t.getParameter(t.MAX_VARYING_VECTORS),
      p = t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),
      f = 0 < s,
      g = i || !!A.get('OES_texture_float');
    return {
      isWebGL2: i,
      getMaxAnisotropy: function () {
        var e;
        return (
          void 0 === r &&
            ((e = A.get('EXT_texture_filter_anisotropic')),
            (r =
              null !== e
                ? t.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT)
                : 0)),
          r
        );
      },
      getMaxPrecision: n,
      precision: a,
      logarithmicDepthBuffer: o,
      maxTextures: e,
      maxVertexTextures: s,
      maxTextureSize: l,
      maxCubemapSize: c,
      maxAttributes: u,
      maxVertexUniforms: h,
      maxVaryings: d,
      maxFragmentUniforms: p,
      vertexTextures: f,
      floatFragmentTextures: g,
      floatVertexTextures: f && g,
    };
  }
  function Ai() {
    var l = this,
      c = null,
      u = 0,
      h = !1,
      d = !1,
      p = new zA(),
      f = new F(),
      g = { value: null, needsUpdate: !1 };
    function m() {
      g.value !== c && ((g.value = c), (g.needsUpdate = 0 < u)),
        (l.numPlanes = u),
        (l.numIntersection = 0);
    }
    function v(e, t, A, r) {
      var n = null !== e ? e.length : 0,
        i = null;
      if (0 !== n) {
        if (((i = g.value), !0 !== r || null === i)) {
          var r = A + 4 * n,
            a = t.matrixWorldInverse;
          f.getNormalMatrix(a),
            (null === i || i.length < r) && (i = new Float32Array(r));
          for (var o = 0, s = A; o !== n; ++o, s += 4)
            p.copy(e[o]).applyMatrix4(a, f),
              p.normal.toArray(i, s),
              (i[s + 3] = p.constant);
        }
        (g.value = i), (g.needsUpdate = !0);
      }
      return (l.numPlanes = n), i;
    }
    (this.uniform = g),
      (this.numPlanes = 0),
      (this.numIntersection = 0),
      (this.init = function (e, t, A) {
        var r = 0 !== e.length || t || 0 !== u || h;
        return (h = t), (c = v(e, A, 0)), (u = e.length), r;
      }),
      (this.beginShadows = function () {
        (d = !0), v(null);
      }),
      (this.endShadows = function () {
        (d = !1), m();
      }),
      (this.setState = function (e, t, A, r, n, i) {
        if (!h || null === e || 0 === e.length || (d && !A)) d ? v(null) : m();
        else {
          var A = d ? 0 : u,
            a = 4 * A,
            o = n.clippingState || null;
          g.value = o;
          for (var o = v(e, r, a, i), s = 0; s !== a; ++s) o[s] = c[s];
          (n.clippingState = o),
            (this.numIntersection = t ? this.numPlanes : 0),
            (this.numPlanes += A);
        }
      });
  }
  function ri(A) {
    var r = {};
    return {
      get: function (e) {
        if (void 0 !== r[e]) return r[e];
        var t;
        switch (e) {
          case 'WEBGL_depth_texture':
            t =
              A.getExtension('WEBGL_depth_texture') ||
              A.getExtension('MOZ_WEBGL_depth_texture') ||
              A.getExtension('WEBKIT_WEBGL_depth_texture');
            break;
          case 'EXT_texture_filter_anisotropic':
            t =
              A.getExtension('EXT_texture_filter_anisotropic') ||
              A.getExtension('MOZ_EXT_texture_filter_anisotropic') ||
              A.getExtension('WEBKIT_EXT_texture_filter_anisotropic');
            break;
          case 'WEBGL_compressed_texture_s3tc':
            t =
              A.getExtension('WEBGL_compressed_texture_s3tc') ||
              A.getExtension('MOZ_WEBGL_compressed_texture_s3tc') ||
              A.getExtension('WEBKIT_WEBGL_compressed_texture_s3tc');
            break;
          case 'WEBGL_compressed_texture_pvrtc':
            t =
              A.getExtension('WEBGL_compressed_texture_pvrtc') ||
              A.getExtension('WEBKIT_WEBGL_compressed_texture_pvrtc');
            break;
          default:
            t = A.getExtension(e);
        }
        return (
          null === t &&
            console.warn(
              'THREE.WebGLRenderer: ' + e + ' extension not supported.',
            ),
          (r[e] = t)
        );
      },
    };
  }
  function ni(u, h, r) {
    var n = {},
      d = {};
    function i(e) {
      var t,
        e = e.target,
        A = n[e.id];
      for (t in (null !== A.index && h.remove(A.index), A.attributes))
        h.remove(A.attributes[t]);
      e.removeEventListener('dispose', i), delete n[e.id];
      e = d[A.id];
      e && (h.remove(e), delete d[A.id]), r.memory.geometries--;
    }
    return {
      get: function (e, t) {
        var A = n[t.id];
        return (
          A ||
            (t.addEventListener('dispose', i),
            t.isBufferGeometry
              ? (A = t)
              : t.isGeometry &&
                (void 0 === t._bufferGeometry &&
                  (t._bufferGeometry = new $().setFromObject(e)),
                (A = t._bufferGeometry)),
            (n[t.id] = A),
            r.memory.geometries++),
          A
        );
      },
      update: function (e) {
        var t = e.index,
          A = e.attributes;
        for (r in (null !== t && h.update(t, u.ELEMENT_ARRAY_BUFFER), A))
          h.update(A[r], u.ARRAY_BUFFER);
        var r,
          n = e.morphAttributes;
        for (r in n)
          for (var i = n[r], a = 0, o = i.length; a < o; a++)
            h.update(i[a], u.ARRAY_BUFFER);
      },
      getWireframeAttribute: function (e) {
        var t = d[e.id];
        if (!t) {
          var A = [],
            r = e.index,
            n = e.attributes;
          if (null !== r)
            for (var i = 0, a = (c = r.array).length; i < a; i += 3) {
              var o = c[i + 0],
                s = c[i + 1],
                l = c[i + 2];
              A.push(o, s, s, l, l, o);
            }
          else
            for (
              var c, i = 0, a = (c = n.position.array).length / 3 - 1;
              i < a;
              i += 3
            ) {
              (o = i + 0), (s = i + 1), (l = i + 2);
              A.push(o, s, s, l, l, o);
            }
          (t = new (65535 < kr(A) ? Nr : Dr)(A, 1)),
            h.update(t, u.ELEMENT_ARRAY_BUFFER),
            (d[e.id] = t);
        }
        return t;
      },
    };
  }
  function ii(n, i, a, o) {
    var s, l, c;
    (this.setMode = function (e) {
      s = e;
    }),
      (this.setIndex = function (e) {
        (l = e.type), (c = e.bytesPerElement);
      }),
      (this.render = function (e, t) {
        n.drawElements(s, t, l, e * c), a.update(t, s);
      }),
      (this.renderInstances = function (e, t, A) {
        var r;
        if (o.isWebGL2) r = n;
        else if (null === (r = i.get('ANGLE_instanced_arrays')))
          return void console.error(
            'THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.',
          );
        r[o.isWebGL2 ? 'drawElementsInstanced' : 'drawElementsInstancedANGLE'](
          s,
          A,
          l,
          t * c,
          e.maxInstancedCount,
        ),
          a.update(A, s, e.maxInstancedCount);
      });
  }
  function ai(r) {
    var n = { frame: 0, calls: 0, triangles: 0, points: 0, lines: 0 };
    return {
      memory: { geometries: 0, textures: 0 },
      render: n,
      programs: null,
      autoReset: !0,
      reset: function () {
        n.frame++,
          (n.calls = 0),
          (n.triangles = 0),
          (n.points = 0),
          (n.lines = 0);
      },
      update: function (e, t, A) {
        switch (((A = A || 1), n.calls++, t)) {
          case r.TRIANGLES:
            n.triangles += A * (e / 3);
            break;
          case r.TRIANGLE_STRIP:
          case r.TRIANGLE_FAN:
            n.triangles += A * (e - 2);
            break;
          case r.LINES:
            n.lines += A * (e / 2);
            break;
          case r.LINE_STRIP:
            n.lines += A * (e - 1);
            break;
          case r.LINE_LOOP:
            n.lines += A * e;
            break;
          case r.POINTS:
            n.points += A * e;
            break;
          default:
            console.error('THREE.WebGLInfo: Unknown draw mode:', t);
        }
      },
    };
  }
  function oi(e, t) {
    return Math.abs(t[1]) - Math.abs(e[1]);
  }
  function si(d) {
    var p = {},
      f = new Float32Array(8);
    return {
      update: function (e, t, A, r) {
        var n = e.morphTargetInfluences,
          i = n.length;
        if (void 0 === (a = p[t.id])) {
          for (var a = [], o = 0; o < i; o++) a[o] = [o, 0];
          p[t.id] = a;
        }
        for (
          var s = A.morphTargets && t.morphAttributes.position,
            l = A.morphNormals && t.morphAttributes.normal,
            o = 0;
          o < i;
          o++
        )
          0 !== (c = a[o])[1] &&
            (s && t.removeAttribute('morphTarget' + o), l) &&
            t.removeAttribute('morphNormal' + o);
        for (o = 0; o < i; o++) ((c = a[o])[0] = o), (c[1] = n[o]);
        a.sort(oi);
        for (var c, o = 0; o < 8; o++) {
          if ((c = a[o])) {
            var u = c[0],
              h = c[1];
            if (h) {
              s && t.addAttribute('morphTarget' + o, s[u]),
                l && t.addAttribute('morphNormal' + o, l[u]),
                (f[o] = h);
              continue;
            }
          }
          f[o] = 0;
        }
        r.getUniforms().setValue(d, 'morphTargetInfluences', f);
      },
    };
  }
  function li(n, i) {
    var a = {};
    return {
      update: function (e) {
        var t = i.render.frame,
          A = e.geometry,
          r = n.get(e, A);
        return (
          a[r.id] !== t &&
            (A.isGeometry && r.updateFromObject(e), n.update(r), (a[r.id] = t)),
          r
        );
      },
      dispose: function () {
        a = {};
      },
    };
  }
  function ci(e, t, A, r, n, i, a, o, s, l) {
    h.call(
      this,
      (e = void 0 !== e ? e : []),
      (t = void 0 !== t ? t : Ke),
      A,
      r,
      n,
      i,
      a,
      o,
      s,
      l,
    ),
      (this.flipY = !1);
  }
  (t.prototype = Object.assign(Object.create(r.prototype), {
    constructor: t,
    isMaterial: !0,
    onBeforeCompile: function () {},
    setValues: function (e) {
      if (void 0 !== e)
        for (var t in e) {
          var A,
            r = e[t];
          void 0 === r
            ? console.warn(
                "THREE.Material: '" + t + "' parameter is undefined.",
              )
            : 'shading' === t
            ? (console.warn(
                'THREE.' +
                  this.type +
                  ': .shading has been removed. Use the boolean .flatShading instead.',
              ),
              (this.flatShading = 1 === r))
            : void 0 === (A = this[t])
            ? console.warn(
                'THREE.' +
                  this.type +
                  ": '" +
                  t +
                  "' is not a property of this material.",
              )
            : A && A.isColor
            ? A.set(r)
            : A && A.isVector3 && r && r.isVector3
            ? A.copy(r)
            : (this[t] = 'overdraw' === t ? Number(r) : r);
        }
    },
    toJSON: function (e) {
      var t = void 0 === e || 'string' == typeof e,
        A =
          (t && (e = { textures: {}, images: {} }),
          {
            metadata: {
              version: 4.5,
              type: 'Material',
              generator: 'Material.toJSON',
            },
          });
      function r(e) {
        var t,
          A = [];
        for (t in e) {
          var r = e[t];
          delete r.metadata, A.push(r);
        }
        return A;
      }
      return (
        (A.uuid = this.uuid),
        (A.type = this.type),
        '' !== this.name && (A.name = this.name),
        this.color && this.color.isColor && (A.color = this.color.getHex()),
        void 0 !== this.roughness && (A.roughness = this.roughness),
        void 0 !== this.metalness && (A.metalness = this.metalness),
        this.emissive &&
          this.emissive.isColor &&
          (A.emissive = this.emissive.getHex()),
        1 !== this.emissiveIntensity &&
          (A.emissiveIntensity = this.emissiveIntensity),
        this.specular &&
          this.specular.isColor &&
          (A.specular = this.specular.getHex()),
        void 0 !== this.shininess && (A.shininess = this.shininess),
        void 0 !== this.clearCoat && (A.clearCoat = this.clearCoat),
        void 0 !== this.clearCoatRoughness &&
          (A.clearCoatRoughness = this.clearCoatRoughness),
        this.map && this.map.isTexture && (A.map = this.map.toJSON(e).uuid),
        this.alphaMap &&
          this.alphaMap.isTexture &&
          (A.alphaMap = this.alphaMap.toJSON(e).uuid),
        this.lightMap &&
          this.lightMap.isTexture &&
          (A.lightMap = this.lightMap.toJSON(e).uuid),
        this.aoMap &&
          this.aoMap.isTexture &&
          ((A.aoMap = this.aoMap.toJSON(e).uuid),
          (A.aoMapIntensity = this.aoMapIntensity)),
        this.bumpMap &&
          this.bumpMap.isTexture &&
          ((A.bumpMap = this.bumpMap.toJSON(e).uuid),
          (A.bumpScale = this.bumpScale)),
        this.normalMap &&
          this.normalMap.isTexture &&
          ((A.normalMap = this.normalMap.toJSON(e).uuid),
          (A.normalMapType = this.normalMapType),
          (A.normalScale = this.normalScale.toArray())),
        this.displacementMap &&
          this.displacementMap.isTexture &&
          ((A.displacementMap = this.displacementMap.toJSON(e).uuid),
          (A.displacementScale = this.displacementScale),
          (A.displacementBias = this.displacementBias)),
        this.roughnessMap &&
          this.roughnessMap.isTexture &&
          (A.roughnessMap = this.roughnessMap.toJSON(e).uuid),
        this.metalnessMap &&
          this.metalnessMap.isTexture &&
          (A.metalnessMap = this.metalnessMap.toJSON(e).uuid),
        this.emissiveMap &&
          this.emissiveMap.isTexture &&
          (A.emissiveMap = this.emissiveMap.toJSON(e).uuid),
        this.specularMap &&
          this.specularMap.isTexture &&
          (A.specularMap = this.specularMap.toJSON(e).uuid),
        this.envMap &&
          this.envMap.isTexture &&
          ((A.envMap = this.envMap.toJSON(e).uuid),
          (A.reflectivity = this.reflectivity)),
        this.gradientMap &&
          this.gradientMap.isTexture &&
          (A.gradientMap = this.gradientMap.toJSON(e).uuid),
        void 0 !== this.size && (A.size = this.size),
        void 0 !== this.sizeAttenuation &&
          (A.sizeAttenuation = this.sizeAttenuation),
        this.blending !== Ae && (A.blending = this.blending),
        !0 === this.flatShading && (A.flatShading = this.flatShading),
        this.side !== Z && (A.side = this.side),
        0 !== this.vertexColors && (A.vertexColors = this.vertexColors),
        this.opacity < 1 && (A.opacity = this.opacity),
        !0 === this.transparent && (A.transparent = this.transparent),
        (A.depthFunc = this.depthFunc),
        (A.depthTest = this.depthTest),
        (A.depthWrite = this.depthWrite),
        0 !== this.rotation && (A.rotation = this.rotation),
        1 !== this.linewidth && (A.linewidth = this.linewidth),
        void 0 !== this.dashSize && (A.dashSize = this.dashSize),
        void 0 !== this.gapSize && (A.gapSize = this.gapSize),
        void 0 !== this.scale && (A.scale = this.scale),
        !0 === this.dithering && (A.dithering = !0),
        0 < this.alphaTest && (A.alphaTest = this.alphaTest),
        !0 === this.premultipliedAlpha &&
          (A.premultipliedAlpha = this.premultipliedAlpha),
        !0 === this.wireframe && (A.wireframe = this.wireframe),
        1 < this.wireframeLinewidth &&
          (A.wireframeLinewidth = this.wireframeLinewidth),
        'round' !== this.wireframeLinecap &&
          (A.wireframeLinecap = this.wireframeLinecap),
        'round' !== this.wireframeLinejoin &&
          (A.wireframeLinejoin = this.wireframeLinejoin),
        !0 === this.morphTargets && (A.morphTargets = !0),
        !0 === this.skinning && (A.skinning = !0),
        !1 === this.visible && (A.visible = !1),
        '{}' !== JSON.stringify(this.userData) && (A.userData = this.userData),
        t &&
          ((t = r(e.textures)),
          (e = r(e.images)),
          0 < t.length && (A.textures = t),
          0 < e.length) &&
          (A.images = e),
        A
      );
    },
    clone: function () {
      return new this.constructor().copy(this);
    },
    copy: function (e) {
      (this.name = e.name),
        (this.fog = e.fog),
        (this.lights = e.lights),
        (this.blending = e.blending),
        (this.side = e.side),
        (this.flatShading = e.flatShading),
        (this.vertexColors = e.vertexColors),
        (this.opacity = e.opacity),
        (this.transparent = e.transparent),
        (this.blendSrc = e.blendSrc),
        (this.blendDst = e.blendDst),
        (this.blendEquation = e.blendEquation),
        (this.blendSrcAlpha = e.blendSrcAlpha),
        (this.blendDstAlpha = e.blendDstAlpha),
        (this.blendEquationAlpha = e.blendEquationAlpha),
        (this.depthFunc = e.depthFunc),
        (this.depthTest = e.depthTest),
        (this.depthWrite = e.depthWrite),
        (this.colorWrite = e.colorWrite),
        (this.precision = e.precision),
        (this.polygonOffset = e.polygonOffset),
        (this.polygonOffsetFactor = e.polygonOffsetFactor),
        (this.polygonOffsetUnits = e.polygonOffsetUnits),
        (this.dithering = e.dithering),
        (this.alphaTest = e.alphaTest),
        (this.premultipliedAlpha = e.premultipliedAlpha),
        (this.overdraw = e.overdraw),
        (this.visible = e.visible),
        (this.userData = JSON.parse(JSON.stringify(e.userData))),
        (this.clipShadows = e.clipShadows),
        (this.clipIntersection = e.clipIntersection);
      var t = e.clippingPlanes,
        A = null;
      if (null !== t)
        for (var r = t.length, A = new Array(r), n = 0; n !== r; ++n)
          A[n] = t[n].clone();
      return (this.clippingPlanes = A), (this.shadowSide = e.shadowSide), this;
    },
    dispose: function () {
      this.dispatchEvent({ type: 'dispose' });
    },
  })),
    (((Xn.prototype = Object.create(t.prototype)).constructor =
      Xn).prototype.isMeshBasicMaterial = !0),
    (Xn.prototype.copy = function (e) {
      return (
        t.prototype.copy.call(this, e),
        this.color.copy(e.color),
        (this.map = e.map),
        (this.lightMap = e.lightMap),
        (this.lightMapIntensity = e.lightMapIntensity),
        (this.aoMap = e.aoMap),
        (this.aoMapIntensity = e.aoMapIntensity),
        (this.specularMap = e.specularMap),
        (this.alphaMap = e.alphaMap),
        (this.envMap = e.envMap),
        (this.combine = e.combine),
        (this.reflectivity = e.reflectivity),
        (this.refractionRatio = e.refractionRatio),
        (this.wireframe = e.wireframe),
        (this.wireframeLinewidth = e.wireframeLinewidth),
        (this.wireframeLinecap = e.wireframeLinecap),
        (this.wireframeLinejoin = e.wireframeLinejoin),
        (this.skinning = e.skinning),
        (this.morphTargets = e.morphTargets),
        this
      );
    }),
    (((jn.prototype = Object.create(t.prototype)).constructor =
      jn).prototype.isShaderMaterial = !0),
    (jn.prototype.copy = function (e) {
      return (
        t.prototype.copy.call(this, e),
        (this.fragmentShader = e.fragmentShader),
        (this.vertexShader = e.vertexShader),
        (this.uniforms = Te.clone(e.uniforms)),
        (this.defines = Object.assign({}, e.defines)),
        (this.wireframe = e.wireframe),
        (this.wireframeLinewidth = e.wireframeLinewidth),
        (this.lights = e.lights),
        (this.clipping = e.clipping),
        (this.skinning = e.skinning),
        (this.morphTargets = e.morphTargets),
        (this.morphNormals = e.morphNormals),
        (this.extensions = e.extensions),
        this
      );
    }),
    (jn.prototype.toJSON = function (e) {
      e = t.prototype.toJSON.call(this, e);
      return (
        (e.uniforms = this.uniforms),
        (e.vertexShader = this.vertexShader),
        (e.fragmentShader = this.fragmentShader),
        e
      );
    }),
    Object.assign(Wn.prototype, {
      set: function (e, t) {
        return this.origin.copy(e), this.direction.copy(t), this;
      },
      clone: function () {
        return new this.constructor().copy(this);
      },
      copy: function (e) {
        return (
          this.origin.copy(e.origin), this.direction.copy(e.direction), this
        );
      },
      at: function (e, t) {
        return (
          void 0 === t &&
            (console.warn('THREE.Ray: .at() target is now required'),
            (t = new Ce())),
          t.copy(this.direction).multiplyScalar(e).add(this.origin)
        );
      },
      lookAt: function (e) {
        return this.direction.copy(e).sub(this.origin).normalize(), this;
      },
      recast:
        ((gn = new Ce()),
        function (e) {
          return this.origin.copy(this.at(e, gn)), this;
        }),
      closestPointToPoint: function (e, t) {
        void 0 === t &&
          (console.warn(
            'THREE.Ray: .closestPointToPoint() target is now required',
          ),
          (t = new Ce())),
          t.subVectors(e, this.origin);
        e = t.dot(this.direction);
        return e < 0
          ? t.copy(this.origin)
          : t.copy(this.direction).multiplyScalar(e).add(this.origin);
      },
      distanceToPoint: function (e) {
        return Math.sqrt(this.distanceSqToPoint(e));
      },
      distanceSqToPoint:
        ((fn = new Ce()),
        function (e) {
          var t = fn.subVectors(e, this.origin).dot(this.direction);
          return (
            t < 0
              ? this.origin
              : (fn.copy(this.direction).multiplyScalar(t).add(this.origin), fn)
          ).distanceToSquared(e);
        }),
      distanceSqToSegment:
        ((hn = new Ce()),
        (dn = new Ce()),
        (pn = new Ce()),
        function (e, t, A, r) {
          hn.copy(e).add(t).multiplyScalar(0.5),
            dn.copy(t).sub(e).normalize(),
            pn.copy(this.origin).sub(hn);
          var n,
            i,
            a,
            e = 0.5 * e.distanceTo(t),
            t = -this.direction.dot(dn),
            o = pn.dot(this.direction),
            s = -pn.dot(dn),
            l = pn.lengthSq(),
            c = Math.abs(1 - t * t);
          return (
            (c =
              0 < c
                ? ((i = t * o - s),
                  (a = e * c),
                  0 <= (n = t * s - o)
                    ? -a <= i
                      ? i <= a
                        ? (n *= c = 1 / c) * (n + t * (i *= c) + 2 * o) +
                          i * (t * n + i + 2 * s) +
                          l
                        : ((i = e),
                          -(n = Math.max(0, -(t * i + o))) * n +
                            i * (i + 2 * s) +
                            l)
                      : ((i = -e),
                        -(n = Math.max(0, -(t * i + o))) * n +
                          i * (i + 2 * s) +
                          l)
                    : i <= -a
                    ? -(n = Math.max(0, -(-t * e + o))) * n +
                      (i = 0 < n ? -e : Math.min(Math.max(-e, -s), e)) *
                        (i + 2 * s) +
                      l
                    : i <= a
                    ? ((n = 0),
                      (i = Math.min(Math.max(-e, -s), e)) * (i + 2 * s) + l)
                    : -(n = Math.max(0, -(t * e + o))) * n +
                      (i = 0 < n ? e : Math.min(Math.max(-e, -s), e)) *
                        (i + 2 * s) +
                      l)
                : ((i = 0 < t ? -e : e),
                  -(n = Math.max(0, -(t * i + o))) * n + i * (i + 2 * s) + l)),
            A && A.copy(this.direction).multiplyScalar(n).add(this.origin),
            r && r.copy(dn).multiplyScalar(i).add(hn),
            c
          );
        }),
      intersectSphere:
        ((un = new Ce()),
        function (e, t) {
          un.subVectors(e.center, this.origin);
          var A = un.dot(this.direction),
            r = un.dot(un) - A * A,
            e = e.radius * e.radius;
          return e < r ||
            ((r = A + (e = Math.sqrt(e - r))), (A = A - e) < 0 && r < 0)
            ? null
            : A < 0
            ? this.at(r, t)
            : this.at(A, t);
        }),
      intersectsSphere: function (e) {
        return this.distanceToPoint(e.center) <= e.radius;
      },
      distanceToPlane: function (e) {
        var t = e.normal.dot(this.direction);
        return 0 === t
          ? 0 === e.distanceToPoint(this.origin)
            ? 0
            : null
          : 0 <= (e = -(this.origin.dot(e.normal) + e.constant) / t)
          ? e
          : null;
      },
      intersectPlane: function (e, t) {
        e = this.distanceToPlane(e);
        return null === e ? null : this.at(e, t);
      },
      intersectsPlane: function (e) {
        var t = e.distanceToPoint(this.origin);
        return 0 === t || e.normal.dot(this.direction) * t < 0;
      },
      intersectBox: function (e, t) {
        var A,
          r,
          n,
          i = 1 / this.direction.x,
          a = 1 / this.direction.y,
          o = 1 / this.direction.z,
          s = this.origin,
          i =
            0 <= i
              ? ((A = (e.min.x - s.x) * i), (e.max.x - s.x) * i)
              : ((A = (e.max.x - s.x) * i), (e.min.x - s.x) * i),
          a =
            0 <= a
              ? ((n = (e.min.y - s.y) * a), (e.max.y - s.y) * a)
              : ((n = (e.max.y - s.y) * a), (e.min.y - s.y) * a);
        return a < A ||
          i < n ||
          ((A < n || A != A) && (A = n),
          (a < i || i != i) && (i = a),
          (n =
            0 <= o
              ? ((r = (e.min.z - s.z) * o), (e.max.z - s.z) * o)
              : ((r = (e.max.z - s.z) * o), (e.min.z - s.z) * o)) < A) ||
          i < r ||
          ((A < r || A != A) && (A = r), (i = n < i || i != i ? n : i) < 0)
          ? null
          : this.at(0 <= A ? A : i, t);
      },
      intersectsBox:
        ((cn = new Ce()),
        function (e) {
          return null !== this.intersectBox(e, cn);
        }),
      intersectTriangle:
        ((an = new Ce()),
        (on = new Ce()),
        (sn = new Ce()),
        (ln = new Ce()),
        function (e, t, A, r, n) {
          on.subVectors(t, e), sn.subVectors(A, e), ln.crossVectors(on, sn);
          var i,
            t = this.direction.dot(ln);
          if (0 < t) {
            if (r) return null;
            i = 1;
          } else {
            if (!(t < 0)) return null;
            (i = -1), (t = -t);
          }
          an.subVectors(this.origin, e);
          A = i * this.direction.dot(sn.crossVectors(an, sn));
          return A < 0 ||
            (r = i * this.direction.dot(on.cross(an))) < 0 ||
            t < A + r ||
            (e = -i * an.dot(ln)) < 0
            ? null
            : this.at(e / t, n);
        }),
      applyMatrix4: function (e) {
        return (
          this.origin.applyMatrix4(e),
          this.direction.transformDirection(e),
          this
        );
      },
      equals: function (e) {
        return (
          e.origin.equals(this.origin) && e.direction.equals(this.direction)
        );
      },
    }),
    Object.assign(Yn, {
      getNormal:
        ((yn = new Ce()),
        function (e, t, A, r) {
          void 0 === r &&
            (console.warn(
              'THREE.Triangle: .getNormal() target is now required',
            ),
            (r = new Ce())),
            r.subVectors(A, t),
            yn.subVectors(e, t),
            r.cross(yn);
          A = r.lengthSq();
          return 0 < A ? r.multiplyScalar(1 / Math.sqrt(A)) : r.set(0, 0, 0);
        }),
      getBarycoord:
        ((vn = new Ce()),
        (Bn = new Ce()),
        (wn = new Ce()),
        function (e, t, A, r, n) {
          vn.subVectors(r, t), Bn.subVectors(A, t), wn.subVectors(e, t);
          var r = vn.dot(vn),
            A = vn.dot(Bn),
            e = vn.dot(wn),
            t = Bn.dot(Bn),
            i = Bn.dot(wn),
            a = r * t - A * A;
          return (
            void 0 === n &&
              (console.warn(
                'THREE.Triangle: .getBarycoord() target is now required',
              ),
              (n = new Ce())),
            0 == a
              ? n.set(-2, -1, -1)
              : n.set(
                  1 -
                    (t = (t * e - A * i) * (n = 1 / a)) -
                    (a = (r * i - A * e) * n),
                  a,
                  t,
                )
          );
        }),
      containsPoint:
        ((mn = new Ce()),
        function (e, t, A, r) {
          return (
            Yn.getBarycoord(e, t, A, r, mn),
            0 <= mn.x && 0 <= mn.y && mn.x + mn.y <= 1
          );
        }),
    }),
    Object.assign(Yn.prototype, {
      set: function (e, t, A) {
        return this.a.copy(e), this.b.copy(t), this.c.copy(A), this;
      },
      setFromPointsAndIndices: function (e, t, A, r) {
        return this.a.copy(e[t]), this.b.copy(e[A]), this.c.copy(e[r]), this;
      },
      clone: function () {
        return new this.constructor().copy(this);
      },
      copy: function (e) {
        return this.a.copy(e.a), this.b.copy(e.b), this.c.copy(e.c), this;
      },
      getArea:
        ((_n = new Ce()),
        (Un = new Ce()),
        function () {
          return (
            _n.subVectors(this.c, this.b),
            Un.subVectors(this.a, this.b),
            0.5 * _n.cross(Un).length()
          );
        }),
      getMidpoint: function (e) {
        return (
          void 0 === e &&
            (console.warn(
              'THREE.Triangle: .getMidpoint() target is now required',
            ),
            (e = new Ce())),
          e
            .addVectors(this.a, this.b)
            .add(this.c)
            .multiplyScalar(1 / 3)
        );
      },
      getNormal: function (e) {
        return Yn.getNormal(this.a, this.b, this.c, e);
      },
      getPlane: function (e) {
        return (
          void 0 === e &&
            (console.warn('THREE.Triangle: .getPlane() target is now required'),
            (e = new Ce())),
          e.setFromCoplanarPoints(this.a, this.b, this.c)
        );
      },
      getBarycoord: function (e, t) {
        return Yn.getBarycoord(e, this.a, this.b, this.c, t);
      },
      containsPoint: function (e) {
        return Yn.containsPoint(e, this.a, this.b, this.c);
      },
      intersectsBox: function (e) {
        return e.intersectsTriangle(this);
      },
      closestPointToPoint:
        ((En = new Ce()),
        (xn = new Ce()),
        (bn = new Ce()),
        (Cn = new Ce()),
        (Fn = new Ce()),
        (Tn = new Ce()),
        function (e, t) {
          void 0 === t &&
            (console.warn(
              'THREE.Triangle: .closestPointToPoint() target is now required',
            ),
            (t = new Ce()));
          var A = this.a,
            r = this.b,
            n = this.c,
            i =
              (En.subVectors(r, A),
              xn.subVectors(n, A),
              Cn.subVectors(e, A),
              En.dot(Cn)),
            a = xn.dot(Cn);
          if (i <= 0 && a <= 0) return t.copy(A);
          Fn.subVectors(e, r);
          var o = En.dot(Fn),
            s = xn.dot(Fn);
          if (0 <= o && s <= o) return t.copy(r);
          var l = i * s - o * a;
          if (l <= 0 && 0 <= i && o <= 0)
            return (c = i / (i - o)), t.copy(A).addScaledVector(En, c);
          Tn.subVectors(e, n);
          var c,
            u,
            e = En.dot(Tn),
            h = xn.dot(Tn);
          return 0 <= h && e <= h
            ? t.copy(n)
            : (i = e * a - i * h) <= 0 && 0 <= a && h <= 0
            ? ((u = a / (a - h)), t.copy(A).addScaledVector(xn, u))
            : (a = o * h - e * s) <= 0 && 0 <= s - o && 0 <= e - h
            ? (bn.subVectors(n, r),
              (u = (s - o) / (s - o + (e - h))),
              t.copy(r).addScaledVector(bn, u))
            : ((c = i * (n = 1 / (a + i + l))),
              (u = l * n),
              t.copy(A).addScaledVector(En, c).addScaledVector(xn, u));
        }),
      equals: function (e) {
        return e.a.equals(this.a) && e.b.equals(this.b) && e.c.equals(this.c);
      },
    }),
    (f.prototype = Object.assign(Object.create(p.prototype), {
      constructor: f,
      isMesh: !0,
      setDrawMode: function (e) {
        this.drawMode = e;
      },
      copy: function (e) {
        return (
          p.prototype.copy.call(this, e),
          (this.drawMode = e.drawMode),
          void 0 !== e.morphTargetInfluences &&
            (this.morphTargetInfluences = e.morphTargetInfluences.slice()),
          void 0 !== e.morphTargetDictionary &&
            (this.morphTargetDictionary = Object.assign(
              {},
              e.morphTargetDictionary,
            )),
          this
        );
      },
      updateMorphTargets: function () {
        var e,
          t,
          A,
          r = this.geometry;
        if (r.isBufferGeometry) {
          var n = r.morphAttributes,
            i = Object.keys(n);
          if (0 < i.length) {
            var a = n[i[0]];
            if (void 0 !== a)
              for (
                this.morphTargetInfluences = [],
                  this.morphTargetDictionary = {},
                  e = 0,
                  t = a.length;
                e < t;
                e++
              )
                (A = a[e].name || String(e)),
                  this.morphTargetInfluences.push(0),
                  (this.morphTargetDictionary[A] = e);
          }
        } else {
          var o = r.morphTargets;
          if (void 0 !== o && 0 < o.length)
            for (
              this.morphTargetInfluences = [],
                this.morphTargetDictionary = {},
                e = 0,
                t = o.length;
              e < t;
              e++
            )
              (A = o[e].name || String(e)),
                this.morphTargetInfluences.push(0),
                (this.morphTargetDictionary[A] = e);
        }
      },
      raycast:
        ((Mn = new be()),
        (Sn = new Wn()),
        (Qn = new kA()),
        (Ln = new Ce()),
        (Hn = new Ce()),
        (In = new Ce()),
        (Rn = new Ce()),
        (Pn = new Ce()),
        (Dn = new Ce()),
        (On = new he()),
        (Nn = new he()),
        (Gn = new he()),
        (Vn = new Ce()),
        (kn = new Ce()),
        (zn = new Ce()),
        function (e, t) {
          var A = this.geometry,
            r = this.material,
            n = this.matrixWorld;
          if (
            void 0 !== r &&
            (null === A.boundingSphere && A.computeBoundingSphere(),
            Qn.copy(A.boundingSphere),
            Qn.applyMatrix4(n),
            !1 !== e.ray.intersectsSphere(Qn) &&
              (Mn.getInverse(n),
              Sn.copy(e.ray).applyMatrix4(Mn),
              null === A.boundingBox || !1 !== Sn.intersectsBox(A.boundingBox)))
          )
            if (A.isBufferGeometry) {
              var i,
                a,
                o,
                s,
                l,
                c,
                u,
                h,
                d,
                p = A.index,
                f = A.attributes.position,
                g = A.attributes.uv,
                m = A.groups,
                v = A.drawRange;
              if (null !== p)
                if (Array.isArray(r))
                  for (s = 0, c = m.length; s < c; s++)
                    for (
                      d = r[(h = m[s]).materialIndex],
                        l = Math.max(h.start, v.start),
                        u = Math.min(h.start + h.count, v.start + v.count);
                      l < u;
                      l += 3
                    )
                      (i = p.getX(l)),
                        (a = p.getX(l + 1)),
                        (o = p.getX(l + 2)),
                        (_ = qn(this, d, e, Sn, f, g, i, a, o)) &&
                          ((_.faceIndex = Math.floor(l / 3)), t.push(_));
                else
                  for (
                    s = Math.max(0, v.start),
                      c = Math.min(p.count, v.start + v.count);
                    s < c;
                    s += 3
                  )
                    (i = p.getX(s)),
                      (a = p.getX(s + 1)),
                      (o = p.getX(s + 2)),
                      (_ = qn(this, r, e, Sn, f, g, i, a, o)) &&
                        ((_.faceIndex = Math.floor(s / 3)), t.push(_));
              else if (void 0 !== f)
                if (Array.isArray(r))
                  for (s = 0, c = m.length; s < c; s++)
                    for (
                      d = r[(h = m[s]).materialIndex],
                        l = Math.max(h.start, v.start),
                        u = Math.min(h.start + h.count, v.start + v.count);
                      l < u;
                      l += 3
                    )
                      (_ = qn(
                        this,
                        d,
                        e,
                        Sn,
                        f,
                        g,
                        (i = l),
                        (a = l + 1),
                        (o = l + 2),
                      )) && ((_.faceIndex = Math.floor(l / 3)), t.push(_));
                else
                  for (
                    s = Math.max(0, v.start),
                      c = Math.min(f.count, v.start + v.count);
                    s < c;
                    s += 3
                  )
                    (_ = qn(
                      this,
                      r,
                      e,
                      Sn,
                      f,
                      g,
                      (i = s),
                      (a = s + 1),
                      (o = s + 2),
                    )) && ((_.faceIndex = Math.floor(s / 3)), t.push(_));
            } else if (A.isGeometry) {
              var B,
                w,
                y,
                E,
                x = Array.isArray(r),
                b = A.vertices,
                C = A.faces,
                n = A.faceVertexUvs[0];
              0 < n.length && (E = n);
              for (var F = 0, T = C.length; F < T; F++) {
                var _,
                  U = C[F],
                  M = x ? r[U.materialIndex] : r;
                if (void 0 !== M) {
                  if (
                    ((B = b[U.a]),
                    (w = b[U.b]),
                    (y = b[U.c]),
                    !0 === M.morphTargets)
                  ) {
                    var S = A.morphTargets,
                      Q = this.morphTargetInfluences;
                    Ln.set(0, 0, 0), Hn.set(0, 0, 0), In.set(0, 0, 0);
                    for (var L = 0, R = S.length; L < R; L++) {
                      var H,
                        I = Q[L];
                      0 !== I &&
                        ((H = S[L].vertices),
                        Ln.addScaledVector(Rn.subVectors(H[U.a], B), I),
                        Hn.addScaledVector(Pn.subVectors(H[U.b], w), I),
                        In.addScaledVector(Dn.subVectors(H[U.c], y), I));
                    }
                    Ln.add(B),
                      Hn.add(w),
                      In.add(y),
                      (B = Ln),
                      (w = Hn),
                      (y = In);
                  }
                  (_ = Zn(this, M, e, Sn, B, w, y, kn)) &&
                    (E &&
                      E[F] &&
                      ((M = E[F]),
                      On.copy(M[0]),
                      Nn.copy(M[1]),
                      Gn.copy(M[2]),
                      (_.uv = Jn(kn, B, w, y, On, Nn, Gn))),
                    (_.face = U),
                    (_.faceIndex = F),
                    t.push(_));
                }
              }
            }
        }),
      clone: function () {
        return new this.constructor(this.geometry, this.material).copy(this);
      },
    })),
    (((ci.prototype = Object.create(h.prototype)).constructor =
      ci).prototype.isCubeTexture = !0),
    Object.defineProperty(ci.prototype, 'images', {
      get: function () {
        return this.image;
      },
      set: function (e) {
        this.image = e;
      },
    });
  var ui = new h(),
    hi = new ci();
  function di() {
    (this.seq = []), (this.map = {});
  }
  var pi = [],
    fi = [],
    gi = new Float32Array(16),
    mi = new Float32Array(9),
    vi = new Float32Array(4);
  function Bi(e, t, A) {
    var r = e[0];
    if (r <= 0 || 0 < r) return e;
    var n = t * A,
      i = pi[n];
    if ((void 0 === i && ((i = new Float32Array(n)), (pi[n] = i)), 0 !== t)) {
      r.toArray(i, 0);
      for (var a = 1, o = 0; a !== t; ++a) e[a].toArray(i, (o += A));
    }
    return i;
  }
  function o(e, t) {
    if (e.length !== t.length) return !1;
    for (var A = 0, r = e.length; A < r; A++) if (e[A] !== t[A]) return !1;
    return !0;
  }
  function s(e, t) {
    for (var A = 0, r = t.length; A < r; A++) e[A] = t[A];
  }
  function wi(e, t) {
    var A = fi[t];
    void 0 === A && ((A = new Int32Array(t)), (fi[t] = A));
    for (var r = 0; r !== t; ++r) A[r] = e.allocTextureUnit();
    return A;
  }
  function yi(e, t) {
    var A = this.cache;
    A[0] !== t && (e.uniform1f(this.addr, t), (A[0] = t));
  }
  function Ei(e, t) {
    var A = this.cache;
    A[0] !== t && (e.uniform1i(this.addr, t), (A[0] = t));
  }
  function xi(e, t) {
    var A = this.cache;
    void 0 !== t.x
      ? (A[0] === t.x && A[1] === t.y) ||
        (e.uniform2f(this.addr, t.x, t.y), (A[0] = t.x), (A[1] = t.y))
      : o(A, t) || (e.uniform2fv(this.addr, t), s(A, t));
  }
  function bi(e, t) {
    var A = this.cache;
    void 0 !== t.x
      ? (A[0] === t.x && A[1] === t.y && A[2] === t.z) ||
        (e.uniform3f(this.addr, t.x, t.y, t.z),
        (A[0] = t.x),
        (A[1] = t.y),
        (A[2] = t.z))
      : void 0 !== t.r
      ? (A[0] === t.r && A[1] === t.g && A[2] === t.b) ||
        (e.uniform3f(this.addr, t.r, t.g, t.b),
        (A[0] = t.r),
        (A[1] = t.g),
        (A[2] = t.b))
      : o(A, t) || (e.uniform3fv(this.addr, t), s(A, t));
  }
  function Ci(e, t) {
    var A = this.cache;
    void 0 !== t.x
      ? (A[0] === t.x && A[1] === t.y && A[2] === t.z && A[3] === t.w) ||
        (e.uniform4f(this.addr, t.x, t.y, t.z, t.w),
        (A[0] = t.x),
        (A[1] = t.y),
        (A[2] = t.z),
        (A[3] = t.w))
      : o(A, t) || (e.uniform4fv(this.addr, t), s(A, t));
  }
  function Fi(e, t) {
    var A = this.cache,
      r = t.elements;
    void 0 === r
      ? o(A, t) || (e.uniformMatrix2fv(this.addr, !1, t), s(A, t))
      : o(A, r) || (vi.set(r), e.uniformMatrix2fv(this.addr, !1, vi), s(A, r));
  }
  function Ti(e, t) {
    var A = this.cache,
      r = t.elements;
    void 0 === r
      ? o(A, t) || (e.uniformMatrix3fv(this.addr, !1, t), s(A, t))
      : o(A, r) || (mi.set(r), e.uniformMatrix3fv(this.addr, !1, mi), s(A, r));
  }
  function _i(e, t) {
    var A = this.cache,
      r = t.elements;
    void 0 === r
      ? o(A, t) || (e.uniformMatrix4fv(this.addr, !1, t), s(A, t))
      : o(A, r) || (gi.set(r), e.uniformMatrix4fv(this.addr, !1, gi), s(A, r));
  }
  function Ui(e, t, A) {
    var r = this.cache,
      n = A.allocTextureUnit();
    r[0] !== n && (e.uniform1i(this.addr, n), (r[0] = n)),
      A.setTexture2D(t || ui, n);
  }
  function Mi(e, t, A) {
    var r = this.cache,
      n = A.allocTextureUnit();
    r[0] !== n && (e.uniform1i(this.addr, n), (r[0] = n)),
      A.setTextureCube(t || hi, n);
  }
  function Si(e, t) {
    var A = this.cache;
    o(A, t) || (e.uniform2iv(this.addr, t), s(A, t));
  }
  function Qi(e, t) {
    var A = this.cache;
    o(A, t) || (e.uniform3iv(this.addr, t), s(A, t));
  }
  function Li(e, t) {
    var A = this.cache;
    o(A, t) || (e.uniform4iv(this.addr, t), s(A, t));
  }
  function Hi(e, t) {
    var A = this.cache;
    o(A, t) || (e.uniform1fv(this.addr, t), s(A, t));
  }
  function Ii(e, t) {
    var A = this.cache;
    o(A, t) || (e.uniform1iv(this.addr, t), s(A, t));
  }
  function Ri(e, t) {
    var A = this.cache,
      t = Bi(t, this.size, 2);
    o(A, t) || (e.uniform2fv(this.addr, t), this.updateCache(t));
  }
  function Pi(e, t) {
    var A = this.cache,
      t = Bi(t, this.size, 3);
    o(A, t) || (e.uniform3fv(this.addr, t), this.updateCache(t));
  }
  function Di(e, t) {
    var A = this.cache,
      t = Bi(t, this.size, 4);
    o(A, t) || (e.uniform4fv(this.addr, t), this.updateCache(t));
  }
  function Oi(e, t) {
    var A = this.cache,
      t = Bi(t, this.size, 4);
    o(A, t) || (e.uniformMatrix2fv(this.addr, !1, t), this.updateCache(t));
  }
  function Ni(e, t) {
    var A = this.cache,
      t = Bi(t, this.size, 9);
    o(A, t) || (e.uniformMatrix3fv(this.addr, !1, t), this.updateCache(t));
  }
  function Gi(e, t) {
    var A = this.cache,
      t = Bi(t, this.size, 16);
    o(A, t) || (e.uniformMatrix4fv(this.addr, !1, t), this.updateCache(t));
  }
  function Vi(e, t, A) {
    var r = this.cache,
      n = t.length,
      i = wi(A, n);
    !1 === o(r, i) && (e.uniform1iv(this.addr, i), s(r, i));
    for (var a = 0; a !== n; ++a) A.setTexture2D(t[a] || ui, i[a]);
  }
  function ki(e, t, A) {
    var r = this.cache,
      n = t.length,
      i = wi(A, n);
    !1 === o(r, i) && (e.uniform1iv(this.addr, i), s(r, i));
    for (var a = 0; a !== n; ++a) A.setTextureCube(t[a] || hi, i[a]);
  }
  function zi(e, t, A) {
    (this.id = e),
      (this.addr = A),
      (this.cache = []),
      (this.setValue = (function (e) {
        switch (e) {
          case 5126:
            return yi;
          case 35664:
            return xi;
          case 35665:
            return bi;
          case 35666:
            return Ci;
          case 35674:
            return Fi;
          case 35675:
            return Ti;
          case 35676:
            return _i;
          case 35678:
          case 36198:
            return Ui;
          case 35680:
            return Mi;
          case 5124:
          case 35670:
            return Ei;
          case 35667:
          case 35671:
            return Si;
          case 35668:
          case 35672:
            return Qi;
          case 35669:
          case 35673:
            return Li;
        }
      })(t.type));
  }
  function Ki(e, t, A) {
    (this.id = e),
      (this.addr = A),
      (this.cache = []),
      (this.size = t.size),
      (this.setValue = (function (e) {
        switch (e) {
          case 5126:
            return Hi;
          case 35664:
            return Ri;
          case 35665:
            return Pi;
          case 35666:
            return Di;
          case 35674:
            return Oi;
          case 35675:
            return Ni;
          case 35676:
            return Gi;
          case 35678:
            return Vi;
          case 35680:
            return ki;
          case 5124:
          case 35670:
            return Ii;
          case 35667:
          case 35671:
            return Si;
          case 35668:
          case 35672:
            return Qi;
          case 35669:
          case 35673:
            return Li;
        }
      })(t.type));
  }
  function Xi(e) {
    (this.id = e), di.call(this);
  }
  (Ki.prototype.updateCache = function (e) {
    var t = this.cache;
    e instanceof Float32Array &&
      t.length !== e.length &&
      (this.cache = new Float32Array(e.length)),
      s(t, e);
  }),
    (Xi.prototype.setValue = function (e, t, A) {
      for (var r = this.seq, n = 0, i = r.length; n !== i; ++n) {
        var a = r[n];
        a.setValue(e, t[a.id], A);
      }
    });
  var ji = /([\w\d_]+)(\])?(\[|\.)?/g;
  function Wi(e, t) {
    e.seq.push(t), (e.map[t.id] = t);
  }
  function Yi(e, t, A) {
    di.call(this), (this.renderer = A);
    for (
      var r = e.getProgramParameter(t, e.ACTIVE_UNIFORMS), n = 0;
      n < r;
      ++n
    ) {
      var i = e.getActiveUniform(t, n),
        a = e.getUniformLocation(t, i.name),
        o = ((f = p = d = h = u = c = l = s = o = void 0), i),
        s = a,
        l = this,
        c = o.name,
        u = c.length;
      for (ji.lastIndex = 0; ; ) {
        var h = ji.exec(c),
          d = ji.lastIndex,
          p = h[1],
          f = ']' === h[2],
          h = h[3];
        if ((f && (p |= 0), void 0 === h || ('[' === h && d + 2 === u))) {
          Wi(l, new (void 0 === h ? zi : Ki)(p, o, s));
          break;
        }
        f = l.map[p];
        void 0 === f && Wi(l, (f = new Xi(p))), (l = f);
      }
    }
  }
  function Ji(e, t, A) {
    var r = e.createShader(t);
    return (
      e.shaderSource(r, A),
      e.compileShader(r),
      !1 === e.getShaderParameter(r, e.COMPILE_STATUS) &&
        console.error("THREE.WebGLShader: Shader couldn't compile."),
      '' !== e.getShaderInfoLog(r) &&
        console.warn(
          'THREE.WebGLShader: gl.getShaderInfoLog()',
          t === e.VERTEX_SHADER ? 'vertex' : 'fragment',
          e.getShaderInfoLog(r),
          (function (e) {
            for (var t = e.split('\n'), A = 0; A < t.length; A++)
              t[A] = A + 1 + ': ' + t[A];
            return t.join('\n');
          })(A),
        ),
      r
    );
  }
  (Yi.prototype.setValue = function (e, t, A) {
    t = this.map[t];
    void 0 !== t && t.setValue(e, A, this.renderer);
  }),
    (Yi.prototype.setOptional = function (e, t, A) {
      t = t[A];
      void 0 !== t && this.setValue(e, A, t);
    }),
    (Yi.upload = function (e, t, A, r) {
      for (var n = 0, i = t.length; n !== i; ++n) {
        var a = t[n],
          o = A[a.id];
        !1 !== o.needsUpdate && a.setValue(e, o.value, r);
      }
    }),
    (Yi.seqWithValue = function (e, t) {
      for (var A = [], r = 0, n = e.length; r !== n; ++r) {
        var i = e[r];
        i.id in t && A.push(i);
      }
      return A;
    });
  var Zi = 0;
  function qi(e) {
    switch (e) {
      case tA:
        return ['Linear', '( value )'];
      case 3001:
        return ['sRGB', '( value )'];
      case 3002:
        return ['RGBE', '( value )'];
      case 3004:
        return ['RGBM', '( value, 7.0 )'];
      case 3005:
        return ['RGBM', '( value, 16.0 )'];
      case 3006:
        return ['RGBD', '( value, 256.0 )'];
      case AA:
        return ['Gamma', '( value, float( GAMMA_FACTOR ) )'];
      default:
        throw new Error('unsupported encoding: ' + e);
    }
  }
  function $i(e, t) {
    t = qi(t);
    return (
      'vec4 ' +
      e +
      '( vec4 value ) { return ' +
      t[0] +
      'ToLinear' +
      t[1] +
      '; }'
    );
  }
  function ea(e) {
    return '' !== e;
  }
  function ta(e, t) {
    return e
      .replace(/NUM_DIR_LIGHTS/g, t.numDirLights)
      .replace(/NUM_SPOT_LIGHTS/g, t.numSpotLights)
      .replace(/NUM_RECT_AREA_LIGHTS/g, t.numRectAreaLights)
      .replace(/NUM_POINT_LIGHTS/g, t.numPointLights)
      .replace(/NUM_HEMI_LIGHTS/g, t.numHemiLights);
  }
  function Aa(e, t) {
    return e
      .replace(/NUM_CLIPPING_PLANES/g, t.numClippingPlanes)
      .replace(
        /UNION_CLIPPING_PLANES/g,
        t.numClippingPlanes - t.numClipIntersection,
      );
  }
  function ra(e) {
    return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm, function (e, t) {
      var A = b[t];
      if (void 0 === A) throw new Error('Can not resolve #include <' + t + '>');
      return ra(A);
    });
  }
  function na(e) {
    return e.replace(
      /#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,
      function (e, t, A, r) {
        for (var n = '', i = parseInt(t); i < parseInt(A); i++)
          n += r.replace(/\[ i \]/g, '[ ' + i + ' ]');
        return n;
      },
    );
  }
  function ia(e, t, A, r, n, i, a) {
    var o = e.context,
      s = r.defines,
      l = n.vertexShader,
      c = n.fragmentShader,
      u = 'SHADOWMAP_TYPE_BASIC',
      h =
        (i.shadowMapType === Y
          ? (u = 'SHADOWMAP_TYPE_PCF')
          : i.shadowMapType === J && (u = 'SHADOWMAP_TYPE_PCF_SOFT'),
        'ENVMAP_TYPE_CUBE'),
      d = 'ENVMAP_MODE_REFLECTION',
      p = 'ENVMAP_BLENDING_MULTIPLY';
    if (i.envMap) {
      switch (r.envMap.mapping) {
        case Ke:
        case Xe:
          h = 'ENVMAP_TYPE_CUBE';
          break;
        case Je:
        case Ze:
          h = 'ENVMAP_TYPE_CUBE_UV';
          break;
        case je:
        case We:
          h = 'ENVMAP_TYPE_EQUIREC';
          break;
        case Ye:
          h = 'ENVMAP_TYPE_SPHERE';
      }
      switch (r.envMap.mapping) {
        case Xe:
        case We:
          d = 'ENVMAP_MODE_REFRACTION';
      }
      switch (r.combine) {
        case Ge:
          p = 'ENVMAP_BLENDING_MULTIPLY';
          break;
        case Ve:
          p = 'ENVMAP_BLENDING_MIX';
          break;
        case ke:
          p = 'ENVMAP_BLENDING_ADD';
      }
    }
    var f,
      g,
      m,
      v,
      B,
      w = 0 < e.gammaFactor ? e.gammaFactor : 1,
      y = a.isWebGL2
        ? ''
        : ((y = r.extensions),
          (E = i),
          (m = t),
          [
            (y = y || {}).derivatives ||
            E.envMapCubeUV ||
            E.bumpMap ||
            (E.normalMap && !E.objectSpaceNormalMap) ||
            E.flatShading
              ? '#extension GL_OES_standard_derivatives : enable'
              : '',
            (y.fragDepth || E.logarithmicDepthBuffer) && m.get('EXT_frag_depth')
              ? '#extension GL_EXT_frag_depth : enable'
              : '',
            y.drawBuffers && m.get('WEBGL_draw_buffers')
              ? '#extension GL_EXT_draw_buffers : require'
              : '',
            (y.shaderTextureLOD || E.envMap) && m.get('EXT_shader_texture_lod')
              ? '#extension GL_EXT_shader_texture_lod : enable'
              : '',
          ]
            .filter(ea)
            .join('\n')),
      E = (function (e) {
        var t,
          A = [];
        for (t in e) {
          var r = e[t];
          !1 !== r && A.push('#define ' + t + ' ' + r);
        }
        return A.join('\n');
      })(s),
      x = o.createProgram(),
      t =
        (r.isRawShaderMaterial
          ? (0 < (f = [E].filter(ea).join('\n')).length && (f += '\n'),
            0 < (g = [y, E].filter(ea).join('\n')).length && (g += '\n'))
          : ((f = [
              'precision ' + i.precision + ' float;',
              'precision ' + i.precision + ' int;',
              '#define SHADER_NAME ' + n.name,
              E,
              i.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '',
              '#define GAMMA_FACTOR ' + w,
              '#define MAX_BONES ' + i.maxBones,
              i.useFog && i.fog ? '#define USE_FOG' : '',
              i.useFog && i.fogExp ? '#define FOG_EXP2' : '',
              i.map ? '#define USE_MAP' : '',
              i.envMap ? '#define USE_ENVMAP' : '',
              i.envMap ? '#define ' + d : '',
              i.lightMap ? '#define USE_LIGHTMAP' : '',
              i.aoMap ? '#define USE_AOMAP' : '',
              i.emissiveMap ? '#define USE_EMISSIVEMAP' : '',
              i.bumpMap ? '#define USE_BUMPMAP' : '',
              i.normalMap ? '#define USE_NORMALMAP' : '',
              i.normalMap && i.objectSpaceNormalMap
                ? '#define OBJECTSPACE_NORMALMAP'
                : '',
              i.displacementMap && i.supportsVertexTextures
                ? '#define USE_DISPLACEMENTMAP'
                : '',
              i.specularMap ? '#define USE_SPECULARMAP' : '',
              i.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',
              i.metalnessMap ? '#define USE_METALNESSMAP' : '',
              i.alphaMap ? '#define USE_ALPHAMAP' : '',
              i.vertexColors ? '#define USE_COLOR' : '',
              i.flatShading ? '#define FLAT_SHADED' : '',
              i.skinning ? '#define USE_SKINNING' : '',
              i.useVertexTexture ? '#define BONE_TEXTURE' : '',
              i.morphTargets ? '#define USE_MORPHTARGETS' : '',
              i.morphNormals && !1 === i.flatShading
                ? '#define USE_MORPHNORMALS'
                : '',
              i.doubleSided ? '#define DOUBLE_SIDED' : '',
              i.flipSided ? '#define FLIP_SIDED' : '',
              i.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',
              i.shadowMapEnabled ? '#define ' + u : '',
              i.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',
              i.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',
              i.logarithmicDepthBuffer &&
              (a.isWebGL2 || t.get('EXT_frag_depth'))
                ? '#define USE_LOGDEPTHBUF_EXT'
                : '',
              'uniform mat4 modelMatrix;',
              'uniform mat4 modelViewMatrix;',
              'uniform mat4 projectionMatrix;',
              'uniform mat4 viewMatrix;',
              'uniform mat3 normalMatrix;',
              'uniform vec3 cameraPosition;',
              'attribute vec3 position;',
              'attribute vec3 normal;',
              'attribute vec2 uv;',
              '#ifdef USE_COLOR',
              '\tattribute vec3 color;',
              '#endif',
              '#ifdef USE_MORPHTARGETS',
              '\tattribute vec3 morphTarget0;',
              '\tattribute vec3 morphTarget1;',
              '\tattribute vec3 morphTarget2;',
              '\tattribute vec3 morphTarget3;',
              '\t#ifdef USE_MORPHNORMALS',
              '\t\tattribute vec3 morphNormal0;',
              '\t\tattribute vec3 morphNormal1;',
              '\t\tattribute vec3 morphNormal2;',
              '\t\tattribute vec3 morphNormal3;',
              '\t#else',
              '\t\tattribute vec3 morphTarget4;',
              '\t\tattribute vec3 morphTarget5;',
              '\t\tattribute vec3 morphTarget6;',
              '\t\tattribute vec3 morphTarget7;',
              '\t#endif',
              '#endif',
              '#ifdef USE_SKINNING',
              '\tattribute vec4 skinIndex;',
              '\tattribute vec4 skinWeight;',
              '#endif',
              '\n',
            ]
              .filter(ea)
              .join('\n')),
            (g = [
              y,
              'precision ' + i.precision + ' float;',
              'precision ' + i.precision + ' int;',
              '#define SHADER_NAME ' + n.name,
              E,
              i.alphaTest
                ? '#define ALPHATEST ' +
                  i.alphaTest +
                  (i.alphaTest % 1 ? '' : '.0')
                : '',
              '#define GAMMA_FACTOR ' + w,
              i.useFog && i.fog ? '#define USE_FOG' : '',
              i.useFog && i.fogExp ? '#define FOG_EXP2' : '',
              i.map ? '#define USE_MAP' : '',
              i.envMap ? '#define USE_ENVMAP' : '',
              i.envMap ? '#define ' + h : '',
              i.envMap ? '#define ' + d : '',
              i.envMap ? '#define ' + p : '',
              i.lightMap ? '#define USE_LIGHTMAP' : '',
              i.aoMap ? '#define USE_AOMAP' : '',
              i.emissiveMap ? '#define USE_EMISSIVEMAP' : '',
              i.bumpMap ? '#define USE_BUMPMAP' : '',
              i.normalMap ? '#define USE_NORMALMAP' : '',
              i.normalMap && i.objectSpaceNormalMap
                ? '#define OBJECTSPACE_NORMALMAP'
                : '',
              i.specularMap ? '#define USE_SPECULARMAP' : '',
              i.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',
              i.metalnessMap ? '#define USE_METALNESSMAP' : '',
              i.alphaMap ? '#define USE_ALPHAMAP' : '',
              i.vertexColors ? '#define USE_COLOR' : '',
              i.gradientMap ? '#define USE_GRADIENTMAP' : '',
              i.flatShading ? '#define FLAT_SHADED' : '',
              i.doubleSided ? '#define DOUBLE_SIDED' : '',
              i.flipSided ? '#define FLIP_SIDED' : '',
              i.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',
              i.shadowMapEnabled ? '#define ' + u : '',
              i.premultipliedAlpha ? '#define PREMULTIPLIED_ALPHA' : '',
              i.physicallyCorrectLights
                ? '#define PHYSICALLY_CORRECT_LIGHTS'
                : '',
              i.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',
              i.logarithmicDepthBuffer &&
              (a.isWebGL2 || t.get('EXT_frag_depth'))
                ? '#define USE_LOGDEPTHBUF_EXT'
                : '',
              i.envMap && (a.isWebGL2 || t.get('EXT_shader_texture_lod'))
                ? '#define TEXTURE_LOD_EXT'
                : '',
              'uniform mat4 viewMatrix;',
              'uniform vec3 cameraPosition;',
              i.toneMapping !== ze ? '#define TONE_MAPPING' : '',
              i.toneMapping !== ze ? b.tonemapping_pars_fragment : '',
              i.toneMapping !== ze
                ? (function (e, t) {
                    var A;
                    switch (t) {
                      case 1:
                        A = 'Linear';
                        break;
                      case 2:
                        A = 'Reinhard';
                        break;
                      case 3:
                        A = 'Uncharted2';
                        break;
                      case 4:
                        A = 'OptimizedCineon';
                        break;
                      default:
                        throw new Error('unsupported toneMapping: ' + t);
                    }
                    return (
                      'vec3 ' +
                      e +
                      '( vec3 color ) { return ' +
                      A +
                      'ToneMapping( color ); }'
                    );
                  })('toneMapping', i.toneMapping)
                : '',
              i.dithering ? '#define DITHERING' : '',
              i.outputEncoding ||
              i.mapEncoding ||
              i.envMapEncoding ||
              i.emissiveMapEncoding
                ? b.encodings_pars_fragment
                : '',
              i.mapEncoding ? $i('mapTexelToLinear', i.mapEncoding) : '',
              i.envMapEncoding
                ? $i('envMapTexelToLinear', i.envMapEncoding)
                : '',
              i.emissiveMapEncoding
                ? $i('emissiveMapTexelToLinear', i.emissiveMapEncoding)
                : '',
              i.outputEncoding
                ? ((m = 'linearToOutputTexel'),
                  (s = qi((s = i.outputEncoding))),
                  'vec4 ' +
                    m +
                    '( vec4 value ) { return LinearTo' +
                    s[0] +
                    s[1] +
                    '; }')
                : '',
              i.depthPacking ? '#define DEPTH_PACKING ' + r.depthPacking : '',
              '\n',
            ]
              .filter(ea)
              .join('\n'))),
        (l = Aa((l = ta((l = ra(l)), i)), i)),
        (c = Aa((c = ta((c = ra(c)), i)), i)),
        (l = na(l)),
        (c = na(c)),
        a.isWebGL2 &&
          !r.isRawShaderMaterial &&
          ((w = !1),
          (u = /^\s*#version\s+300\s+es\s*\n/),
          r.isShaderMaterial &&
            null !== l.match(u) &&
            null !== c.match(u) &&
            ((w = !0), (l = l.replace(u, '')), (c = c.replace(u, ''))),
          (f =
            [
              '#version 300 es\n',
              '#define attribute in',
              '#define varying out',
              '#define texture2D texture',
            ].join('\n') +
            '\n' +
            f),
          (g =
            [
              '#version 300 es\n',
              '#define varying in',
              w ? '' : 'out highp vec4 pc_fragColor;',
              w ? '' : '#define gl_FragColor pc_fragColor',
              '#define gl_FragDepthEXT gl_FragDepth',
              '#define texture2D texture',
              '#define textureCube texture',
              '#define texture2DProj textureProj',
              '#define texture2DLodEXT textureLod',
              '#define texture2DProjLodEXT textureProjLod',
              '#define textureCubeLodEXT textureLod',
              '#define texture2DGradEXT textureGrad',
              '#define texture2DProjGradEXT textureProjGrad',
              '#define textureCubeGradEXT textureGrad',
            ].join('\n') +
            '\n' +
            g)),
        f + l),
      s = g + c,
      a = Ji(o, o.VERTEX_SHADER, t),
      u = Ji(o, o.FRAGMENT_SHADER, s),
      w =
        (o.attachShader(x, a),
        o.attachShader(x, u),
        void 0 !== r.index0AttributeName
          ? o.bindAttribLocation(x, 0, r.index0AttributeName)
          : !0 === i.morphTargets && o.bindAttribLocation(x, 0, 'position'),
        o.linkProgram(x),
        o.getProgramInfoLog(x).trim()),
      l = o.getShaderInfoLog(a).trim(),
      c = o.getShaderInfoLog(u).trim(),
      t = !0,
      s = !0;
    return (
      !1 === o.getProgramParameter(x, o.LINK_STATUS)
        ? ((t = !1),
          console.error(
            'THREE.WebGLProgram: shader error: ',
            o.getError(),
            'gl.VALIDATE_STATUS',
            o.getProgramParameter(x, o.VALIDATE_STATUS),
            'gl.getProgramInfoLog',
            w,
            l,
            c,
          ))
        : '' !== w
        ? console.warn('THREE.WebGLProgram: gl.getProgramInfoLog()', w)
        : ('' !== l && '' !== c) || (s = !1),
      s &&
        (this.diagnostics = {
          runnable: t,
          material: r,
          programLog: w,
          vertexShader: { log: l, prefix: f },
          fragmentShader: { log: c, prefix: g },
        }),
      o.deleteShader(a),
      o.deleteShader(u),
      (this.getUniforms = function () {
        return (v = void 0 === v ? new Yi(o, x, e) : v);
      }),
      (this.getAttributes = function () {
        return (B =
          void 0 === B
            ? (function (e, t) {
                for (
                  var A = {},
                    r = e.getProgramParameter(t, e.ACTIVE_ATTRIBUTES),
                    n = 0;
                  n < r;
                  n++
                ) {
                  var i = e.getActiveAttrib(t, n).name;
                  A[i] = e.getAttribLocation(t, i);
                }
                return A;
              })(o, x)
            : B);
      }),
      (this.destroy = function () {
        o.deleteProgram(x), (this.program = void 0);
      }),
      Object.defineProperties(this, {
        uniforms: {
          get: function () {
            return (
              console.warn(
                'THREE.WebGLProgram: .uniforms is now .getUniforms().',
              ),
              this.getUniforms()
            );
          },
        },
        attributes: {
          get: function () {
            return (
              console.warn(
                'THREE.WebGLProgram: .attributes is now .getAttributes().',
              ),
              this.getAttributes()
            );
          },
        },
      }),
      (this.name = n.name),
      (this.id = Zi++),
      (this.code = A),
      (this.usedTimes = 1),
      (this.program = x),
      (this.vertexShader = a),
      (this.fragmentShader = u),
      this
    );
  }
  function aa(u, s, h) {
    var l = [],
      d = {
        MeshDepthMaterial: 'depth',
        MeshDistanceMaterial: 'distanceRGBA',
        MeshNormalMaterial: 'normal',
        MeshBasicMaterial: 'basic',
        MeshLambertMaterial: 'lambert',
        MeshPhongMaterial: 'phong',
        MeshToonMaterial: 'phong',
        MeshStandardMaterial: 'physical',
        MeshPhysicalMaterial: 'physical',
        LineBasicMaterial: 'basic',
        LineDashedMaterial: 'dashed',
        PointsMaterial: 'points',
        ShadowMaterial: 'shadow',
        SpriteMaterial: 'sprite',
      },
      i = [
        'precision',
        'supportsVertexTextures',
        'map',
        'mapEncoding',
        'envMap',
        'envMapMode',
        'envMapEncoding',
        'lightMap',
        'aoMap',
        'emissiveMap',
        'emissiveMapEncoding',
        'bumpMap',
        'normalMap',
        'objectSpaceNormalMap',
        'displacementMap',
        'specularMap',
        'roughnessMap',
        'metalnessMap',
        'gradientMap',
        'alphaMap',
        'combine',
        'vertexColors',
        'fog',
        'useFog',
        'fogExp',
        'flatShading',
        'sizeAttenuation',
        'logarithmicDepthBuffer',
        'skinning',
        'maxBones',
        'useVertexTexture',
        'morphTargets',
        'morphNormals',
        'maxMorphTargets',
        'maxMorphNormals',
        'premultipliedAlpha',
        'numDirLights',
        'numPointLights',
        'numSpotLights',
        'numHemiLights',
        'numRectAreaLights',
        'shadowMapEnabled',
        'shadowMapType',
        'toneMapping',
        'physicallyCorrectLights',
        'alphaTest',
        'doubleSided',
        'flipSided',
        'numClippingPlanes',
        'numClipIntersection',
        'depthPacking',
        'dithering',
      ];
    function p(e, t) {
      var A;
      return (
        e
          ? e.isTexture
            ? (A = e.encoding)
            : e.isWebGLRenderTarget &&
              (console.warn(
                "THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.",
              ),
              (A = e.texture.encoding))
          : (A = tA),
        (A = A === tA && t ? AA : A)
      );
    }
    (this.getParameters = function (e, t, A, r, n, i, a) {
      var o = d[e.type],
        s = a.isSkinnedMesh
          ? ((s = (s = a).skeleton.bones),
            h.floatVertexTextures
              ? 1024
              : ((l = h.maxVertexUniforms),
                (l = Math.floor((l - 20) / 4)),
                (l = Math.min(l, s.length)) < s.length
                  ? (console.warn(
                      'THREE.WebGLRenderer: Skeleton has ' +
                        s.length +
                        ' bones. This GPU supports ' +
                        l +
                        '.',
                    ),
                    0)
                  : l))
          : 0,
        l = h.precision,
        c =
          (null !== e.precision &&
            (l = h.getMaxPrecision(e.precision)) !== e.precision &&
            console.warn(
              'THREE.WebGLProgram.getParameters:',
              e.precision,
              'not supported, using',
              l,
              'instead.',
            ),
          u.getRenderTarget());
      return {
        shaderID: o,
        precision: l,
        supportsVertexTextures: h.vertexTextures,
        outputEncoding: p(c ? c.texture : null, u.gammaOutput),
        map: !!e.map,
        mapEncoding: p(e.map, u.gammaInput),
        envMap: !!e.envMap,
        envMapMode: e.envMap && e.envMap.mapping,
        envMapEncoding: p(e.envMap, u.gammaInput),
        envMapCubeUV:
          !!e.envMap && (e.envMap.mapping === Je || e.envMap.mapping === Ze),
        lightMap: !!e.lightMap,
        aoMap: !!e.aoMap,
        emissiveMap: !!e.emissiveMap,
        emissiveMapEncoding: p(e.emissiveMap, u.gammaInput),
        bumpMap: !!e.bumpMap,
        normalMap: !!e.normalMap,
        objectSpaceNormalMap: e.normalMapType === iA,
        displacementMap: !!e.displacementMap,
        roughnessMap: !!e.roughnessMap,
        metalnessMap: !!e.metalnessMap,
        specularMap: !!e.specularMap,
        alphaMap: !!e.alphaMap,
        gradientMap: !!e.gradientMap,
        combine: e.combine,
        vertexColors: e.vertexColors,
        fog: !!r,
        useFog: e.fog,
        fogExp: r && r.isFogExp2,
        flatShading: e.flatShading,
        sizeAttenuation: e.sizeAttenuation,
        logarithmicDepthBuffer: h.logarithmicDepthBuffer,
        skinning: e.skinning && 0 < s,
        maxBones: s,
        useVertexTexture: h.floatVertexTextures,
        morphTargets: e.morphTargets,
        morphNormals: e.morphNormals,
        maxMorphTargets: u.maxMorphTargets,
        maxMorphNormals: u.maxMorphNormals,
        numDirLights: t.directional.length,
        numPointLights: t.point.length,
        numSpotLights: t.spot.length,
        numRectAreaLights: t.rectArea.length,
        numHemiLights: t.hemi.length,
        numClippingPlanes: n,
        numClipIntersection: i,
        dithering: e.dithering,
        shadowMapEnabled:
          u.shadowMap.enabled && a.receiveShadow && 0 < A.length,
        shadowMapType: u.shadowMap.type,
        toneMapping: u.toneMapping,
        physicallyCorrectLights: u.physicallyCorrectLights,
        premultipliedAlpha: e.premultipliedAlpha,
        alphaTest: e.alphaTest,
        doubleSided: e.side === ee,
        flipSided: e.side === Ee,
        depthPacking: void 0 !== e.depthPacking && e.depthPacking,
      };
    }),
      (this.getProgramCode = function (e, t) {
        var A = [];
        if (
          (t.shaderID
            ? A.push(t.shaderID)
            : (A.push(e.fragmentShader), A.push(e.vertexShader)),
          void 0 !== e.defines)
        )
          for (var r in e.defines) A.push(r), A.push(e.defines[r]);
        for (var n = 0; n < i.length; n++) A.push(t[i[n]]);
        return (
          A.push(e.onBeforeCompile.toString()), A.push(u.gammaOutput), A.join()
        );
      }),
      (this.acquireProgram = function (e, t, A, r) {
        for (var n, i = 0, a = l.length; i < a; i++) {
          var o = l[i];
          if (o.code === r) {
            ++(n = o).usedTimes;
            break;
          }
        }
        return (
          void 0 === n && ((n = new ia(u, s, r, e, t, A, h)), l.push(n)), n
        );
      }),
      (this.releaseProgram = function (e) {
        var t;
        0 == --e.usedTimes &&
          ((t = l.indexOf(e)), (l[t] = l[l.length - 1]), l.pop(), e.destroy());
      }),
      (this.programs = l);
  }
  function oa() {
    var r = new WeakMap();
    return {
      get: function (e) {
        var t = r.get(e);
        return void 0 === t && r.set(e, (t = {})), t;
      },
      remove: function (e) {
        r.delete(e);
      },
      update: function (e, t, A) {
        r.get(e)[t] = A;
      },
      dispose: function () {
        r = new WeakMap();
      },
    };
  }
  function sa(e, t) {
    return e.renderOrder !== t.renderOrder
      ? e.renderOrder - t.renderOrder
      : e.program && t.program && e.program !== t.program
      ? e.program.id - t.program.id
      : e.material.id !== t.material.id
      ? e.material.id - t.material.id
      : e.z !== t.z
      ? e.z - t.z
      : e.id - t.id;
  }
  function la(e, t) {
    return e.renderOrder - t.renderOrder;
  }
  function ca(e, t) {
    return e.renderOrder !== t.renderOrder
      ? e.renderOrder - t.renderOrder
      : e.z !== t.z
      ? t.z - e.z
      : e.id - t.id;
  }
  function ua() {
    var a = [],
      o = 0,
      s = [],
      l = [];
    return {
      opaque: s,
      transparent: l,
      init: function () {
        (o = 0), (l.length = s.length = 0);
      },
      push: function (e, t, A, r, n) {
        var i = a[o];
        void 0 === i
          ? ((i = {
              id: e.id,
              object: e,
              geometry: t,
              material: A,
              program: A.program,
              renderOrder: e.renderOrder,
              z: r,
              group: n,
            }),
            (a[o] = i))
          : ((i.id = e.id),
            (i.object = e),
            (i.geometry = t),
            (i.material = A),
            (i.program = A.program),
            (i.renderOrder = e.renderOrder),
            (i.z = r),
            (i.group = n)),
          (!0 !== A.transparent || A.normalRender ? s : l).push(i),
          o++;
      },
      sort: function () {
        1 < s.length && s.sort(sa), 1 < l.length && l.sort(ca);
      },
      sortByOrder: function () {
        1 < s.length && s.sort(la), 1 < l.length && l.sort(la);
      },
    };
  }
  function ha() {
    var A = {};
    return {
      get: function (e, t) {
        return (
          (e = e.id + ',' + t.id),
          void 0 === (t = A[e]) && ((t = new ua()), (A[e] = t)),
          t
        );
      },
      dispose: function () {
        A = {};
      },
    };
  }
  function da() {
    var A = {};
    return {
      get: function (e) {
        if (void 0 !== A[e.id]) return A[e.id];
        var t;
        switch (e.type) {
          case 'DirectionalLight':
            t = {
              direction: new Ce(),
              color: new de(),
              shadow: !1,
              shadowBias: 0,
              shadowRadius: 1,
              shadowMapSize: new he(),
            };
            break;
          case 'SpotLight':
            t = {
              position: new Ce(),
              direction: new Ce(),
              color: new de(),
              distance: 0,
              coneCos: 0,
              penumbraCos: 0,
              decay: 0,
              shadow: !1,
              shadowBias: 0,
              shadowRadius: 1,
              shadowMapSize: new he(),
            };
            break;
          case 'PointLight':
            t = {
              position: new Ce(),
              color: new de(),
              distance: 0,
              decay: 0,
              shadow: !1,
              shadowBias: 0,
              shadowRadius: 1,
              shadowMapSize: new he(),
              shadowCameraNear: 1,
              shadowCameraFar: 1e3,
            };
            break;
          case 'HemisphereLight':
            t = {
              direction: new Ce(),
              skyColor: new de(),
              groundColor: new de(),
            };
            break;
          case 'RectAreaLight':
            t = {
              color: new de(),
              position: new Ce(),
              halfWidth: new Ce(),
              halfHeight: new Ce(),
            };
        }
        return (A[e.id] = t);
      },
    };
  }
  var pa,
    fa,
    ga,
    ma,
    va,
    Ba,
    wa,
    ya,
    Ea,
    xa,
    ba,
    Ca,
    Fa,
    Ta,
    _a,
    Ua,
    Ma,
    Sa,
    Qa,
    La,
    Ha,
    Ia,
    Ra,
    Pa,
    Da,
    Oa = 0;
  function Na() {
    var y = new da(),
      E = {
        id: Oa++,
        hash: {
          stateID: -1,
          directionalLength: -1,
          pointLength: -1,
          spotLength: -1,
          rectAreaLength: -1,
          hemiLength: -1,
          shadowsLength: -1,
        },
        ambient: [0, 0, 0],
        directional: [],
        directionalShadowMap: [],
        directionalShadowMatrix: [],
        spot: [],
        spotShadowMap: [],
        spotShadowMatrix: [],
        rectArea: [],
        point: [],
        pointShadowMap: [],
        pointShadowMatrix: [],
        hemi: [],
      },
      x = new Ce(),
      b = new be(),
      C = new be();
    return {
      setup: function (e, t, A) {
        for (
          var r = 0,
            n = 0,
            i = 0,
            a = 0,
            o = 0,
            s = 0,
            l = 0,
            c = 0,
            u = A.matrixWorldInverse,
            h = 0,
            d = e.length;
          h < d;
          h++
        ) {
          var p,
            f,
            g = e[h],
            m = g.color,
            v = g.intensity,
            B = g.distance,
            w = g.shadow && g.shadow.map ? g.shadow.map.texture : null;
          g.isAmbientLight
            ? ((r += m.r * v), (n += m.g * v), (i += m.b * v))
            : g.isDirectionalLight
            ? ((f = y.get(g)).color.copy(g.color).multiplyScalar(g.intensity),
              f.direction.setFromMatrixPosition(g.matrixWorld),
              x.setFromMatrixPosition(g.target.matrixWorld),
              f.direction.sub(x),
              f.direction.transformDirection(u),
              (f.shadow = g.castShadow),
              g.castShadow &&
                ((p = g.shadow),
                (f.shadowBias = p.bias),
                (f.shadowRadius = p.radius),
                (f.shadowMapSize = p.mapSize)),
              (E.directionalShadowMap[a] = w),
              (E.directionalShadowMatrix[a] = g.shadow.matrix),
              (E.directional[a] = f),
              a++)
            : g.isSpotLight
            ? ((f = y.get(g)).position.setFromMatrixPosition(g.matrixWorld),
              f.position.applyMatrix4(u),
              f.color.copy(m).multiplyScalar(v),
              (f.distance = B),
              f.direction.setFromMatrixPosition(g.matrixWorld),
              x.setFromMatrixPosition(g.target.matrixWorld),
              f.direction.sub(x),
              f.direction.transformDirection(u),
              (f.coneCos = Math.cos(g.angle)),
              (f.penumbraCos = Math.cos(g.angle * (1 - g.penumbra))),
              (f.decay = 0 === g.distance ? 0 : g.decay),
              (f.shadow = g.castShadow),
              g.castShadow &&
                ((p = g.shadow),
                (f.shadowBias = p.bias),
                (f.shadowRadius = p.radius),
                (f.shadowMapSize = p.mapSize)),
              (E.spotShadowMap[s] = w),
              (E.spotShadowMatrix[s] = g.shadow.matrix),
              (E.spot[s] = f),
              s++)
            : g.isRectAreaLight
            ? ((f = y.get(g)).color.copy(m).multiplyScalar(v),
              f.position.setFromMatrixPosition(g.matrixWorld),
              f.position.applyMatrix4(u),
              C.identity(),
              b.copy(g.matrixWorld),
              b.premultiply(u),
              C.extractRotation(b),
              f.halfWidth.set(0.5 * g.width, 0, 0),
              f.halfHeight.set(0, 0.5 * g.height, 0),
              f.halfWidth.applyMatrix4(C),
              f.halfHeight.applyMatrix4(C),
              (E.rectArea[l] = f),
              l++)
            : g.isPointLight
            ? ((f = y.get(g)).position.setFromMatrixPosition(g.matrixWorld),
              f.position.applyMatrix4(u),
              f.color.copy(g.color).multiplyScalar(g.intensity),
              (f.distance = g.distance),
              (f.decay = 0 === g.distance ? 0 : g.decay),
              (f.shadow = g.castShadow),
              g.castShadow &&
                ((p = g.shadow),
                (f.shadowBias = p.bias),
                (f.shadowRadius = p.radius),
                (f.shadowMapSize = p.mapSize),
                (f.shadowCameraNear = p.camera.near),
                (f.shadowCameraFar = p.camera.far)),
              (E.pointShadowMap[o] = w),
              (E.pointShadowMatrix[o] = g.shadow.matrix),
              (E.point[o] = f),
              o++)
            : g.isHemisphereLight &&
              ((f = y.get(g)).direction.setFromMatrixPosition(g.matrixWorld),
              f.direction.transformDirection(u),
              f.direction.normalize(),
              f.skyColor.copy(g.color).multiplyScalar(v),
              f.groundColor.copy(g.groundColor).multiplyScalar(v),
              (E.hemi[c] = f),
              c++);
        }
        (E.ambient[0] = r),
          (E.ambient[1] = n),
          (E.ambient[2] = i),
          (E.directional.length = a),
          (E.spot.length = s),
          (E.rectArea.length = l),
          (E.point.length = o),
          (E.hemi.length = c),
          (E.hash.stateID = E.id),
          (E.hash.directionalLength = a),
          (E.hash.pointLength = o),
          (E.hash.spotLength = s),
          (E.hash.rectAreaLength = l),
          (E.hash.hemiLength = c),
          (E.hash.shadowsLength = t.length);
      },
      state: E,
    };
  }
  function Ga() {
    var t = new Na(),
      A = [],
      r = [];
    return {
      init: function () {
        (A.length = 0), (r.length = 0);
      },
      state: { lightsArray: A, shadowsArray: r, lights: t },
      setupLights: function (e) {
        t.setup(A, r, e);
      },
      pushLight: function (e) {
        A.push(e);
      },
      pushShadow: function (e) {
        r.push(e);
      },
    };
  }
  function Va() {
    var r = {};
    return {
      get: function (e, t) {
        var A;
        return (
          void 0 === r[e.id]
            ? ((A = new Ga()), (r[e.id] = {}), (r[e.id][t.id] = A))
            : void 0 === r[e.id][t.id]
            ? ((A = new Ga()), (r[e.id][t.id] = A))
            : (A = r[e.id][t.id]),
          A
        );
      },
      dispose: function () {
        r = {};
      },
    };
  }
  function ka(e) {
    t.call(this),
      (this.type = 'MeshDepthMaterial'),
      (this.depthPacking = rA),
      (this.skinning = !1),
      (this.morphTargets = !1),
      (this.map = null),
      (this.alphaMap = null),
      (this.displacementMap = null),
      (this.displacementScale = 1),
      (this.displacementBias = 0),
      (this.wireframe = !1),
      (this.wireframeLinewidth = 1),
      (this.fog = !1),
      (this.lights = !1),
      this.setValues(e);
  }
  function za(e) {
    t.call(this),
      (this.type = 'MeshDistanceMaterial'),
      (this.referencePosition = new Ce()),
      (this.nearDistance = 1),
      (this.farDistance = 1e3),
      (this.skinning = !1),
      (this.morphTargets = !1),
      (this.map = null),
      (this.alphaMap = null),
      (this.displacementMap = null),
      (this.displacementScale = 1),
      (this.displacementBias = 0),
      (this.fog = !1),
      (this.lights = !1),
      this.setValues(e);
  }
  function Ka(m, v, e) {
    for (
      var B = new KA(),
        f = new be(),
        g = new he(),
        w = new he(e, e),
        y = new Ce(),
        E = new Ce(),
        c = 1,
        u = 2,
        t = 1 + (c | u),
        h = new Array(t),
        d = new Array(t),
        p = {},
        x = { 0: Ee, 1: Z, 2: ee },
        b = [
          new Ce(1, 0, 0),
          new Ce(-1, 0, 0),
          new Ce(0, 0, 1),
          new Ce(0, 0, -1),
          new Ce(0, 1, 0),
          new Ce(0, -1, 0),
        ],
        C = [
          new Ce(0, 1, 0),
          new Ce(0, 1, 0),
          new Ce(0, 1, 0),
          new Ce(0, 1, 0),
          new Ce(0, 0, 1),
          new Ce(0, 0, -1),
        ],
        F = [new Fe(), new Fe(), new Fe(), new Fe(), new Fe(), new Fe()],
        A = 0;
      A !== t;
      ++A
    ) {
      var r = 0 != (A & c),
        n = 0 != (A & u),
        i = new ka({ depthPacking: nA, morphTargets: r, skinning: n }),
        i = ((h[A] = i), new za({ morphTargets: r, skinning: n }));
      d[A] = i;
    }
    var T = this;
    function _(e, t, A, r, n, i) {
      var a = e.geometry,
        o = null,
        s = h,
        l = e.customDepthMaterial;
      return (
        A && ((s = d), (l = e.customDistanceMaterial)),
        (o =
          l ||
          ((l = !1),
          t.morphTargets &&
            (a && a.isBufferGeometry
              ? (l =
                  a.morphAttributes &&
                  a.morphAttributes.position &&
                  0 < a.morphAttributes.position.length)
              : a &&
                a.isGeometry &&
                (l = a.morphTargets && 0 < a.morphTargets.length)),
          e.isSkinnedMesh &&
            !1 === t.skinning &&
            console.warn(
              'THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:',
              e,
            ),
          (a = e.isSkinnedMesh && t.skinning),
          (e = 0),
          l && (e |= c),
          a && (e |= u),
          s[e])),
        m.localClippingEnabled &&
          !0 === t.clipShadows &&
          0 !== t.clippingPlanes.length &&
          ((l = o.uuid),
          (a = t.uuid),
          void 0 === (s = p[l]) && (p[l] = s = {}),
          void 0 === (e = s[a]) && ((e = o.clone()), (s[a] = e)),
          (o = e)),
        (o.visible = t.visible),
        (o.wireframe = t.wireframe),
        (o.side = null != t.shadowSide ? t.shadowSide : x[t.side]),
        (o.clipShadows = t.clipShadows),
        (o.clippingPlanes = t.clippingPlanes),
        (o.clipIntersection = t.clipIntersection),
        (o.wireframeLinewidth = t.wireframeLinewidth),
        (o.linewidth = t.linewidth),
        A &&
          o.isMeshDistanceMaterial &&
          (o.referencePosition.copy(r),
          (o.nearDistance = n),
          (o.farDistance = i)),
        o
      );
    }
    (this.enabled = !1),
      (this.autoUpdate = !0),
      (this.needsUpdate = !1),
      (this.type = Y),
      (this.render = function (e, t, A) {
        if (
          !1 !== T.enabled &&
          (!1 !== T.autoUpdate || !1 !== T.needsUpdate) &&
          0 !== e.length
        ) {
          var r,
            n = m.context,
            i = m.state;
          i.disable(n.BLEND),
            i.buffers.color.setClear(1, 1, 1, 1),
            i.buffers.depth.setTest(!0),
            i.setScissorTest(!1);
          for (var a = 0, o = e.length; a < o; a++) {
            var s = e[a],
              l = s.shadow,
              c = s && s.isPointLight;
            if (void 0 === l)
              console.warn('THREE.WebGLShadowMap:', s, 'has no shadow.');
            else {
              var u = l.camera,
                h =
                  (g.copy(l.mapSize),
                  g.min(w),
                  c &&
                    ((h = g.x),
                    (d = g.y),
                    F[0].set(2 * h, d, h, d),
                    F[1].set(0, d, h, d),
                    F[2].set(3 * h, d, h, d),
                    F[3].set(h, d, h, d),
                    F[4].set(3 * h, 0, h, d),
                    F[5].set(h, 0, h, d),
                    (g.x *= 4),
                    (g.y *= 2)),
                  null === l.map &&
                    ((l.map = new PA(g.x, g.y, {
                      minFilter: tt,
                      magFilter: tt,
                      format: wt,
                    })),
                    (l.map.texture.name = s.name + '.shadowMap'),
                    u.updateProjectionMatrix()),
                  l.isSpotLightShadow && l.update(s),
                  l.map),
                d = l.matrix;
              E.setFromMatrixPosition(s.matrixWorld),
                u.position.copy(E),
                c
                  ? ((r = 6), d.makeTranslation(-E.x, -E.y, -E.z))
                  : ((r = 1),
                    y.setFromMatrixPosition(s.target.matrixWorld),
                    u.lookAt(y),
                    u.updateMatrixWorld(),
                    d.set(
                      0.5,
                      0,
                      0,
                      0.5,
                      0,
                      0.5,
                      0,
                      0.5,
                      0,
                      0,
                      0.5,
                      0.5,
                      0,
                      0,
                      0,
                      1,
                    ),
                    d.multiply(u.projectionMatrix),
                    d.multiply(u.matrixWorldInverse)),
                m.setRenderTarget(h),
                m.clear();
              for (var p = 0; p < r; p++)
                c &&
                  (y.copy(u.position),
                  y.add(b[p]),
                  u.up.copy(C[p]),
                  u.lookAt(y),
                  u.updateMatrixWorld(),
                  i.viewport(F[p])),
                  f.multiplyMatrices(u.projectionMatrix, u.matrixWorldInverse),
                  B.setFromMatrix(f),
                  !(function e(t, A, r, n) {
                    if (!1 === t.visible) return;
                    var i = t.layers.test(A.layers);
                    if (
                      i &&
                      (t.isMesh || t.isLine || t.isPoints) &&
                      t.castShadow &&
                      (!t.frustumCulled || B.intersectsObject(t))
                    ) {
                      t.modelViewMatrix.multiplyMatrices(
                        r.matrixWorldInverse,
                        t.matrixWorld,
                      );
                      var a = v.update(t),
                        o = t.material;
                      if (Array.isArray(o))
                        for (
                          var s = a.groups, l = 0, c = s.length;
                          l < c;
                          l++
                        ) {
                          var u,
                            h = s[l],
                            d = o[h.materialIndex];
                          d &&
                            d.visible &&
                            ((u = _(t, d, n, E, r.near, r.far)),
                            m.renderBufferDirect(r, null, a, u, t, h));
                        }
                      else
                        o.visible &&
                          ((u = _(t, o, n, E, r.near, r.far)),
                          m.renderBufferDirect(r, null, a, u, t, null));
                    }
                    var p = t.children;
                    for (var f = 0, g = p.length; f < g; f++) e(p[f], A, r, n);
                  })(t, A, u, c);
            }
          }
          T.needsUpdate = !1;
        }
      });
  }
  function Xa(c, A, s, r) {
    var n = new (function () {
        var t = !1,
          i = new Fe(),
          A = null,
          a = new Fe(0, 0, 0, 0);
        return {
          setMask: function (e) {
            A === e || t || (c.colorMask(e, e, e, e), (A = e));
          },
          setLocked: function (e) {
            t = e;
          },
          setClear: function (e, t, A, r, n) {
            !0 === n && ((e *= r), (t *= r), (A *= r)),
              i.set(e, t, A, r),
              !1 === a.equals(i) && (c.clearColor(e, t, A, r), a.copy(i));
          },
          reset: function () {
            (t = !1), (A = null), a.set(-1, 0, 0, 0);
          },
        };
      })(),
      i = new (function () {
        var t = !1,
          A = null,
          r = null,
          n = null;
        return {
          setTest: function (e) {
            (e ? Q : L)(c.DEPTH_TEST);
          },
          setMask: function (e) {
            A === e || t || (c.depthMask(e), (A = e));
          },
          setFunc: function (e) {
            if (r !== e) {
              if (e)
                switch (e) {
                  case Le:
                    c.depthFunc(c.NEVER);
                    break;
                  case He:
                    c.depthFunc(c.ALWAYS);
                    break;
                  case Ie:
                    c.depthFunc(c.LESS);
                    break;
                  case Re:
                    c.depthFunc(c.LEQUAL);
                    break;
                  case Pe:
                    c.depthFunc(c.EQUAL);
                    break;
                  case De:
                    c.depthFunc(c.GEQUAL);
                    break;
                  case Oe:
                    c.depthFunc(c.GREATER);
                    break;
                  case Ne:
                    c.depthFunc(c.NOTEQUAL);
                    break;
                  default:
                    c.depthFunc(c.LEQUAL);
                }
              else c.depthFunc(c.LEQUAL);
              r = e;
            }
          },
          setLocked: function (e) {
            t = e;
          },
          setClear: function (e) {
            n !== e && (c.clearDepth(e), (n = e));
          },
          reset: function () {
            (t = !1), (n = r = A = null);
          },
        };
      })(),
      t = new (function () {
        var t = !1,
          A = null,
          r = null,
          n = null,
          i = null,
          a = null,
          o = null,
          s = null,
          l = null;
        return {
          setTest: function (e) {
            (e ? Q : L)(c.STENCIL_TEST);
          },
          setMask: function (e) {
            A === e || t || (c.stencilMask(e), (A = e));
          },
          setFunc: function (e, t, A) {
            (r === e && n === t && i === A) ||
              (c.stencilFunc(e, t, A), (r = e), (n = t), (i = A));
          },
          setOp: function (e, t, A) {
            (a === e && o === t && s === A) ||
              (c.stencilOp(e, t, A), (a = e), (o = t), (s = A));
          },
          setLocked: function (e) {
            t = e;
          },
          setClear: function (e) {
            l !== e && (c.clearStencil(e), (l = e));
          },
          reset: function () {
            (t = !1), (l = s = o = a = i = n = r = A = null);
          },
        };
      })(),
      e = c.getParameter(c.MAX_VERTEX_ATTRIBS),
      a = new Uint8Array(e),
      o = new Uint8Array(e),
      l = new Uint8Array(e),
      u = {},
      h = null,
      d = null,
      p = null,
      f = null,
      g = null,
      m = null,
      v = null,
      B = null,
      w = null,
      y = !1,
      E = null,
      x = null,
      b = null,
      C = null,
      F = null,
      R = c.getParameter(c.MAX_COMBINED_TEXTURE_IMAGE_UNITS),
      T = !1,
      e = 0,
      _ = c.getParameter(c.VERSION),
      U =
        (-1 !== _.indexOf('WebGL')
          ? ((e = parseFloat(/^WebGL\ ([0-9])/.exec(_)[1])), (T = 1 <= e))
          : -1 !== _.indexOf('OpenGL ES') &&
            ((e = parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(_)[1])), (T = 2 <= e)),
        null),
      M = {},
      P = new Fe(),
      D = new Fe();
    function O(e, t, A) {
      var r = new Uint8Array(4),
        n = c.createTexture();
      c.bindTexture(e, n),
        c.texParameteri(e, c.TEXTURE_MIN_FILTER, c.NEAREST),
        c.texParameteri(e, c.TEXTURE_MAG_FILTER, c.NEAREST);
      for (var i = 0; i < A; i++)
        c.texImage2D(t + i, 0, c.RGBA, 1, 1, 0, c.RGBA, c.UNSIGNED_BYTE, r);
      return n;
    }
    var S = {};
    function N(e, t) {
      (a[e] = 1),
        0 === o[e] && (c.enableVertexAttribArray(e), (o[e] = 1)),
        l[e] !== t &&
          ((r.isWebGL2 ? c : A.get('ANGLE_instanced_arrays'))[
            r.isWebGL2 ? 'vertexAttribDivisor' : 'vertexAttribDivisorANGLE'
          ](e, t),
          (l[e] = t));
    }
    function Q(e) {
      !0 !== u[e] && (c.enable(e), (u[e] = !0));
    }
    function L(e) {
      !1 !== u[e] && (c.disable(e), (u[e] = !1));
    }
    function H(e, t, A, r, n, i, a, o) {
      if (((e !== te ? Q : L)(c.BLEND), e !== ae)) {
        if (e !== p || o !== y)
          switch (e) {
            case re:
              o
                ? (c.blendEquationSeparate(c.FUNC_ADD, c.FUNC_ADD),
                  c.blendFuncSeparate(c.ONE, c.ONE, c.ONE, c.ONE))
                : (c.blendEquation(c.FUNC_ADD),
                  c.blendFunc(c.SRC_ALPHA, c.ONE));
              break;
            case ne:
              o
                ? (c.blendEquationSeparate(c.FUNC_ADD, c.FUNC_ADD),
                  c.blendFuncSeparate(
                    c.ZERO,
                    c.ZERO,
                    c.ONE_MINUS_SRC_COLOR,
                    c.ONE_MINUS_SRC_ALPHA,
                  ))
                : (c.blendEquation(c.FUNC_ADD),
                  c.blendFunc(c.ZERO, c.ONE_MINUS_SRC_COLOR));
              break;
            case ie:
              o
                ? (c.blendEquationSeparate(c.FUNC_ADD, c.FUNC_ADD),
                  c.blendFuncSeparate(c.ZERO, c.SRC_COLOR, c.ZERO, c.SRC_ALPHA))
                : (c.blendEquation(c.FUNC_ADD),
                  c.blendFunc(c.ZERO, c.SRC_COLOR));
              break;
            default:
              o
                ? (c.blendEquationSeparate(c.FUNC_ADD, c.FUNC_ADD),
                  c.blendFuncSeparate(
                    c.ONE,
                    c.ONE_MINUS_SRC_ALPHA,
                    c.ONE,
                    c.ONE_MINUS_SRC_ALPHA,
                  ))
                : (c.blendEquationSeparate(c.FUNC_ADD, c.FUNC_ADD),
                  c.blendFuncSeparate(
                    c.SRC_ALPHA,
                    c.ONE_MINUS_SRC_ALPHA,
                    c.ONE,
                    c.ONE_MINUS_SRC_ALPHA,
                  ));
          }
        w = B = v = m = g = f = null;
      } else (n = n || t), (i = i || A), (a = a || r), (t === f && n === v) || (c.blendEquationSeparate(s.convert(t), s.convert(n)), (f = t), (v = n)), (A === g && r === m && i === B && a === w) || (c.blendFuncSeparate(s.convert(A), s.convert(r), s.convert(i), s.convert(a)), (g = A), (m = r), (B = i), (w = a));
      (p = e), (y = o);
    }
    function I(e) {
      E !== e && (e ? c.frontFace(c.CW) : c.frontFace(c.CCW), (E = e));
    }
    function G(e) {
      e !== X
        ? (Q(c.CULL_FACE),
          e !== x &&
            (e === j
              ? c.cullFace(c.BACK)
              : e === W
              ? c.cullFace(c.FRONT)
              : c.cullFace(c.FRONT_AND_BACK)))
        : L(c.CULL_FACE),
        (x = e);
    }
    function V(e, t, A) {
      e
        ? (Q(c.POLYGON_OFFSET_FILL),
          (C === t && F === A) || (c.polygonOffset(t, A), (C = t), (F = A)))
        : L(c.POLYGON_OFFSET_FILL);
    }
    function k(e) {
      void 0 === e && (e = c.TEXTURE0 + R - 1),
        U !== e && (c.activeTexture(e), (U = e));
    }
    return (
      (S[c.TEXTURE_2D] = O(c.TEXTURE_2D, c.TEXTURE_2D, 1)),
      (S[c.TEXTURE_CUBE_MAP] = O(
        c.TEXTURE_CUBE_MAP,
        c.TEXTURE_CUBE_MAP_POSITIVE_X,
        6,
      )),
      n.setClear(0, 0, 0, 1),
      i.setClear(1),
      t.setClear(0),
      Q(c.DEPTH_TEST),
      i.setFunc(Re),
      I(!1),
      G(j),
      Q(c.CULL_FACE),
      Q(c.BLEND),
      H(Ae),
      {
        buffers: { color: n, depth: i, stencil: t },
        initAttributes: function () {
          for (var e = 0, t = a.length; e < t; e++) a[e] = 0;
        },
        enableAttribute: function (e) {
          N(e, 0);
        },
        enableAttributeAndDivisor: N,
        disableUnusedAttributes: function () {
          for (var e = 0, t = o.length; e !== t; ++e)
            o[e] !== a[e] && (c.disableVertexAttribArray(e), (o[e] = 0));
        },
        enable: Q,
        disable: L,
        getCompressedTextureFormats: function () {
          if (
            null === h &&
            ((h = []),
            A.get('WEBGL_compressed_texture_pvrtc') ||
              A.get('WEBGL_compressed_texture_s3tc') ||
              A.get('WEBGL_compressed_texture_etc1') ||
              A.get('WEBGL_compressed_texture_astc'))
          )
            for (
              var e = c.getParameter(c.COMPRESSED_TEXTURE_FORMATS), t = 0;
              t < e.length;
              t++
            )
              h.push(e[t]);
          return h;
        },
        useProgram: function (e) {
          return d !== e && (c.useProgram(e), (d = e), !0);
        },
        setBlending: H,
        setMaterial: function (e, t) {
          (e.side === ee ? L : Q)(c.CULL_FACE);
          var A = e.side === Ee;
          I((A = t ? !A : A)),
            e.blending === Ae && !1 === e.transparent
              ? H(te)
              : H(
                  e.blending,
                  e.blendEquation,
                  e.blendSrc,
                  e.blendDst,
                  e.blendEquationAlpha,
                  e.blendSrcAlpha,
                  e.blendDstAlpha,
                  e.premultipliedAlpha,
                ),
            i.setFunc(e.depthFunc),
            i.setTest(e.depthTest),
            i.setMask(e.depthWrite),
            n.setMask(e.colorWrite),
            V(e.polygonOffset, e.polygonOffsetFactor, e.polygonOffsetUnits);
        },
        setFlipSided: I,
        setCullFace: G,
        setLineWidth: function (e) {
          e !== b && (T && c.lineWidth(e), (b = e));
        },
        setPolygonOffset: V,
        setScissorTest: function (e) {
          (e ? Q : L)(c.SCISSOR_TEST);
        },
        activeTexture: k,
        bindTexture: function (e, t) {
          null === U && k();
          var A = M[U];
          void 0 === A && (M[U] = A = { type: void 0, texture: void 0 }),
            (A.type === e && A.texture === t) ||
              (c.bindTexture(e, t || S[e]), (A.type = e), (A.texture = t));
        },
        compressedTexImage2D: function () {
          try {
            c.compressedTexImage2D.apply(c, arguments);
          } catch (e) {
            console.error('THREE.WebGLState:', e);
          }
        },
        texImage2D: function () {
          try {
            c.texImage2D.apply(c, arguments);
          } catch (e) {
            console.error('THREE.WebGLState:', e);
          }
        },
        scissor: function (e) {
          !1 === P.equals(e) && (c.scissor(e.x, e.y, e.z, e.w), P.copy(e));
        },
        viewport: function (e) {
          !1 === D.equals(e) && (c.viewport(e.x, e.y, e.z, e.w), D.copy(e));
        },
        reset: function () {
          for (var e = 0; e < o.length; e++)
            1 === o[e] && (c.disableVertexAttribArray(e), (o[e] = 0));
          (u = {}),
            (M = {}),
            (x = E = p = d = U = h = null),
            n.reset(),
            i.reset(),
            t.reset();
        },
      }
    );
  }
  function ja(g, r, m, v, B, w, y) {
    var p,
      f = {};
    function E(e, t) {
      var A;
      return e.width > t || e.height > t
        ? 'data' in e
          ? void console.warn(
              'THREE.WebGLRenderer: image in DataTexture is too big (' +
                e.width +
                'x' +
                e.height +
                ').',
            )
          : ((t = t / Math.max(e.width, e.height)),
            ((A = document.createElementNS(
              'http://www.w3.org/1999/xhtml',
              'canvas',
            )).width = Math.floor(e.width * t)),
            (A.height = Math.floor(e.height * t)),
            A.getContext('2d').drawImage(
              e,
              0,
              0,
              e.width,
              e.height,
              0,
              0,
              A.width,
              A.height,
            ),
            console.warn(
              'THREE.WebGLRenderer: image is too big (' +
                e.width +
                'x' +
                e.height +
                '). Resized to ' +
                A.width +
                'x' +
                A.height,
            ),
            A)
        : e;
    }
    function x(e) {
      return xe.isPowerOfTwo(e.width) && xe.isPowerOfTwo(e.height);
    }
    function b(e, t) {
      return e.generateMipmaps && t && e.minFilter !== tt && e.minFilter !== U;
    }
    function C(e, t, A, r) {
      g.generateMipmap(e),
        (v.get(t).__maxMipLevel = Math.log(Math.max(A, r)) * Math.LOG2E);
    }
    function F(e, t) {
      if (B.isWebGL2) {
        if (e === g.RGB) {
          if (t === g.FLOAT) return g.RGB32F;
          if (t === g.HALF_FLOAT) return g.RGB16F;
          if (t === g.UNSIGNED_BYTE) return g.RGB8;
        }
        if (e === g.RGBA) {
          if (t === g.FLOAT) return g.RGBA32F;
          if (t === g.HALF_FLOAT) return g.RGBA16F;
          if (t === g.UNSIGNED_BYTE) return g.RGBA8;
        }
      }
      return e;
    }
    function n(e) {
      return e === tt || e === At || e === rt ? g.NEAREST : g.LINEAR;
    }
    function T(e) {
      e = e.target;
      e.removeEventListener('dispose', T),
        (function (e) {
          var t = v.get(e);
          if (e.image && t.__image__webglTextureCube)
            g.deleteTexture(t.__image__webglTextureCube);
          else {
            if (void 0 === t.__webglInit) return;
            g.deleteTexture(t.__webglTexture);
          }
          v.remove(e);
        })(e),
        e.isVideoTexture && delete f[e.id],
        y.memory.textures--;
    }
    function a(e) {
      var e = e.target,
        t = (e.removeEventListener('dispose', a), v.get(e)),
        A = v.get(e.texture);
      if (e) {
        if (
          (void 0 !== A.__webglTexture && g.deleteTexture(A.__webglTexture),
          e.depthTexture && e.depthTexture.dispose(),
          e.isWebGLRenderTargetCube)
        )
          for (var r = 0; r < 6; r++)
            g.deleteFramebuffer(t.__webglFramebuffer[r]),
              t.__webglDepthbuffer &&
                g.deleteRenderbuffer(t.__webglDepthbuffer[r]);
        else
          g.deleteFramebuffer(t.__webglFramebuffer),
            t.__webglDepthbuffer && g.deleteRenderbuffer(t.__webglDepthbuffer);
        v.remove(e.texture), v.remove(e);
      }
      y.memory.textures--;
    }
    function o(e, t) {
      var A = v.get(e);
      if (
        (e.isVideoTexture &&
          ((r = (a = e).id), (n = y.render.frame), f[r] !== n) &&
          ((f[r] = n), a.update()),
        0 < e.version && A.__version !== e.version)
      ) {
        var r = e.image;
        if (void 0 === r)
          console.warn(
            'THREE.WebGLRenderer: Texture marked for update but image is undefined',
          );
        else {
          if (!1 !== r.complete) {
            var n = A,
              i = e,
              a = t,
              e =
                (void 0 === n.__webglInit &&
                  ((n.__webglInit = !0),
                  i.addEventListener('dispose', T),
                  (n.__webglTexture = g.createTexture()),
                  y.memory.textures++),
                m.activeTexture(g.TEXTURE0 + a),
                m.bindTexture(g.TEXTURE_2D, n.__webglTexture),
                g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL, i.flipY),
                g.pixelStorei(
                  g.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
                  i.premultiplyAlpha,
                ),
                g.pixelStorei(g.UNPACK_ALIGNMENT, i.unpackAlignment),
                (a = E(i.image, B.maxTextureSize)),
                !(function (e) {
                  return (
                    !B.isWebGL2 &&
                    (e.wrapS !== $e ||
                      e.wrapT !== $e ||
                      (e.minFilter !== tt && e.minFilter !== U))
                  );
                })(i) ||
                  !1 !== x(a) ||
                  (a = (function (e) {
                    return e instanceof HTMLImageElement ||
                      e instanceof HTMLCanvasElement ||
                      e instanceof ImageBitmap
                      ? (((p =
                          void 0 === p
                            ? document.createElementNS(
                                'http://www.w3.org/1999/xhtml',
                                'canvas',
                              )
                            : p).width = xe.floorPowerOfTwo(e.width)),
                        (p.height = xe.floorPowerOfTwo(e.height)),
                        p
                          .getContext('2d')
                          .drawImage(e, 0, 0, p.width, p.height),
                        console.warn(
                          'THREE.WebGLRenderer: image is not power of two (' +
                            e.width +
                            'x' +
                            e.height +
                            '). Resized to ' +
                            p.width +
                            'x' +
                            p.height,
                        ),
                        p)
                      : e;
                  })(a)),
                x(a)),
              o = w.convert(i.format),
              s = w.convert(i.type),
              l = F(o, s);
            _(g.TEXTURE_2D, i, e);
            var c,
              u = i.mipmaps;
            if (i.isDepthTexture) {
              if (((l = g.DEPTH_COMPONENT), i.type === ht)) {
                if (!B.isWebGL2)
                  throw new Error(
                    'Float Depth Texture only supported in WebGL2.0',
                  );
                l = g.DEPTH_COMPONENT32F;
              } else B.isWebGL2 && (l = g.DEPTH_COMPONENT16);
              i.format === bt &&
                l === g.DEPTH_COMPONENT &&
                i.type !== lt &&
                i.type !== ut &&
                (console.warn(
                  'THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.',
                ),
                (i.type = lt),
                (s = w.convert(i.type))),
                i.format === Ct &&
                  ((l = g.DEPTH_STENCIL), i.type !== mt) &&
                  (console.warn(
                    'THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.',
                  ),
                  (i.type = mt),
                  (s = w.convert(i.type))),
                m.texImage2D(
                  g.TEXTURE_2D,
                  0,
                  l,
                  a.width,
                  a.height,
                  0,
                  o,
                  s,
                  null,
                );
            } else if (i.isDataTexture)
              if (0 < u.length && e) {
                for (var h = 0, d = u.length; h < d; h++)
                  (c = u[h]),
                    m.texImage2D(
                      g.TEXTURE_2D,
                      h,
                      l,
                      c.width,
                      c.height,
                      0,
                      o,
                      s,
                      c.data,
                    );
                (i.generateMipmaps = !1), (n.__maxMipLevel = u.length - 1);
              } else
                m.texImage2D(
                  g.TEXTURE_2D,
                  0,
                  l,
                  a.width,
                  a.height,
                  0,
                  o,
                  s,
                  a.data,
                ),
                  (n.__maxMipLevel = 0);
            else if (i.isCompressedTexture) {
              for (h = 0, d = u.length; h < d; h++)
                (c = u[h]),
                  i.format !== wt && i.format !== Bt
                    ? -1 < m.getCompressedTextureFormats().indexOf(o)
                      ? m.compressedTexImage2D(
                          g.TEXTURE_2D,
                          h,
                          l,
                          c.width,
                          c.height,
                          0,
                          c.data,
                        )
                      : console.warn(
                          'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()',
                        )
                    : m.texImage2D(
                        g.TEXTURE_2D,
                        h,
                        l,
                        c.width,
                        c.height,
                        0,
                        o,
                        s,
                        c.data,
                      );
              n.__maxMipLevel = u.length - 1;
            } else if (0 < u.length && e) {
              for (h = 0, d = u.length; h < d; h++)
                (c = u[h]), m.texImage2D(g.TEXTURE_2D, h, l, o, s, c);
              (i.generateMipmaps = !1), (n.__maxMipLevel = u.length - 1);
            } else
              m.texImage2D(g.TEXTURE_2D, 0, l, o, s, a), (n.__maxMipLevel = 0);
            return (
              b(i, e) && C(g.TEXTURE_2D, i, a.width, a.height),
              (n.__version = i.version),
              void (i.onUpdate && i.onUpdate(i))
            );
          }
          console.warn(
            'THREE.WebGLRenderer: Texture marked for update but image is incomplete',
          );
        }
      }
      m.activeTexture(g.TEXTURE0 + t),
        m.bindTexture(g.TEXTURE_2D, A.__webglTexture);
    }
    function _(e, t, A) {
      A
        ? (g.texParameteri(e, g.TEXTURE_WRAP_S, w.convert(t.wrapS)),
          g.texParameteri(e, g.TEXTURE_WRAP_T, w.convert(t.wrapT)),
          g.texParameteri(e, g.TEXTURE_MAG_FILTER, w.convert(t.magFilter)),
          g.texParameteri(e, g.TEXTURE_MIN_FILTER, w.convert(t.minFilter)))
        : (g.texParameteri(e, g.TEXTURE_WRAP_S, g.CLAMP_TO_EDGE),
          g.texParameteri(e, g.TEXTURE_WRAP_T, g.CLAMP_TO_EDGE),
          (t.wrapS === $e && t.wrapT === $e) ||
            console.warn(
              'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.',
            ),
          g.texParameteri(e, g.TEXTURE_MAG_FILTER, n(t.magFilter)),
          g.texParameteri(e, g.TEXTURE_MIN_FILTER, n(t.minFilter)),
          t.minFilter !== tt &&
            t.minFilter !== U &&
            console.warn(
              'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.',
            )),
        !(A = r.get('EXT_texture_filter_anisotropic')) ||
          (t.type === ht && null === r.get('OES_texture_float_linear')) ||
          (t.type === dt &&
            null === (B.isWebGL2 || r.get('OES_texture_half_float_linear'))) ||
          ((1 < t.anisotropy || v.get(t).__currentAnisotropy) &&
            (g.texParameterf(
              e,
              A.TEXTURE_MAX_ANISOTROPY_EXT,
              Math.min(t.anisotropy, B.getMaxAnisotropy()),
            ),
            (v.get(t).__currentAnisotropy = t.anisotropy)));
    }
    function s(e, t, A, r) {
      var n = w.convert(t.texture.format),
        i = w.convert(t.texture.type),
        a = F(n, i);
      m.texImage2D(r, 0, a, t.width, t.height, 0, n, i, null),
        g.bindFramebuffer(g.FRAMEBUFFER, e),
        g.framebufferTexture2D(
          g.FRAMEBUFFER,
          A,
          r,
          v.get(t.texture).__webglTexture,
          0,
        ),
        g.bindFramebuffer(g.FRAMEBUFFER, null);
    }
    function l(e, t) {
      g.bindRenderbuffer(g.RENDERBUFFER, e),
        t.depthBuffer && !t.stencilBuffer
          ? (g.renderbufferStorage(
              g.RENDERBUFFER,
              g.DEPTH_COMPONENT16,
              t.width,
              t.height,
            ),
            g.framebufferRenderbuffer(
              g.FRAMEBUFFER,
              g.DEPTH_ATTACHMENT,
              g.RENDERBUFFER,
              e,
            ))
          : t.depthBuffer && t.stencilBuffer
          ? (g.renderbufferStorage(
              g.RENDERBUFFER,
              g.DEPTH_STENCIL,
              t.width,
              t.height,
            ),
            g.framebufferRenderbuffer(
              g.FRAMEBUFFER,
              g.DEPTH_STENCIL_ATTACHMENT,
              g.RENDERBUFFER,
              e,
            ))
          : g.renderbufferStorage(g.RENDERBUFFER, g.RGBA4, t.width, t.height),
        g.bindRenderbuffer(g.RENDERBUFFER, null);
    }
    function c(e) {
      var t = v.get(e),
        A = !0 === e.isWebGLRenderTargetCube;
      if (e.depthTexture) {
        if (A)
          throw new Error(
            'target.depthTexture not supported in Cube render targets',
          );
        var r = t.__webglFramebuffer,
          n = e;
        if (n && n.isWebGLRenderTargetCube)
          throw new Error(
            'Depth Texture with cube render targets is not supported',
          );
        if (
          (g.bindFramebuffer(g.FRAMEBUFFER, r),
          !n.depthTexture || !n.depthTexture.isDepthTexture)
        )
          throw new Error(
            'renderTarget.depthTexture must be an instance of THREE.DepthTexture',
          );
        if (
          ((v.get(n.depthTexture).__webglTexture &&
            n.depthTexture.image.width === n.width &&
            n.depthTexture.image.height === n.height) ||
            ((n.depthTexture.image.width = n.width),
            (n.depthTexture.image.height = n.height),
            (n.depthTexture.needsUpdate = !0)),
          o(n.depthTexture, 0),
          (r = v.get(n.depthTexture).__webglTexture),
          n.depthTexture.format === bt)
        )
          g.framebufferTexture2D(
            g.FRAMEBUFFER,
            g.DEPTH_ATTACHMENT,
            g.TEXTURE_2D,
            r,
            0,
          );
        else {
          if (n.depthTexture.format !== Ct)
            throw new Error('Unknown depthTexture format');
          g.framebufferTexture2D(
            g.FRAMEBUFFER,
            g.DEPTH_STENCIL_ATTACHMENT,
            g.TEXTURE_2D,
            r,
            0,
          );
        }
      } else if (A) {
        t.__webglDepthbuffer = [];
        for (var i = 0; i < 6; i++)
          g.bindFramebuffer(g.FRAMEBUFFER, t.__webglFramebuffer[i]),
            (t.__webglDepthbuffer[i] = g.createRenderbuffer()),
            l(t.__webglDepthbuffer[i], e);
      } else
        g.bindFramebuffer(g.FRAMEBUFFER, t.__webglFramebuffer),
          (t.__webglDepthbuffer = g.createRenderbuffer()),
          l(t.__webglDepthbuffer, e);
      g.bindFramebuffer(g.FRAMEBUFFER, null);
    }
    (this.setTexture2D = o),
      (this.setTextureCube = function (e, t) {
        var A = v.get(e);
        if (6 === e.image.length)
          if (0 < e.version && A.__version !== e.version) {
            A.__image__webglTextureCube ||
              (e.addEventListener('dispose', T),
              (A.__image__webglTextureCube = g.createTexture()),
              y.memory.textures++),
              m.activeTexture(g.TEXTURE0 + t),
              m.bindTexture(g.TEXTURE_CUBE_MAP, A.__image__webglTextureCube),
              g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL, e.flipY);
            for (
              var r = e && e.isCompressedTexture,
                n = e.image[0] && e.image[0].isDataTexture,
                i = [],
                a = 0;
              a < 6;
              a++
            )
              i[a] =
                r || n
                  ? n
                    ? e.image[a].image
                    : e.image[a]
                  : E(e.image[a], B.maxCubemapSize);
            var o = i[0],
              s = x(o),
              l = w.convert(e.format),
              c = w.convert(e.type),
              u = F(l, c);
            _(g.TEXTURE_CUBE_MAP, e, s);
            for (a = 0; a < 6; a++)
              if (r)
                for (var h, d = i[a].mipmaps, p = 0, f = d.length; p < f; p++)
                  (h = d[p]),
                    e.format !== wt && e.format !== Bt
                      ? -1 < m.getCompressedTextureFormats().indexOf(l)
                        ? m.compressedTexImage2D(
                            g.TEXTURE_CUBE_MAP_POSITIVE_X + a,
                            p,
                            u,
                            h.width,
                            h.height,
                            0,
                            h.data,
                          )
                        : console.warn(
                            'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()',
                          )
                      : m.texImage2D(
                          g.TEXTURE_CUBE_MAP_POSITIVE_X + a,
                          p,
                          u,
                          h.width,
                          h.height,
                          0,
                          l,
                          c,
                          h.data,
                        );
              else
                n
                  ? m.texImage2D(
                      g.TEXTURE_CUBE_MAP_POSITIVE_X + a,
                      0,
                      u,
                      i[a].width,
                      i[a].height,
                      0,
                      l,
                      c,
                      i[a].data,
                    )
                  : m.texImage2D(
                      g.TEXTURE_CUBE_MAP_POSITIVE_X + a,
                      0,
                      u,
                      l,
                      c,
                      i[a],
                    );
            (A.__maxMipLevel = r ? d.length - 1 : 0),
              b(e, s) && C(g.TEXTURE_CUBE_MAP, e, o.width, o.height),
              (A.__version = e.version),
              e.onUpdate && e.onUpdate(e);
          } else
            m.activeTexture(g.TEXTURE0 + t),
              m.bindTexture(g.TEXTURE_CUBE_MAP, A.__image__webglTextureCube);
      }),
      (this.setTextureCubeDynamic = function (e, t) {
        m.activeTexture(g.TEXTURE0 + t),
          m.bindTexture(g.TEXTURE_CUBE_MAP, v.get(e).__webglTexture);
      }),
      (this.setupRenderTarget = function (e) {
        var t = v.get(e),
          A = v.get(e.texture),
          r =
            (e.addEventListener('dispose', a),
            (A.__webglTexture = g.createTexture()),
            y.memory.textures++,
            !0 === e.isWebGLRenderTargetCube),
          n = x(e);
        if (r) {
          t.__webglFramebuffer = [];
          for (var i = 0; i < 6; i++)
            t.__webglFramebuffer[i] = g.createFramebuffer();
        } else t.__webglFramebuffer = g.createFramebuffer();
        if (r) {
          m.bindTexture(g.TEXTURE_CUBE_MAP, A.__webglTexture),
            _(g.TEXTURE_CUBE_MAP, e.texture, n);
          for (i = 0; i < 6; i++)
            s(
              t.__webglFramebuffer[i],
              e,
              g.COLOR_ATTACHMENT0,
              g.TEXTURE_CUBE_MAP_POSITIVE_X + i,
            );
          b(e.texture, n) &&
            C(g.TEXTURE_CUBE_MAP, e.texture, e.width, e.height),
            m.bindTexture(g.TEXTURE_CUBE_MAP, null);
        } else
          m.bindTexture(g.TEXTURE_2D, A.__webglTexture),
            _(g.TEXTURE_2D, e.texture, n),
            s(t.__webglFramebuffer, e, g.COLOR_ATTACHMENT0, g.TEXTURE_2D),
            b(e.texture, n) && C(g.TEXTURE_2D, e.texture, e.width, e.height),
            m.bindTexture(g.TEXTURE_2D, null);
        e.depthBuffer && c(e);
      }),
      (this.updateRenderTargetMipmap = function (e) {
        var t,
          A,
          r = e.texture;
        b(r, x(e)) &&
          ((t = e.isWebGLRenderTargetCube ? g.TEXTURE_CUBE_MAP : g.TEXTURE_2D),
          (A = v.get(r).__webglTexture),
          m.bindTexture(t, A),
          C(t, r, e.width, e.height),
          m.bindTexture(t, null));
      });
  }
  function Wa(A, r, n) {
    return {
      convert: function (e) {
        var t;
        if (e === qe) return A.REPEAT;
        if (e === $e) return A.CLAMP_TO_EDGE;
        if (e === et) return A.MIRRORED_REPEAT;
        if (e === tt) return A.NEAREST;
        if (e === At) return A.NEAREST_MIPMAP_NEAREST;
        if (e === rt) return A.NEAREST_MIPMAP_LINEAR;
        if (e === U) return A.LINEAR;
        if (e === nt) return A.LINEAR_MIPMAP_NEAREST;
        if (e === it) return A.LINEAR_MIPMAP_LINEAR;
        if (e === at) return A.UNSIGNED_BYTE;
        if (e === pt) return A.UNSIGNED_SHORT_4_4_4_4;
        if (e === ft) return A.UNSIGNED_SHORT_5_5_5_1;
        if (e === gt) return A.UNSIGNED_SHORT_5_6_5;
        if (e === ot) return A.BYTE;
        if (e === st) return A.SHORT;
        if (e === lt) return A.UNSIGNED_SHORT;
        if (e === ct) return A.INT;
        if (e === ut) return A.UNSIGNED_INT;
        if (e === ht) return A.FLOAT;
        if (e === dt) {
          if (n.isWebGL2) return A.HALF_FLOAT;
          if (null !== (t = r.get('OES_texture_half_float')))
            return t.HALF_FLOAT_OES;
        }
        if (e === vt) return A.ALPHA;
        if (e === Bt) return A.RGB;
        if (e === wt) return A.RGBA;
        if (e === yt) return A.LUMINANCE;
        if (e === Et) return A.LUMINANCE_ALPHA;
        if (e === bt) return A.DEPTH_COMPONENT;
        if (e === Ct) return A.DEPTH_STENCIL;
        if (e === oe) return A.FUNC_ADD;
        if (e === se) return A.FUNC_SUBTRACT;
        if (e === le) return A.FUNC_REVERSE_SUBTRACT;
        if (e === fe) return A.ZERO;
        if (e === ge) return A.ONE;
        if (e === me) return A.SRC_COLOR;
        if (e === ve) return A.ONE_MINUS_SRC_COLOR;
        if (e === Be) return A.SRC_ALPHA;
        if (e === we) return A.ONE_MINUS_SRC_ALPHA;
        if (e === ye) return A.DST_ALPHA;
        if (e === Ue) return A.ONE_MINUS_DST_ALPHA;
        if (e === Me) return A.DST_COLOR;
        if (e === Se) return A.ONE_MINUS_DST_COLOR;
        if (e === Qe) return A.SRC_ALPHA_SATURATE;
        if (
          (e === Ft || e === Tt || e === _t || e === Ut) &&
          null !== (t = r.get('WEBGL_compressed_texture_s3tc'))
        ) {
          if (e === Ft) return t.COMPRESSED_RGB_S3TC_DXT1_EXT;
          if (e === Tt) return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;
          if (e === _t) return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;
          if (e === Ut) return t.COMPRESSED_RGBA_S3TC_DXT5_EXT;
        }
        if (
          (e === Mt || e === St || e === Qt || e === Lt) &&
          null !== (t = r.get('WEBGL_compressed_texture_pvrtc'))
        ) {
          if (e === Mt) return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
          if (e === St) return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
          if (e === Qt) return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
          if (e === Lt) return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;
        }
        if (e === Ht && null !== (t = r.get('WEBGL_compressed_texture_etc1')))
          return t.COMPRESSED_RGB_ETC1_WEBGL;
        if (
          (e === It ||
            e === Rt ||
            e === Pt ||
            e === Dt ||
            e === Ot ||
            e === Nt ||
            e === Gt ||
            e === Vt ||
            e === kt ||
            e === zt ||
            e === Kt ||
            e === Xt ||
            e === jt ||
            e === Wt) &&
          null !== (t = r.get('WEBGL_compressed_texture_astc'))
        )
          return e;
        if (e === ce || e === ue) {
          if (n.isWebGL2) {
            if (e === ce) return A.MIN;
            if (e === ue) return A.MAX;
          }
          if (null !== (t = r.get('EXT_blend_minmax'))) {
            if (e === ce) return t.MIN_EXT;
            if (e === ue) return t.MAX_EXT;
          }
        }
        if (e === mt) {
          if (n.isWebGL2) return A.UNSIGNED_INT_24_8;
          if (null !== (t = r.get('WEBGL_depth_texture')))
            return t.UNSIGNED_INT_24_8_WEBGL;
        }
        return 0;
      },
    };
  }
  function Ya() {
    p.call(this), (this.type = 'Group');
  }
  function x(e, t, A, r) {
    xr.call(this),
      (this.type = 'PerspectiveCamera'),
      (this.fov = void 0 !== e ? e : 50),
      (this.zoom = 1),
      (this.near = void 0 !== A ? A : 0.1),
      (this.far = void 0 !== r ? r : 2e3),
      (this.focus = 10),
      (this.aspect = void 0 !== t ? t : 1),
      (this.view = null),
      (this.filmGauge = 35),
      (this.filmOffset = 0),
      this.updateProjectionMatrix();
  }
  function Ja(e) {
    x.call(this), (this.cameras = e || []);
  }
  function Za(A) {
    var r,
      n,
      i = this,
      a = null,
      o = null,
      s = null,
      l = [],
      c = new be(),
      u = new be(),
      h =
        ('undefined' != typeof window &&
          'VRFrameData' in window &&
          ((o = new window.VRFrameData()),
          window.addEventListener('vrdisplaypresentchange', e, !1)),
        new be()),
      d = new E(),
      p = new Ce(),
      f = new x(),
      g = ((f.bounds = new Fe(0, 0, 0.5, 1)), f.layers.enable(1), new x()),
      m =
        ((g.bounds = new Fe(0.5, 0, 0.5, 1)),
        g.layers.enable(2),
        new Ja([f, g]));
    function v() {
      return null !== a && !0 === a.isPresenting;
    }
    function e() {
      var e, t;
      v()
        ? ((e = (t = a.getEyeParameters('left')).renderWidth),
          (t = t.renderHeight),
          (n = A.getPixelRatio()),
          (r = A.getSize()),
          A.setDrawingBufferSize(2 * e, t, 1),
          y.start())
        : i.enabled && (A.setDrawingBufferSize(r.width, r.height, n), y.stop());
    }
    m.layers.enable(1), m.layers.enable(2);
    var B = [];
    function w() {
      for (var e = 0; e < l.length; e++) {
        var t = l[e],
          A = (function (e) {
            for (
              var t = navigator.getGamepads && navigator.getGamepads(),
                A = 0,
                r = 0,
                n = t.length;
              A < n;
              A++
            ) {
              var i = t[A];
              if (
                i &&
                ('Daydream Controller' === i.id ||
                  'Gear VR Controller' === i.id ||
                  'Oculus Go Controller' === i.id ||
                  'OpenVR Gamepad' === i.id ||
                  i.id.startsWith('Oculus Touch') ||
                  i.id.startsWith('Spatial Controller'))
              ) {
                if (r === e) return i;
                r++;
              }
            }
          })(e);
        if (void 0 !== A && void 0 !== A.pose) {
          if (null === A.pose) return;
          var r = A.pose,
            r =
              (!1 === r.hasPosition && t.position.set(0.2, -0.6, -0.05),
              null !== r.position && t.position.fromArray(r.position),
              null !== r.orientation && t.quaternion.fromArray(r.orientation),
              t.matrix.compose(t.position, t.quaternion, t.scale),
              t.matrix.premultiply(c),
              t.matrix.decompose(t.position, t.quaternion, t.scale),
              (t.matrixWorldNeedsUpdate = !0),
              (t.visible = !0),
              'Daydream Controller' === A.id ? 0 : 1);
          B[e] !== A.buttons[r].pressed &&
            ((B[e] = A.buttons[r].pressed),
            !0 === B[e]
              ? t.dispatchEvent({ type: 'selectstart' })
              : (t.dispatchEvent({ type: 'selectend' }),
                t.dispatchEvent({ type: 'select' })));
        } else t.visible = !1;
      }
    }
    (this.enabled = !1),
      (this.userHeight = 1.6),
      (this.getController = function (e) {
        var t = l[e];
        return (
          void 0 === t &&
            (((t = new Ya()).matrixAutoUpdate = !1),
            (t.visible = !1),
            (l[e] = t)),
          t
        );
      }),
      (this.getDevice = function () {
        return a;
      }),
      (this.setDevice = function (e) {
        void 0 !== e && (a = e), y.setContext(e);
      }),
      (this.setPoseTarget = function (e) {
        void 0 !== e && (s = e);
      }),
      (this.getCamera = function (e) {
        if (null === a) return e.position.set(0, i.userHeight, 0), e;
        (a.depthNear = e.near), (a.depthFar = e.far), a.getFrameData(o);
        var t = a.stageParameters,
          t =
            (t
              ? c.fromArray(t.sittingToStandingTransform)
              : c.makeTranslation(0, i.userHeight, 0),
            o.pose),
          A = null !== s ? s : e;
        if (
          (A.matrix.copy(c),
          A.matrix.decompose(A.position, A.quaternion, A.scale),
          null !== t.orientation &&
            (d.fromArray(t.orientation), A.quaternion.multiply(d)),
          null !== t.position &&
            (d.setFromRotationMatrix(c),
            p.fromArray(t.position),
            p.applyQuaternion(d),
            A.position.add(p)),
          A.updateMatrixWorld(),
          !1 === a.isPresenting)
        )
          return e;
        (f.near = e.near),
          (g.near = e.near),
          (f.far = e.far),
          (g.far = e.far),
          m.matrixWorld.copy(e.matrixWorld),
          m.matrixWorldInverse.copy(e.matrixWorldInverse),
          f.matrixWorldInverse.fromArray(o.leftViewMatrix),
          g.matrixWorldInverse.fromArray(o.rightViewMatrix),
          u.getInverse(c),
          f.matrixWorldInverse.multiply(u),
          g.matrixWorldInverse.multiply(u);
        (t = A.parent),
          null !== t &&
            (h.getInverse(t.matrixWorld),
            f.matrixWorldInverse.multiply(h),
            g.matrixWorldInverse.multiply(h)),
          f.matrixWorld.getInverse(f.matrixWorldInverse),
          g.matrixWorld.getInverse(g.matrixWorldInverse),
          f.projectionMatrix.fromArray(o.leftProjectionMatrix),
          g.projectionMatrix.fromArray(o.rightProjectionMatrix),
          m.projectionMatrix.copy(f.projectionMatrix),
          (e = a.getLayers());
        return (
          e.length &&
            (null !== (A = e[0]).leftBounds &&
              4 === A.leftBounds.length &&
              f.bounds.fromArray(A.leftBounds),
            null !== A.rightBounds) &&
            4 === A.rightBounds.length &&
            g.bounds.fromArray(A.rightBounds),
          w(),
          m
        );
      }),
      (this.getStandingMatrix = function () {
        return c;
      }),
      (this.isPresenting = v);
    var y = new er();
    (this.setAnimationLoop = function (e) {
      y.setAnimationLoop(e);
    }),
      (this.submitFrame = function () {
        v() && a.submitFrame();
      }),
      (this.dispose = function () {
        'undefined' != typeof window &&
          window.removeEventListener('vrdisplaypresentchange', e);
      });
  }
  function qa(A) {
    var r = A.context,
      t = null,
      u = null,
      h = null,
      d = null,
      p = [],
      f = [];
    function a() {
      return null !== u && null !== h;
    }
    var e = new x(),
      n = (e.layers.enable(1), (e.viewport = new Fe()), new x()),
      g = (n.layers.enable(2), (n.viewport = new Fe()), new Ja([e, n]));
    function i(e) {
      var t = p[f.indexOf(e.inputSource)];
      t && t.dispatchEvent({ type: e.type });
    }
    function o() {
      A.setFramebuffer(null), l.stop();
    }
    function s(e, t) {
      null === t
        ? e.matrixWorld.copy(e.matrix)
        : e.matrixWorld.multiplyMatrices(t.matrixWorld, e.matrix),
        e.matrixWorldInverse.getInverse(e.matrixWorld);
    }
    g.layers.enable(1),
      g.layers.enable(2),
      (this.enabled = !1),
      (this.getController = function (e) {
        var t = p[e];
        return (
          void 0 === t &&
            (((t = new Ya()).matrixAutoUpdate = !1),
            (t.visible = !1),
            (p[e] = t)),
          t
        );
      }),
      (this.getDevice = function () {
        return t;
      }),
      (this.setDevice = function (e) {
        void 0 !== e && (t = e),
          e instanceof XRDevice && r.setCompatibleXRDevice(e);
      }),
      (this.setSession = function (e, t) {
        null !== (u = e) &&
          (u.addEventListener('select', i),
          u.addEventListener('selectstart', i),
          u.addEventListener('selectend', i),
          u.addEventListener('end', o),
          (u.baseLayer = new XRWebGLLayer(u, r)),
          u.requestFrameOfReference(t.frameOfReferenceType).then(function (e) {
            (h = e),
              A.setFramebuffer(u.baseLayer.framebuffer),
              l.setContext(u),
              l.start();
          }),
          (f = u.getInputSources()),
          u.addEventListener('inputsourceschange', function () {
            (f = u.getInputSources()), console.log(f);
          }));
      }),
      (this.getCamera = function (e) {
        if (a()) {
          var t = e.parent,
            A = g.cameras;
          s(g, t);
          for (var r = 0; r < A.length; r++) s(A[r], t);
          e.matrixWorld.copy(g.matrixWorld);
          for (var n = e.children, r = 0, i = n.length; r < i; r++)
            n[r].updateMatrixWorld(!0);
          return g;
        }
        return e;
      }),
      (this.isPresenting = a);
    var m = null;
    var l = new er();
    l.setAnimationLoop(function (e, t) {
      if (null !== (d = t.getDevicePose(h)))
        for (var A = u.baseLayer, r = t.views, n = 0; n < r.length; n++) {
          var i = r[n],
            a = A.getViewport(i),
            o = d.getViewMatrix(i),
            s = g.cameras[n];
          s.matrix.fromArray(o).getInverse(s.matrix),
            s.projectionMatrix.fromArray(i.projectionMatrix),
            s.viewport.set(a.x, a.y, a.width, a.height),
            0 === n &&
              (g.matrix.copy(s.matrix),
              g.projectionMatrix.copy(s.projectionMatrix));
        }
      for (n = 0; n < p.length; n++) {
        var l = p[n],
          c = f[n];
        if (c) {
          c = t.getInputPose(c, h);
          if (null !== c) {
            (l.matrix.elements = c.pointerMatrix),
              l.matrix.decompose(l.position, l.rotation, l.scale),
              (l.visible = !0);
            continue;
          }
        }
        l.visible = !1;
      }
      m && m(e);
    }),
      (this.setAnimationLoop = function (e) {
        m = e;
      }),
      (this.dispose = function () {}),
      (this.getStandingMatrix = function () {
        return (
          console.warn(
            'THREE.WebXRManager: getStandingMatrix() is no longer needed.',
          ),
          new THREE.Matrix4()
        );
      }),
      (this.submitFrame = function () {});
  }
  function $a(e) {
    var v,
      B,
      w,
      y,
      t,
      d,
      a,
      E,
      P,
      p,
      h,
      o,
      s,
      l,
      D,
      O,
      N,
      u,
      r =
        void 0 !== (e = e || {}).canvas
          ? e.canvas
          : document.createElementNS('http://www.w3.org/1999/xhtml', 'canvas'),
      A = void 0 !== e.context ? e.context : null,
      G = void 0 !== e.alpha && e.alpha,
      V = void 0 === e.depth || e.depth,
      k = void 0 === e.stencil || e.stencil,
      z = void 0 !== e.antialias && e.antialias,
      K = void 0 === e.premultipliedAlpha || e.premultipliedAlpha,
      X = void 0 !== e.preserveDrawingBuffer && e.preserveDrawingBuffer,
      j = void 0 !== e.powerPreference ? e.powerPreference : 'default',
      f = null,
      g = null,
      m =
        ((this.domElement = r),
        (this.context = null),
        (this.autoClear = !0),
        (this.autoClearColor = !0),
        (this.autoClearDepth = !0),
        (this.autoClearStencil = !0),
        (this.sortObjects = !0),
        (this.clippingPlanes = []),
        (this.localClippingEnabled = !1),
        (this.gammaFactor = 2),
        (this.gammaInput = !1),
        (this.gammaOutput = !1),
        (this.physicallyCorrectLights = !1),
        (this.toneMapping = 1),
        (this.toneMappingExposure = 1),
        (this.toneMappingWhitePoint = 1),
        (this.maxMorphTargets = 8),
        (this.maxMorphNormals = 4),
        this),
      W = !1,
      Y = null,
      J = null,
      x = null,
      b = -1,
      C = { geometry: null, program: null, wireframe: !1 },
      F = null,
      T = null,
      _ = new Fe(),
      n = new Fe(),
      Z = null,
      q = 0,
      U = r.width,
      M = r.height,
      S = 1,
      i = new Fe(0, 0, U, M),
      c = new Fe(0, 0, U, M),
      $ = !1,
      ee = new KA(),
      Q = new Ai(),
      te = !1,
      Ae = !1,
      L = new be(),
      H = new Ce();
    function re() {
      return null === J ? S : 1;
    }
    try {
      var ne = {
        alpha: G,
        depth: V,
        stencil: k,
        antialias: z,
        premultipliedAlpha: K,
        preserveDrawingBuffer: X,
        powerPreference: j,
      };
      if (
        (r.addEventListener('webglcontextlost', oe, !1),
        r.addEventListener('webglcontextrestored', se, !1),
        null ===
          (v =
            A ||
            r.getContext('webgl', ne) ||
            r.getContext('experimental-webgl', ne)))
      )
        throw null !== r.getContext('webgl')
          ? new Error(
              'Error creating WebGL context with your selected attributes.',
            )
          : new Error('Error creating WebGL context.');
      void 0 === v.getShaderPrecisionFormat &&
        (v.getShaderPrecisionFormat = function () {
          return { rangeMin: 1, rangeMax: 1, precision: 1 };
        });
    } catch (e) {
      console.error('THREE.WebGLRenderer: ' + e.message);
    }
    function ie() {
      (B = new ri(v)),
        (w = new ti(v, B, e)).isWebGL2 ||
          (B.get('WEBGL_depth_texture'),
          B.get('OES_texture_float'),
          B.get('OES_texture_half_float'),
          B.get('OES_texture_half_float_linear'),
          B.get('OES_standard_derivatives'),
          B.get('OES_element_index_uint'),
          B.get('ANGLE_instanced_arrays')),
        B.get('OES_texture_float_linear'),
        (u = new Wa(v, B, w)),
        (y = new Xa(v, B, u, w)).scissor(n.copy(c).multiplyScalar(S)),
        y.viewport(_.copy(i).multiplyScalar(S)),
        (t = new ai(v)),
        (d = new oa()),
        (a = new ja(v, B, y, d, w, u, t)),
        (E = new tr(v)),
        (P = new ni(v, E, t)),
        (p = new li(P, t)),
        (D = new si(v)),
        (h = new aa(m, B, w)),
        (o = new ha()),
        (s = new Va()),
        (l = new $n(m, y, p, K)),
        (O = new ei(v, B, t, w)),
        (N = new ii(v, B, t, w)),
        (t.programs = h.programs),
        (m.context = v),
        (m.capabilities = w),
        (m.extensions = B),
        (m.properties = d),
        (m.renderLists = o),
        (m.state = y),
        (m.info = t);
    }
    ie();
    var I = new ('xr' in navigator ? qa : Za)(m),
      ae = ((this.vr = I), new Ka(m, p, w.maxTextureSize));
    function oe(e) {
      e.preventDefault(),
        console.log('THREE.WebGLRenderer: Context Lost.'),
        (W = !0);
    }
    function se() {
      console.log('THREE.WebGLRenderer: Context Restored.'), (W = !1), ie();
    }
    function le(e) {
      var e = e.target;
      e.removeEventListener('dispose', le), ce((e = e)), d.remove(e);
    }
    function ce(e) {
      var t = d.get(e).program;
      (e.program = void 0) !== t && h.releaseProgram(t);
    }
    (this.shadowMap = ae),
      (this.getContext = function () {
        return v;
      }),
      (this.getContextAttributes = function () {
        return v.getContextAttributes();
      }),
      (this.forceContextLoss = function () {
        var e = B.get('WEBGL_lose_context');
        e && e.loseContext();
      }),
      (this.forceContextRestore = function () {
        var e = B.get('WEBGL_lose_context');
        e && e.restoreContext();
      }),
      (this.getPixelRatio = function () {
        return S;
      }),
      (this.setPixelRatio = function (e) {
        void 0 !== e && ((S = e), this.setSize(U, M, !1));
      }),
      (this.getSize = function () {
        return { width: U, height: M };
      }),
      (this.setSize = function (e, t, A) {
        I.isPresenting()
          ? console.warn(
              "THREE.WebGLRenderer: Can't change size while VR device is presenting.",
            )
          : ((U = e),
            (M = t),
            (r.width = e * S),
            (r.height = t * S),
            !1 !== A &&
              ((r.style.width = e + 'px'), (r.style.height = t + 'px')),
            this.setViewport(0, 0, e, t));
      }),
      (this.getDrawingBufferSize = function () {
        return { width: U * S, height: M * S };
      }),
      (this.setDrawingBufferSize = function (e, t, A) {
        (U = e),
          (M = t),
          (S = A),
          (r.width = e * A),
          (r.height = t * A),
          this.setViewport(0, 0, e, t);
      }),
      (this.getCurrentViewport = function () {
        return _;
      }),
      (this.setViewport = function (e, t, A, r) {
        i.set(e, M - t - r, A, r), y.viewport(_.copy(i).multiplyScalar(S));
      }),
      (this.setScissor = function (e, t, A, r) {
        c.set(e, M - t - r, A, r), y.scissor(n.copy(c).multiplyScalar(S));
      }),
      (this.setScissorTest = function (e) {
        y.setScissorTest(($ = e));
      }),
      (this.getClearColor = function () {
        return l.getClearColor();
      }),
      (this.setClearColor = function () {
        l.setClearColor.apply(l, arguments);
      }),
      (this.getClearAlpha = function () {
        return l.getClearAlpha();
      }),
      (this.setClearAlpha = function () {
        l.setClearAlpha.apply(l, arguments);
      }),
      (this.clear = function (e, t, A) {
        var r = 0;
        (void 0 !== e && !e) || (r |= v.COLOR_BUFFER_BIT),
          (void 0 !== t && !t) || (r |= v.DEPTH_BUFFER_BIT),
          (void 0 !== A && !A) || (r |= v.STENCIL_BUFFER_BIT),
          v.clear(r);
      }),
      (this.clearColor = function () {
        this.clear(!0, !1, !1);
      }),
      (this.clearDepth = function () {
        this.clear(!1, !0, !1);
      }),
      (this.clearStencil = function () {
        this.clear(!1, !1, !0);
      }),
      (this.clearTarget = function (e, t, A, r) {
        this.setRenderTarget(e), this.clear(t, A, r);
      }),
      (this.dispose = function () {
        r.removeEventListener('webglcontextlost', oe, !1),
          r.removeEventListener('webglcontextrestored', se, !1),
          o.dispose(),
          s.dispose(),
          d.dispose(),
          p.dispose(),
          I.dispose(),
          fe.stop();
      }),
      (this.renderBufferImmediate = function (e, t) {
        y.initAttributes();
        var A = d.get(e),
          t =
            (e.hasPositions && !A.position && (A.position = v.createBuffer()),
            e.hasNormals && !A.normal && (A.normal = v.createBuffer()),
            e.hasUvs && !A.uv && (A.uv = v.createBuffer()),
            e.hasColors && !A.color && (A.color = v.createBuffer()),
            t.getAttributes());
        e.hasPositions &&
          (v.bindBuffer(v.ARRAY_BUFFER, A.position),
          v.bufferData(v.ARRAY_BUFFER, e.positionArray, v.DYNAMIC_DRAW),
          y.enableAttribute(t.position),
          v.vertexAttribPointer(t.position, 3, v.FLOAT, !1, 0, 0)),
          e.hasNormals &&
            (v.bindBuffer(v.ARRAY_BUFFER, A.normal),
            v.bufferData(v.ARRAY_BUFFER, e.normalArray, v.DYNAMIC_DRAW),
            y.enableAttribute(t.normal),
            v.vertexAttribPointer(t.normal, 3, v.FLOAT, !1, 0, 0)),
          e.hasUvs &&
            (v.bindBuffer(v.ARRAY_BUFFER, A.uv),
            v.bufferData(v.ARRAY_BUFFER, e.uvArray, v.DYNAMIC_DRAW),
            y.enableAttribute(t.uv),
            v.vertexAttribPointer(t.uv, 2, v.FLOAT, !1, 0, 0)),
          e.hasColors &&
            (v.bindBuffer(v.ARRAY_BUFFER, A.color),
            v.bufferData(v.ARRAY_BUFFER, e.colorArray, v.DYNAMIC_DRAW),
            y.enableAttribute(t.color),
            v.vertexAttribPointer(t.color, 3, v.FLOAT, !1, 0, 0)),
          y.disableUnusedAttributes(),
          v.drawArrays(v.TRIANGLES, 0, e.count),
          (e.count = 0);
      }),
      (this.renderBufferDirect = function (e, t, A, r, n, i) {
        var a = n.isMesh && n.normalMatrix.determinant() < 0,
          a = (y.setMaterial(r, a), Be(e, t, r, n)),
          e = !1,
          t =
            ((C.geometry === A.id &&
              C.program === a.id &&
              C.wireframe === (!0 === r.wireframe)) ||
              ((C.geometry = A.id),
              (C.program = a.id),
              (C.wireframe = !0 === r.wireframe),
              (e = !0)),
            n.morphTargetInfluences && (D.update(n, A, r, a), (e = !0)),
            A.index),
          o = A.attributes.position,
          s = 1,
          l =
            (!0 === r.wireframe && ((t = P.getWireframeAttribute(A)), (s = 2)),
            O),
          e =
            (null !== t && ((c = E.get(t)), (l = N).setIndex(c)),
            e &&
              ((function (e, t, A) {
                if (
                  A &&
                  A.isInstancedBufferGeometry & !w.isWebGL2 &&
                  null === B.get('ANGLE_instanced_arrays')
                )
                  return console.error(
                    'THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.',
                  );
                y.initAttributes();
                var r,
                  n = A.attributes,
                  i = t.getAttributes(),
                  a = e.defaultAttributeValues;
                for (r in i) {
                  var o = i[r];
                  if (0 <= o) {
                    var s = n[r];
                    if (void 0 !== s) {
                      var l,
                        c,
                        u,
                        h,
                        d,
                        p = s.normalized,
                        f = s.itemSize,
                        g = E.get(s);
                      void 0 !== g &&
                        ((l = g.buffer),
                        (c = g.type),
                        (g = g.bytesPerElement),
                        s.isInterleavedBufferAttribute
                          ? ((u = s.data),
                            (h = u.stride),
                            (d = s.offset),
                            u && u.isInstancedInterleavedBuffer
                              ? (y.enableAttributeAndDivisor(
                                  o,
                                  u.meshPerAttribute,
                                ),
                                void 0 === A.maxInstancedCount &&
                                  (A.maxInstancedCount =
                                    u.meshPerAttribute * u.count))
                              : y.enableAttribute(o),
                            v.bindBuffer(v.ARRAY_BUFFER, l),
                            v.vertexAttribPointer(o, f, c, p, h * g, d * g))
                          : (s.isInstancedBufferAttribute
                              ? (y.enableAttributeAndDivisor(
                                  o,
                                  s.meshPerAttribute,
                                ),
                                void 0 === A.maxInstancedCount &&
                                  (A.maxInstancedCount =
                                    s.meshPerAttribute * s.count))
                              : y.enableAttribute(o),
                            v.bindBuffer(v.ARRAY_BUFFER, l),
                            v.vertexAttribPointer(o, f, c, p, 0, 0)));
                    } else if (void 0 !== a) {
                      var m = a[r];
                      if (void 0 !== m)
                        switch (m.length) {
                          case 2:
                            v.vertexAttrib2fv(o, m);
                            break;
                          case 3:
                            v.vertexAttrib3fv(o, m);
                            break;
                          case 4:
                            v.vertexAttrib4fv(o, m);
                            break;
                          default:
                            v.vertexAttrib1fv(o, m);
                        }
                    }
                  }
                }
                y.disableUnusedAttributes();
              })(r, a, A),
              null !== t) &&
              v.bindBuffer(v.ELEMENT_ARRAY_BUFFER, c.buffer),
            1 / 0),
          a =
            (null !== t ? (e = t.count) : void 0 !== o && (e = o.count),
            A.drawRange.start * s),
          c = A.drawRange.count * s,
          t = null !== i ? i.start * s : 0,
          o = null !== i ? i.count * s : 1 / 0,
          i = Math.max(a, t),
          s = Math.min(e, a + c, t + o) - 1,
          e = Math.max(0, s - i + 1);
        if (0 !== e) {
          if (n.isMesh)
            if (!0 === r.wireframe)
              y.setLineWidth(r.wireframeLinewidth * re()), l.setMode(v.LINES);
            else
              switch (n.drawMode) {
                case eA:
                  l.setMode(v.TRIANGLES);
                  break;
                case 1:
                  l.setMode(v.TRIANGLE_STRIP);
                  break;
                case 2:
                  l.setMode(v.TRIANGLE_FAN);
              }
          else
            n.isLine
              ? ((a = r.linewidth),
                y.setLineWidth((a = void 0 === a ? 1 : a) * re()),
                n.isLineSegments
                  ? l.setMode(v.LINES)
                  : n.isLineLoop
                  ? l.setMode(v.LINE_LOOP)
                  : l.setMode(v.LINE_STRIP))
              : n.isPoints
              ? l.setMode(v.POINTS)
              : n.isSprite && l.setMode(v.TRIANGLES);
          A && A.isInstancedBufferGeometry
            ? 0 < A.maxInstancedCount && l.renderInstances(A, i, e)
            : l.render(i, e);
        }
      }),
      (this.compile = function (A, e) {
        (g = s.get(A, e)).init(),
          A.traverse(function (e) {
            e.isLight && (g.pushLight(e), e.castShadow) && g.pushShadow(e);
          }),
          g.setupLights(e),
          A.traverse(function (e) {
            if (e.material)
              if (Array.isArray(e.material))
                for (var t = 0; t < e.material.length; t++)
                  ve(e.material[t], A.fog, e);
              else ve(e.material, A.fog, e);
          });
      });
    var ue = null;
    var he,
      de,
      pe,
      fe = new er();
    function ge(e, t, A, r) {
      for (var n = 0, i = e.length; n < i; n++) {
        var a = e[n],
          o = a.object,
          s = a.geometry,
          l = void 0 === r ? a.material : r,
          c = a.group;
        if (A.isArrayCamera)
          for (var u = (T = A).cameras, h = 0, d = u.length; h < d; h++) {
            var p,
              f,
              g,
              m,
              v = u[h];
            o.layers.test(v.layers) &&
              ('viewport' in v
                ? y.viewport(_.copy(v.viewport))
                : ((p = (m = v.bounds).x * U),
                  (f = m.y * M),
                  (g = m.z * U),
                  (m = m.w * M),
                  y.viewport(_.set(p, f, g, m).multiplyScalar(S))),
              me(o, t, v, s, l, c));
          }
        else (T = null), me(o, t, A, s, l, c);
      }
    }
    function me(e, t, A, r, n, i) {
      var a, o;
      e.onBeforeRender(m, t, A, r, n, i),
        (g = s.get(t, T || A)),
        e.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse, e.matrixWorld),
        e.normalMatrix.getNormalMatrix(e.modelViewMatrix),
        e.isImmediateRenderObject
          ? (y.setMaterial(n),
            (a = Be(A, t.fog, n, e)),
            (C.geometry = null),
            (C.program = null),
            (C.wireframe = !1),
            (o = a),
            e.render(function (e) {
              m.renderBufferImmediate(e, o);
            }))
          : m.renderBufferDirect(A, t.fog, r, n, e, i),
        e.onAfterRender(m, t, A, r, n, i),
        (g = s.get(t, T || A));
    }
    function ve(e, t, A) {
      var r = d.get(e),
        n = g.state.lights,
        i = g.state.shadowsArray,
        a = r.lightsHash,
        o = n.state.hash,
        i = h.getParameters(
          e,
          n.state,
          i,
          t,
          Q.numPlanes,
          Q.numIntersection,
          A,
        ),
        A = h.getProgramCode(e, i),
        s = r.program,
        l = !0;
      if (void 0 === s) e.addEventListener('dispose', le);
      else if (s.code !== A) ce(e);
      else {
        if (
          a.stateID !== o.stateID ||
          a.directionalLength !== o.directionalLength ||
          a.pointLength !== o.pointLength ||
          a.spotLength !== o.spotLength ||
          a.rectAreaLength !== o.rectAreaLength ||
          a.hemiLength !== o.hemiLength ||
          a.shadowsLength !== o.shadowsLength
        )
          (a.stateID = o.stateID),
            (a.directionalLength = o.directionalLength),
            (a.pointLength = o.pointLength),
            (a.spotLength = o.spotLength),
            (a.rectAreaLength = o.rectAreaLength),
            (a.hemiLength = o.hemiLength),
            (a.shadowsLength = o.shadowsLength);
        else if (void 0 !== i.shaderID) return;
        l = !1;
      }
      l &&
        (i.shaderID
          ? ((l = $A[i.shaderID]),
            (r.shader = {
              name: e.type,
              uniforms: Te.clone(l.uniforms),
              vertexShader: l.vertexShader,
              fragmentShader: l.fragmentShader,
            }))
          : (r.shader = {
              name: e.type,
              uniforms: e.uniforms,
              vertexShader: e.vertexShader,
              fragmentShader: e.fragmentShader,
            }),
        e.onBeforeCompile(r.shader, m),
        (A = h.getProgramCode(e, i)),
        (s = h.acquireProgram(e, r.shader, i, A)),
        (r.program = s),
        (e.program = s));
      var c = s.getAttributes();
      if (e.morphTargets)
        for (
          var u = (e.numSupportedMorphTargets = 0);
          u < m.maxMorphTargets;
          u++
        )
          0 <= c['morphTarget' + u] && e.numSupportedMorphTargets++;
      if (e.morphNormals)
        for (u = e.numSupportedMorphNormals = 0; u < m.maxMorphNormals; u++)
          0 <= c['morphNormal' + u] && e.numSupportedMorphNormals++;
      (l = r.shader.uniforms),
        ((e.isShaderMaterial || e.isRawShaderMaterial) && !0 !== e.clipping) ||
          ((r.numClippingPlanes = Q.numPlanes),
          (r.numIntersection = Q.numIntersection),
          (l.clippingPlanes = Q.uniform)),
        (r.fog = t),
        void 0 === a && (r.lightsHash = a = {}),
        (a.stateID = o.stateID),
        (a.directionalLength = o.directionalLength),
        (a.pointLength = o.pointLength),
        (a.spotLength = o.spotLength),
        (a.rectAreaLength = o.rectAreaLength),
        (a.hemiLength = o.hemiLength),
        (a.shadowsLength = o.shadowsLength),
        e.lights &&
          ((l.ambientLightColor.value = n.state.ambient),
          (l.directionalLights.value = n.state.directional),
          (l.spotLights.value = n.state.spot),
          (l.rectAreaLights.value = n.state.rectArea),
          (l.pointLights.value = n.state.point),
          (l.hemisphereLights.value = n.state.hemi),
          (l.directionalShadowMap.value = n.state.directionalShadowMap),
          (l.directionalShadowMatrix.value = n.state.directionalShadowMatrix),
          (l.spotShadowMap.value = n.state.spotShadowMap),
          (l.spotShadowMatrix.value = n.state.spotShadowMatrix),
          (l.pointShadowMap.value = n.state.pointShadowMap),
          (l.pointShadowMatrix.value = n.state.pointShadowMatrix)),
        (i = r.program.getUniforms()),
        (A = Yi.seqWithValue(i.seq, l));
      r.uniformsList = A;
    }
    function Be(e, t, A, r) {
      q = 0;
      var n,
        i,
        a = d.get(A),
        o = g.state.lights,
        s = a.lightsHash,
        o = o.state.hash,
        l =
          (te &&
            (Ae || e !== F) &&
            ((l = e === F && A.id === b),
            Q.setState(
              A.clippingPlanes,
              A.clipIntersection,
              A.clipShadows,
              e,
              a,
              l,
            )),
          !1 === A.needsUpdate &&
            (void 0 === a.program ||
              (A.fog && a.fog !== t) ||
              (A.lights &&
                (s.stateID !== o.stateID ||
                  s.directionalLength !== o.directionalLength ||
                  s.pointLength !== o.pointLength ||
                  s.spotLength !== o.spotLength ||
                  s.rectAreaLength !== o.rectAreaLength ||
                  s.hemiLength !== o.hemiLength ||
                  s.shadowsLength !== o.shadowsLength)) ||
              (void 0 !== a.numClippingPlanes &&
                (a.numClippingPlanes !== Q.numPlanes ||
                  a.numIntersection !== Q.numIntersection))) &&
            (A.needsUpdate = !0),
          A.needsUpdate && (ve(A, t, r), (A.needsUpdate = !1)),
          !1),
        s = !1,
        o = !1,
        c = a.program,
        u = c.getUniforms(),
        h = a.shader.uniforms;
      return (
        y.useProgram(c.program) && (o = s = l = !0),
        A.id !== b && ((b = A.id), (s = !0)),
        (l || e !== F) &&
          (u.setValue(v, 'projectionMatrix', e.projectionMatrix),
          w.logarithmicDepthBuffer &&
            u.setValue(
              v,
              'logDepthBufFC',
              2 / (Math.log(e.far + 1) / Math.LN2),
            ),
          F !== (T || e) && ((F = T || e), (o = s = !0)),
          (A.isShaderMaterial ||
            A.isMeshPhongMaterial ||
            A.isMeshStandardMaterial ||
            A.envMap) &&
            void 0 !== (l = u.map.cameraPosition) &&
            l.setValue(v, H.setFromMatrixPosition(e.matrixWorld)),
          A.isMeshPhongMaterial ||
            A.isMeshLambertMaterial ||
            A.isMeshBasicMaterial ||
            A.isMeshStandardMaterial ||
            A.isShaderMaterial ||
            A.skinning) &&
          u.setValue(v, 'viewMatrix', e.matrixWorldInverse),
        A.skinning &&
          (u.setOptional(v, r, 'bindMatrix'),
          u.setOptional(v, r, 'bindMatrixInverse'),
          (l = r.skeleton)) &&
          ((e = l.bones),
          w.floatVertexTextures
            ? (void 0 === l.boneTexture &&
                ((e = Math.sqrt(4 * e.length)),
                (e = xe.ceilPowerOfTwo(e)),
                (e = Math.max(e, 4)),
                (i = new Float32Array(e * e * 4)).set(l.boneMatrices),
                ((n = new OA(i, e, e, wt, ht)).needsUpdate = !0),
                (l.boneMatrices = i),
                (l.boneTexture = n),
                (l.boneTextureSize = e)),
              u.setValue(v, 'boneTexture', l.boneTexture),
              u.setValue(v, 'boneTextureSize', l.boneTextureSize))
            : u.setOptional(v, l, 'boneMatrices')),
        s &&
          (u.setValue(v, 'toneMappingExposure', m.toneMappingExposure),
          u.setValue(v, 'toneMappingWhitePoint', m.toneMappingWhitePoint),
          A.lights &&
            ((i = o),
            ((n = h).ambientLightColor.needsUpdate = i),
            (n.directionalLights.needsUpdate = i),
            (n.pointLights.needsUpdate = i),
            (n.spotLights.needsUpdate = i),
            (n.rectAreaLights.needsUpdate = i),
            (n.hemisphereLights.needsUpdate = i)),
          t &&
            A.fog &&
            ((e = t),
            ((l = h).fogColor.value = e.color),
            e.isFog
              ? ((l.fogNear.value = e.near), (l.fogFar.value = e.far))
              : e.isFogExp2 && (l.fogDensity.value = e.density)),
          A.isMeshBasicMaterial
            ? R(h, A)
            : A.isMeshLambertMaterial
            ? (R(h, A),
              (s = h),
              (o = A).emissiveMap && (s.emissiveMap.value = o.emissiveMap))
            : A.isMeshPhongMaterial
            ? (R(h, A),
              A.isMeshToonMaterial
                ? (we((t = h), (e = A)),
                  e.gradientMap && (t.gradientMap.value = e.gradientMap))
                : we(h, A))
            : A.isMeshStandardMaterial
            ? (R(h, A),
              A.isMeshPhysicalMaterial
                ? (ye((s = h), (o = A)),
                  (s.reflectivity.value = o.reflectivity),
                  (s.clearCoat.value = o.clearCoat),
                  (s.clearCoatRoughness.value = o.clearCoatRoughness))
                : ye(h, A))
            : A.isMeshDepthMaterial
            ? (R(h, A),
              (t = h),
              (e = A).displacementMap &&
                ((t.displacementMap.value = e.displacementMap),
                (t.displacementScale.value = e.displacementScale),
                (t.displacementBias.value = e.displacementBias)))
            : A.isMeshDistanceMaterial
            ? (R(h, A),
              (s = h),
              (o = A).displacementMap &&
                ((s.displacementMap.value = o.displacementMap),
                (s.displacementScale.value = o.displacementScale),
                (s.displacementBias.value = o.displacementBias)),
              s.referencePosition.value.copy(o.referencePosition),
              (s.nearDistance.value = o.nearDistance),
              (s.farDistance.value = o.farDistance))
            : A.isMeshNormalMaterial
            ? (R(h, A),
              (t = h),
              (e = A).bumpMap &&
                ((t.bumpMap.value = e.bumpMap),
                (t.bumpScale.value = e.bumpScale),
                e.side === Ee) &&
                (t.bumpScale.value *= -1),
              e.normalMap &&
                ((t.normalMap.value = e.normalMap),
                t.normalScale.value.copy(e.normalScale),
                e.side === Ee) &&
                t.normalScale.value.negate(),
              e.displacementMap &&
                ((t.displacementMap.value = e.displacementMap),
                (t.displacementScale.value = e.displacementScale),
                (t.displacementBias.value = e.displacementBias)))
            : A.isLineBasicMaterial
            ? ((s = A),
              ((o = h).diffuse.value = s.color),
              (o.opacity.value = s.opacity),
              A.isLineDashedMaterial &&
                ((t = A),
                ((e = h).dashSize.value = t.dashSize),
                (e.totalSize.value = t.dashSize + t.gapSize),
                (e.scale.value = t.scale)))
            : A.isPointsMaterial
            ? ((o = A),
              ((s = h).diffuse.value = o.color),
              (s.opacity.value = o.opacity),
              (s.size.value = o.size * S),
              (s.scale.value = 0.5 * M),
              (s.map.value = o.map),
              null !== o.map &&
                (!0 === o.map.matrixAutoUpdate && o.map.updateMatrix(),
                s.uvTransform.value.copy(o.map.matrix)))
            : A.isSpriteMaterial
            ? ((e = A),
              ((t = h).diffuse.value = e.color),
              (t.opacity.value = e.opacity),
              (t.rotation.value = e.rotation),
              (t.map.value = e.map),
              null !== e.map &&
                (!0 === e.map.matrixAutoUpdate && e.map.updateMatrix(),
                t.uvTransform.value.copy(e.map.matrix)))
            : A.isShadowMaterial &&
              ((h.color.value = A.color), (h.opacity.value = A.opacity)),
          void 0 !== h.ltc_1 && (h.ltc_1.value = _e.LTC_1),
          void 0 !== h.ltc_2 && (h.ltc_2.value = _e.LTC_2),
          Yi.upload(v, a.uniformsList, h, m)),
        A.isShaderMaterial &&
          !0 === A.uniformsNeedUpdate &&
          (Yi.upload(v, a.uniformsList, h, m), (A.uniformsNeedUpdate = !1)),
        A.isSpriteMaterial && u.setValue(v, 'center', r.center),
        u.setValue(v, 'modelViewMatrix', r.modelViewMatrix),
        u.setValue(v, 'normalMatrix', r.normalMatrix),
        u.setValue(v, 'modelMatrix', r.matrixWorld),
        c
      );
    }
    function R(e, t) {
      var A;
      (e.opacity.value = t.opacity),
        t.color && (e.diffuse.value = t.color),
        t.emissive &&
          e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),
        t.map && (e.map.value = t.map),
        t.alphaMap && (e.alphaMap.value = t.alphaMap),
        t.specularMap && (e.specularMap.value = t.specularMap),
        t.envMap &&
          ((e.envMap.value = t.envMap),
          (e.flipEnvMap.value = t.envMap && t.envMap.isCubeTexture ? -1 : 1),
          (e.reflectivity.value = t.reflectivity),
          (e.refractionRatio.value = t.refractionRatio),
          (e.maxMipLevel.value = d.get(t.envMap).__maxMipLevel)),
        t.lightMap &&
          ((e.lightMap.value = t.lightMap),
          (e.lightMapIntensity.value = t.lightMapIntensity)),
        t.aoMap &&
          ((e.aoMap.value = t.aoMap),
          (e.aoMapIntensity.value = t.aoMapIntensity)),
        t.map
          ? (A = t.map)
          : t.specularMap
          ? (A = t.specularMap)
          : t.displacementMap
          ? (A = t.displacementMap)
          : t.normalMap
          ? (A = t.normalMap)
          : t.bumpMap
          ? (A = t.bumpMap)
          : t.roughnessMap
          ? (A = t.roughnessMap)
          : t.metalnessMap
          ? (A = t.metalnessMap)
          : t.alphaMap
          ? (A = t.alphaMap)
          : t.emissiveMap && (A = t.emissiveMap),
        void 0 !== A &&
          (!0 ===
            (A = A.isWebGLRenderTarget ? A.texture : A).matrixAutoUpdate &&
            A.updateMatrix(),
          e.uvTransform.value.copy(A.matrix));
    }
    function we(e, t) {
      (e.specular.value = t.specular),
        (e.shininess.value = Math.max(t.shininess, 1e-4)),
        t.emissiveMap && (e.emissiveMap.value = t.emissiveMap),
        t.bumpMap &&
          ((e.bumpMap.value = t.bumpMap),
          (e.bumpScale.value = t.bumpScale),
          t.side === Ee) &&
          (e.bumpScale.value *= -1),
        t.normalMap &&
          ((e.normalMap.value = t.normalMap),
          e.normalScale.value.copy(t.normalScale),
          t.side === Ee) &&
          e.normalScale.value.negate(),
        t.displacementMap &&
          ((e.displacementMap.value = t.displacementMap),
          (e.displacementScale.value = t.displacementScale),
          (e.displacementBias.value = t.displacementBias));
    }
    function ye(e, t) {
      (e.roughness.value = t.roughness),
        (e.metalness.value = t.metalness),
        t.roughnessMap && (e.roughnessMap.value = t.roughnessMap),
        t.metalnessMap && (e.metalnessMap.value = t.metalnessMap),
        t.emissiveMap && (e.emissiveMap.value = t.emissiveMap),
        t.bumpMap &&
          ((e.bumpMap.value = t.bumpMap),
          (e.bumpScale.value = t.bumpScale),
          t.side === Ee) &&
          (e.bumpScale.value *= -1),
        t.normalMap &&
          ((e.normalMap.value = t.normalMap),
          e.normalScale.value.copy(t.normalScale),
          t.side === Ee) &&
          e.normalScale.value.negate(),
        t.displacementMap &&
          ((e.displacementMap.value = t.displacementMap),
          (e.displacementScale.value = t.displacementScale),
          (e.displacementBias.value = t.displacementBias)),
        t.envMap && (e.envMapIntensity.value = t.envMapIntensity);
    }
    fe.setAnimationLoop(function (e) {
      I.isPresenting() || (ue && ue(e));
    }),
      'undefined' != typeof window && fe.setContext(window),
      (this.setAnimationLoop = function (e) {
        (ue = e), I.setAnimationLoop(e), fe.start();
      }),
      (this.render = function (e, t, A, r) {
        var n, i;
        t && t.isCamera
          ? W ||
            ((C.geometry = null),
            (C.program = null),
            (C.wireframe = !1),
            (b = -1),
            !(F = null) === e.autoUpdate && e.updateMatrixWorld(),
            null === t.parent && t.updateMatrixWorld(),
            I.enabled && (t = I.getCamera(t)),
            (g = s.get(e, t)).init(),
            e.onBeforeRender(m, e, t, A),
            L.multiplyMatrices(t.projectionMatrix, t.matrixWorldInverse),
            ee.setFromMatrix(L),
            (Ae = this.localClippingEnabled),
            (te = Q.init(this.clippingPlanes, Ae, t)),
            (f = o.get(e, t)).init(),
            (function e(t, A, r) {
              if (!1 === t.visible) return;
              var n = t.layers.test(A.layers);
              if (n)
                if (t.isLight) g.pushLight(t), t.castShadow && g.pushShadow(t);
                else if (t.isSprite)
                  (t.frustumCulled && !ee.intersectsSprite(t)) ||
                    (r &&
                      H.setFromMatrixPosition(t.matrixWorld).applyMatrix4(L),
                    (i = p.update(t)),
                    (a = t.material),
                    f.push(t, i, a, H.z, null));
                else if (t.isImmediateRenderObject)
                  r && H.setFromMatrixPosition(t.matrixWorld).applyMatrix4(L),
                    f.push(t, null, t.material, H.z, null);
                else if (
                  (t.isMesh || t.isLine || t.isPoints) &&
                  (t.isSkinnedMesh && t.skeleton.update(),
                  !t.frustumCulled || ee.intersectsObject(t))
                ) {
                  r && H.setFromMatrixPosition(t.matrixWorld).applyMatrix4(L);
                  var i = p.update(t),
                    a = t.material;
                  if (Array.isArray(a))
                    for (var o = i.groups, s = 0, l = o.length; s < l; s++) {
                      var c = o[s],
                        u = a[c.materialIndex];
                      u && u.visible && f.push(t, i, u, H.z, c);
                    }
                  else a.visible && f.push(t, i, a, H.z, null);
                }
              var h = t.children;
              for (s = 0, l = h.length; s < l; s++) e(h[s], A, r);
            })(e, t, m.sortObjects),
            !0 === m.sortObjects ? f.sort() : f.sortByOrder(),
            te && Q.beginShadows(),
            (n = g.state.shadowsArray),
            ae.render(n, e, t),
            g.setupLights(t),
            te && Q.endShadows(),
            this.info.autoReset && this.info.reset(),
            this.setRenderTarget((A = void 0 === A ? null : A)),
            l.render(f, e, t, r),
            (n = f.opaque),
            (r = f.transparent),
            e.overrideMaterial
              ? ((i = e.overrideMaterial),
                n.length && ge(n, e, t, i),
                r.length && ge(r, e, t, i))
              : (n.length && ge(n, e, t), r.length && ge(r, e, t)),
            A && a.updateRenderTargetMipmap(A),
            y.buffers.depth.setTest(!0),
            y.buffers.depth.setMask(!0),
            y.buffers.color.setMask(!0),
            y.setPolygonOffset(!1),
            e.onAfterRender(m, e, t),
            I.enabled && I.submitFrame(),
            (g = f = null))
          : console.error(
              'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.',
            );
      }),
      (this.allocTextureUnit = function () {
        var e = q;
        return (
          e >= w.maxTextures &&
            console.warn(
              'THREE.WebGLRenderer: Trying to use ' +
                e +
                ' texture units while this GPU supports only ' +
                w.maxTextures,
            ),
          (q += 1),
          e
        );
      }),
      (this.setTexture2D =
        ((he = !1),
        function (e, t) {
          e &&
            e.isWebGLRenderTarget &&
            (he ||
              (console.warn(
                "THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead.",
              ),
              (he = !0)),
            (e = e.texture)),
            a.setTexture2D(e, t);
        })),
      (this.setTexture =
        ((de = !1),
        function (e, t) {
          de ||
            (console.warn(
              'THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead.',
            ),
            (de = !0)),
            a.setTexture2D(e, t);
        })),
      (this.setTextureCube =
        ((pe = !1),
        function (e, t) {
          e &&
            e.isWebGLRenderTargetCube &&
            (pe ||
              (console.warn(
                "THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead.",
              ),
              (pe = !0)),
            (e = e.texture)),
            (e && e.isCubeTexture) ||
            (Array.isArray(e.image) && 6 === e.image.length)
              ? a.setTextureCube(e, t)
              : a.setTextureCubeDynamic(e, t);
        })),
      (this.setFramebuffer = function (e) {
        Y = e;
      }),
      (this.getRenderTarget = function () {
        return J;
      }),
      (this.setRenderTarget = function (e) {
        (J = e) &&
          void 0 === d.get(e).__webglFramebuffer &&
          a.setupRenderTarget(e);
        var t,
          A = Y,
          r = !1;
        (Z = e
          ? ((t = d.get(e).__webglFramebuffer),
            e.isWebGLRenderTargetCube
              ? ((A = t[e.activeCubeFace]), (r = !0))
              : (A = t),
            _.copy(e.viewport),
            n.copy(e.scissor),
            e.scissorTest)
          : (_.copy(i).multiplyScalar(S), n.copy(c).multiplyScalar(S), $)),
          x !== A && (v.bindFramebuffer(v.FRAMEBUFFER, A), (x = A)),
          y.viewport(_),
          y.scissor(n),
          y.setScissorTest(Z),
          r &&
            ((t = d.get(e.texture)),
            v.framebufferTexture2D(
              v.FRAMEBUFFER,
              v.COLOR_ATTACHMENT0,
              v.TEXTURE_CUBE_MAP_POSITIVE_X + e.activeCubeFace,
              t.__webglTexture,
              e.activeMipMapLevel,
            ));
      }),
      (this.readRenderTargetPixels = function (e, t, A, r, n, i) {
        if (e && e.isWebGLRenderTarget) {
          var a = d.get(e).__webglFramebuffer;
          if (a) {
            var o = !1;
            a !== x && (v.bindFramebuffer(v.FRAMEBUFFER, a), (o = !0));
            try {
              var s = e.texture,
                l = s.format,
                c = s.type;
              l !== wt &&
              u.convert(l) !==
                v.getParameter(v.IMPLEMENTATION_COLOR_READ_FORMAT)
                ? console.error(
                    'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.',
                  )
                : c === at ||
                  u.convert(c) ===
                    v.getParameter(v.IMPLEMENTATION_COLOR_READ_TYPE) ||
                  (c === ht &&
                    (w.isWebGL2 ||
                      B.get('OES_texture_float') ||
                      B.get('WEBGL_color_buffer_float'))) ||
                  (c === dt &&
                    (w.isWebGL2
                      ? B.get('EXT_color_buffer_float')
                      : B.get('EXT_color_buffer_half_float')))
                ? v.checkFramebufferStatus(v.FRAMEBUFFER) ===
                  v.FRAMEBUFFER_COMPLETE
                  ? 0 <= t &&
                    t <= e.width - r &&
                    0 <= A &&
                    A <= e.height - n &&
                    v.readPixels(t, A, r, n, u.convert(l), u.convert(c), i)
                  : console.error(
                      'THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.',
                    )
                : console.error(
                    'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.',
                  );
            } finally {
              o && v.bindFramebuffer(v.FRAMEBUFFER, x);
            }
          }
        } else
          console.error(
            'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.',
          );
      }),
      (this.copyFramebufferToTexture = function (e, t, A) {
        var r = t.image.width,
          n = t.image.height,
          i = u.convert(t.format);
        this.setTexture2D(t, 0),
          v.copyTexImage2D(v.TEXTURE_2D, A || 0, i, e.x, e.y, r, n, 0);
      }),
      (this.copyTextureToTexture = function (e, t, A, r) {
        var n = t.image.width,
          i = t.image.height,
          a = u.convert(A.format),
          o = u.convert(A.type);
        this.setTexture2D(A, 0),
          t.isDataTexture
            ? v.texSubImage2D(
                v.TEXTURE_2D,
                r || 0,
                e.x,
                e.y,
                n,
                i,
                a,
                o,
                t.image.data,
              )
            : v.texSubImage2D(v.TEXTURE_2D, r || 0, e.x, e.y, a, o, t.image);
      });
  }
  function eo(e, t) {
    (this.name = ''),
      (this.color = new de(e)),
      (this.density = void 0 !== t ? t : 25e-5);
  }
  function to(e, t, A) {
    (this.name = ''),
      (this.color = new de(e)),
      (this.near = void 0 !== t ? t : 1),
      (this.far = void 0 !== A ? A : 1e3);
  }
  function Ao() {
    p.call(this),
      (this.type = 'Scene'),
      (this.background = null),
      (this.fog = null),
      (this.overrideMaterial = null),
      (this.autoUpdate = !0);
  }
  function ro(e, t) {
    (this.array = e),
      (this.stride = t),
      (this.count = void 0 !== e ? e.length / t : 0),
      (this.dynamic = !1),
      (this.updateRange = { offset: 0, count: -1 }),
      (this.version = 0);
  }
  function no(e, t, A, r) {
    (this.data = e),
      (this.itemSize = t),
      (this.offset = A),
      (this.normalized = !0 === r);
  }
  function io(e) {
    t.call(this),
      (this.type = 'SpriteMaterial'),
      (this.color = new de(16777215)),
      (this.map = null),
      (this.rotation = 0),
      (this.lights = !1),
      (this.transparent = !0),
      this.setValues(e);
  }
  function ao(e) {
    var t;
    p.call(this),
      (this.type = 'Sprite'),
      void 0 === pa &&
        ((pa = new $()),
        (t = new ro(
          new Float32Array([
            -0.5, -0.5, 0, 0, 0, 0.5, -0.5, 0, 1, 0, 0.5, 0.5, 0, 1, 1, -0.5,
            0.5, 0, 0, 1,
          ]),
          5,
        )),
        pa.setIndex([0, 1, 2, 0, 2, 3]),
        pa.addAttribute('position', new no(t, 3, 0, !1)),
        pa.addAttribute('uv', new no(t, 2, 3, !1))),
      (this.geometry = pa),
      (this.material = void 0 !== e ? e : new io()),
      (this.center = new he(0.5, 0.5));
  }
  function oo(e, t, A, r, n, i) {
    va.subVectors(e, A).addScalar(0.5).multiply(r),
      void 0 !== n
        ? ((Ba.x = i * va.x - n * va.y), (Ba.y = n * va.x + i * va.y))
        : Ba.copy(va),
      e.copy(t),
      (e.x += Ba.x),
      (e.y += Ba.y),
      e.applyMatrix4(wa);
  }
  function so() {
    p.call(this),
      (this.type = 'LOD'),
      Object.defineProperties(this, { levels: { enumerable: !0, value: [] } });
  }
  function lo(e, t) {
    if (
      ((this.bones = (e = e || []).slice(0)),
      (this.boneMatrices = new Float32Array(16 * this.bones.length)),
      void 0 === t)
    )
      this.calculateInverses();
    else if (this.bones.length === t.length) this.boneInverses = t.slice(0);
    else {
      console.warn('THREE.Skeleton boneInverses is the wrong length.'),
        (this.boneInverses = []);
      for (var A = 0, r = this.bones.length; A < r; A++)
        this.boneInverses.push(new be());
    }
  }
  function co() {
    p.call(this), (this.type = 'Bone');
  }
  function uo(e, t) {
    f.call(this, e, t),
      (this.type = 'SkinnedMesh'),
      (this.bindMode = 'attached'),
      (this.bindMatrix = new be()),
      (this.bindMatrixInverse = new be());
    e = new lo(this.initBones());
    this.bind(e, this.matrixWorld), this.normalizeSkinWeights();
  }
  function m(e) {
    t.call(this),
      (this.type = 'LineBasicMaterial'),
      (this.color = new de(16777215)),
      (this.linewidth = 1),
      (this.linecap = 'round'),
      (this.linejoin = 'round'),
      (this.lights = !1),
      this.setValues(e);
  }
  function g(e, t, A) {
    1 === A &&
      console.error(
        'THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead.',
      ),
      p.call(this),
      (this.type = 'Line'),
      (this.geometry = void 0 !== e ? e : new $()),
      (this.material =
        void 0 !== t ? t : new m({ color: 16777215 * Math.random() }));
  }
  function v(e, t) {
    g.call(this, e, t), (this.type = 'LineSegments');
  }
  function ho(e, t) {
    g.call(this, e, t), (this.type = 'LineLoop');
  }
  function po(e) {
    t.call(this),
      (this.type = 'PointsMaterial'),
      (this.color = new de(16777215)),
      (this.map = null),
      (this.size = 1),
      (this.sizeAttenuation = !0),
      (this.morphTargets = !1),
      (this.lights = !1),
      this.setValues(e);
  }
  function fo(e, t) {
    p.call(this),
      (this.type = 'Points'),
      (this.geometry = void 0 !== e ? e : new $()),
      (this.material =
        void 0 !== t ? t : new po({ color: 16777215 * Math.random() }));
  }
  function go(e, t, A, r, n, i, a, o, s) {
    h.call(this, e, t, A, r, n, i, a, o, s), (this.generateMipmaps = !1);
  }
  function mo(e, t, A, r, n, i, a, o, s, l, c, u) {
    h.call(this, null, i, a, o, s, l, r, n, c, u),
      (this.image = { width: t, height: A }),
      (this.mipmaps = e),
      (this.flipY = !1),
      (this.generateMipmaps = !1);
  }
  function vo(e, t, A, r, n, i, a, o, s) {
    h.call(this, e, t, A, r, n, i, a, o, s), (this.needsUpdate = !0);
  }
  function Bo(e, t, A, r, n, i, a, o, s, l) {
    if ((l = void 0 !== l ? l : bt) !== bt && l !== Ct)
      throw new Error(
        'DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat',
      );
    h.call(
      this,
      null,
      r,
      n,
      i,
      a,
      o,
      l,
      (A =
        void 0 === (A = void 0 === A && l === bt ? lt : A) && l === Ct
          ? mt
          : A),
      s,
    ),
      (this.image = { width: e, height: t }),
      (this.magFilter = void 0 !== a ? a : tt),
      (this.minFilter = void 0 !== o ? o : tt),
      (this.flipY = !1),
      (this.generateMipmaps = !1);
  }
  function wo(e) {
    $.call(this), (this.type = 'WireframeGeometry');
    var t,
      A,
      r,
      n,
      i,
      a,
      o = [],
      s = [0, 0],
      l = {},
      c = ['a', 'b', 'c'];
    if (e && e.isGeometry) {
      for (var u = e.faces, h = 0, d = u.length; h < d; h++)
        for (var p = u[h], f = 0; f < 3; f++)
          (n = p[c[f]]),
            (i = p[c[(f + 1) % 3]]),
            (s[0] = Math.min(n, i)),
            (s[1] = Math.max(n, i)),
            void 0 === l[(a = s[0] + ',' + s[1])] &&
              (l[a] = { index1: s[0], index2: s[1] });
      for (a in l)
        (w = e.vertices[(r = l[a]).index1]),
          o.push(w.x, w.y, w.z),
          (w = e.vertices[r.index2]),
          o.push(w.x, w.y, w.z);
    } else if (e && e.isBufferGeometry) {
      var g,
        m,
        v,
        B,
        w = new Ce();
      if (null !== e.index) {
        for (
          g = e.attributes.position,
            m = e.index,
            A = (v =
              (t = 0) === (v = e.groups).length
                ? [{ start: 0, count: m.count, materialIndex: 0 }]
                : v).length;
          t < A;
          ++t
        )
          for (d = (h = (B = v[t]).start) + B.count; h < d; h += 3)
            for (f = 0; f < 3; f++)
              (n = m.getX(h + f)),
                (i = m.getX(h + ((f + 1) % 3))),
                (s[0] = Math.min(n, i)),
                (s[1] = Math.max(n, i)),
                void 0 === l[(a = s[0] + ',' + s[1])] &&
                  (l[a] = { index1: s[0], index2: s[1] });
        for (a in l)
          w.fromBufferAttribute(g, (r = l[a]).index1),
            o.push(w.x, w.y, w.z),
            w.fromBufferAttribute(g, r.index2),
            o.push(w.x, w.y, w.z);
      } else
        for (h = 0, d = (g = e.attributes.position).count / 3; h < d; h++)
          for (f = 0; f < 3; f++)
            w.fromBufferAttribute(g, 3 * h + f),
              o.push(w.x, w.y, w.z),
              w.fromBufferAttribute(g, 3 * h + ((f + 1) % 3)),
              o.push(w.x, w.y, w.z);
    }
    this.addAttribute('position', new q(o, 3));
  }
  function yo(e, t, A) {
    pe.call(this),
      (this.type = 'ParametricGeometry'),
      (this.parameters = { func: e, slices: t, stacks: A }),
      this.fromBufferGeometry(new Eo(e, t, A)),
      this.mergeVertices();
  }
  function Eo(e, t, A) {
    $.call(this),
      (this.type = 'ParametricBufferGeometry'),
      (this.parameters = { func: e, slices: t, stacks: A });
    for (
      var r = [],
        n = [],
        i = [],
        a = [],
        o = new Ce(),
        s = new Ce(),
        l = new Ce(),
        c = new Ce(),
        u = new Ce(),
        h =
          (e.length < 3 &&
            console.error(
              'THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.',
            ),
          t + 1),
        d = 0;
      d <= A;
      d++
    )
      for (var p = d / A, f = 0; f <= t; f++) {
        var g = f / t;
        e(g, p, s),
          n.push(s.x, s.y, s.z),
          0 <= g - 1e-5
            ? (e(g - 1e-5, p, l), c.subVectors(s, l))
            : (e(1e-5 + g, p, l), c.subVectors(l, s)),
          0 <= p - 1e-5
            ? (e(g, p - 1e-5, l), u.subVectors(s, l))
            : (e(g, 1e-5 + p, l), u.subVectors(l, s)),
          o.crossVectors(c, u).normalize(),
          i.push(o.x, o.y, o.z),
          a.push(g, p);
      }
    for (d = 0; d < A; d++)
      for (f = 0; f < t; f++) {
        var m = d * h + f + 1,
          v = (d + 1) * h + f + 1,
          B = (d + 1) * h + f;
        r.push(d * h + f, m, B), r.push(m, v, B);
      }
    this.setIndex(r),
      this.addAttribute('position', new q(n, 3)),
      this.addAttribute('normal', new q(i, 3)),
      this.addAttribute('uv', new q(a, 2));
  }
  function xo(e, t, A, r) {
    pe.call(this),
      (this.type = 'PolyhedronGeometry'),
      (this.parameters = { vertices: e, indices: t, radius: A, detail: r }),
      this.fromBufferGeometry(new bo(e, t, A, r)),
      this.mergeVertices();
  }
  function bo(A, e, t, r) {
    $.call(this),
      (this.type = 'PolyhedronBufferGeometry'),
      (this.parameters = { vertices: A, indices: e, radius: t, detail: r }),
      (t = t || 1);
    for (
      var n = [],
        i = [],
        R = (r = r || 0),
        a = new Ce(),
        o = new Ce(),
        s = new Ce(),
        l = 0;
      l < e.length;
      l += 3
    ) {
      H(e[l + 0], a),
        H(e[l + 1], o),
        H(e[l + 2], s),
        (v = m = O = g = d = h = f = p = D = u = P = c = void 0);
      var c = a,
        P = o,
        u = s,
        D = R,
        h,
        d,
        p = Math.pow(2, D),
        f = [];
      for (h = 0; h <= p; h++) {
        f[h] = [];
        var g = c.clone().lerp(u, h / p),
          O = P.clone().lerp(u, h / p),
          m = p - h;
        for (d = 0; d <= m; d++)
          f[h][d] = 0 === d && h === p ? g : g.clone().lerp(O, d / m);
      }
      for (h = 0; h < p; h++)
        for (d = 0; d < 2 * (p - h) - 1; d++) {
          var v = Math.floor(d / 2);
          d % 2 == 0
            ? (L(f[h][v + 1]), L(f[h + 1][v]), L(f[h][v]))
            : (L(f[h][v + 1]), L(f[h + 1][v + 1]), L(f[h + 1][v]));
        }
    }
    for (var N = t, B = new Ce(), w = 0; w < n.length; w += 3)
      (B.x = n[w + 0]),
        (B.y = n[w + 1]),
        (B.z = n[w + 2]),
        B.normalize().multiplyScalar(N),
        (n[w + 0] = B.x),
        (n[w + 1] = B.y),
        (n[w + 2] = B.z);
    for (var y = new Ce(), E = 0; E < n.length; E += 3) {
      (y.x = n[E + 0]), (y.y = n[E + 1]), (y.z = n[E + 2]);
      var G = Y(y) / 2 / Math.PI + 0.5,
        V =
          (function (e) {
            return Math.atan2(-e.y, Math.sqrt(e.x * e.x + e.z * e.z));
          })(y) /
            Math.PI +
          0.5;
      i.push(G, 1 - V);
    }
    for (
      var x = new Ce(),
        b = new Ce(),
        C = new Ce(),
        k = new Ce(),
        z = new he(),
        K = new he(),
        X = new he(),
        F = 0,
        T = 0;
      F < n.length;
      F += 9, T += 6
    ) {
      x.set(n[F + 0], n[F + 1], n[F + 2]),
        b.set(n[F + 3], n[F + 4], n[F + 5]),
        C.set(n[F + 6], n[F + 7], n[F + 8]),
        z.set(i[T + 0], i[T + 1]),
        K.set(i[T + 2], i[T + 3]),
        X.set(i[T + 4], i[T + 5]),
        k.copy(x).add(b).add(C).divideScalar(3);
      var _ = Y(k);
      I(z, T + 0, x, _), I(K, T + 2, b, _), I(X, T + 4, C, _);
    }
    for (var U = 0; U < i.length; U += 6) {
      var M = i[U + 0],
        S = i[U + 2],
        Q = i[U + 4],
        j = Math.max(M, S, Q),
        W = Math.min(M, S, Q);
      0.9 < j &&
        W < 0.1 &&
        (M < 0.2 && (i[U + 0] += 1), S < 0.2 && (i[U + 2] += 1), Q < 0.2) &&
        (i[U + 4] += 1);
    }
    function L(e) {
      n.push(e.x, e.y, e.z);
    }
    function H(e, t) {
      e *= 3;
      (t.x = A[0 + e]), (t.y = A[1 + e]), (t.z = A[2 + e]);
    }
    function I(e, t, A, r) {
      r < 0 && 1 === e.x && (i[t] = e.x - 1),
        0 === A.x && 0 === A.z && (i[t] = r / 2 / Math.PI + 0.5);
    }
    function Y(e) {
      return Math.atan2(e.z, -e.x);
    }
    this.addAttribute('position', new q(n, 3)),
      this.addAttribute('normal', new q(n.slice(), 3)),
      this.addAttribute('uv', new q(i, 2)),
      0 === r ? this.computeVertexNormals() : this.normalizeNormals();
  }
  function Co(e, t) {
    pe.call(this),
      (this.type = 'TetrahedronGeometry'),
      (this.parameters = { radius: e, detail: t }),
      this.fromBufferGeometry(new Fo(e, t)),
      this.mergeVertices();
  }
  function Fo(e, t) {
    bo.call(
      this,
      [1, 1, 1, -1, -1, 1, -1, 1, -1, 1, -1, -1],
      [2, 1, 0, 0, 3, 2, 1, 3, 0, 2, 3, 1],
      e,
      t,
    ),
      (this.type = 'TetrahedronBufferGeometry'),
      (this.parameters = { radius: e, detail: t });
  }
  function To(e, t) {
    pe.call(this),
      (this.type = 'OctahedronGeometry'),
      (this.parameters = { radius: e, detail: t }),
      this.fromBufferGeometry(new _o(e, t)),
      this.mergeVertices();
  }
  function _o(e, t) {
    bo.call(
      this,
      [1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1],
      [0, 2, 4, 0, 4, 3, 0, 3, 5, 0, 5, 2, 1, 2, 5, 1, 5, 3, 1, 3, 4, 1, 4, 2],
      e,
      t,
    ),
      (this.type = 'OctahedronBufferGeometry'),
      (this.parameters = { radius: e, detail: t });
  }
  function Uo(e, t) {
    pe.call(this),
      (this.type = 'IcosahedronGeometry'),
      (this.parameters = { radius: e, detail: t }),
      this.fromBufferGeometry(new Mo(e, t)),
      this.mergeVertices();
  }
  function Mo(e, t) {
    var A = (1 + Math.sqrt(5)) / 2;
    bo.call(
      this,
      [
        -1,
        A,
        0,
        1,
        A,
        0,
        -1,
        -A,
        0,
        1,
        -A,
        0,
        0,
        -1,
        A,
        0,
        1,
        A,
        0,
        -1,
        -A,
        0,
        1,
        -A,
        A,
        0,
        -1,
        A,
        0,
        1,
        -A,
        0,
        -1,
        -A,
        0,
        1,
      ],
      [
        0, 11, 5, 0, 5, 1, 0, 1, 7, 0, 7, 10, 0, 10, 11, 1, 5, 9, 5, 11, 4, 11,
        10, 2, 10, 7, 6, 7, 1, 8, 3, 9, 4, 3, 4, 2, 3, 2, 6, 3, 6, 8, 3, 8, 9,
        4, 9, 5, 2, 4, 11, 6, 2, 10, 8, 6, 7, 9, 8, 1,
      ],
      e,
      t,
    ),
      (this.type = 'IcosahedronBufferGeometry'),
      (this.parameters = { radius: e, detail: t });
  }
  function So(e, t) {
    pe.call(this),
      (this.type = 'DodecahedronGeometry'),
      (this.parameters = { radius: e, detail: t }),
      this.fromBufferGeometry(new Qo(e, t)),
      this.mergeVertices();
  }
  function Qo(e, t) {
    var A = (1 + Math.sqrt(5)) / 2,
      r = 1 / A;
    bo.call(
      this,
      [
        -1,
        -1,
        -1,
        -1,
        -1,
        1,
        -1,
        1,
        -1,
        -1,
        1,
        1,
        1,
        -1,
        -1,
        1,
        -1,
        1,
        1,
        1,
        -1,
        1,
        1,
        1,
        0,
        -r,
        -A,
        0,
        -r,
        A,
        0,
        r,
        -A,
        0,
        r,
        A,
        -r,
        -A,
        0,
        -r,
        A,
        0,
        r,
        -A,
        0,
        r,
        A,
        0,
        -A,
        0,
        -r,
        A,
        0,
        -r,
        -A,
        0,
        r,
        A,
        0,
        r,
      ],
      [
        3, 11, 7, 3, 7, 15, 3, 15, 13, 7, 19, 17, 7, 17, 6, 7, 6, 15, 17, 4, 8,
        17, 8, 10, 17, 10, 6, 8, 0, 16, 8, 16, 2, 8, 2, 10, 0, 12, 1, 0, 1, 18,
        0, 18, 16, 6, 10, 2, 6, 2, 13, 6, 13, 15, 2, 16, 18, 2, 18, 3, 2, 3, 13,
        18, 1, 9, 18, 9, 11, 18, 11, 3, 4, 14, 12, 4, 12, 0, 4, 0, 8, 11, 9, 5,
        11, 5, 19, 11, 19, 7, 19, 5, 14, 19, 14, 4, 19, 4, 17, 1, 12, 14, 1, 14,
        5, 1, 5, 9,
      ],
      e,
      t,
    ),
      (this.type = 'DodecahedronBufferGeometry'),
      (this.parameters = { radius: e, detail: t });
  }
  function Lo(e, t, A, r, n, i) {
    pe.call(this),
      (this.type = 'TubeGeometry'),
      (this.parameters = {
        path: e,
        tubularSegments: t,
        radius: A,
        radialSegments: r,
        closed: n,
      }),
      void 0 !== i &&
        console.warn('THREE.TubeGeometry: taper has been removed.');
    i = new Ho(e, t, A, r, n);
    (this.tangents = i.tangents),
      (this.normals = i.normals),
      (this.binormals = i.binormals),
      this.fromBufferGeometry(i),
      this.mergeVertices();
  }
  function Ho(i, a, o, s, e) {
    $.call(this),
      (this.type = 'TubeBufferGeometry'),
      (this.parameters = {
        path: i,
        tubularSegments: a,
        radius: o,
        radialSegments: s,
        closed: e,
      }),
      (a = a || 64),
      (o = o || 1),
      (s = s || 8),
      (e = e || !1);
    var t,
      l,
      c = i.computeFrenetFrames(a, e),
      u =
        ((this.tangents = c.tangents),
        (this.normals = c.normals),
        (this.binormals = c.binormals),
        new Ce()),
      h = new Ce(),
      A = new he(),
      d = new Ce(),
      p = [],
      f = [],
      r = [],
      n = [];
    for (t = 0; t < a; t++) w(t);
    for (w(!1 === e ? a : 0), t = 0; t <= a; t++)
      for (l = 0; l <= s; l++) (A.x = t / a), (A.y = l / s), r.push(A.x, A.y);
    for (l = 1; l <= a; l++)
      for (t = 1; t <= s; t++) {
        var g = (s + 1) * (l - 1) + (t - 1),
          m = (s + 1) * l + (t - 1),
          v = (s + 1) * l + t,
          B = (s + 1) * (l - 1) + t;
        n.push(g, m, B), n.push(m, v, B);
      }
    function w(e) {
      d = i.getPointAt(e / a, d);
      var t = c.normals[e],
        A = c.binormals[e];
      for (l = 0; l <= s; l++) {
        var r = (l / s) * Math.PI * 2,
          n = Math.sin(r),
          r = -Math.cos(r);
        (h.x = r * t.x + n * A.x),
          (h.y = r * t.y + n * A.y),
          (h.z = r * t.z + n * A.z),
          h.normalize(),
          f.push(h.x, h.y, h.z),
          (u.x = d.x + o * h.x),
          (u.y = d.y + o * h.y),
          (u.z = d.z + o * h.z),
          p.push(u.x, u.y, u.z);
      }
    }
    this.setIndex(n),
      this.addAttribute('position', new q(p, 3)),
      this.addAttribute('normal', new q(f, 3)),
      this.addAttribute('uv', new q(r, 2));
  }
  function Io(e, t, A, r, n, i, a) {
    pe.call(this),
      (this.type = 'TorusKnotGeometry'),
      (this.parameters = {
        radius: e,
        tube: t,
        tubularSegments: A,
        radialSegments: r,
        p: n,
        q: i,
      }),
      void 0 !== a &&
        console.warn(
          'THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.',
        ),
      this.fromBufferGeometry(new Ro(e, t, A, r, n, i)),
      this.mergeVertices();
  }
  function Ro(e, t, A, r, n, i) {
    $.call(this),
      (this.type = 'TorusKnotBufferGeometry'),
      (this.parameters = {
        radius: e,
        tube: t,
        tubularSegments: A,
        radialSegments: r,
        p: n,
        q: i,
      }),
      (e = e || 1),
      (t = t || 0.4),
      (A = Math.floor(A) || 64),
      (r = Math.floor(r) || 8),
      (n = n || 2),
      (i = i || 3);
    for (
      var a,
        o = [],
        s = [],
        l = [],
        c = [],
        u = new Ce(),
        h = new Ce(),
        d = new Ce(),
        p = new Ce(),
        f = new Ce(),
        g = new Ce(),
        m = new Ce(),
        v = 0;
      v <= A;
      ++v
    ) {
      var B = (v / A) * n * Math.PI * 2;
      for (
        C(B, n, i, e, d),
          C(0.01 + B, n, i, e, p),
          g.subVectors(p, d),
          m.addVectors(p, d),
          f.crossVectors(g, m),
          m.crossVectors(f, g),
          f.normalize(),
          m.normalize(),
          a = 0;
        a <= r;
        ++a
      ) {
        var w = (a / r) * Math.PI * 2,
          y = -t * Math.cos(w),
          w = t * Math.sin(w);
        (u.x = d.x + (y * m.x + w * f.x)),
          (u.y = d.y + (y * m.y + w * f.y)),
          (u.z = d.z + (y * m.z + w * f.z)),
          s.push(u.x, u.y, u.z),
          h.subVectors(u, d).normalize(),
          l.push(h.x, h.y, h.z),
          c.push(v / A),
          c.push(a / r);
      }
    }
    for (a = 1; a <= A; a++)
      for (v = 1; v <= r; v++) {
        var E = (r + 1) * a + (v - 1),
          x = (r + 1) * a + v,
          b = (r + 1) * (a - 1) + v;
        o.push((r + 1) * (a - 1) + (v - 1), E, b), o.push(E, x, b);
      }
    function C(e, t, A, r, n) {
      var i = Math.cos(e),
        a = Math.sin(e),
        A = (A / t) * e,
        t = Math.cos(A);
      (n.x = r * (2 + t) * 0.5 * i),
        (n.y = r * (2 + t) * a * 0.5),
        (n.z = r * Math.sin(A) * 0.5);
    }
    this.setIndex(o),
      this.addAttribute('position', new q(s, 3)),
      this.addAttribute('normal', new q(l, 3)),
      this.addAttribute('uv', new q(c, 2));
  }
  function Po(e, t, A, r, n) {
    pe.call(this),
      (this.type = 'TorusGeometry'),
      (this.parameters = {
        radius: e,
        tube: t,
        radialSegments: A,
        tubularSegments: r,
        arc: n,
      }),
      this.fromBufferGeometry(new Do(e, t, A, r, n)),
      this.mergeVertices();
  }
  function Do(e, t, A, r, n) {
    $.call(this),
      (this.type = 'TorusBufferGeometry'),
      (this.parameters = {
        radius: e,
        tube: t,
        radialSegments: A,
        tubularSegments: r,
        arc: n,
      }),
      (e = e || 1),
      (t = t || 0.4),
      (A = Math.floor(A) || 8),
      (r = Math.floor(r) || 6),
      (n = n || 2 * Math.PI);
    for (
      var i,
        a = [],
        o = [],
        s = [],
        l = [],
        c = new Ce(),
        u = new Ce(),
        h = new Ce(),
        d = 0;
      d <= A;
      d++
    )
      for (i = 0; i <= r; i++) {
        var p = (i / r) * n,
          f = (d / A) * Math.PI * 2;
        (u.x = (e + t * Math.cos(f)) * Math.cos(p)),
          (u.y = (e + t * Math.cos(f)) * Math.sin(p)),
          (u.z = t * Math.sin(f)),
          o.push(u.x, u.y, u.z),
          (c.x = e * Math.cos(p)),
          (c.y = e * Math.sin(p)),
          h.subVectors(u, c).normalize(),
          s.push(h.x, h.y, h.z),
          l.push(i / r),
          l.push(d / A);
      }
    for (d = 1; d <= A; d++)
      for (i = 1; i <= r; i++) {
        var g = (r + 1) * (d - 1) + i - 1,
          m = (r + 1) * (d - 1) + i,
          v = (r + 1) * d + i;
        a.push((r + 1) * d + i - 1, g, v), a.push(g, m, v);
      }
    this.setIndex(a),
      this.addAttribute('position', new q(o, 3)),
      this.addAttribute('normal', new q(s, 3)),
      this.addAttribute('uv', new q(l, 2));
  }
  (((ka.prototype = Object.create(t.prototype)).constructor =
    ka).prototype.isMeshDepthMaterial = !0),
    (ka.prototype.copy = function (e) {
      return (
        t.prototype.copy.call(this, e),
        (this.depthPacking = e.depthPacking),
        (this.skinning = e.skinning),
        (this.morphTargets = e.morphTargets),
        (this.map = e.map),
        (this.alphaMap = e.alphaMap),
        (this.displacementMap = e.displacementMap),
        (this.displacementScale = e.displacementScale),
        (this.displacementBias = e.displacementBias),
        (this.wireframe = e.wireframe),
        (this.wireframeLinewidth = e.wireframeLinewidth),
        this
      );
    }),
    (((za.prototype = Object.create(t.prototype)).constructor =
      za).prototype.isMeshDistanceMaterial = !0),
    (za.prototype.copy = function (e) {
      return (
        t.prototype.copy.call(this, e),
        this.referencePosition.copy(e.referencePosition),
        (this.nearDistance = e.nearDistance),
        (this.farDistance = e.farDistance),
        (this.skinning = e.skinning),
        (this.morphTargets = e.morphTargets),
        (this.map = e.map),
        (this.alphaMap = e.alphaMap),
        (this.displacementMap = e.displacementMap),
        (this.displacementScale = e.displacementScale),
        (this.displacementBias = e.displacementBias),
        this
      );
    }),
    (Ya.prototype = Object.assign(Object.create(p.prototype), {
      constructor: Ya,
      isGroup: !0,
    })),
    (x.prototype = Object.assign(Object.create(xr.prototype), {
      constructor: x,
      isPerspectiveCamera: !0,
      copy: function (e, t) {
        return (
          xr.prototype.copy.call(this, e, t),
          (this.fov = e.fov),
          (this.zoom = e.zoom),
          (this.near = e.near),
          (this.far = e.far),
          (this.focus = e.focus),
          (this.aspect = e.aspect),
          (this.view = null === e.view ? null : Object.assign({}, e.view)),
          (this.filmGauge = e.filmGauge),
          (this.filmOffset = e.filmOffset),
          this
        );
      },
      setFocalLength: function (e) {
        e = (0.5 * this.getFilmHeight()) / e;
        (this.fov = 2 * xe.RAD2DEG * Math.atan(e)),
          this.updateProjectionMatrix();
      },
      getFocalLength: function () {
        var e = Math.tan(0.5 * xe.DEG2RAD * this.fov);
        return (0.5 * this.getFilmHeight()) / e;
      },
      getEffectiveFOV: function () {
        return (
          2 *
          xe.RAD2DEG *
          Math.atan(Math.tan(0.5 * xe.DEG2RAD * this.fov) / this.zoom)
        );
      },
      getFilmWidth: function () {
        return this.filmGauge * Math.min(this.aspect, 1);
      },
      getFilmHeight: function () {
        return this.filmGauge / Math.max(this.aspect, 1);
      },
      setViewOffset: function (e, t, A, r, n, i) {
        (this.aspect = e / t),
          null === this.view &&
            (this.view = {
              enabled: !0,
              fullWidth: 1,
              fullHeight: 1,
              offsetX: 0,
              offsetY: 0,
              width: 1,
              height: 1,
            }),
          (this.view.enabled = !0),
          (this.view.fullWidth = e),
          (this.view.fullHeight = t),
          (this.view.offsetX = A),
          (this.view.offsetY = r),
          (this.view.width = n),
          (this.view.height = i),
          this.updateProjectionMatrix();
      },
      clearViewOffset: function () {
        null !== this.view && (this.view.enabled = !1),
          this.updateProjectionMatrix();
      },
      updateProjectionMatrix: function () {
        var e,
          t = this.near,
          A = (t * Math.tan(0.5 * xe.DEG2RAD * this.fov)) / this.zoom,
          r = 2 * A,
          n = this.aspect * r,
          i = -0.5 * n,
          a = this.view,
          o =
            (null !== this.view &&
              this.view.enabled &&
              ((o = a.fullWidth),
              (e = a.fullHeight),
              (i += (a.offsetX * n) / o),
              (A -= (a.offsetY * r) / e),
              (n *= a.width / o),
              (r *= a.height / e)),
            this.filmOffset);
        0 !== o && (i += (t * o) / this.getFilmWidth()),
          this.projectionMatrix.makePerspective(
            i,
            i + n,
            A,
            A - r,
            t,
            this.far,
          );
      },
      toJSON: function (e) {
        e = p.prototype.toJSON.call(this, e);
        return (
          (e.object.fov = this.fov),
          (e.object.zoom = this.zoom),
          (e.object.near = this.near),
          (e.object.far = this.far),
          (e.object.focus = this.focus),
          (e.object.aspect = this.aspect),
          null !== this.view && (e.object.view = Object.assign({}, this.view)),
          (e.object.filmGauge = this.filmGauge),
          (e.object.filmOffset = this.filmOffset),
          e
        );
      },
    })),
    (Ja.prototype = Object.assign(Object.create(x.prototype), {
      constructor: Ja,
      isArrayCamera: !0,
    })),
    (eo.prototype.isFogExp2 = !0),
    (eo.prototype.clone = function () {
      return new eo(this.color, this.density);
    }),
    (eo.prototype.toJSON = function () {
      return {
        type: 'FogExp2',
        color: this.color.getHex(),
        density: this.density,
      };
    }),
    (to.prototype.isFog = !0),
    (to.prototype.clone = function () {
      return new to(this.color, this.near, this.far);
    }),
    (to.prototype.toJSON = function () {
      return {
        type: 'Fog',
        color: this.color.getHex(),
        near: this.near,
        far: this.far,
      };
    }),
    (Ao.prototype = Object.assign(Object.create(p.prototype), {
      constructor: Ao,
      copy: function (e, t) {
        return (
          p.prototype.copy.call(this, e, t),
          null !== e.background && (this.background = e.background.clone()),
          null !== e.fog && (this.fog = e.fog.clone()),
          null !== e.overrideMaterial &&
            (this.overrideMaterial = e.overrideMaterial.clone()),
          (this.autoUpdate = e.autoUpdate),
          (this.matrixAutoUpdate = e.matrixAutoUpdate),
          this
        );
      },
      toJSON: function (e) {
        var t = p.prototype.toJSON.call(this, e);
        return (
          null !== this.background &&
            (t.object.background = this.background.toJSON(e)),
          null !== this.fog && (t.object.fog = this.fog.toJSON()),
          t
        );
      },
    })),
    Object.defineProperty(ro.prototype, 'needsUpdate', {
      set: function (e) {
        !0 === e && this.version++;
      },
    }),
    Object.assign(ro.prototype, {
      isInterleavedBuffer: !0,
      onUploadCallback: function () {},
      setArray: function (e) {
        if (Array.isArray(e))
          throw new TypeError(
            'THREE.BufferAttribute: array should be a Typed Array.',
          );
        return (
          (this.count = void 0 !== e ? e.length / this.stride : 0),
          (this.array = e),
          this
        );
      },
      setDynamic: function (e) {
        return (this.dynamic = e), this;
      },
      copy: function (e) {
        return (
          (this.array = new e.array.constructor(e.array)),
          (this.count = e.count),
          (this.stride = e.stride),
          (this.dynamic = e.dynamic),
          this
        );
      },
      copyAt: function (e, t, A) {
        (e *= this.stride), (A *= t.stride);
        for (var r = 0, n = this.stride; r < n; r++)
          this.array[e + r] = t.array[A + r];
        return this;
      },
      set: function (e, t) {
        return this.array.set(e, (t = void 0 === t ? 0 : t)), this;
      },
      clone: function () {
        return new this.constructor().copy(this);
      },
      onUpload: function (e) {
        return (this.onUploadCallback = e), this;
      },
    }),
    Object.defineProperties(no.prototype, {
      count: {
        get: function () {
          return this.data.count;
        },
      },
      array: {
        get: function () {
          return this.data.array;
        },
      },
    }),
    Object.assign(no.prototype, {
      isInterleavedBufferAttribute: !0,
      setX: function (e, t) {
        return (this.data.array[e * this.data.stride + this.offset] = t), this;
      },
      setY: function (e, t) {
        return (
          (this.data.array[e * this.data.stride + this.offset + 1] = t), this
        );
      },
      setZ: function (e, t) {
        return (
          (this.data.array[e * this.data.stride + this.offset + 2] = t), this
        );
      },
      setW: function (e, t) {
        return (
          (this.data.array[e * this.data.stride + this.offset + 3] = t), this
        );
      },
      getX: function (e) {
        return this.data.array[e * this.data.stride + this.offset];
      },
      getY: function (e) {
        return this.data.array[e * this.data.stride + this.offset + 1];
      },
      getZ: function (e) {
        return this.data.array[e * this.data.stride + this.offset + 2];
      },
      getW: function (e) {
        return this.data.array[e * this.data.stride + this.offset + 3];
      },
      setXY: function (e, t, A) {
        return (
          (e = e * this.data.stride + this.offset),
          (this.data.array[e + 0] = t),
          (this.data.array[e + 1] = A),
          this
        );
      },
      setXYZ: function (e, t, A, r) {
        return (
          (e = e * this.data.stride + this.offset),
          (this.data.array[e + 0] = t),
          (this.data.array[e + 1] = A),
          (this.data.array[e + 2] = r),
          this
        );
      },
      setXYZW: function (e, t, A, r, n) {
        return (
          (e = e * this.data.stride + this.offset),
          (this.data.array[e + 0] = t),
          (this.data.array[e + 1] = A),
          (this.data.array[e + 2] = r),
          (this.data.array[e + 3] = n),
          this
        );
      },
    }),
    (((io.prototype = Object.create(t.prototype)).constructor =
      io).prototype.isSpriteMaterial = !0),
    (io.prototype.copy = function (e) {
      return (
        t.prototype.copy.call(this, e),
        this.color.copy(e.color),
        (this.map = e.map),
        (this.rotation = e.rotation),
        this
      );
    }),
    (ao.prototype = Object.assign(Object.create(p.prototype), {
      constructor: ao,
      isSprite: !0,
      raycast:
        ((fa = new Ce()),
        (ga = new Ce()),
        (ma = new Ce()),
        (va = new he()),
        (Ba = new he()),
        (wa = new be()),
        (ya = new Ce()),
        (Ea = new Ce()),
        (xa = new Ce()),
        function (e, t) {
          ga.setFromMatrixScale(this.matrixWorld),
            wa.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld),
            ma.setFromMatrixPosition(this.modelViewMatrix);
          var A,
            r,
            n = this.material.rotation,
            n =
              (0 !== n && ((r = Math.cos(n)), (A = Math.sin(n))), this.center);
          oo(ya.set(-0.5, -0.5, 0), ma, n, ga, A, r),
            oo(Ea.set(0.5, -0.5, 0), ma, n, ga, A, r),
            oo(xa.set(0.5, 0.5, 0), ma, n, ga, A, r),
            (null === e.ray.intersectTriangle(ya, Ea, xa, !1, fa) &&
              (oo(Ea.set(-0.5, 0.5, 0), ma, n, ga, A, r),
              null === e.ray.intersectTriangle(ya, xa, Ea, !1, fa))) ||
              (n = e.ray.origin.distanceTo(fa)) < e.near ||
              n > e.far ||
              t.push({
                distance: n,
                point: fa.clone(),
                face: null,
                object: this,
              });
        }),
      clone: function () {
        return new this.constructor(this.material).copy(this);
      },
      copy: function (e) {
        return (
          p.prototype.copy.call(this, e),
          void 0 !== e.center && this.center.copy(e.center),
          this
        );
      },
    })),
    (so.prototype = Object.assign(Object.create(p.prototype), {
      constructor: so,
      copy: function (e) {
        p.prototype.copy.call(this, e, !1);
        for (var t = e.levels, A = 0, r = t.length; A < r; A++) {
          var n = t[A];
          this.addLevel(n.object.clone(), n.distance);
        }
        return this;
      },
      addLevel: function (e, t) {
        void 0 === t && (t = 0), (t = Math.abs(t));
        for (
          var A = this.levels, r = 0;
          r < A.length && !(t < A[r].distance);
          r++
        );
        A.splice(r, 0, { distance: t, object: e }), this.add(e);
      },
      getObjectForDistance: function (e) {
        for (
          var t = this.levels, A = 1, r = t.length;
          A < r && !(e < t[A].distance);
          A++
        );
        return t[A - 1].object;
      },
      raycast:
        ((Fa = new Ce()),
        function (e, t) {
          Fa.setFromMatrixPosition(this.matrixWorld);
          var A = e.ray.origin.distanceTo(Fa);
          this.getObjectForDistance(A).raycast(e, t);
        }),
      update:
        ((ba = new Ce()),
        (Ca = new Ce()),
        function (e) {
          var t = this.levels;
          if (1 < t.length) {
            ba.setFromMatrixPosition(e.matrixWorld),
              Ca.setFromMatrixPosition(this.matrixWorld);
            var A = ba.distanceTo(Ca);
            t[0].object.visible = !0;
            for (var r = 1, n = t.length; r < n && A >= t[r].distance; r++)
              (t[r - 1].object.visible = !1), (t[r].object.visible = !0);
            for (; r < n; r++) t[r].object.visible = !1;
          }
        }),
      toJSON: function (e) {
        for (
          var t = p.prototype.toJSON.call(this, e),
            A = ((t.object.levels = []), this.levels),
            r = 0,
            n = A.length;
          r < n;
          r++
        ) {
          var i = A[r];
          t.object.levels.push({ object: i.object.uuid, distance: i.distance });
        }
        return t;
      },
    })),
    Object.assign(lo.prototype, {
      calculateInverses: function () {
        this.boneInverses = [];
        for (var e = 0, t = this.bones.length; e < t; e++) {
          var A = new be();
          this.bones[e] && A.getInverse(this.bones[e].matrixWorld),
            this.boneInverses.push(A);
        }
      },
      pose: function () {
        for (var e, t = 0, A = this.bones.length; t < A; t++)
          (e = this.bones[t]) && e.matrixWorld.getInverse(this.boneInverses[t]);
        for (t = 0, A = this.bones.length; t < A; t++)
          (e = this.bones[t]) &&
            (e.parent && e.parent.isBone
              ? (e.matrix.getInverse(e.parent.matrixWorld),
                e.matrix.multiply(e.matrixWorld))
              : e.matrix.copy(e.matrixWorld),
            e.matrix.decompose(e.position, e.quaternion, e.scale));
      },
      update:
        ((Ta = new be()),
        (_a = new be()),
        function () {
          for (
            var e = this.bones,
              t = this.boneInverses,
              A = this.boneMatrices,
              r = this.boneTexture,
              n = 0,
              i = e.length;
            n < i;
            n++
          ) {
            var a = e[n] ? e[n].matrixWorld : _a;
            Ta.multiplyMatrices(a, t[n]), Ta.toArray(A, 16 * n);
          }
          void 0 !== r && (r.needsUpdate = !0);
        }),
      clone: function () {
        return new lo(this.bones, this.boneInverses);
      },
      getBoneByName: function (e) {
        for (var t = 0, A = this.bones.length; t < A; t++) {
          var r = this.bones[t];
          if (r.name === e) return r;
        }
      },
    }),
    (co.prototype = Object.assign(Object.create(p.prototype), {
      constructor: co,
      isBone: !0,
    })),
    (uo.prototype = Object.assign(Object.create(f.prototype), {
      constructor: uo,
      isSkinnedMesh: !0,
      initBones: function () {
        var e,
          t,
          A,
          r,
          n = [];
        if (this.geometry && void 0 !== this.geometry.bones) {
          for (A = 0, r = this.geometry.bones.length; A < r; A++)
            (t = this.geometry.bones[A]),
              (e = new co()),
              n.push(e),
              (e.name = t.name),
              e.position.fromArray(t.pos),
              e.quaternion.fromArray(t.rotq),
              void 0 !== t.scl && e.scale.fromArray(t.scl);
          for (A = 0, r = this.geometry.bones.length; A < r; A++)
            (-1 !== (t = this.geometry.bones[A]).parent &&
            null !== t.parent &&
            void 0 !== n[t.parent]
              ? n[t.parent]
              : this
            ).add(n[A]);
        }
        return this.updateMatrixWorld(!0), n;
      },
      bind: function (e, t) {
        (this.skeleton = e),
          void 0 === t &&
            (this.updateMatrixWorld(!0),
            this.skeleton.calculateInverses(),
            (t = this.matrixWorld)),
          this.bindMatrix.copy(t),
          this.bindMatrixInverse.getInverse(t);
      },
      pose: function () {
        this.skeleton.pose();
      },
      normalizeSkinWeights: function () {
        if (this.geometry && this.geometry.isGeometry)
          for (n = 0; n < this.geometry.skinWeights.length; n++) {
            var e,
              t = this.geometry.skinWeights[n];
            (e = 1 / t.manhattanLength()) !== 1 / 0
              ? t.multiplyScalar(e)
              : t.set(1, 0, 0, 0);
          }
        else if (this.geometry && this.geometry.isBufferGeometry)
          for (
            var A = new Fe(), r = this.geometry.attributes.skinWeight, n = 0;
            n < r.count;
            n++
          )
            (A.x = r.getX(n)),
              (A.y = r.getY(n)),
              (A.z = r.getZ(n)),
              (A.w = r.getW(n)),
              (e = 1 / A.manhattanLength()) !== 1 / 0
                ? A.multiplyScalar(e)
                : A.set(1, 0, 0, 0),
              r.setXYZW(n, A.x, A.y, A.z, A.w);
      },
      updateMatrixWorld: function (e) {
        f.prototype.updateMatrixWorld.call(this, e),
          'attached' === this.bindMode
            ? this.bindMatrixInverse.getInverse(this.matrixWorld)
            : 'detached' === this.bindMode
            ? this.bindMatrixInverse.getInverse(this.bindMatrix)
            : console.warn(
                'THREE.SkinnedMesh: Unrecognized bindMode: ' + this.bindMode,
              );
      },
      clone: function () {
        return new this.constructor(this.geometry, this.material).copy(this);
      },
    })),
    (((m.prototype = Object.create(t.prototype)).constructor =
      m).prototype.isLineBasicMaterial = !0),
    (m.prototype.copy = function (e) {
      return (
        t.prototype.copy.call(this, e),
        this.color.copy(e.color),
        (this.linewidth = e.linewidth),
        (this.linecap = e.linecap),
        (this.linejoin = e.linejoin),
        this
      );
    }),
    (g.prototype = Object.assign(Object.create(p.prototype), {
      constructor: g,
      isLine: !0,
      computeLineDistances:
        ((Qa = new Ce()),
        (La = new Ce()),
        function () {
          var e = this.geometry;
          if (e.isBufferGeometry)
            if (null === e.index) {
              for (
                var t = e.attributes.position, A = [0], r = 1, n = t.count;
                r < n;
                r++
              )
                Qa.fromBufferAttribute(t, r - 1),
                  La.fromBufferAttribute(t, r),
                  (A[r] = A[r - 1]),
                  (A[r] += Qa.distanceTo(La));
              e.addAttribute('lineDistance', new q(A, 1));
            } else
              console.warn(
                'THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.',
              );
          else if (e.isGeometry) {
            var i = e.vertices;
            (A = e.lineDistances)[0] = 0;
            for (r = 1, n = i.length; r < n; r++)
              (A[r] = A[r - 1]), (A[r] += i[r - 1].distanceTo(i[r]));
          }
          return this;
        }),
      raycast:
        ((Ua = new be()),
        (Ma = new Wn()),
        (Sa = new kA()),
        function (e, t) {
          var A = e.linePrecision,
            r = A * A,
            A = this.geometry,
            n = this.matrixWorld;
          if (
            (null === A.boundingSphere && A.computeBoundingSphere(),
            Sa.copy(A.boundingSphere),
            Sa.applyMatrix4(n),
            !1 !== e.ray.intersectsSphere(Sa))
          ) {
            Ua.getInverse(n), Ma.copy(e.ray).applyMatrix4(Ua);
            var i = new Ce(),
              a = new Ce(),
              o = new Ce(),
              s = new Ce(),
              l = this && this.isLineSegments ? 2 : 1;
            if (A.isBufferGeometry) {
              var n = A.index,
                c = A.attributes.position.array;
              if (null !== n)
                for (var u = n.array, h = 0, d = u.length - 1; h < d; h += l) {
                  var p = u[h],
                    f = u[h + 1];
                  i.fromArray(c, 3 * p),
                    a.fromArray(c, 3 * f),
                    r < Ma.distanceSqToSegment(i, a, s, o) ||
                      (s.applyMatrix4(this.matrixWorld),
                      (g = e.ray.origin.distanceTo(s)) < e.near) ||
                      g > e.far ||
                      t.push({
                        distance: g,
                        point: o.clone().applyMatrix4(this.matrixWorld),
                        index: h,
                        face: null,
                        faceIndex: null,
                        object: this,
                      });
                }
              else
                for (h = 0, d = c.length / 3 - 1; h < d; h += l)
                  i.fromArray(c, 3 * h),
                    a.fromArray(c, 3 * h + 3),
                    r < Ma.distanceSqToSegment(i, a, s, o) ||
                      (s.applyMatrix4(this.matrixWorld),
                      (g = e.ray.origin.distanceTo(s)) < e.near) ||
                      g > e.far ||
                      t.push({
                        distance: g,
                        point: o.clone().applyMatrix4(this.matrixWorld),
                        index: h,
                        face: null,
                        faceIndex: null,
                        object: this,
                      });
            } else if (A.isGeometry)
              for (
                var g, m = A.vertices, v = m.length, h = 0;
                h < v - 1;
                h += l
              )
                r < Ma.distanceSqToSegment(m[h], m[h + 1], s, o) ||
                  (s.applyMatrix4(this.matrixWorld),
                  (g = e.ray.origin.distanceTo(s)) < e.near) ||
                  g > e.far ||
                  t.push({
                    distance: g,
                    point: o.clone().applyMatrix4(this.matrixWorld),
                    index: h,
                    face: null,
                    faceIndex: null,
                    object: this,
                  });
          }
        }),
      clone: function () {
        return new this.constructor(this.geometry, this.material).copy(this);
      },
    })),
    (v.prototype = Object.assign(Object.create(g.prototype), {
      constructor: v,
      isLineSegments: !0,
      computeLineDistances:
        ((Ha = new Ce()),
        (Ia = new Ce()),
        function () {
          var e = this.geometry;
          if (e.isBufferGeometry)
            if (null === e.index) {
              for (
                var t = e.attributes.position, A = [], r = 0, n = t.count;
                r < n;
                r += 2
              )
                Ha.fromBufferAttribute(t, r),
                  Ia.fromBufferAttribute(t, r + 1),
                  (A[r] = 0 === r ? 0 : A[r - 1]),
                  (A[r + 1] = A[r] + Ha.distanceTo(Ia));
              e.addAttribute('lineDistance', new q(A, 1));
            } else
              console.warn(
                'THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.',
              );
          else if (e.isGeometry)
            for (
              var i = e.vertices, A = e.lineDistances, r = 0, n = i.length;
              r < n;
              r += 2
            )
              Ha.copy(i[r]),
                Ia.copy(i[r + 1]),
                (A[r] = 0 === r ? 0 : A[r - 1]),
                (A[r + 1] = A[r] + Ha.distanceTo(Ia));
          return this;
        }),
    })),
    (ho.prototype = Object.assign(Object.create(g.prototype), {
      constructor: ho,
      isLineLoop: !0,
    })),
    (((po.prototype = Object.create(t.prototype)).constructor =
      po).prototype.isPointsMaterial = !0),
    (po.prototype.copy = function (e) {
      return (
        t.prototype.copy.call(this, e),
        this.color.copy(e.color),
        (this.map = e.map),
        (this.size = e.size),
        (this.sizeAttenuation = e.sizeAttenuation),
        (this.morphTargets = e.morphTargets),
        this
      );
    }),
    (fo.prototype = Object.assign(Object.create(p.prototype), {
      constructor: fo,
      isPoints: !0,
      raycast:
        ((Ra = new be()),
        (Pa = new Wn()),
        (Da = new kA()),
        function (r, n) {
          var i = this,
            e = this.geometry,
            a = this.matrixWorld,
            t = r.params.Points.threshold;
          if (
            (null === e.boundingSphere && e.computeBoundingSphere(),
            Da.copy(e.boundingSphere),
            Da.applyMatrix4(a),
            (Da.radius += t),
            !1 !== r.ray.intersectsSphere(Da))
          ) {
            Ra.getInverse(a), Pa.copy(r.ray).applyMatrix4(Ra);
            var t = t / ((this.scale.x + this.scale.y + this.scale.z) / 3),
              o = t * t,
              A = new Ce(),
              s = new Ce();
            if (e.isBufferGeometry) {
              var t = e.index,
                l = e.attributes.position.array;
              if (null !== t)
                for (var c = t.array, u = 0, h = c.length; u < h; u++) {
                  var d = c[u];
                  A.fromArray(l, 3 * d), g(A, d);
                }
              else
                for (var u = 0, p = l.length / 3; u < p; u++)
                  A.fromArray(l, 3 * u), g(A, u);
            } else
              for (var f = e.vertices, u = 0, p = f.length; u < p; u++)
                g(f[u], u);
          }
          function g(e, t) {
            var A = Pa.distanceSqToPoint(e);
            A < o &&
              (Pa.closestPointToPoint(e, s),
              s.applyMatrix4(a),
              (e = r.ray.origin.distanceTo(s)) < r.near ||
                e > r.far ||
                n.push({
                  distance: e,
                  distanceToRay: Math.sqrt(A),
                  point: s.clone(),
                  index: t,
                  face: null,
                  object: i,
                }));
          }
        }),
      clone: function () {
        return new this.constructor(this.geometry, this.material).copy(this);
      },
    })),
    (go.prototype = Object.assign(Object.create(h.prototype), {
      constructor: go,
      isVideoTexture: !0,
      update: function () {
        var e = this.image;
        e.readyState >= e.HAVE_CURRENT_DATA && (this.needsUpdate = !0);
      },
    })),
    (((mo.prototype = Object.create(h.prototype)).constructor =
      mo).prototype.isCompressedTexture = !0),
    (((vo.prototype = Object.create(h.prototype)).constructor =
      vo).prototype.isCanvasTexture = !0),
    (((Bo.prototype = Object.create(h.prototype)).constructor =
      Bo).prototype.isDepthTexture = !0),
    ((wo.prototype = Object.create($.prototype)).constructor = wo),
    ((yo.prototype = Object.create(pe.prototype)).constructor = yo),
    ((Eo.prototype = Object.create($.prototype)).constructor = Eo),
    ((xo.prototype = Object.create(pe.prototype)).constructor = xo),
    ((bo.prototype = Object.create($.prototype)).constructor = bo),
    ((Co.prototype = Object.create(pe.prototype)).constructor = Co),
    ((Fo.prototype = Object.create(bo.prototype)).constructor = Fo),
    ((To.prototype = Object.create(pe.prototype)).constructor = To),
    ((_o.prototype = Object.create(bo.prototype)).constructor = _o),
    ((Uo.prototype = Object.create(pe.prototype)).constructor = Uo),
    ((Mo.prototype = Object.create(bo.prototype)).constructor = Mo),
    ((So.prototype = Object.create(pe.prototype)).constructor = So),
    ((Qo.prototype = Object.create(bo.prototype)).constructor = Qo),
    ((Lo.prototype = Object.create(pe.prototype)).constructor = Lo),
    ((Ho.prototype = Object.create($.prototype)).constructor = Ho),
    ((Io.prototype = Object.create(pe.prototype)).constructor = Io),
    ((Ro.prototype = Object.create($.prototype)).constructor = Ro),
    ((Po.prototype = Object.create(pe.prototype)).constructor = Po),
    ((Do.prototype = Object.create($.prototype)).constructor = Do);
  var Oo = function (e, t, A) {
    A = A || 2;
    var r,
      n,
      i,
      a,
      o,
      s = t && t.length,
      l = s ? t[0] * A : e.length,
      c = No(e, 0, l, A, !0),
      u = [];
    if (c) {
      if (
        (s &&
          (c = (function (e, t, A, r) {
            var n,
              i,
              a,
              o,
              s = [];
            for (n = 0, i = t.length; n < i; n++)
              (o = t[n] * r),
                (a = n < i - 1 ? t[n + 1] * r : e.length),
                (o = No(e, o, a, r, !1)) === o.next && (o.steiner = !0),
                s.push(
                  (function (e) {
                    var t = e,
                      A = e;
                    for (; t.x < A.x && (A = t), (t = t.next), t !== e; );
                    return A;
                  })(o),
                );
            for (s.sort(ko), n = 0; n < s.length; n++)
              !(function (e, t) {
                (t = (function (e, t) {
                  var A,
                    r = t,
                    n = e.x,
                    i = e.y,
                    a = -1 / 0;
                  do {
                    if (i <= r.y && i >= r.next.y && r.next.y !== r.y) {
                      var o =
                        r.x + ((i - r.y) * (r.next.x - r.x)) / (r.next.y - r.y);
                      if (o <= n && a < o) {
                        if ((a = o) === n) {
                          if (i === r.y) return r;
                          if (i === r.next.y) return r.next;
                        }
                        A = r.x < r.next.x ? r : r.next;
                      }
                    }
                  } while (((r = r.next), r !== t));
                  if (!A) return null;
                  if (n === a) return A.prev;
                  var s,
                    l = A,
                    c = A.x,
                    u = A.y,
                    h = 1 / 0;
                  r = A.next;
                  for (; r !== l; )
                    n >= r.x &&
                      r.x >= c &&
                      n !== r.x &&
                      Ko(i < u ? n : a, i, c, u, i < u ? a : n, i, r.x, r.y) &&
                      ((s = Math.abs(i - r.y) / (n - r.x)) < h ||
                        (s === h && r.x > A.x)) &&
                      Wo(r, e) &&
                      ((A = r), (h = s)),
                      (r = r.next);
                  return A;
                })(e, t)) && Go((t = Yo(t, e)), t.next);
              })(s[n], A),
                (A = Go(A, A.next));
            return A;
          })(e, t, c, A)),
        e.length > 80 * A)
      ) {
        for (var h = (r = e[0]), d = (n = e[1]), p = A; p < l; p += A)
          (i = e[p]) < h && (h = i),
            (a = e[p + 1]) < d && (d = a),
            r < i && (r = i),
            n < a && (n = a);
        o = 0 !== (o = Math.max(r - h, n - d)) ? 1 / o : 0;
      }
      Vo(c, u, A, h, d, o);
    }
    return u;
  };
  function No(e, t, A, r, n) {
    var i, a;
    if (
      n ===
      0 <
        (function (e, t, A, r) {
          for (var n = 0, i = t, a = A - r; i < A; i += r)
            (n += (e[a] - e[i]) * (e[i + 1] + e[a + 1])), (a = i);
          return n;
        })(e, t, A, r)
    )
      for (i = t; i < A; i += r) a = Jo(i, e[i], e[i + 1], a);
    else for (i = A - r; t <= i; i -= r) a = Jo(i, e[i], e[i + 1], a);
    return a && Xo(a, a.next) && (Zo(a), (a = a.next)), a;
  }
  function Go(e, t) {
    if (!e) return e;
    t = t || e;
    var A,
      r = e;
    do {
      if (
        ((A = !1), r.steiner || (!Xo(r, r.next) && 0 !== C(r.prev, r, r.next)))
      )
        r = r.next;
      else {
        if ((Zo(r), (r = t = r.prev) === r.next)) break;
        A = !0;
      }
    } while (A || r !== t);
    return t;
  }
  function Vo(e, t, A, r, n, i, a) {
    if (e) {
      if (!a && i) {
        for (
          var o = e, s = r, l = n, c = i, u = o;
          null === u.z && (u.z = zo(u.x, u.y, s, l, c)),
            (u.prevZ = u.prev),
            (u.nextZ = u.next),
            (u = u.next) !== o;

        );
        (u.prevZ.nextZ = null), (u.prevZ = null);
        var h,
          d,
          p,
          f,
          g,
          m,
          v,
          B,
          w = u,
          y = 1;
        do {
          for (d = w, g = w = null, m = 0; d; ) {
            for (m++, p = d, h = v = 0; h < y && (v++, (p = p.nextZ)); h++);
            for (B = y; 0 < v || (0 < B && p); )
              0 !== v && (0 === B || !p || d.z <= p.z)
                ? ((d = (f = d).nextZ), v--)
                : ((p = (f = p).nextZ), B--),
                g ? (g.nextZ = f) : (w = f),
                (f.prevZ = g),
                (g = f);
            d = p;
          }
        } while (((g.nextZ = null), (y *= 2), 1 < m));
      }
      for (var E, x, b = e; e.prev !== e.next; )
        if (
          ((E = e.prev),
          (x = e.next),
          i
            ? (function (e, t, A, r) {
                var n = e.prev,
                  i = e,
                  a = e.next;
                if (0 <= C(n, i, a)) return;
                var o = (n.x < i.x ? (n.x < a.x ? n : a) : i.x < a.x ? i : a).x,
                  s = (n.y < i.y ? (n.y < a.y ? n : a) : i.y < a.y ? i : a).y,
                  l = (n.x > i.x ? (n.x > a.x ? n : a) : i.x > a.x ? i : a).x,
                  c = (n.y > i.y ? (n.y > a.y ? n : a) : i.y > a.y ? i : a).y,
                  u = zo(o, s, t, A, r),
                  h = zo(l, c, t, A, r),
                  d = e.nextZ;
                for (; d && d.z <= h; ) {
                  if (
                    d !== e.prev &&
                    d !== e.next &&
                    Ko(n.x, n.y, i.x, i.y, a.x, a.y, d.x, d.y) &&
                    0 <= C(d.prev, d, d.next)
                  )
                    return;
                  d = d.nextZ;
                }
                d = e.prevZ;
                for (; d && d.z >= u; ) {
                  if (
                    d !== e.prev &&
                    d !== e.next &&
                    Ko(n.x, n.y, i.x, i.y, a.x, a.y, d.x, d.y) &&
                    0 <= C(d.prev, d, d.next)
                  )
                    return;
                  d = d.prevZ;
                }
                return 1;
              })(e, r, n, i)
            : (function (e) {
                var t = e.prev,
                  A = e,
                  r = e.next;
                if (0 <= C(t, A, r)) return;
                var n = e.next.next;
                for (; n !== e.prev; ) {
                  if (
                    Ko(t.x, t.y, A.x, A.y, r.x, r.y, n.x, n.y) &&
                    0 <= C(n.prev, n, n.next)
                  )
                    return;
                  n = n.next;
                }
                return 1;
              })(e))
        )
          t.push(E.i / A),
            t.push(e.i / A),
            t.push(x.i / A),
            Zo(e),
            (e = x.next),
            (b = x.next);
        else if ((e = x) === b) {
          a
            ? 1 === a
              ? Vo(
                  (e = (function (e, t, A) {
                    var r = e;
                    do {
                      var n = r.prev,
                        i = r.next.next;
                    } while (
                      (!Xo(n, i) &&
                        jo(n, r, r.next, i) &&
                        Wo(n, i) &&
                        Wo(i, n) &&
                        (t.push(n.i / A),
                        t.push(r.i / A),
                        t.push(i.i / A),
                        Zo(r),
                        Zo(r.next),
                        (r = e = i)),
                      (r = r.next),
                      r !== e)
                    );
                    return r;
                  })(e, t, A)),
                  t,
                  A,
                  r,
                  n,
                  i,
                  2,
                )
              : 2 === a &&
                (function (e, t, A, r, n, i) {
                  var a = e;
                  do {
                    for (var o, s = a.next.next; s !== a.prev; ) {
                      if (
                        a.i !== s.i &&
                        (function (e, t) {
                          return (
                            e.next.i !== t.i &&
                            e.prev.i !== t.i &&
                            !(function (e, t) {
                              var A = e;
                              do {
                                if (
                                  A.i !== e.i &&
                                  A.next.i !== e.i &&
                                  A.i !== t.i &&
                                  A.next.i !== t.i &&
                                  jo(A, A.next, e, t)
                                )
                                  return 1;
                              } while (((A = A.next), A !== e));
                              return;
                            })(e, t) &&
                            Wo(e, t) &&
                            Wo(t, e) &&
                            (function (e, t) {
                              var A = e,
                                r = !1,
                                n = (e.x + t.x) / 2,
                                i = (e.y + t.y) / 2;
                              for (
                                ;
                                A.y > i != A.next.y > i &&
                                  A.next.y !== A.y &&
                                  n <
                                    ((A.next.x - A.x) * (i - A.y)) /
                                      (A.next.y - A.y) +
                                      A.x &&
                                  (r = !r),
                                  (A = A.next),
                                  A !== e;

                              );
                              return r;
                            })(e, t)
                          );
                        })(a, s)
                      )
                        return (
                          (o = Yo(a, s)),
                          (a = Go(a, a.next)),
                          (o = Go(o, o.next)),
                          Vo(a, t, A, r, n, i),
                          Vo(o, t, A, r, n, i)
                        );
                      s = s.next;
                    }
                  } while (((a = a.next), a !== e));
                })(e, t, A, r, n, i)
            : Vo(Go(e), t, A, r, n, i, 1);
          break;
        }
    }
  }
  function ko(e, t) {
    return e.x - t.x;
  }
  function zo(e, t, A, r, n) {
    return (
      (e =
        1431655765 &
        ((e =
          858993459 &
          ((e =
            252645135 &
            ((e = 16711935 & ((e = 32767 * (e - A) * n) | (e << 8))) |
              (e << 4))) |
            (e << 2))) |
          (e << 1))) |
      ((t =
        1431655765 &
        ((t =
          858993459 &
          ((t =
            252645135 &
            ((t = 16711935 & ((t = 32767 * (t - r) * n) | (t << 8))) |
              (t << 4))) |
            (t << 2))) |
          (t << 1))) <<
        1)
    );
  }
  function Ko(e, t, A, r, n, i, a, o) {
    return (
      0 <= (n - a) * (t - o) - (e - a) * (i - o) &&
      0 <= (e - a) * (r - o) - (A - a) * (t - o) &&
      0 <= (A - a) * (i - o) - (n - a) * (r - o)
    );
  }
  function C(e, t, A) {
    return (t.y - e.y) * (A.x - t.x) - (t.x - e.x) * (A.y - t.y);
  }
  function Xo(e, t) {
    return e.x === t.x && e.y === t.y;
  }
  function jo(e, t, A, r) {
    return (
      (Xo(e, t) && Xo(A, r)) ||
      (Xo(e, r) && Xo(A, t)) ||
      (0 < C(e, t, A) != 0 < C(e, t, r) && 0 < C(A, r, e) != 0 < C(A, r, t))
    );
  }
  function Wo(e, t) {
    return C(e.prev, e, e.next) < 0
      ? 0 <= C(e, t, e.next) && 0 <= C(e, e.prev, t)
      : C(e, t, e.prev) < 0 || C(e, e.next, t) < 0;
  }
  function Yo(e, t) {
    var A = new qo(e.i, e.x, e.y),
      r = new qo(t.i, t.x, t.y),
      n = e.next,
      i = t.prev;
    return (
      ((e.next = t).prev = e),
      ((A.next = n).prev = A),
      ((r.next = A).prev = r),
      ((i.next = r).prev = i),
      r
    );
  }
  function Jo(e, t, A, r) {
    e = new qo(e, t, A);
    return (
      r
        ? ((e.next = r.next), ((e.prev = r).next.prev = e), (r.next = e))
        : ((e.prev = e).next = e),
      e
    );
  }
  function Zo(e) {
    (e.next.prev = e.prev),
      (e.prev.next = e.next),
      e.prevZ && (e.prevZ.nextZ = e.nextZ),
      e.nextZ && (e.nextZ.prevZ = e.prevZ);
  }
  function qo(e, t, A) {
    (this.i = e),
      (this.x = t),
      (this.y = A),
      (this.prev = null),
      (this.next = null),
      (this.z = null),
      (this.prevZ = null),
      (this.nextZ = null),
      (this.steiner = !1);
  }
  var $o = {
    area: function (e) {
      for (var t = e.length, A = 0, r = t - 1, n = 0; n < t; r = n++)
        A += e[r].x * e[n].y - e[n].x * e[r].y;
      return 0.5 * A;
    },
    isClockWise: function (e) {
      return $o.area(e) < 0;
    },
    triangulateShape: function (e, t) {
      var A = [],
        r = [],
        n = [],
        i = (es(e), ts(A, e), e.length);
      t.forEach(es);
      for (var a = 0; a < t.length; a++)
        r.push(i), (i += t[a].length), ts(A, t[a]);
      for (var o = Oo(A, r), a = 0; a < o.length; a += 3)
        n.push(o.slice(a, a + 3));
      return n;
    },
  };
  function es(e) {
    var t = e.length;
    2 < t && e[t - 1].equals(e[0]) && e.pop();
  }
  function ts(e, t) {
    for (var A = 0; A < t.length; A++) e.push(t[A].x), e.push(t[A].y);
  }
  function As(e, t) {
    pe.call(this),
      (this.type = 'ExtrudeGeometry'),
      (this.parameters = { shapes: e, options: t }),
      this.fromBufferGeometry(new rs(e, t)),
      this.mergeVertices();
  }
  function rs(e, W) {
    $.call(this),
      (this.type = 'ExtrudeBufferGeometry'),
      (this.parameters = { shapes: e, options: W }),
      (e = Array.isArray(e) ? e : [e]);
    for (var Y = this, J = [], Z = [], t = 0, A = e.length; t < A; t++)
      !(function (R) {
        var r = [],
          P = void 0 !== W.curveSegments ? W.curveSegments : 12,
          h = void 0 !== W.steps ? W.steps : 1,
          e = void 0 !== W.depth ? W.depth : 100,
          A = void 0 === W.bevelEnabled || W.bevelEnabled,
          t = void 0 !== W.bevelThickness ? W.bevelThickness : 6,
          D = void 0 !== W.bevelSize ? W.bevelSize : t - 2,
          d = void 0 !== W.bevelSegments ? W.bevelSegments : 3,
          n = W.extrudePath,
          O = void 0 !== W.UVGenerator ? W.UVGenerator : ns;
        void 0 !== W.amount &&
          (console.warn(
            'THREE.ExtrudeBufferGeometry: amount has been renamed to depth.',
          ),
          (e = W.amount));
        var i,
          a,
          o,
          s,
          l,
          c,
          u,
          p,
          N = !1;
        n &&
          ((i = n.getSpacedPoints(h)),
          (A = !(N = !0)),
          (a = n.computeFrenetFrames(h, !1)),
          (o = new Ce()),
          (s = new Ce()),
          (l = new Ce()));
        A || (D = t = d = 0);
        var n = R.extractPoints(P),
          f = n.shape,
          g = n.holes;
        if (!$o.isClockWise(f))
          for (f = f.reverse(), u = 0, p = g.length; u < p; u++)
            (c = g[u]), $o.isClockWise(c) && (g[u] = c.reverse());
        var m = $o.triangulateShape(f, g),
          v = f;
        for (u = 0, p = g.length; u < p; u++) (c = g[u]), (f = f.concat(c));
        function B(e, t, A) {
          return (
            t || console.error('THREE.ExtrudeGeometry: vec does not exist'),
            t.clone().multiplyScalar(A).add(e)
          );
        }
        var w,
          y,
          E,
          x,
          b,
          C,
          F = f.length,
          G = m.length;
        function V(e, t, A) {
          var r = e.x - t.x,
            n = e.y - t.y,
            i = A.x - e.x,
            a = A.y - e.y,
            o = r * r + n * n;
          if (Math.abs(r * a - n * i) > Number.EPSILON) {
            var s = Math.sqrt(o),
              l = Math.sqrt(i * i + a * a),
              c = t.x - n / s,
              t = t.y + r / s,
              s =
                ((A.x - a / l - c) * a - (A.y + i / l - t) * i) /
                (r * a - n * i),
              A = (l = c + r * s - e.x) * l + (c = t + n * s - e.y) * c;
            if (A <= 2) return new he(l, c);
            s = Math.sqrt(A / 2);
          } else {
            t = !1;
            r > Number.EPSILON
              ? i > Number.EPSILON && (t = !0)
              : r < -Number.EPSILON
              ? i < -Number.EPSILON && (t = !0)
              : Math.sign(n) === Math.sign(a) && (t = !0),
              (s = t
                ? ((l = -n), (c = r), Math.sqrt(o))
                : ((l = r), (c = n), Math.sqrt(o / 2)));
          }
          return new he(l / s, c / s);
        }
        for (
          var k = [], T = 0, _ = v.length, U = _ - 1, M = T + 1;
          T < _;
          T++, U++, M++
        )
          U === _ && (U = 0), M === _ && (M = 0), (k[T] = V(v[T], v[U], v[M]));
        var S,
          Q,
          z = [],
          K = k.concat();
        for (u = 0, p = g.length; u < p; u++) {
          for (
            c = g[u], S = [], T = 0, _ = c.length, U = _ - 1, M = T + 1;
            T < _;
            T++, U++, M++
          )
            U === _ && (U = 0),
              M === _ && (M = 0),
              (S[T] = V(c[T], c[U], c[M]));
          z.push(S), (K = K.concat(S));
        }
        for (w = 0; w < d; w++) {
          for (
            E = w / d,
              x = t * Math.cos((E * Math.PI) / 2),
              y = D * Math.sin((E * Math.PI) / 2),
              T = 0,
              _ = v.length;
            T < _;
            T++
          )
            L((b = B(v[T], k[T], y)).x, b.y, -x);
          for (u = 0, p = g.length; u < p; u++)
            for (c = g[u], S = z[u], T = 0, _ = c.length; T < _; T++)
              L((b = B(c[T], S[T], y)).x, b.y, -x);
        }
        for (y = D, T = 0; T < F; T++)
          (b = A ? B(f[T], K[T], y) : f[T]),
            N
              ? (s.copy(a.normals[0]).multiplyScalar(b.x),
                o.copy(a.binormals[0]).multiplyScalar(b.y),
                l.copy(i[0]).add(s).add(o),
                L(l.x, l.y, l.z))
              : L(b.x, b.y, 0);
        for (Q = 1; Q <= h; Q++)
          for (T = 0; T < F; T++)
            (b = A ? B(f[T], K[T], y) : f[T]),
              N
                ? (s.copy(a.normals[Q]).multiplyScalar(b.x),
                  o.copy(a.binormals[Q]).multiplyScalar(b.y),
                  l.copy(i[Q]).add(s).add(o),
                  L(l.x, l.y, l.z))
                : L(b.x, b.y, (e / h) * Q);
        for (w = d - 1; 0 <= w; w--) {
          for (
            E = w / d,
              x = t * Math.cos((E * Math.PI) / 2),
              y = D * Math.sin((E * Math.PI) / 2),
              T = 0,
              _ = v.length;
            T < _;
            T++
          )
            L((b = B(v[T], k[T], y)).x, b.y, e + x);
          for (u = 0, p = g.length; u < p; u++)
            for (c = g[u], S = z[u], T = 0, _ = c.length; T < _; T++)
              (b = B(c[T], S[T], y)),
                N
                  ? L(b.x, b.y + i[h - 1].y, i[h - 1].x + x)
                  : L(b.x, b.y, e + x);
        }
        function X(e, t) {
          var A, r;
          for (T = e.length; 0 <= --T; ) {
            (r = (A = T) - 1) < 0 && (r = e.length - 1);
            for (var n = 0, i = h + 2 * d, n = 0; n < i; n++) {
              var a = F * n,
                o = F * (n + 1),
                s = ((u = c = l = s = void 0), t + A + a),
                l = t + r + a,
                c = t + r + o,
                u = t + A + o;
              H(s),
                H(l),
                H(u),
                H(l),
                H(c),
                H(u),
                (s = J.length / 3),
                I(
                  (l = O.generateSideWallUV(
                    Y,
                    J,
                    s - 6,
                    s - 3,
                    s - 2,
                    s - 1,
                  ))[0],
                ),
                I(l[1]),
                I(l[3]),
                I(l[1]),
                I(l[2]),
                I(l[3]);
            }
          }
        }
        function L(e, t, A) {
          r.push(e), r.push(t), r.push(A);
        }
        function j(e, t, A) {
          H(e), H(t), H(A);
          (e = J.length / 3), (t = O.generateTopUV(Y, J, e - 3, e - 2, e - 1));
          I(t[0]), I(t[1]), I(t[2]);
        }
        function H(e) {
          J.push(r[3 * e + 0]), J.push(r[3 * e + 1]), J.push(r[3 * e + 2]);
        }
        function I(e) {
          Z.push(e.x), Z.push(e.y);
        }
        (function () {
          var e = J.length / 3;
          if (A) {
            var t = 0 * F;
            for (T = 0; T < G; T++) j((C = m[T])[2] + t, C[1] + t, C[0] + t);
            for (t = F * (h + 2 * d), T = 0; T < G; T++)
              j((C = m[T])[0] + t, C[1] + t, C[2] + t);
          } else {
            for (T = 0; T < G; T++) j((C = m[T])[2], C[1], C[0]);
            for (T = 0; T < G; T++)
              j((C = m[T])[0] + F * h, C[1] + F * h, C[2] + F * h);
          }
          Y.addGroup(e, J.length / 3 - e, 0);
        })(),
          (function () {
            var e = J.length / 3,
              t = 0;
            for (X(v, t), t += v.length, u = 0, p = g.length; u < p; u++)
              X((c = g[u]), t), (t += c.length);
            Y.addGroup(e, J.length / 3 - e, 1);
          })();
      })(e[t]);
    this.addAttribute('position', new q(J, 3)),
      this.addAttribute('uv', new q(Z, 2)),
      this.computeVertexNormals();
  }
  (((As.prototype = Object.create(pe.prototype)).constructor =
    As).prototype.toJSON = function () {
    var e = pe.prototype.toJSON.call(this);
    return is(this.parameters.shapes, this.parameters.options, e);
  }),
    (((rs.prototype = Object.create($.prototype)).constructor =
      rs).prototype.toJSON = function () {
      var e = $.prototype.toJSON.call(this);
      return is(this.parameters.shapes, this.parameters.options, e);
    });
  var ns = {
    generateTopUV: function (e, t, A, r, n) {
      var i = t[3 * A],
        A = t[3 * A + 1],
        a = t[3 * r],
        r = t[3 * r + 1],
        o = t[3 * n],
        t = t[3 * n + 1];
      return [new he(i, A), new he(a, r), new he(o, t)];
    },
    generateSideWallUV: function (e, t, A, r, n, i) {
      var a = t[3 * A],
        o = t[3 * A + 1],
        A = t[3 * A + 2],
        s = t[3 * r],
        l = t[3 * r + 1],
        r = t[3 * r + 2],
        c = t[3 * n],
        u = t[3 * n + 1],
        n = t[3 * n + 2],
        h = t[3 * i],
        d = t[3 * i + 1],
        t = t[3 * i + 2];
      return Math.abs(o - l) < 0.01
        ? [
            new he(a, 1 - A),
            new he(s, 1 - r),
            new he(c, 1 - n),
            new he(h, 1 - t),
          ]
        : [
            new he(o, 1 - A),
            new he(l, 1 - r),
            new he(u, 1 - n),
            new he(d, 1 - t),
          ];
    },
  };
  function is(e, t, A) {
    if (((A.shapes = []), Array.isArray(e)))
      for (var r = 0, n = e.length; r < n; r++) {
        var i = e[r];
        A.shapes.push(i.uuid);
      }
    else A.shapes.push(e.uuid);
    return (
      void 0 !== t.extrudePath &&
        (A.options.extrudePath = t.extrudePath.toJSON()),
      A
    );
  }
  function as(e, t) {
    pe.call(this),
      (this.type = 'TextGeometry'),
      (this.parameters = { text: e, parameters: t }),
      this.fromBufferGeometry(new os(e, t)),
      this.mergeVertices();
  }
  function os(e, t) {
    var A = (t = t || {}).font;
    if (!A || !A.isFont)
      return (
        console.error(
          'THREE.TextGeometry: font parameter is not an instance of THREE.Font.',
        ),
        new pe()
      );
    A = A.generateShapes(e, t.size);
    (t.depth = void 0 !== t.height ? t.height : 50),
      void 0 === t.bevelThickness && (t.bevelThickness = 10),
      void 0 === t.bevelSize && (t.bevelSize = 8),
      void 0 === t.bevelEnabled && (t.bevelEnabled = !1),
      rs.call(this, A, t),
      (this.type = 'TextBufferGeometry');
  }
  function ss(e, t, A, r, n, i, a) {
    pe.call(this),
      (this.type = 'SphereGeometry'),
      (this.parameters = {
        radius: e,
        widthSegments: t,
        heightSegments: A,
        phiStart: r,
        phiLength: n,
        thetaStart: i,
        thetaLength: a,
      }),
      this.fromBufferGeometry(new ls(e, t, A, r, n, i, a)),
      this.mergeVertices();
  }
  function ls(e, t, A, r, n, i, a) {
    $.call(this),
      (this.type = 'SphereBufferGeometry'),
      (this.parameters = {
        radius: e,
        widthSegments: t,
        heightSegments: A,
        phiStart: r,
        phiLength: n,
        thetaStart: i,
        thetaLength: a,
      }),
      (e = e || 1),
      (t = Math.max(3, Math.floor(t) || 8)),
      (A = Math.max(2, Math.floor(A) || 6)),
      (r = void 0 !== r ? r : 0),
      (n = void 0 !== n ? n : 2 * Math.PI);
    for (
      var o = (i = void 0 !== i ? i : 0) + (a = void 0 !== a ? a : Math.PI),
        s = 0,
        l = [],
        c = new Ce(),
        u = new Ce(),
        h = [],
        d = [],
        p = [],
        f = [],
        g = 0;
      g <= A;
      g++
    ) {
      for (var m = [], v = g / A, B = 0; B <= t; B++) {
        var w = B / t;
        (c.x = -e * Math.cos(r + w * n) * Math.sin(i + v * a)),
          (c.y = e * Math.cos(i + v * a)),
          (c.z = e * Math.sin(r + w * n) * Math.sin(i + v * a)),
          d.push(c.x, c.y, c.z),
          u.set(c.x, c.y, c.z).normalize(),
          p.push(u.x, u.y, u.z),
          f.push(w, 1 - v),
          m.push(s++);
      }
      l.push(m);
    }
    for (g = 0; g < A; g++)
      for (B = 0; B < t; B++) {
        var y = l[g][B + 1],
          E = l[g][B],
          x = l[g + 1][B],
          b = l[g + 1][B + 1];
        (0 !== g || 0 < i) && h.push(y, E, b),
          (g !== A - 1 || o < Math.PI) && h.push(E, x, b);
      }
    this.setIndex(h),
      this.addAttribute('position', new q(d, 3)),
      this.addAttribute('normal', new q(p, 3)),
      this.addAttribute('uv', new q(f, 2));
  }
  function cs(e, t, A, r, n, i) {
    pe.call(this),
      (this.type = 'RingGeometry'),
      (this.parameters = {
        innerRadius: e,
        outerRadius: t,
        thetaSegments: A,
        phiSegments: r,
        thetaStart: n,
        thetaLength: i,
      }),
      this.fromBufferGeometry(new us(e, t, A, r, n, i)),
      this.mergeVertices();
  }
  function us(e, t, A, r, n, i) {
    $.call(this),
      (this.type = 'RingBufferGeometry'),
      (this.parameters = {
        innerRadius: e,
        outerRadius: t,
        thetaSegments: A,
        phiSegments: r,
        thetaStart: n,
        thetaLength: i,
      }),
      (e = e || 0.5),
      (t = t || 1),
      (n = void 0 !== n ? n : 0),
      (i = void 0 !== i ? i : 2 * Math.PI),
      (A = void 0 !== A ? Math.max(3, A) : 8);
    for (
      var a = [],
        o = [],
        s = [],
        l = [],
        c = e,
        u = (t - e) / (r = void 0 !== r ? Math.max(1, r) : 1),
        h = new Ce(),
        d = new he(),
        p = 0;
      p <= r;
      p++
    ) {
      for (g = 0; g <= A; g++)
        (m = n + (g / A) * i),
          (h.x = c * Math.cos(m)),
          (h.y = c * Math.sin(m)),
          o.push(h.x, h.y, h.z),
          s.push(0, 0, 1),
          (d.x = (h.x / t + 1) / 2),
          (d.y = (h.y / t + 1) / 2),
          l.push(d.x, d.y);
      c += u;
    }
    for (p = 0; p < r; p++)
      for (var f = p * (A + 1), g = 0; g < A; g++) {
        var m,
          v = (m = g + f),
          B = m + A + 1,
          w = m + A + 2,
          y = m + 1;
        a.push(v, B, y), a.push(B, w, y);
      }
    this.setIndex(a),
      this.addAttribute('position', new q(o, 3)),
      this.addAttribute('normal', new q(s, 3)),
      this.addAttribute('uv', new q(l, 2));
  }
  function hs(e, t, A, r) {
    pe.call(this),
      (this.type = 'LatheGeometry'),
      (this.parameters = { points: e, segments: t, phiStart: A, phiLength: r }),
      this.fromBufferGeometry(new ds(e, t, A, r)),
      this.mergeVertices();
  }
  function ds(e, t, A, r) {
    $.call(this),
      (this.type = 'LatheBufferGeometry'),
      (this.parameters = { points: e, segments: t, phiStart: A, phiLength: r }),
      (t = Math.floor(t) || 12),
      (A = A || 0),
      (r = r || 2 * Math.PI),
      (r = xe.clamp(r, 0, 2 * Math.PI));
    for (
      var n = [], i = [], a = [], o = 1 / t, s = new Ce(), l = new he(), c = 0;
      c <= t;
      c++
    )
      for (
        var u = A + c * o * r, h = Math.sin(u), d = Math.cos(u), p = 0;
        p <= e.length - 1;
        p++
      )
        (s.x = e[p].x * h),
          (s.y = e[p].y),
          (s.z = e[p].x * d),
          i.push(s.x, s.y, s.z),
          (l.x = c / t),
          (l.y = p / (e.length - 1)),
          a.push(l.x, l.y);
    for (c = 0; c < t; c++)
      for (p = 0; p < e.length - 1; p++) {
        var f,
          g = (f = p + c * e.length),
          m = f + e.length,
          v = f + e.length + 1,
          B = f + 1;
        n.push(g, m, B), n.push(m, v, B);
      }
    if (
      (this.setIndex(n),
      this.addAttribute('position', new q(i, 3)),
      this.addAttribute('uv', new q(a, 2)),
      this.computeVertexNormals(),
      r === 2 * Math.PI)
    ) {
      var w = this.attributes.normal.array,
        y = new Ce(),
        E = new Ce(),
        x = new Ce();
      for (f = t * e.length * 3, p = c = 0; c < e.length; c++, p += 3)
        (y.x = w[p + 0]),
          (y.y = w[p + 1]),
          (y.z = w[p + 2]),
          (E.x = w[f + p + 0]),
          (E.y = w[f + p + 1]),
          (E.z = w[f + p + 2]),
          x.addVectors(y, E).normalize(),
          (w[p + 0] = w[f + p + 0] = x.x),
          (w[p + 1] = w[f + p + 1] = x.y),
          (w[p + 2] = w[f + p + 2] = x.z);
    }
  }
  function ps(e, t) {
    pe.call(this),
      (this.type = 'ShapeGeometry'),
      'object' == typeof t &&
        (console.warn(
          'THREE.ShapeGeometry: Options parameter has been removed.',
        ),
        (t = t.curveSegments)),
      (this.parameters = { shapes: e, curveSegments: t }),
      this.fromBufferGeometry(new fs(e, t)),
      this.mergeVertices();
  }
  function fs(e, h) {
    $.call(this),
      (this.type = 'ShapeBufferGeometry'),
      (this.parameters = { shapes: e, curveSegments: h }),
      (h = h || 12);
    var d = [],
      p = [],
      f = [],
      g = [],
      t = 0,
      m = 0;
    if (!1 === Array.isArray(e)) r(e);
    else
      for (var A = 0; A < e.length; A++)
        r(e[A]), this.addGroup(t, m, A), (t += m), (m = 0);
    function r(e) {
      var t,
        A = p.length / 3,
        e = e.extractPoints(h),
        r = e.shape,
        n = e.holes;
      if (!1 === $o.isClockWise(r))
        for (r = r.reverse(), a = 0, o = n.length; a < o; a++)
          (t = n[a]), !0 === $o.isClockWise(t) && (n[a] = t.reverse());
      for (var i = $o.triangulateShape(r, n), a = 0, o = n.length; a < o; a++)
        (t = n[a]), (r = r.concat(t));
      for (a = 0, o = r.length; a < o; a++) {
        var s = r[a];
        p.push(s.x, s.y, 0), f.push(0, 0, 1), g.push(s.x, s.y);
      }
      for (a = 0, o = i.length; a < o; a++) {
        var l = i[a],
          c = l[0] + A,
          u = l[1] + A,
          l = l[2] + A;
        d.push(c, u, l), (m += 3);
      }
    }
    this.setIndex(d),
      this.addAttribute('position', new q(p, 3)),
      this.addAttribute('normal', new q(f, 3)),
      this.addAttribute('uv', new q(g, 2));
  }
  function gs(e, t) {
    if (((t.shapes = []), Array.isArray(e)))
      for (var A = 0, r = e.length; A < r; A++) {
        var n = e[A];
        t.shapes.push(n.uuid);
      }
    else t.shapes.push(e.uuid);
    return t;
  }
  function ms(e, t) {
    $.call(this),
      (this.type = 'EdgesGeometry'),
      (this.parameters = { thresholdAngle: t }),
      (t = void 0 !== t ? t : 1);
    for (
      var A,
        r,
        n,
        i,
        a = [],
        o = Math.cos(xe.DEG2RAD * t),
        s = [0, 0],
        l = {},
        c = ['a', 'b', 'c'],
        u =
          (e.isBufferGeometry
            ? (i = new pe()).fromBufferGeometry(e)
            : (i = e.clone()),
          i.mergeVertices(),
          i.computeFaceNormals(),
          i.vertices),
        h = i.faces,
        d = 0,
        p = h.length;
      d < p;
      d++
    )
      for (var f = h[d], g = 0; g < 3; g++)
        (A = f[c[g]]),
          (r = f[c[(g + 1) % 3]]),
          (s[0] = Math.min(A, r)),
          (s[1] = Math.max(A, r)),
          void 0 === l[(n = s[0] + ',' + s[1])]
            ? (l[n] = { index1: s[0], index2: s[1], face1: d, face2: void 0 })
            : (l[n].face2 = d);
    for (n in l) {
      var m,
        v = l[n];
      (void 0 === v.face2 || h[v.face1].normal.dot(h[v.face2].normal) <= o) &&
        ((m = u[v.index1]),
        a.push(m.x, m.y, m.z),
        (m = u[v.index2]),
        a.push(m.x, m.y, m.z));
    }
    this.addAttribute('position', new q(a, 3));
  }
  function vs(e, t, A, r, n, i, a, o) {
    pe.call(this),
      (this.type = 'CylinderGeometry'),
      (this.parameters = {
        radiusTop: e,
        radiusBottom: t,
        height: A,
        radialSegments: r,
        heightSegments: n,
        openEnded: i,
        thetaStart: a,
        thetaLength: o,
      }),
      this.fromBufferGeometry(new Bs(e, t, A, r, n, i, a, o)),
      this.mergeVertices();
  }
  function Bs(d, p, e, f, t, A, g, m) {
    $.call(this),
      (this.type = 'CylinderBufferGeometry'),
      (this.parameters = {
        radiusTop: d,
        radiusBottom: p,
        height: e,
        radialSegments: f,
        heightSegments: t,
        openEnded: A,
        thetaStart: g,
        thetaLength: m,
      });
    var r,
      n,
      v = this,
      B =
        ((d = void 0 !== d ? d : 1),
        (p = void 0 !== p ? p : 1),
        (e = e || 1),
        (f = Math.floor(f) || 8),
        (t = Math.floor(t) || 1),
        (A = void 0 !== A && A),
        (g = void 0 !== g ? g : 0),
        (m = void 0 !== m ? m : 2 * Math.PI),
        []),
      w = [],
      y = [],
      E = [],
      x = 0,
      i = [],
      b = e / 2,
      C = 0,
      a = new Ce(),
      o = new Ce(),
      s = 0,
      l = (p - d) / e;
    for (n = 0; n <= t; n++) {
      var c = [],
        u = n / t,
        h = u * (p - d) + d;
      for (r = 0; r <= f; r++) {
        var F = r / f,
          T = F * m + g,
          _ = Math.sin(T),
          T = Math.cos(T);
        (o.x = h * _),
          (o.y = -u * e + b),
          (o.z = h * T),
          w.push(o.x, o.y, o.z),
          a.set(_, l, T).normalize(),
          y.push(a.x, a.y, a.z),
          E.push(F, 1 - u),
          c.push(x++);
      }
      i.push(c);
    }
    for (r = 0; r < f; r++)
      for (n = 0; n < t; n++) {
        var U = i[n][r],
          M = i[n + 1][r],
          S = i[n + 1][r + 1],
          Q = i[n][r + 1];
        B.push(U, M, Q), B.push(M, S, Q), (s += 6);
      }
    function L(e) {
      for (
        var t,
          A = new he(),
          r = new Ce(),
          n = 0,
          i = !0 === e ? d : p,
          a = !0 === e ? 1 : -1,
          o = x,
          s = 1;
        s <= f;
        s++
      )
        w.push(0, b * a, 0), y.push(0, a, 0), E.push(0.5, 0.5), x++;
      for (t = x, s = 0; s <= f; s++) {
        var l = (s / f) * m + g,
          c = Math.cos(l),
          l = Math.sin(l);
        (r.x = i * l),
          (r.y = b * a),
          (r.z = i * c),
          w.push(r.x, r.y, r.z),
          y.push(0, a, 0),
          (A.x = 0.5 * c + 0.5),
          (A.y = 0.5 * l * a + 0.5),
          E.push(A.x, A.y),
          x++;
      }
      for (s = 0; s < f; s++) {
        var u = o + s,
          h = t + s;
        !0 === e ? B.push(h, h + 1, u) : B.push(h + 1, h, u), (n += 3);
      }
      v.addGroup(C, n, !0 === e ? 1 : 2), (C += n);
    }
    v.addGroup(C, s, 0),
      (C += s),
      !1 === A && (0 < d && L(!0), 0 < p) && L(!1),
      this.setIndex(B),
      this.addAttribute('position', new q(w, 3)),
      this.addAttribute('normal', new q(y, 3)),
      this.addAttribute('uv', new q(E, 2));
  }
  function ws(e, t, A, r, n, i, a) {
    vs.call(this, 0, e, t, A, r, n, i, a),
      (this.type = 'ConeGeometry'),
      (this.parameters = {
        radius: e,
        height: t,
        radialSegments: A,
        heightSegments: r,
        openEnded: n,
        thetaStart: i,
        thetaLength: a,
      });
  }
  function ys(e, t, A, r, n, i, a) {
    Bs.call(this, 0, e, t, A, r, n, i, a),
      (this.type = 'ConeBufferGeometry'),
      (this.parameters = {
        radius: e,
        height: t,
        radialSegments: A,
        heightSegments: r,
        openEnded: n,
        thetaStart: i,
        thetaLength: a,
      });
  }
  function Es(e, t, A, r) {
    pe.call(this),
      (this.type = 'CircleGeometry'),
      (this.parameters = {
        radius: e,
        segments: t,
        thetaStart: A,
        thetaLength: r,
      }),
      this.fromBufferGeometry(new xs(e, t, A, r)),
      this.mergeVertices();
  }
  function xs(e, t, A, r) {
    $.call(this),
      (this.type = 'CircleBufferGeometry'),
      (this.parameters = {
        radius: e,
        segments: t,
        thetaStart: A,
        thetaLength: r,
      }),
      (e = e || 1),
      (t = void 0 !== t ? Math.max(3, t) : 8),
      (A = void 0 !== A ? A : 0),
      (r = void 0 !== r ? r : 2 * Math.PI);
    var n,
      i,
      a = [],
      o = [],
      s = [],
      l = [],
      c = new Ce(),
      u = new he();
    for (
      o.push(0, 0, 0), s.push(0, 0, 1), l.push(0.5, 0.5), i = 0, n = 3;
      i <= t;
      i++, n += 3
    ) {
      var h = A + (i / t) * r;
      (c.x = e * Math.cos(h)),
        (c.y = e * Math.sin(h)),
        o.push(c.x, c.y, c.z),
        s.push(0, 0, 1),
        (u.x = (o[n] / e + 1) / 2),
        (u.y = (o[n + 1] / e + 1) / 2),
        l.push(u.x, u.y);
    }
    for (n = 1; n <= t; n++) a.push(n, n + 1, 0);
    this.setIndex(a),
      this.addAttribute('position', new q(o, 3)),
      this.addAttribute('normal', new q(s, 3)),
      this.addAttribute('uv', new q(l, 2));
  }
  ((as.prototype = Object.create(pe.prototype)).constructor = as),
    ((os.prototype = Object.create(rs.prototype)).constructor = os),
    ((ss.prototype = Object.create(pe.prototype)).constructor = ss),
    ((ls.prototype = Object.create($.prototype)).constructor = ls),
    ((cs.prototype = Object.create(pe.prototype)).constructor = cs),
    ((us.prototype = Object.create($.prototype)).constructor = us),
    ((hs.prototype = Object.create(pe.prototype)).constructor = hs),
    ((ds.prototype = Object.create($.prototype)).constructor = ds),
    (((ps.prototype = Object.create(pe.prototype)).constructor =
      ps).prototype.toJSON = function () {
      var e = pe.prototype.toJSON.call(this);
      return gs(this.parameters.shapes, e);
    }),
    (((fs.prototype = Object.create($.prototype)).constructor =
      fs).prototype.toJSON = function () {
      var e = $.prototype.toJSON.call(this);
      return gs(this.parameters.shapes, e);
    }),
    ((ms.prototype = Object.create($.prototype)).constructor = ms),
    ((vs.prototype = Object.create(pe.prototype)).constructor = vs),
    ((Bs.prototype = Object.create($.prototype)).constructor = Bs),
    ((ws.prototype = Object.create(vs.prototype)).constructor = ws),
    ((ys.prototype = Object.create(Bs.prototype)).constructor = ys),
    ((Es.prototype = Object.create(pe.prototype)).constructor = Es),
    ((xs.prototype = Object.create($.prototype)).constructor = xs);
  var bs = Object.freeze({
    WireframeGeometry: wo,
    ParametricGeometry: yo,
    ParametricBufferGeometry: Eo,
    TetrahedronGeometry: Co,
    TetrahedronBufferGeometry: Fo,
    OctahedronGeometry: To,
    OctahedronBufferGeometry: _o,
    IcosahedronGeometry: Uo,
    IcosahedronBufferGeometry: Mo,
    DodecahedronGeometry: So,
    DodecahedronBufferGeometry: Qo,
    PolyhedronGeometry: xo,
    PolyhedronBufferGeometry: bo,
    TubeGeometry: Lo,
    TubeBufferGeometry: Ho,
    TorusKnotGeometry: Io,
    TorusKnotBufferGeometry: Ro,
    TorusGeometry: Po,
    TorusBufferGeometry: Do,
    TextGeometry: as,
    TextBufferGeometry: os,
    SphereGeometry: ss,
    SphereBufferGeometry: ls,
    RingGeometry: cs,
    RingBufferGeometry: us,
    PlaneGeometry: rn,
    PlaneBufferGeometry: nn,
    LatheGeometry: hs,
    LatheBufferGeometry: ds,
    ShapeGeometry: ps,
    ShapeBufferGeometry: fs,
    ExtrudeGeometry: As,
    ExtrudeBufferGeometry: rs,
    EdgesGeometry: ms,
    ConeGeometry: ws,
    ConeBufferGeometry: ys,
    CylinderGeometry: vs,
    CylinderBufferGeometry: Bs,
    CircleGeometry: Es,
    CircleBufferGeometry: xs,
    BoxGeometry: tn,
    BoxBufferGeometry: An,
  });
  function Cs(e) {
    t.call(this),
      (this.type = 'ShadowMaterial'),
      (this.color = new de(0)),
      (this.transparent = !0),
      this.setValues(e);
  }
  function Fs(e) {
    jn.call(this, e), (this.type = 'RawShaderMaterial');
  }
  function Ts(e) {
    t.call(this),
      (this.defines = { STANDARD: '' }),
      (this.type = 'MeshStandardMaterial'),
      (this.color = new de(16777215)),
      (this.roughness = 0.5),
      (this.metalness = 0.5),
      (this.map = null),
      (this.lightMap = null),
      (this.lightMapIntensity = 1),
      (this.aoMap = null),
      (this.aoMapIntensity = 1),
      (this.emissive = new de(0)),
      (this.emissiveIntensity = 1),
      (this.emissiveMap = null),
      (this.bumpMap = null),
      (this.bumpScale = 1),
      (this.normalMap = null),
      (this.normalMapType = 0),
      (this.normalScale = new he(1, 1)),
      (this.displacementMap = null),
      (this.displacementScale = 1),
      (this.displacementBias = 0),
      (this.roughnessMap = null),
      (this.metalnessMap = null),
      (this.alphaMap = null),
      (this.envMap = null),
      (this.envMapIntensity = 1),
      (this.refractionRatio = 0.98),
      (this.wireframe = !1),
      (this.wireframeLinewidth = 1),
      (this.wireframeLinecap = 'round'),
      (this.wireframeLinejoin = 'round'),
      (this.skinning = !1),
      (this.morphTargets = !1),
      (this.morphNormals = !1),
      this.setValues(e);
  }
  function _s(e) {
    Ts.call(this),
      (this.defines = { PHYSICAL: '' }),
      (this.type = 'MeshPhysicalMaterial'),
      (this.reflectivity = 0.5),
      (this.clearCoat = 0),
      (this.clearCoatRoughness = 0),
      this.setValues(e);
  }
  function Us(e) {
    t.call(this),
      (this.type = 'MeshPhongMaterial'),
      (this.color = new de(16777215)),
      (this.specular = new de(1118481)),
      (this.shininess = 30),
      (this.map = null),
      (this.lightMap = null),
      (this.lightMapIntensity = 1),
      (this.aoMap = null),
      (this.aoMapIntensity = 1),
      (this.emissive = new de(0)),
      (this.emissiveIntensity = 1),
      (this.emissiveMap = null),
      (this.bumpMap = null),
      (this.bumpScale = 1),
      (this.normalMap = null),
      (this.normalMapType = 0),
      (this.normalScale = new he(1, 1)),
      (this.displacementMap = null),
      (this.displacementScale = 1),
      (this.displacementBias = 0),
      (this.specularMap = null),
      (this.alphaMap = null),
      (this.envMap = null),
      (this.combine = Ge),
      (this.reflectivity = 1),
      (this.refractionRatio = 0.98),
      (this.wireframe = !1),
      (this.wireframeLinewidth = 1),
      (this.wireframeLinecap = 'round'),
      (this.wireframeLinejoin = 'round'),
      (this.skinning = !1),
      (this.morphTargets = !1),
      (this.morphNormals = !1),
      this.setValues(e);
  }
  function Ms(e) {
    Us.call(this),
      (this.defines = { TOON: '' }),
      (this.type = 'MeshToonMaterial'),
      (this.gradientMap = null),
      this.setValues(e);
  }
  function Ss(e) {
    t.call(this),
      (this.type = 'MeshNormalMaterial'),
      (this.bumpMap = null),
      (this.bumpScale = 1),
      (this.normalMap = null),
      (this.normalMapType = 0),
      (this.normalScale = new he(1, 1)),
      (this.displacementMap = null),
      (this.displacementScale = 1),
      (this.displacementBias = 0),
      (this.wireframe = !1),
      (this.wireframeLinewidth = 1),
      (this.fog = !1),
      (this.lights = !1),
      (this.skinning = !1),
      (this.morphTargets = !1),
      (this.morphNormals = !1),
      this.setValues(e);
  }
  function Qs(e) {
    t.call(this),
      (this.type = 'MeshLambertMaterial'),
      (this.color = new de(16777215)),
      (this.map = null),
      (this.lightMap = null),
      (this.lightMapIntensity = 1),
      (this.aoMap = null),
      (this.aoMapIntensity = 1),
      (this.emissive = new de(0)),
      (this.emissiveIntensity = 1),
      (this.emissiveMap = null),
      (this.specularMap = null),
      (this.alphaMap = null),
      (this.envMap = null),
      (this.combine = Ge),
      (this.reflectivity = 1),
      (this.refractionRatio = 0.98),
      (this.wireframe = !1),
      (this.wireframeLinewidth = 1),
      (this.wireframeLinecap = 'round'),
      (this.wireframeLinejoin = 'round'),
      (this.skinning = !1),
      (this.morphTargets = !1),
      (this.morphNormals = !1),
      this.setValues(e);
  }
  function Ls(e) {
    m.call(this),
      (this.type = 'LineDashedMaterial'),
      (this.scale = 1),
      (this.dashSize = 3),
      (this.gapSize = 1),
      this.setValues(e);
  }
  (((Cs.prototype = Object.create(t.prototype)).constructor =
    Cs).prototype.isShadowMaterial = !0),
    (Cs.prototype.copy = function (e) {
      return t.prototype.copy.call(this, e), this.color.copy(e.color), this;
    }),
    (((Fs.prototype = Object.create(jn.prototype)).constructor =
      Fs).prototype.isRawShaderMaterial = !0),
    (((Ts.prototype = Object.create(t.prototype)).constructor =
      Ts).prototype.isMeshStandardMaterial = !0),
    (Ts.prototype.copy = function (e) {
      return (
        t.prototype.copy.call(this, e),
        (this.defines = { STANDARD: '' }),
        this.color.copy(e.color),
        (this.roughness = e.roughness),
        (this.metalness = e.metalness),
        (this.map = e.map),
        (this.lightMap = e.lightMap),
        (this.lightMapIntensity = e.lightMapIntensity),
        (this.aoMap = e.aoMap),
        (this.aoMapIntensity = e.aoMapIntensity),
        this.emissive.copy(e.emissive),
        (this.emissiveMap = e.emissiveMap),
        (this.emissiveIntensity = e.emissiveIntensity),
        (this.bumpMap = e.bumpMap),
        (this.bumpScale = e.bumpScale),
        (this.normalMap = e.normalMap),
        (this.normalMapType = e.normalMapType),
        this.normalScale.copy(e.normalScale),
        (this.displacementMap = e.displacementMap),
        (this.displacementScale = e.displacementScale),
        (this.displacementBias = e.displacementBias),
        (this.roughnessMap = e.roughnessMap),
        (this.metalnessMap = e.metalnessMap),
        (this.alphaMap = e.alphaMap),
        (this.envMap = e.envMap),
        (this.envMapIntensity = e.envMapIntensity),
        (this.refractionRatio = e.refractionRatio),
        (this.wireframe = e.wireframe),
        (this.wireframeLinewidth = e.wireframeLinewidth),
        (this.wireframeLinecap = e.wireframeLinecap),
        (this.wireframeLinejoin = e.wireframeLinejoin),
        (this.skinning = e.skinning),
        (this.morphTargets = e.morphTargets),
        (this.morphNormals = e.morphNormals),
        this
      );
    }),
    (((_s.prototype = Object.create(Ts.prototype)).constructor =
      _s).prototype.isMeshPhysicalMaterial = !0),
    (_s.prototype.copy = function (e) {
      return (
        Ts.prototype.copy.call(this, e),
        (this.defines = { PHYSICAL: '' }),
        (this.reflectivity = e.reflectivity),
        (this.clearCoat = e.clearCoat),
        (this.clearCoatRoughness = e.clearCoatRoughness),
        this
      );
    }),
    (((Us.prototype = Object.create(t.prototype)).constructor =
      Us).prototype.isMeshPhongMaterial = !0),
    (Us.prototype.copy = function (e) {
      return (
        t.prototype.copy.call(this, e),
        this.color.copy(e.color),
        this.specular.copy(e.specular),
        (this.shininess = e.shininess),
        (this.map = e.map),
        (this.lightMap = e.lightMap),
        (this.lightMapIntensity = e.lightMapIntensity),
        (this.aoMap = e.aoMap),
        (this.aoMapIntensity = e.aoMapIntensity),
        this.emissive.copy(e.emissive),
        (this.emissiveMap = e.emissiveMap),
        (this.emissiveIntensity = e.emissiveIntensity),
        (this.bumpMap = e.bumpMap),
        (this.bumpScale = e.bumpScale),
        (this.normalMap = e.normalMap),
        (this.normalMapType = e.normalMapType),
        this.normalScale.copy(e.normalScale),
        (this.displacementMap = e.displacementMap),
        (this.displacementScale = e.displacementScale),
        (this.displacementBias = e.displacementBias),
        (this.specularMap = e.specularMap),
        (this.alphaMap = e.alphaMap),
        (this.envMap = e.envMap),
        (this.combine = e.combine),
        (this.reflectivity = e.reflectivity),
        (this.refractionRatio = e.refractionRatio),
        (this.wireframe = e.wireframe),
        (this.wireframeLinewidth = e.wireframeLinewidth),
        (this.wireframeLinecap = e.wireframeLinecap),
        (this.wireframeLinejoin = e.wireframeLinejoin),
        (this.skinning = e.skinning),
        (this.morphTargets = e.morphTargets),
        (this.morphNormals = e.morphNormals),
        this
      );
    }),
    (((Ms.prototype = Object.create(Us.prototype)).constructor =
      Ms).prototype.isMeshToonMaterial = !0),
    (Ms.prototype.copy = function (e) {
      return (
        Us.prototype.copy.call(this, e),
        (this.gradientMap = e.gradientMap),
        this
      );
    }),
    (((Ss.prototype = Object.create(t.prototype)).constructor =
      Ss).prototype.isMeshNormalMaterial = !0),
    (Ss.prototype.copy = function (e) {
      return (
        t.prototype.copy.call(this, e),
        (this.bumpMap = e.bumpMap),
        (this.bumpScale = e.bumpScale),
        (this.normalMap = e.normalMap),
        (this.normalMapType = e.normalMapType),
        this.normalScale.copy(e.normalScale),
        (this.displacementMap = e.displacementMap),
        (this.displacementScale = e.displacementScale),
        (this.displacementBias = e.displacementBias),
        (this.wireframe = e.wireframe),
        (this.wireframeLinewidth = e.wireframeLinewidth),
        (this.skinning = e.skinning),
        (this.morphTargets = e.morphTargets),
        (this.morphNormals = e.morphNormals),
        this
      );
    }),
    (((Qs.prototype = Object.create(t.prototype)).constructor =
      Qs).prototype.isMeshLambertMaterial = !0),
    (Qs.prototype.copy = function (e) {
      return (
        t.prototype.copy.call(this, e),
        this.color.copy(e.color),
        (this.map = e.map),
        (this.lightMap = e.lightMap),
        (this.lightMapIntensity = e.lightMapIntensity),
        (this.aoMap = e.aoMap),
        (this.aoMapIntensity = e.aoMapIntensity),
        this.emissive.copy(e.emissive),
        (this.emissiveMap = e.emissiveMap),
        (this.emissiveIntensity = e.emissiveIntensity),
        (this.specularMap = e.specularMap),
        (this.alphaMap = e.alphaMap),
        (this.envMap = e.envMap),
        (this.combine = e.combine),
        (this.reflectivity = e.reflectivity),
        (this.refractionRatio = e.refractionRatio),
        (this.wireframe = e.wireframe),
        (this.wireframeLinewidth = e.wireframeLinewidth),
        (this.wireframeLinecap = e.wireframeLinecap),
        (this.wireframeLinejoin = e.wireframeLinejoin),
        (this.skinning = e.skinning),
        (this.morphTargets = e.morphTargets),
        (this.morphNormals = e.morphNormals),
        this
      );
    }),
    (((Ls.prototype = Object.create(m.prototype)).constructor =
      Ls).prototype.isLineDashedMaterial = !0),
    (Ls.prototype.copy = function (e) {
      return (
        m.prototype.copy.call(this, e),
        (this.scale = e.scale),
        (this.dashSize = e.dashSize),
        (this.gapSize = e.gapSize),
        this
      );
    });
  var Hs = Object.freeze({
      ShadowMaterial: Cs,
      SpriteMaterial: io,
      RawShaderMaterial: Fs,
      ShaderMaterial: jn,
      PointsMaterial: po,
      MeshPhysicalMaterial: _s,
      MeshStandardMaterial: Ts,
      MeshPhongMaterial: Us,
      MeshToonMaterial: Ms,
      MeshNormalMaterial: Ss,
      MeshLambertMaterial: Qs,
      MeshDepthMaterial: ka,
      MeshDistanceMaterial: za,
      MeshBasicMaterial: Xn,
      LineDashedMaterial: Ls,
      LineBasicMaterial: m,
      Material: t,
    }),
    Is = {
      enabled: !1,
      files: {},
      add: function (e, t) {
        !1 !== this.enabled && (this.files[e] = t);
      },
      get: function (e) {
        if (!1 !== this.enabled) return this.files[e];
      },
      remove: function (e) {
        delete this.files[e];
      },
      clear: function () {
        this.files = {};
      },
    };
  function Rs(e, t, A) {
    var r = this,
      n = !1,
      i = 0,
      a = 0,
      o = void 0;
    (this.onStart = void 0),
      (this.onLoad = e),
      (this.onProgress = t),
      (this.onError = A),
      (this.itemStart = function (e) {
        a++, !1 === n && void 0 !== r.onStart && r.onStart(e, i, a), (n = !0);
      }),
      (this.itemEnd = function (e) {
        i++,
          void 0 !== r.onProgress && r.onProgress(e, i, a),
          i === a && ((n = !1), void 0 !== r.onLoad) && r.onLoad();
      }),
      (this.itemError = function (e) {
        void 0 !== r.onError && r.onError(e);
      }),
      (this.resolveURL = function (e) {
        return o ? o(e) : e;
      }),
      (this.setURLModifier = function (e) {
        return (o = e), this;
      });
  }
  var Ps = new Rs(),
    Ds = {};
  function Os(e) {
    this.manager = void 0 !== e ? e : Ps;
  }
  function Ns(e) {
    (this.manager = void 0 !== e ? e : Ps), (this._parser = null);
  }
  function Gs(e) {
    (this.manager = void 0 !== e ? e : Ps), (this._parser = null);
  }
  function Vs(e) {
    this.manager = void 0 !== e ? e : Ps;
  }
  function ks(e) {
    this.manager = void 0 !== e ? e : Ps;
  }
  function zs(e) {
    this.manager = void 0 !== e ? e : Ps;
  }
  function l() {
    (this.type = 'Curve'), (this.arcLengthDivisions = 200);
  }
  function Ks(e, t, A, r, n, i, a, o) {
    l.call(this),
      (this.type = 'EllipseCurve'),
      (this.aX = e || 0),
      (this.aY = t || 0),
      (this.xRadius = A || 1),
      (this.yRadius = r || 1),
      (this.aStartAngle = n || 0),
      (this.aEndAngle = i || 2 * Math.PI),
      (this.aClockwise = a || !1),
      (this.aRotation = o || 0);
  }
  function Xs(e, t, A, r, n, i) {
    Ks.call(this, e, t, A, A, r, n, i), (this.type = 'ArcCurve');
  }
  function js() {
    var n = 0,
      i = 0,
      a = 0,
      o = 0;
    function s(e, t, A, r) {
      (a = -3 * (n = e) + 3 * t - 2 * (i = A) - r), (o = 2 * e - 2 * t + A + r);
    }
    return {
      initCatmullRom: function (e, t, A, r, n) {
        s(t, A, n * (A - e), n * (r - t));
      },
      initNonuniformCatmullRom: function (e, t, A, r, n, i, a) {
        (e = (t - e) / n - (A - e) / (n + i) + (A - t) / i),
          (n = (A - t) / i - (r - t) / (i + a) + (r - A) / a);
        s(t, A, (e *= i), (n *= i));
      },
      calc: function (e) {
        var t = e * e;
        return n + i * e + a * t + o * (t * e);
      },
    };
  }
  Object.assign(Os.prototype, {
    load: function (a, e, t, A) {
      void 0 === a && (a = ''),
        void 0 !== this.path && (a = this.path + a),
        (a = this.manager.resolveURL(a));
      var o = this,
        r = Is.get(a);
      if (void 0 !== r)
        return (
          o.manager.itemStart(a),
          setTimeout(function () {
            e && e(r), o.manager.itemEnd(a);
          }, 0),
          r
        );
      if (void 0 === Ds[a]) {
        var n = a.match(/^data:(.*?)(;base64)?,(.*)$/);
        if (n) {
          var i = n[1],
            s = !!n[2],
            l = n[3],
            l = window.decodeURIComponent(l);
          s && (l = window.atob(l));
          try {
            var c = (this.responseType || '').toLowerCase();
            switch (c) {
              case 'arraybuffer':
              case 'blob':
                for (var u = new Uint8Array(l.length), h = 0; h < l.length; h++)
                  u[h] = l.charCodeAt(h);
                d = 'blob' === c ? new Blob([u.buffer], { type: i }) : u.buffer;
                break;
              case 'document':
                var d = new DOMParser().parseFromString(l, i);
                break;
              case 'json':
                d = JSON.parse(l);
                break;
              default:
                d = l;
            }
            window.setTimeout(function () {
              e && e(d), o.manager.itemEnd(a);
            }, 0);
          } catch (e) {
            window.setTimeout(function () {
              A && A(e), o.manager.itemEnd(a), o.manager.itemError(a);
            }, 0);
          }
        } else {
          (Ds[a] = []), Ds[a].push({ onLoad: e, onProgress: t, onError: A });
          var p,
            f = new XMLHttpRequest();
          for (p in (f.open('GET', a, !0),
          f.addEventListener(
            'load',
            function (e) {
              var t = this.response,
                A = (Is.add(a, t), Ds[a]);
              if ((delete Ds[a], 200 === this.status || 0 === this.status)) {
                0 === this.status &&
                  console.warn('THREE.FileLoader: HTTP Status 0 received.');
                for (var r = 0, n = A.length; r < n; r++)
                  (i = A[r]).onLoad && i.onLoad(t);
                o.manager.itemEnd(a);
              } else {
                for (var i, r = 0, n = A.length; r < n; r++)
                  (i = A[r]).onError && i.onError(e);
                o.manager.itemEnd(a), o.manager.itemError(a);
              }
            },
            !1,
          ),
          f.addEventListener(
            'progress',
            function (e) {
              for (var t = Ds[a], A = 0, r = t.length; A < r; A++) {
                var n = t[A];
                n.onProgress && n.onProgress(e);
              }
            },
            !1,
          ),
          f.addEventListener(
            'error',
            function (e) {
              var t = Ds[a];
              delete Ds[a];
              for (var A = 0, r = t.length; A < r; A++) {
                var n = t[A];
                n.onError && n.onError(e);
              }
              o.manager.itemEnd(a), o.manager.itemError(a);
            },
            !1,
          ),
          void 0 !== this.responseType && (f.responseType = this.responseType),
          void 0 !== this.withCredentials &&
            (f.withCredentials = this.withCredentials),
          f.overrideMimeType &&
            f.overrideMimeType(
              void 0 !== this.mimeType ? this.mimeType : 'text/plain',
            ),
          this.requestHeader))
            f.setRequestHeader(p, this.requestHeader[p]);
          f.send(null);
        }
        return o.manager.itemStart(a), f;
      }
      Ds[a].push({ onLoad: e, onProgress: t, onError: A });
    },
    setPath: function (e) {
      return (this.path = e), this;
    },
    setResponseType: function (e) {
      return (this.responseType = e), this;
    },
    setWithCredentials: function (e) {
      return (this.withCredentials = e), this;
    },
    setMimeType: function (e) {
      return (this.mimeType = e), this;
    },
    setRequestHeader: function (e) {
      return (this.requestHeader = e), this;
    },
  }),
    Object.assign(Ns.prototype, {
      load: function (e, i, A, r) {
        var a = this,
          o = [],
          s = new mo(),
          n = ((s.image = o), new Os(this.manager));
        if (
          (n.setPath(this.path),
          n.setResponseType('arraybuffer'),
          Array.isArray(e))
        )
          for (var l = 0, t = 0, c = e.length; t < c; ++t)
            !(function (t) {
              n.load(
                e[t],
                function (e) {
                  e = a._parser(e, !0);
                  (o[t] = {
                    width: e.width,
                    height: e.height,
                    format: e.format,
                    mipmaps: e.mipmaps,
                  }),
                    6 === (l += 1) &&
                      (1 === e.mipmapCount && (s.minFilter = U),
                      (s.format = e.format),
                      (s.needsUpdate = !0),
                      i) &&
                      i(s);
                },
                A,
                r,
              );
            })(t);
        else
          n.load(
            e,
            function (e) {
              var t = a._parser(e, !0);
              if (t.isCubemap)
                for (
                  var A = t.mipmaps.length / t.mipmapCount, r = 0;
                  r < A;
                  r++
                ) {
                  o[r] = { mipmaps: [] };
                  for (var n = 0; n < t.mipmapCount; n++)
                    o[r].mipmaps.push(t.mipmaps[r * t.mipmapCount + n]),
                      (o[r].format = t.format),
                      (o[r].width = t.width),
                      (o[r].height = t.height);
                }
              else
                (s.image.width = t.width),
                  (s.image.height = t.height),
                  (s.mipmaps = t.mipmaps);
              1 === t.mipmapCount && (s.minFilter = U),
                (s.format = t.format),
                (s.needsUpdate = !0),
                i && i(s);
            },
            A,
            r,
          );
        return s;
      },
      setPath: function (e) {
        return (this.path = e), this;
      },
    }),
    Object.assign(Gs.prototype, {
      load: function (e, t, A, r) {
        var n = this,
          i = new OA(),
          a = new Os(this.manager);
        return (
          a.setResponseType('arraybuffer'),
          a.load(
            e,
            function (e) {
              e = n._parser(e);
              e &&
                (void 0 !== e.image
                  ? (i.image = e.image)
                  : void 0 !== e.data &&
                    ((i.image.width = e.width),
                    (i.image.height = e.height),
                    (i.image.data = e.data)),
                (i.wrapS = void 0 !== e.wrapS ? e.wrapS : $e),
                (i.wrapT = void 0 !== e.wrapT ? e.wrapT : $e),
                (i.magFilter = void 0 !== e.magFilter ? e.magFilter : U),
                (i.minFilter = void 0 !== e.minFilter ? e.minFilter : it),
                (i.anisotropy = void 0 !== e.anisotropy ? e.anisotropy : 1),
                void 0 !== e.format && (i.format = e.format),
                void 0 !== e.type && (i.type = e.type),
                void 0 !== e.mipmaps && (i.mipmaps = e.mipmaps),
                1 === e.mipmapCount && (i.minFilter = U),
                (i.needsUpdate = !0),
                t) &&
                t(i, e);
            },
            A,
            r,
          ),
          i
        );
      },
    }),
    Object.assign(Vs.prototype, {
      crossOrigin: 'anonymous',
      load: function (t, e, A, r) {
        void 0 === t && (t = ''),
          void 0 !== this.path && (t = this.path + t),
          (t = this.manager.resolveURL(t));
        var n,
          i = this,
          a = Is.get(t);
        return void 0 !== a
          ? (i.manager.itemStart(t),
            setTimeout(function () {
              e && e(a), i.manager.itemEnd(t);
            }, 0),
            a)
          : ((n = document.createElementNS(
              'http://www.w3.org/1999/xhtml',
              'img',
            )).addEventListener('load', o, !1),
            n.addEventListener('error', s, !1),
            'data:' !== t.substr(0, 5) &&
              void 0 !== this.crossOrigin &&
              (n.crossOrigin = this.crossOrigin),
            i.manager.itemStart(t),
            (n.src = t),
            n);
        function o() {
          n.removeEventListener('load', o, !1),
            n.removeEventListener('error', s, !1),
            Is.add(t, this),
            e && e(this),
            i.manager.itemEnd(t);
        }
        function s(e) {
          n.removeEventListener('load', o, !1),
            n.removeEventListener('error', s, !1),
            r && r(e),
            i.manager.itemEnd(t),
            i.manager.itemError(t);
        }
      },
      setCrossOrigin: function (e) {
        return (this.crossOrigin = e), this;
      },
      setPath: function (e) {
        return (this.path = e), this;
      },
    }),
    Object.assign(ks.prototype, {
      crossOrigin: 'anonymous',
      load: function (e, A, t, r) {
        var n = new ci(),
          i = new Vs(this.manager),
          a = (i.setCrossOrigin(this.crossOrigin), i.setPath(this.path), 0);
        for (var o = 0; o < e.length; ++o)
          !(function (t) {
            i.load(
              e[t],
              function (e) {
                (n.images[t] = e),
                  6 === ++a && ((n.needsUpdate = !0), A) && A(n);
              },
              void 0,
              r,
            );
          })(o);
        return n;
      },
      setCrossOrigin: function (e) {
        return (this.crossOrigin = e), this;
      },
      setPath: function (e) {
        return (this.path = e), this;
      },
    }),
    Object.assign(zs.prototype, {
      crossOrigin: 'anonymous',
      load: function (t, A, e, r) {
        var n = new h(),
          i = new Vs(this.manager);
        return (
          i.setCrossOrigin(this.crossOrigin),
          i.setPath(this.path),
          i.load(
            t,
            function (e) {
              n.image = e;
              e =
                0 < t.search(/\.(jpg|jpeg)$/) ||
                0 === t.search(/^data\:image\/jpeg/);
              (n.format = e ? Bt : wt),
                (n.needsUpdate = !0),
                void 0 !== A && A(n);
            },
            e,
            r,
          ),
          n
        );
      },
      setCrossOrigin: function (e) {
        return (this.crossOrigin = e), this;
      },
      setPath: function (e) {
        return (this.path = e), this;
      },
    }),
    Object.assign(l.prototype, {
      getPoint: function () {
        return console.warn('THREE.Curve: .getPoint() not implemented.'), null;
      },
      getPointAt: function (e, t) {
        e = this.getUtoTmapping(e);
        return this.getPoint(e, t);
      },
      getPoints: function (e) {
        void 0 === e && (e = 5);
        for (var t = [], A = 0; A <= e; A++) t.push(this.getPoint(A / e));
        return t;
      },
      getSpacedPoints: function (e) {
        void 0 === e && (e = 5);
        for (var t = [], A = 0; A <= e; A++) t.push(this.getPointAt(A / e));
        return t;
      },
      getLength: function () {
        var e = this.getLengths();
        return e[e.length - 1];
      },
      getLengths: function (e) {
        if (
          (void 0 === e && (e = this.arcLengthDivisions),
          this.cacheArcLengths &&
            this.cacheArcLengths.length === e + 1 &&
            !this.needsUpdate)
        )
          return this.cacheArcLengths;
        this.needsUpdate = !1;
        var t,
          A,
          r = [],
          n = this.getPoint(0),
          i = 0;
        for (r.push(0), A = 1; A <= e; A++)
          (i += (t = this.getPoint(A / e)).distanceTo(n)), r.push(i), (n = t);
        return (this.cacheArcLengths = r);
      },
      updateArcLengths: function () {
        (this.needsUpdate = !0), this.getLengths();
      },
      getUtoTmapping: function (e, t) {
        for (
          var A,
            r = this.getLengths(),
            n = 0,
            i = r.length,
            a = t || e * r[i - 1],
            o = 0,
            s = i - 1;
          o <= s;

        )
          if ((A = r[(n = Math.floor(o + (s - o) / 2))] - a) < 0) o = n + 1;
          else {
            if (!(0 < A)) {
              s = n;
              break;
            }
            s = n - 1;
          }
        return r[(n = s)] === a
          ? n / (i - 1)
          : (n + (a - (t = r[n])) / (r[n + 1] - t)) / (i - 1);
      },
      getTangent: function (e) {
        var t = e - 1e-4,
          e = e + 1e-4,
          t = (1 < e && (e = 1), this.getPoint((t = t < 0 ? 0 : t)));
        return this.getPoint(e).clone().sub(t).normalize();
      },
      getTangentAt: function (e) {
        e = this.getUtoTmapping(e);
        return this.getTangent(e);
      },
      computeFrenetFrames: function (e, t) {
        for (
          var A,
            r = new Ce(),
            n = [],
            i = [],
            a = [],
            o = new Ce(),
            s = new be(),
            l = 0;
          l <= e;
          l++
        )
          (n[l] = this.getTangentAt(l / e)), n[l].normalize();
        (i[0] = new Ce()), (a[0] = new Ce());
        var c = Number.MAX_VALUE,
          u = Math.abs(n[0].x),
          h = Math.abs(n[0].y),
          d = Math.abs(n[0].z);
        for (
          u <= c && ((c = u), r.set(1, 0, 0)),
            h <= c && ((c = h), r.set(0, 1, 0)),
            d <= c && r.set(0, 0, 1),
            o.crossVectors(n[0], r).normalize(),
            i[0].crossVectors(n[0], o),
            a[0].crossVectors(n[0], i[0]),
            l = 1;
          l <= e;
          l++
        )
          (i[l] = i[l - 1].clone()),
            (a[l] = a[l - 1].clone()),
            o.crossVectors(n[l - 1], n[l]),
            o.length() > Number.EPSILON &&
              (o.normalize(),
              (A = Math.acos(xe.clamp(n[l - 1].dot(n[l]), -1, 1))),
              i[l].applyMatrix4(s.makeRotationAxis(o, A))),
            a[l].crossVectors(n[l], i[l]);
        if (!0 === t)
          for (
            A = Math.acos(xe.clamp(i[0].dot(i[e]), -1, 1)),
              A /= e,
              0 < n[0].dot(o.crossVectors(i[0], i[e])) && (A = -A),
              l = 1;
            l <= e;
            l++
          )
            i[l].applyMatrix4(s.makeRotationAxis(n[l], A * l)),
              a[l].crossVectors(n[l], i[l]);
        return { tangents: n, normals: i, binormals: a };
      },
      clone: function () {
        return new this.constructor().copy(this);
      },
      copy: function (e) {
        return (this.arcLengthDivisions = e.arcLengthDivisions), this;
      },
      toJSON: function () {
        var e = {
          metadata: { version: 4.5, type: 'Curve', generator: 'Curve.toJSON' },
        };
        return (
          (e.arcLengthDivisions = this.arcLengthDivisions),
          (e.type = this.type),
          e
        );
      },
      fromJSON: function (e) {
        return (this.arcLengthDivisions = e.arcLengthDivisions), this;
      },
    }),
    (((Ks.prototype = Object.create(l.prototype)).constructor =
      Ks).prototype.isEllipseCurve = !0),
    (Ks.prototype.getPoint = function (e, t) {
      for (
        var t = t || new he(),
          A = 2 * Math.PI,
          r = this.aEndAngle - this.aStartAngle,
          n = Math.abs(r) < Number.EPSILON;
        r < 0;

      )
        r += A;
      for (; A < r; ) r -= A;
      r < Number.EPSILON && (r = n ? 0 : A),
        !0 !== this.aClockwise || n || (r === A ? (r = -A) : (r -= A));
      var i,
        a,
        o,
        s,
        n = this.aStartAngle + e * r,
        e = this.aX + this.xRadius * Math.cos(n),
        n = this.aY + this.yRadius * Math.sin(n);
      return (
        0 !== this.aRotation &&
          ((i = Math.cos(this.aRotation)),
          (a = Math.sin(this.aRotation)),
          (e = (o = e - this.aX) * i - (s = n - this.aY) * a + this.aX),
          (n = o * a + s * i + this.aY)),
        t.set(e, n)
      );
    }),
    (Ks.prototype.copy = function (e) {
      return (
        l.prototype.copy.call(this, e),
        (this.aX = e.aX),
        (this.aY = e.aY),
        (this.xRadius = e.xRadius),
        (this.yRadius = e.yRadius),
        (this.aStartAngle = e.aStartAngle),
        (this.aEndAngle = e.aEndAngle),
        (this.aClockwise = e.aClockwise),
        (this.aRotation = e.aRotation),
        this
      );
    }),
    (Ks.prototype.toJSON = function () {
      var e = l.prototype.toJSON.call(this);
      return (
        (e.aX = this.aX),
        (e.aY = this.aY),
        (e.xRadius = this.xRadius),
        (e.yRadius = this.yRadius),
        (e.aStartAngle = this.aStartAngle),
        (e.aEndAngle = this.aEndAngle),
        (e.aClockwise = this.aClockwise),
        (e.aRotation = this.aRotation),
        e
      );
    }),
    (Ks.prototype.fromJSON = function (e) {
      return (
        l.prototype.fromJSON.call(this, e),
        (this.aX = e.aX),
        (this.aY = e.aY),
        (this.xRadius = e.xRadius),
        (this.yRadius = e.yRadius),
        (this.aStartAngle = e.aStartAngle),
        (this.aEndAngle = e.aEndAngle),
        (this.aClockwise = e.aClockwise),
        (this.aRotation = e.aRotation),
        this
      );
    }),
    (((Xs.prototype = Object.create(Ks.prototype)).constructor =
      Xs).prototype.isArcCurve = !0);
  var Ws = new Ce(),
    Ys = new js(),
    Js = new js(),
    Zs = new js();
  function qs(e, t, A, r) {
    l.call(this),
      (this.type = 'CatmullRomCurve3'),
      (this.points = e || []),
      (this.closed = t || !1),
      (this.curveType = A || 'centripetal'),
      (this.tension = r || 0.5);
  }
  function $s(e, t, A, r, n) {
    var t = 0.5 * (r - t),
      n = 0.5 * (n - A),
      i = e * e;
    return (
      (2 * A - 2 * r + t + n) * (e * i) +
      (-3 * A + 3 * r - 2 * t - n) * i +
      t * e +
      A
    );
  }
  function el(e, t, A, r) {
    return (n = 1 - (n = e)) * n * t + 2 * (1 - e) * e * A + e * e * r;
    var n;
  }
  function tl(e, t, A, r, n) {
    return (
      (i = 1 - (i = e)) * i * i * t +
      3 * (i = 1 - e) * i * e * A +
      3 * (1 - e) * e * e * r +
      e * e * e * n
    );
    var i;
  }
  function Al(e, t, A, r) {
    l.call(this),
      (this.type = 'CubicBezierCurve'),
      (this.v0 = e || new he()),
      (this.v1 = t || new he()),
      (this.v2 = A || new he()),
      (this.v3 = r || new he());
  }
  function rl(e, t, A, r) {
    l.call(this),
      (this.type = 'CubicBezierCurve3'),
      (this.v0 = e || new Ce()),
      (this.v1 = t || new Ce()),
      (this.v2 = A || new Ce()),
      (this.v3 = r || new Ce());
  }
  function nl(e, t) {
    l.call(this),
      (this.type = 'LineCurve'),
      (this.v1 = e || new he()),
      (this.v2 = t || new he());
  }
  function il(e, t) {
    l.call(this),
      (this.type = 'LineCurve3'),
      (this.v1 = e || new Ce()),
      (this.v2 = t || new Ce());
  }
  function al(e, t, A) {
    l.call(this),
      (this.type = 'QuadraticBezierCurve'),
      (this.v0 = e || new he()),
      (this.v1 = t || new he()),
      (this.v2 = A || new he());
  }
  function ol(e, t, A) {
    l.call(this),
      (this.type = 'QuadraticBezierCurve3'),
      (this.v0 = e || new Ce()),
      (this.v1 = t || new Ce()),
      (this.v2 = A || new Ce());
  }
  function sl(e) {
    l.call(this), (this.type = 'SplineCurve'), (this.points = e || []);
  }
  (((qs.prototype = Object.create(l.prototype)).constructor =
    qs).prototype.isCatmullRomCurve3 = !0),
    (qs.prototype.getPoint = function (e, t) {
      var A,
        r,
        n,
        i,
        t = t || new Ce(),
        a = this.points,
        o = a.length,
        e = (o - (this.closed ? 0 : 1)) * e,
        s = Math.floor(e),
        e = e - s;
      return (
        this.closed
          ? (s += 0 < s ? 0 : (Math.floor(Math.abs(s) / o) + 1) * o)
          : 0 === e && s === o - 1 && ((s = o - 2), (e = 1)),
        (A =
          this.closed || 0 < s
            ? a[(s - 1) % o]
            : (Ws.subVectors(a[0], a[1]).add(a[0]), Ws)),
        (r = a[s % o]),
        (n = a[(s + 1) % o]),
        (s =
          this.closed || s + 2 < o
            ? a[(s + 2) % o]
            : (Ws.subVectors(a[o - 1], a[o - 2]).add(a[o - 1]), Ws)),
        'centripetal' === this.curveType || 'chordal' === this.curveType
          ? ((a = 'chordal' === this.curveType ? 0.5 : 0.25),
            (o = Math.pow(A.distanceToSquared(r), a)),
            (i = Math.pow(r.distanceToSquared(n), a)) < 1e-4 && (i = 1),
            o < 1e-4 && (o = i),
            (a = Math.pow(n.distanceToSquared(s), a)) < 1e-4 && (a = i),
            Ys.initNonuniformCatmullRom(A.x, r.x, n.x, s.x, o, i, a),
            Js.initNonuniformCatmullRom(A.y, r.y, n.y, s.y, o, i, a),
            Zs.initNonuniformCatmullRom(A.z, r.z, n.z, s.z, o, i, a))
          : 'catmullrom' === this.curveType &&
            (Ys.initCatmullRom(A.x, r.x, n.x, s.x, this.tension),
            Js.initCatmullRom(A.y, r.y, n.y, s.y, this.tension),
            Zs.initCatmullRom(A.z, r.z, n.z, s.z, this.tension)),
        t.set(Ys.calc(e), Js.calc(e), Zs.calc(e)),
        t
      );
    }),
    (qs.prototype.copy = function (e) {
      l.prototype.copy.call(this, e), (this.points = []);
      for (var t = 0, A = e.points.length; t < A; t++) {
        var r = e.points[t];
        this.points.push(r.clone());
      }
      return (
        (this.closed = e.closed),
        (this.curveType = e.curveType),
        (this.tension = e.tension),
        this
      );
    }),
    (qs.prototype.toJSON = function () {
      var e = l.prototype.toJSON.call(this);
      e.points = [];
      for (var t = 0, A = this.points.length; t < A; t++) {
        var r = this.points[t];
        e.points.push(r.toArray());
      }
      return (
        (e.closed = this.closed),
        (e.curveType = this.curveType),
        (e.tension = this.tension),
        e
      );
    }),
    (qs.prototype.fromJSON = function (e) {
      l.prototype.fromJSON.call(this, e), (this.points = []);
      for (var t = 0, A = e.points.length; t < A; t++) {
        var r = e.points[t];
        this.points.push(new Ce().fromArray(r));
      }
      return (
        (this.closed = e.closed),
        (this.curveType = e.curveType),
        (this.tension = e.tension),
        this
      );
    }),
    (((Al.prototype = Object.create(l.prototype)).constructor =
      Al).prototype.isCubicBezierCurve = !0),
    (Al.prototype.getPoint = function (e, t) {
      var t = t || new he(),
        A = this.v0,
        r = this.v1,
        n = this.v2,
        i = this.v3;
      return t.set(tl(e, A.x, r.x, n.x, i.x), tl(e, A.y, r.y, n.y, i.y)), t;
    }),
    (Al.prototype.copy = function (e) {
      return (
        l.prototype.copy.call(this, e),
        this.v0.copy(e.v0),
        this.v1.copy(e.v1),
        this.v2.copy(e.v2),
        this.v3.copy(e.v3),
        this
      );
    }),
    (Al.prototype.toJSON = function () {
      var e = l.prototype.toJSON.call(this);
      return (
        (e.v0 = this.v0.toArray()),
        (e.v1 = this.v1.toArray()),
        (e.v2 = this.v2.toArray()),
        (e.v3 = this.v3.toArray()),
        e
      );
    }),
    (Al.prototype.fromJSON = function (e) {
      return (
        l.prototype.fromJSON.call(this, e),
        this.v0.fromArray(e.v0),
        this.v1.fromArray(e.v1),
        this.v2.fromArray(e.v2),
        this.v3.fromArray(e.v3),
        this
      );
    }),
    (((rl.prototype = Object.create(l.prototype)).constructor =
      rl).prototype.isCubicBezierCurve3 = !0),
    (rl.prototype.getPoint = function (e, t) {
      var t = t || new Ce(),
        A = this.v0,
        r = this.v1,
        n = this.v2,
        i = this.v3;
      return (
        t.set(
          tl(e, A.x, r.x, n.x, i.x),
          tl(e, A.y, r.y, n.y, i.y),
          tl(e, A.z, r.z, n.z, i.z),
        ),
        t
      );
    }),
    (rl.prototype.copy = function (e) {
      return (
        l.prototype.copy.call(this, e),
        this.v0.copy(e.v0),
        this.v1.copy(e.v1),
        this.v2.copy(e.v2),
        this.v3.copy(e.v3),
        this
      );
    }),
    (rl.prototype.toJSON = function () {
      var e = l.prototype.toJSON.call(this);
      return (
        (e.v0 = this.v0.toArray()),
        (e.v1 = this.v1.toArray()),
        (e.v2 = this.v2.toArray()),
        (e.v3 = this.v3.toArray()),
        e
      );
    }),
    (rl.prototype.fromJSON = function (e) {
      return (
        l.prototype.fromJSON.call(this, e),
        this.v0.fromArray(e.v0),
        this.v1.fromArray(e.v1),
        this.v2.fromArray(e.v2),
        this.v3.fromArray(e.v3),
        this
      );
    }),
    (((nl.prototype = Object.create(l.prototype)).constructor =
      nl).prototype.isLineCurve = !0),
    (nl.prototype.getPoint = function (e, t) {
      t = t || new he();
      return (
        1 === e
          ? t.copy(this.v2)
          : (t.copy(this.v2).sub(this.v1), t.multiplyScalar(e).add(this.v1)),
        t
      );
    }),
    (nl.prototype.getPointAt = function (e, t) {
      return this.getPoint(e, t);
    }),
    (nl.prototype.getTangent = function () {
      return this.v2.clone().sub(this.v1).normalize();
    }),
    (nl.prototype.copy = function (e) {
      return (
        l.prototype.copy.call(this, e),
        this.v1.copy(e.v1),
        this.v2.copy(e.v2),
        this
      );
    }),
    (nl.prototype.toJSON = function () {
      var e = l.prototype.toJSON.call(this);
      return (e.v1 = this.v1.toArray()), (e.v2 = this.v2.toArray()), e;
    }),
    (nl.prototype.fromJSON = function (e) {
      return (
        l.prototype.fromJSON.call(this, e),
        this.v1.fromArray(e.v1),
        this.v2.fromArray(e.v2),
        this
      );
    }),
    (((il.prototype = Object.create(l.prototype)).constructor =
      il).prototype.isLineCurve3 = !0),
    (il.prototype.getPoint = function (e, t) {
      t = t || new Ce();
      return (
        1 === e
          ? t.copy(this.v2)
          : (t.copy(this.v2).sub(this.v1), t.multiplyScalar(e).add(this.v1)),
        t
      );
    }),
    (il.prototype.getPointAt = function (e, t) {
      return this.getPoint(e, t);
    }),
    (il.prototype.copy = function (e) {
      return (
        l.prototype.copy.call(this, e),
        this.v1.copy(e.v1),
        this.v2.copy(e.v2),
        this
      );
    }),
    (il.prototype.toJSON = function () {
      var e = l.prototype.toJSON.call(this);
      return (e.v1 = this.v1.toArray()), (e.v2 = this.v2.toArray()), e;
    }),
    (il.prototype.fromJSON = function (e) {
      return (
        l.prototype.fromJSON.call(this, e),
        this.v1.fromArray(e.v1),
        this.v2.fromArray(e.v2),
        this
      );
    }),
    (((al.prototype = Object.create(l.prototype)).constructor =
      al).prototype.isQuadraticBezierCurve = !0),
    (al.prototype.getPoint = function (e, t) {
      var t = t || new he(),
        A = this.v0,
        r = this.v1,
        n = this.v2;
      return t.set(el(e, A.x, r.x, n.x), el(e, A.y, r.y, n.y)), t;
    }),
    (al.prototype.copy = function (e) {
      return (
        l.prototype.copy.call(this, e),
        this.v0.copy(e.v0),
        this.v1.copy(e.v1),
        this.v2.copy(e.v2),
        this
      );
    }),
    (al.prototype.toJSON = function () {
      var e = l.prototype.toJSON.call(this);
      return (
        (e.v0 = this.v0.toArray()),
        (e.v1 = this.v1.toArray()),
        (e.v2 = this.v2.toArray()),
        e
      );
    }),
    (al.prototype.fromJSON = function (e) {
      return (
        l.prototype.fromJSON.call(this, e),
        this.v0.fromArray(e.v0),
        this.v1.fromArray(e.v1),
        this.v2.fromArray(e.v2),
        this
      );
    }),
    (((ol.prototype = Object.create(l.prototype)).constructor =
      ol).prototype.isQuadraticBezierCurve3 = !0),
    (ol.prototype.getPoint = function (e, t) {
      var t = t || new Ce(),
        A = this.v0,
        r = this.v1,
        n = this.v2;
      return (
        t.set(el(e, A.x, r.x, n.x), el(e, A.y, r.y, n.y), el(e, A.z, r.z, n.z)),
        t
      );
    }),
    (ol.prototype.copy = function (e) {
      return (
        l.prototype.copy.call(this, e),
        this.v0.copy(e.v0),
        this.v1.copy(e.v1),
        this.v2.copy(e.v2),
        this
      );
    }),
    (ol.prototype.toJSON = function () {
      var e = l.prototype.toJSON.call(this);
      return (
        (e.v0 = this.v0.toArray()),
        (e.v1 = this.v1.toArray()),
        (e.v2 = this.v2.toArray()),
        e
      );
    }),
    (ol.prototype.fromJSON = function (e) {
      return (
        l.prototype.fromJSON.call(this, e),
        this.v0.fromArray(e.v0),
        this.v1.fromArray(e.v1),
        this.v2.fromArray(e.v2),
        this
      );
    }),
    (((sl.prototype = Object.create(l.prototype)).constructor =
      sl).prototype.isSplineCurve = !0),
    (sl.prototype.getPoint = function (e, t) {
      var t = t || new he(),
        A = this.points,
        e = (A.length - 1) * e,
        r = Math.floor(e),
        e = e - r,
        n = A[0 === r ? r : r - 1],
        i = A[r],
        a = A[r > A.length - 2 ? A.length - 1 : r + 1],
        A = A[r > A.length - 3 ? A.length - 1 : r + 2];
      return t.set($s(e, n.x, i.x, a.x, A.x), $s(e, n.y, i.y, a.y, A.y)), t;
    }),
    (sl.prototype.copy = function (e) {
      l.prototype.copy.call(this, e), (this.points = []);
      for (var t = 0, A = e.points.length; t < A; t++) {
        var r = e.points[t];
        this.points.push(r.clone());
      }
      return this;
    }),
    (sl.prototype.toJSON = function () {
      var e = l.prototype.toJSON.call(this);
      e.points = [];
      for (var t = 0, A = this.points.length; t < A; t++) {
        var r = this.points[t];
        e.points.push(r.toArray());
      }
      return e;
    }),
    (sl.prototype.fromJSON = function (e) {
      l.prototype.fromJSON.call(this, e), (this.points = []);
      for (var t = 0, A = e.points.length; t < A; t++) {
        var r = e.points[t];
        this.points.push(new he().fromArray(r));
      }
      return this;
    });
  var ll = Object.freeze({
    ArcCurve: Xs,
    CatmullRomCurve3: qs,
    CubicBezierCurve: Al,
    CubicBezierCurve3: rl,
    EllipseCurve: Ks,
    LineCurve: nl,
    LineCurve3: il,
    QuadraticBezierCurve: al,
    QuadraticBezierCurve3: ol,
    SplineCurve: sl,
  });
  function cl() {
    l.call(this),
      (this.type = 'CurvePath'),
      (this.curves = []),
      (this.autoClose = !1);
  }
  function ul(e) {
    cl.call(this),
      (this.type = 'Path'),
      (this.currentPoint = new he()),
      e && this.setFromPoints(e);
  }
  function hl(e) {
    ul.call(this, e),
      (this.uuid = xe.generateUUID()),
      (this.type = 'Shape'),
      (this.holes = []);
  }
  function a(e, t) {
    p.call(this),
      (this.type = 'Light'),
      (this.color = new de(e)),
      (this.intensity = void 0 !== t ? t : 1),
      (this.receiveShadow = void 0);
  }
  function dl(e, t, A) {
    a.call(this, e, A),
      (this.type = 'HemisphereLight'),
      (this.castShadow = void 0),
      this.position.copy(p.DefaultUp),
      this.updateMatrix(),
      (this.groundColor = new de(t));
  }
  function pl(e) {
    (this.camera = e),
      (this.bias = 0),
      (this.radius = 1),
      (this.mapSize = new he(512, 512)),
      (this.map = null),
      (this.matrix = new be());
  }
  function fl() {
    pl.call(this, new x(50, 1, 0.5, 500));
  }
  function gl(e, t, A, r, n, i) {
    a.call(this, e, t),
      (this.type = 'SpotLight'),
      this.position.copy(p.DefaultUp),
      this.updateMatrix(),
      (this.target = new p()),
      Object.defineProperty(this, 'power', {
        get: function () {
          return this.intensity * Math.PI;
        },
        set: function (e) {
          this.intensity = e / Math.PI;
        },
      }),
      (this.distance = void 0 !== A ? A : 0),
      (this.angle = void 0 !== r ? r : Math.PI / 3),
      (this.penumbra = void 0 !== n ? n : 0),
      (this.decay = void 0 !== i ? i : 1),
      (this.shadow = new fl());
  }
  function ml(e, t, A, r) {
    a.call(this, e, t),
      (this.type = 'PointLight'),
      Object.defineProperty(this, 'power', {
        get: function () {
          return 4 * this.intensity * Math.PI;
        },
        set: function (e) {
          this.intensity = e / (4 * Math.PI);
        },
      }),
      (this.distance = void 0 !== A ? A : 0),
      (this.decay = void 0 !== r ? r : 1),
      (this.shadow = new pl(new x(90, 1, 0.5, 500)));
  }
  function vl() {
    pl.call(this, new br(-5, 5, 5, -5, 0.5, 500));
  }
  function Bl(e, t) {
    a.call(this, e, t),
      (this.type = 'DirectionalLight'),
      this.position.copy(p.DefaultUp),
      this.updateMatrix(),
      (this.target = new p()),
      (this.shadow = new vl());
  }
  function wl(e, t) {
    a.call(this, e, t),
      (this.type = 'AmbientLight'),
      (this.castShadow = void 0);
  }
  function yl(e, t, A, r) {
    a.call(this, e, t),
      (this.type = 'RectAreaLight'),
      (this.width = void 0 !== A ? A : 10),
      (this.height = void 0 !== r ? r : 10);
  }
  (cl.prototype = Object.assign(Object.create(l.prototype), {
    constructor: cl,
    add: function (e) {
      this.curves.push(e);
    },
    closePath: function () {
      var e = this.curves[0].getPoint(0),
        t = this.curves[this.curves.length - 1].getPoint(1);
      e.equals(t) || this.curves.push(new nl(t, e));
    },
    getPoint: function (e) {
      for (
        var t,
          A,
          r,
          n = e * this.getLength(),
          i = this.getCurveLengths(),
          a = 0;
        a < i.length;

      ) {
        if (i[a] >= n)
          return (
            (t = i[a] - n),
            (r = (A = this.curves[a]).getLength()),
            A.getPointAt(0 === r ? 0 : 1 - t / r)
          );
        a++;
      }
      return null;
    },
    getLength: function () {
      var e = this.getCurveLengths();
      return e[e.length - 1];
    },
    updateArcLengths: function () {
      (this.needsUpdate = !0),
        (this.cacheLengths = null),
        this.getCurveLengths();
    },
    getCurveLengths: function () {
      if (this.cacheLengths && this.cacheLengths.length === this.curves.length)
        return this.cacheLengths;
      for (var e = [], t = 0, A = 0, r = this.curves.length; A < r; A++)
        (t += this.curves[A].getLength()), e.push(t);
      return (this.cacheLengths = e);
    },
    getSpacedPoints: function (e) {
      void 0 === e && (e = 40);
      for (var t = [], A = 0; A <= e; A++) t.push(this.getPoint(A / e));
      return this.autoClose && t.push(t[0]), t;
    },
    getPoints: function (e) {
      e = e || 12;
      for (var t, A = [], r = 0, n = this.curves; r < n.length; r++)
        for (
          var i = n[r],
            a =
              i && i.isEllipseCurve
                ? 2 * e
                : i && (i.isLineCurve || i.isLineCurve3)
                ? 1
                : i && i.isSplineCurve
                ? e * i.points.length
                : e,
            o = i.getPoints(a),
            s = 0;
          s < o.length;
          s++
        ) {
          var l = o[s];
          (t && t.equals(l)) || (A.push(l), (t = l));
        }
      return (
        this.autoClose &&
          1 < A.length &&
          !A[A.length - 1].equals(A[0]) &&
          A.push(A[0]),
        A
      );
    },
    copy: function (e) {
      l.prototype.copy.call(this, e), (this.curves = []);
      for (var t = 0, A = e.curves.length; t < A; t++) {
        var r = e.curves[t];
        this.curves.push(r.clone());
      }
      return (this.autoClose = e.autoClose), this;
    },
    toJSON: function () {
      var e = l.prototype.toJSON.call(this);
      (e.autoClose = this.autoClose), (e.curves = []);
      for (var t = 0, A = this.curves.length; t < A; t++) {
        var r = this.curves[t];
        e.curves.push(r.toJSON());
      }
      return e;
    },
    fromJSON: function (e) {
      l.prototype.fromJSON.call(this, e),
        (this.autoClose = e.autoClose),
        (this.curves = []);
      for (var t = 0, A = e.curves.length; t < A; t++) {
        var r = e.curves[t];
        this.curves.push(new ll[r.type]().fromJSON(r));
      }
      return this;
    },
  })),
    (ul.prototype = Object.assign(Object.create(cl.prototype), {
      constructor: ul,
      setFromPoints: function (e) {
        this.moveTo(e[0].x, e[0].y);
        for (var t = 1, A = e.length; t < A; t++) this.lineTo(e[t].x, e[t].y);
      },
      moveTo: function (e, t) {
        this.currentPoint.set(e, t);
      },
      lineTo: function (e, t) {
        var A = new nl(this.currentPoint.clone(), new he(e, t));
        this.curves.push(A), this.currentPoint.set(e, t);
      },
      quadraticCurveTo: function (e, t, A, r) {
        e = new al(this.currentPoint.clone(), new he(e, t), new he(A, r));
        this.curves.push(e), this.currentPoint.set(A, r);
      },
      bezierCurveTo: function (e, t, A, r, n, i) {
        e = new Al(
          this.currentPoint.clone(),
          new he(e, t),
          new he(A, r),
          new he(n, i),
        );
        this.curves.push(e), this.currentPoint.set(n, i);
      },
      splineThru: function (e) {
        var t = new sl([this.currentPoint.clone()].concat(e));
        this.curves.push(t), this.currentPoint.copy(e[e.length - 1]);
      },
      arc: function (e, t, A, r, n, i) {
        var a = this.currentPoint.x,
          o = this.currentPoint.y;
        this.absarc(e + a, t + o, A, r, n, i);
      },
      absarc: function (e, t, A, r, n, i) {
        this.absellipse(e, t, A, A, r, n, i);
      },
      ellipse: function (e, t, A, r, n, i, a, o) {
        var s = this.currentPoint.x,
          l = this.currentPoint.y;
        this.absellipse(e + s, t + l, A, r, n, i, a, o);
      },
      absellipse: function (e, t, A, r, n, i, a, o) {
        (e = new Ks(e, t, A, r, n, i, a, o)),
          0 < this.curves.length &&
            ((t = e.getPoint(0)).equals(this.currentPoint) ||
              this.lineTo(t.x, t.y)),
          this.curves.push(e),
          (A = e.getPoint(1));
        this.currentPoint.copy(A);
      },
      copy: function (e) {
        return (
          cl.prototype.copy.call(this, e),
          this.currentPoint.copy(e.currentPoint),
          this
        );
      },
      toJSON: function () {
        var e = cl.prototype.toJSON.call(this);
        return (e.currentPoint = this.currentPoint.toArray()), e;
      },
      fromJSON: function (e) {
        return (
          cl.prototype.fromJSON.call(this, e),
          this.currentPoint.fromArray(e.currentPoint),
          this
        );
      },
    })),
    (hl.prototype = Object.assign(Object.create(ul.prototype), {
      constructor: hl,
      getPointsHoles: function (e) {
        for (var t = [], A = 0, r = this.holes.length; A < r; A++)
          t[A] = this.holes[A].getPoints(e);
        return t;
      },
      extractPoints: function (e) {
        return { shape: this.getPoints(e), holes: this.getPointsHoles(e) };
      },
      copy: function (e) {
        ul.prototype.copy.call(this, e), (this.holes = []);
        for (var t = 0, A = e.holes.length; t < A; t++) {
          var r = e.holes[t];
          this.holes.push(r.clone());
        }
        return this;
      },
      toJSON: function () {
        var e = ul.prototype.toJSON.call(this);
        (e.uuid = this.uuid), (e.holes = []);
        for (var t = 0, A = this.holes.length; t < A; t++) {
          var r = this.holes[t];
          e.holes.push(r.toJSON());
        }
        return e;
      },
      fromJSON: function (e) {
        ul.prototype.fromJSON.call(this, e),
          (this.uuid = e.uuid),
          (this.holes = []);
        for (var t = 0, A = e.holes.length; t < A; t++) {
          var r = e.holes[t];
          this.holes.push(new ul().fromJSON(r));
        }
        return this;
      },
    })),
    (a.prototype = Object.assign(Object.create(p.prototype), {
      constructor: a,
      isLight: !0,
      copy: function (e) {
        return (
          p.prototype.copy.call(this, e),
          this.color.copy(e.color),
          (this.intensity = e.intensity),
          this
        );
      },
      toJSON: function (e) {
        e = p.prototype.toJSON.call(this, e);
        return (
          (e.object.color = this.color.getHex()),
          (e.object.intensity = this.intensity),
          void 0 !== this.groundColor &&
            (e.object.groundColor = this.groundColor.getHex()),
          void 0 !== this.distance && (e.object.distance = this.distance),
          void 0 !== this.angle && (e.object.angle = this.angle),
          void 0 !== this.decay && (e.object.decay = this.decay),
          void 0 !== this.penumbra && (e.object.penumbra = this.penumbra),
          void 0 !== this.shadow && (e.object.shadow = this.shadow.toJSON()),
          e
        );
      },
    })),
    (dl.prototype = Object.assign(Object.create(a.prototype), {
      constructor: dl,
      isHemisphereLight: !0,
      copy: function (e) {
        return (
          a.prototype.copy.call(this, e),
          this.groundColor.copy(e.groundColor),
          this
        );
      },
    })),
    Object.assign(pl.prototype, {
      copy: function (e) {
        return (
          (this.camera = e.camera.clone()),
          (this.bias = e.bias),
          (this.radius = e.radius),
          this.mapSize.copy(e.mapSize),
          this
        );
      },
      clone: function () {
        return new this.constructor().copy(this);
      },
      toJSON: function () {
        var e = {};
        return (
          0 !== this.bias && (e.bias = this.bias),
          1 !== this.radius && (e.radius = this.radius),
          (512 === this.mapSize.x && 512 === this.mapSize.y) ||
            (e.mapSize = this.mapSize.toArray()),
          (e.camera = this.camera.toJSON(!1).object),
          delete e.camera.matrix,
          e
        );
      },
    }),
    (fl.prototype = Object.assign(Object.create(pl.prototype), {
      constructor: fl,
      isSpotLightShadow: !0,
      update: function (e) {
        var t = this.camera,
          A = 2 * xe.RAD2DEG * e.angle,
          r = this.mapSize.width / this.mapSize.height,
          e = e.distance || t.far;
        (A === t.fov && r === t.aspect && e === t.far) ||
          ((t.fov = A),
          (t.aspect = r),
          (t.far = e),
          t.updateProjectionMatrix());
      },
    })),
    (gl.prototype = Object.assign(Object.create(a.prototype), {
      constructor: gl,
      isSpotLight: !0,
      copy: function (e) {
        return (
          a.prototype.copy.call(this, e),
          (this.distance = e.distance),
          (this.angle = e.angle),
          (this.penumbra = e.penumbra),
          (this.decay = e.decay),
          (this.target = e.target.clone()),
          (this.shadow = e.shadow.clone()),
          this
        );
      },
    })),
    (ml.prototype = Object.assign(Object.create(a.prototype), {
      constructor: ml,
      isPointLight: !0,
      copy: function (e) {
        return (
          a.prototype.copy.call(this, e),
          (this.distance = e.distance),
          (this.decay = e.decay),
          (this.shadow = e.shadow.clone()),
          this
        );
      },
    })),
    (vl.prototype = Object.assign(Object.create(pl.prototype), {
      constructor: vl,
    })),
    (Bl.prototype = Object.assign(Object.create(a.prototype), {
      constructor: Bl,
      isDirectionalLight: !0,
      copy: function (e) {
        return (
          a.prototype.copy.call(this, e),
          (this.target = e.target.clone()),
          (this.shadow = e.shadow.clone()),
          this
        );
      },
    })),
    (wl.prototype = Object.assign(Object.create(a.prototype), {
      constructor: wl,
      isAmbientLight: !0,
    })),
    (yl.prototype = Object.assign(Object.create(a.prototype), {
      constructor: yl,
      isRectAreaLight: !0,
      copy: function (e) {
        return (
          a.prototype.copy.call(this, e),
          (this.width = e.width),
          (this.height = e.height),
          this
        );
      },
      toJSON: function (e) {
        e = a.prototype.toJSON.call(this, e);
        return (
          (e.object.width = this.width), (e.object.height = this.height), e
        );
      },
    }));
  var B = {
    arraySlice: function (e, t, A) {
      return B.isTypedArray(e)
        ? new e.constructor(e.subarray(t, void 0 !== A ? A : e.length))
        : e.slice(t, A);
    },
    convertArray: function (e, t, A) {
      return !e || (!A && e.constructor === t)
        ? e
        : 'number' == typeof t.BYTES_PER_ELEMENT
        ? new t(e)
        : Array.prototype.slice.call(e);
    },
    isTypedArray: function (e) {
      return ArrayBuffer.isView(e) && !(e instanceof DataView);
    },
    getKeyframeOrder: function (A) {
      for (var e = A.length, t = new Array(e), r = 0; r !== e; ++r) t[r] = r;
      return (
        t.sort(function (e, t) {
          return A[e] - A[t];
        }),
        t
      );
    },
    sortedArray: function (e, t, A) {
      for (
        var r = e.length, n = new e.constructor(r), i = 0, a = 0;
        a !== r;
        ++i
      )
        for (var o = A[i] * t, s = 0; s !== t; ++s) n[a++] = e[o + s];
      return n;
    },
    flattenJSON: function (e, t, A, r) {
      for (var n = 1, i = e[0]; void 0 !== i && void 0 === i[r]; ) i = e[n++];
      if (void 0 !== i) {
        var a = i[r];
        if (void 0 !== a)
          if (Array.isArray(a))
            for (
              ;
              void 0 !== (a = i[r]) && (t.push(i.time), A.push.apply(A, a)),
                void 0 !== (i = e[n++]);

            );
          else if (void 0 !== a.toArray)
            for (
              ;
              void 0 !== (a = i[r]) && (t.push(i.time), a.toArray(A, A.length)),
                void 0 !== (i = e[n++]);

            );
          else
            for (
              ;
              void 0 !== (a = i[r]) && (t.push(i.time), A.push(a)),
                void 0 !== (i = e[n++]);

            );
      }
    },
  };
  function El(e, t, A, r) {
    (this.parameterPositions = e),
      (this._cachedIndex = 0),
      (this.resultBuffer = void 0 !== r ? r : new t.constructor(A)),
      (this.sampleValues = t),
      (this.valueSize = A);
  }
  function xl(e, t, A, r) {
    El.call(this, e, t, A, r),
      (this._weightPrev = -0),
      (this._offsetPrev = -0),
      (this._weightNext = -0),
      (this._offsetNext = -0);
  }
  function bl(e, t, A, r) {
    El.call(this, e, t, A, r);
  }
  function Cl(e, t, A, r) {
    El.call(this, e, t, A, r);
  }
  function i(e, t, A, r) {
    if (void 0 === e)
      throw new Error('THREE.KeyframeTrack: track name is undefined');
    if (void 0 === t || 0 === t.length)
      throw new Error('THREE.KeyframeTrack: no keyframes in track named ' + e);
    (this.name = e),
      (this.times = B.convertArray(t, this.TimeBufferType)),
      (this.values = B.convertArray(A, this.ValueBufferType)),
      this.setInterpolation(r || this.DefaultInterpolation);
  }
  function Fl(e, t, A) {
    i.call(this, e, t, A);
  }
  function Tl(e, t, A, r) {
    i.call(this, e, t, A, r);
  }
  function _l(e, t, A, r) {
    i.call(this, e, t, A, r);
  }
  function Ul(e, t, A, r) {
    El.call(this, e, t, A, r);
  }
  function Ml(e, t, A, r) {
    i.call(this, e, t, A, r);
  }
  function Sl(e, t, A, r) {
    i.call(this, e, t, A, r);
  }
  function Ql(e, t, A, r) {
    i.call(this, e, t, A, r);
  }
  function Ll(e, t, A) {
    (this.name = e),
      (this.tracks = A),
      (this.duration = void 0 !== t ? t : -1),
      (this.uuid = xe.generateUUID()),
      this.duration < 0 && this.resetDuration();
  }
  function Hl(e) {
    if (void 0 === e.type)
      throw new Error(
        'THREE.KeyframeTrack: track type undefined, can not parse',
      );
    var t,
      A,
      r = (function (e) {
        switch (e.toLowerCase()) {
          case 'scalar':
          case 'double':
          case 'float':
          case 'number':
          case 'integer':
            return _l;
          case 'vector':
          case 'vector2':
          case 'vector3':
          case 'vector4':
            return Ql;
          case 'color':
            return Tl;
          case 'quaternion':
            return Ml;
          case 'bool':
          case 'boolean':
            return Fl;
          case 'string':
            return Sl;
        }
        throw new Error('THREE.KeyframeTrack: Unsupported typeName: ' + e);
      })(e.type);
    return (
      void 0 === e.times &&
        (B.flattenJSON(e.keys, (t = []), (A = []), 'value'),
        (e.times = t),
        (e.values = A)),
      void 0 !== r.parse
        ? r.parse(e)
        : new r(e.name, e.times, e.values, e.interpolation)
    );
  }
  function Il(e) {
    (this.manager = void 0 !== e ? e : Ps), (this.textures = {});
  }
  function Rl(e) {
    this.manager = void 0 !== e ? e : Ps;
  }
  Object.assign(El.prototype, {
    evaluate: function (e) {
      var t,
        A = this.parameterPositions,
        r = this._cachedIndex,
        n = A[r],
        i = A[r - 1];
      e: {
        t: {
          A: {
            r: if (!(e < n)) {
              for (var a = r + 2; ; ) {
                if (void 0 === n) {
                  if (e < i) break r;
                  return (
                    (r = A.length),
                    (this._cachedIndex = r),
                    this.afterEnd_(r - 1, e, i)
                  );
                }
                if (r === a) break;
                if (((i = n), e < (n = A[++r]))) break t;
              }
              t = A.length;
              break A;
            }
            if (i <= e) break e;
            var o = A[1];
            e < o && ((r = 2), (i = o));
            for (a = r - 2; ; ) {
              if (void 0 === i)
                return (this._cachedIndex = 0), this.beforeStart_(0, e, n);
              if (r === a) break;
              if (((n = i), (i = A[--r - 1]) <= e)) break t;
            }
            (t = r), (r = 0);
          }
          for (; r < t; ) {
            var s = (r + t) >>> 1;
            e < A[s] ? (t = s) : (r = 1 + s);
          }
          if (((n = A[r]), void 0 === (i = A[r - 1])))
            return (this._cachedIndex = 0), this.beforeStart_(0, e, n);
          if (void 0 === n)
            return (
              (r = A.length),
              (this._cachedIndex = r),
              this.afterEnd_(r - 1, i, e)
            );
        }
        (this._cachedIndex = r), this.intervalChanged_(r, i, n);
      }
      return this.interpolate_(r, i, e, n);
    },
    settings: null,
    DefaultSettings_: {},
    getSettings_: function () {
      return this.settings || this.DefaultSettings_;
    },
    copySampleValue_: function (e) {
      for (
        var t = this.resultBuffer,
          A = this.sampleValues,
          r = this.valueSize,
          n = e * r,
          i = 0;
        i !== r;
        ++i
      )
        t[i] = A[n + i];
      return t;
    },
    interpolate_: function () {
      throw new Error('call to abstract method');
    },
    intervalChanged_: function () {},
  }),
    Object.assign(El.prototype, {
      beforeStart_: El.prototype.copySampleValue_,
      afterEnd_: El.prototype.copySampleValue_,
    }),
    (xl.prototype = Object.assign(Object.create(El.prototype), {
      constructor: xl,
      DefaultSettings_: { endingStart: Zt, endingEnd: Zt },
      intervalChanged_: function (e, t, A) {
        var r = this.parameterPositions,
          n = e - 2,
          i = e + 1,
          a = r[n],
          o = r[i];
        if (void 0 === a)
          switch (this.getSettings_().endingStart) {
            case qt:
              (n = e), (a = 2 * t - A);
              break;
            case $t:
              a = t + r[(n = r.length - 2)] - r[n + 1];
              break;
            default:
              (n = e), (a = A);
          }
        if (void 0 === o)
          switch (this.getSettings_().endingEnd) {
            case qt:
              (i = e), (o = 2 * A - t);
              break;
            case $t:
              o = A + r[(i = 1)] - r[0];
              break;
            default:
              (i = e - 1), (o = t);
          }
        var s = 0.5 * (A - t),
          l = this.valueSize;
        (this._weightPrev = s / (t - a)),
          (this._weightNext = s / (o - A)),
          (this._offsetPrev = n * l),
          (this._offsetNext = i * l);
      },
      interpolate_: function (e, t, A, r) {
        for (
          var n = this.resultBuffer,
            i = this.sampleValues,
            a = this.valueSize,
            o = e * a,
            s = o - a,
            l = this._offsetPrev,
            c = this._offsetNext,
            e = this._weightPrev,
            u = this._weightNext,
            A = (A - t) / (r - t),
            r = A * A,
            t = r * A,
            h = -e * t + 2 * e * r - e * A,
            d = (1 + e) * t + (-1.5 - 2 * e) * r + (-0.5 + e) * A + 1,
            p = (-1 - u) * t + (1.5 + u) * r + 0.5 * A,
            f = u * t - u * r,
            g = 0;
          g !== a;
          ++g
        )
          n[g] = h * i[l + g] + d * i[s + g] + p * i[o + g] + f * i[c + g];
        return n;
      },
    })),
    (bl.prototype = Object.assign(Object.create(El.prototype), {
      constructor: bl,
      interpolate_: function (e, t, A, r) {
        for (
          var n = this.resultBuffer,
            i = this.sampleValues,
            a = this.valueSize,
            o = e * a,
            s = o - a,
            l = (A - t) / (r - t),
            c = 1 - l,
            u = 0;
          u !== a;
          ++u
        )
          n[u] = i[s + u] * c + i[o + u] * l;
        return n;
      },
    })),
    (Cl.prototype = Object.assign(Object.create(El.prototype), {
      constructor: Cl,
      interpolate_: function (e) {
        return this.copySampleValue_(e - 1);
      },
    })),
    Object.assign(i, {
      toJSON: function (e) {
        var t,
          A = e.constructor;
        return (
          void 0 !== A.toJSON
            ? (t = A.toJSON(e))
            : ((t = {
                name: e.name,
                times: B.convertArray(e.times, Array),
                values: B.convertArray(e.values, Array),
              }),
              (A = e.getInterpolation()) !== e.DefaultInterpolation &&
                (t.interpolation = A)),
          (t.type = e.ValueTypeName),
          t
        );
      },
    }),
    Object.assign(i.prototype, {
      constructor: i,
      TimeBufferType: Float32Array,
      ValueBufferType: Float32Array,
      DefaultInterpolation: Jt,
      InterpolantFactoryMethodDiscrete: function (e) {
        return new Cl(this.times, this.values, this.getValueSize(), e);
      },
      InterpolantFactoryMethodLinear: function (e) {
        return new bl(this.times, this.values, this.getValueSize(), e);
      },
      InterpolantFactoryMethodSmooth: function (e) {
        return new xl(this.times, this.values, this.getValueSize(), e);
      },
      setInterpolation: function (e) {
        var t;
        switch (e) {
          case Yt:
            t = this.InterpolantFactoryMethodDiscrete;
            break;
          case Jt:
            t = this.InterpolantFactoryMethodLinear;
            break;
          case 2302:
            t = this.InterpolantFactoryMethodSmooth;
        }
        if (void 0 === t) {
          var A =
            'unsupported interpolation for ' +
            this.ValueTypeName +
            ' keyframe track named ' +
            this.name;
          if (void 0 === this.createInterpolant) {
            if (e === this.DefaultInterpolation) throw new Error(A);
            this.setInterpolation(this.DefaultInterpolation);
          }
          console.warn('THREE.KeyframeTrack:', A);
        } else this.createInterpolant = t;
        return this;
      },
      getInterpolation: function () {
        switch (this.createInterpolant) {
          case this.InterpolantFactoryMethodDiscrete:
            return Yt;
          case this.InterpolantFactoryMethodLinear:
            return Jt;
          case this.InterpolantFactoryMethodSmooth:
            return 2302;
        }
      },
      getValueSize: function () {
        return this.values.length / this.times.length;
      },
      shift: function (e) {
        if (0 !== e)
          for (var t = this.times, A = 0, r = t.length; A !== r; ++A) t[A] += e;
        return this;
      },
      scale: function (e) {
        if (1 !== e)
          for (var t = this.times, A = 0, r = t.length; A !== r; ++A) t[A] *= e;
        return this;
      },
      trim: function (e, t) {
        for (
          var A, r = this.times, n = r.length, i = 0, a = n - 1;
          i !== n && r[i] < e;

        )
          ++i;
        for (; -1 !== a && r[a] > t; ) --a;
        return (
          ++a,
          (0 === i && a === n) ||
            (a <= i && (i = (a = Math.max(a, 1)) - 1),
            (A = this.getValueSize()),
            (this.times = B.arraySlice(r, i, a)),
            (this.values = B.arraySlice(this.values, i * A, a * A))),
          this
        );
      },
      validate: function () {
        for (
          var e = !0,
            t = this.getValueSize(),
            A =
              (t - Math.floor(t) != 0 &&
                (console.error(
                  'THREE.KeyframeTrack: Invalid value size in track.',
                  this,
                ),
                (e = !1)),
              this.times),
            r = this.values,
            n = A.length,
            i =
              (0 === n &&
                (console.error('THREE.KeyframeTrack: Track is empty.', this),
                (e = !1)),
              null),
            a = 0;
          a !== n;
          a++
        ) {
          var o = A[a];
          if ('number' == typeof o && isNaN(o)) {
            console.error(
              'THREE.KeyframeTrack: Time is not a valid number.',
              this,
              a,
              o,
            ),
              (e = !1);
            break;
          }
          if (null !== i && o < i) {
            console.error(
              'THREE.KeyframeTrack: Out of order keys.',
              this,
              a,
              o,
              i,
            ),
              (e = !1);
            break;
          }
          i = o;
        }
        if (void 0 !== r && B.isTypedArray(r))
          for (var a = 0, s = r.length; a !== s; ++a) {
            var l = r[a];
            if (isNaN(l)) {
              console.error(
                'THREE.KeyframeTrack: Value is not a valid number.',
                this,
                a,
                l,
              ),
                (e = !1);
              break;
            }
          }
        return e;
      },
      optimize: function () {
        for (
          var e = this.times,
            t = this.values,
            A = this.getValueSize(),
            r = 2302 === this.getInterpolation(),
            n = 1,
            i = e.length - 1,
            a = 1;
          a < i;
          ++a
        ) {
          var o = !1,
            s = e[a];
          if (s !== e[a + 1] && (1 !== a || s !== s[0]))
            if (r) o = !0;
            else
              for (var l = a * A, c = l - A, u = l + A, h = 0; h !== A; ++h) {
                var d = t[l + h];
                if (d !== t[c + h] || d !== t[u + h]) {
                  o = !0;
                  break;
                }
              }
          if (o) {
            if (a !== n) {
              e[n] = e[a];
              for (var p = a * A, f = n * A, h = 0; h !== A; ++h)
                t[f + h] = t[p + h];
            }
            ++n;
          }
        }
        if (0 < i) {
          e[n] = e[i];
          for (p = i * A, f = n * A, h = 0; h !== A; ++h) t[f + h] = t[p + h];
          ++n;
        }
        return (
          n !== e.length &&
            ((this.times = B.arraySlice(e, 0, n)),
            (this.values = B.arraySlice(t, 0, n * A))),
          this
        );
      },
    }),
    (Fl.prototype = Object.assign(Object.create(i.prototype), {
      constructor: Fl,
      ValueTypeName: 'bool',
      ValueBufferType: Array,
      DefaultInterpolation: Yt,
      InterpolantFactoryMethodLinear: void 0,
      InterpolantFactoryMethodSmooth: void 0,
    })),
    (Tl.prototype = Object.assign(Object.create(i.prototype), {
      constructor: Tl,
      ValueTypeName: 'color',
    })),
    (_l.prototype = Object.assign(Object.create(i.prototype), {
      constructor: _l,
      ValueTypeName: 'number',
    })),
    (Ul.prototype = Object.assign(Object.create(El.prototype), {
      constructor: Ul,
      interpolate_: function (e, t, A, r) {
        for (
          var n = this.resultBuffer,
            i = this.sampleValues,
            a = this.valueSize,
            o = e * a,
            s = (A - t) / (r - t),
            l = o + a;
          o !== l;
          o += 4
        )
          E.slerpFlat(n, 0, i, o - a, i, o, s);
        return n;
      },
    })),
    (Ml.prototype = Object.assign(Object.create(i.prototype), {
      constructor: Ml,
      ValueTypeName: 'quaternion',
      DefaultInterpolation: Jt,
      InterpolantFactoryMethodLinear: function (e) {
        return new Ul(this.times, this.values, this.getValueSize(), e);
      },
      InterpolantFactoryMethodSmooth: void 0,
    })),
    (Sl.prototype = Object.assign(Object.create(i.prototype), {
      constructor: Sl,
      ValueTypeName: 'string',
      ValueBufferType: Array,
      DefaultInterpolation: Yt,
      InterpolantFactoryMethodLinear: void 0,
      InterpolantFactoryMethodSmooth: void 0,
    })),
    (Ql.prototype = Object.assign(Object.create(i.prototype), {
      constructor: Ql,
      ValueTypeName: 'vector',
    })),
    Object.assign(Ll, {
      parse: function (e) {
        for (
          var t = [], A = e.tracks, r = 1 / (e.fps || 1), n = 0, i = A.length;
          n !== i;
          ++n
        )
          t.push(Hl(A[n]).scale(r));
        return new Ll(e.name, e.duration, t);
      },
      toJSON: function (e) {
        for (
          var t = [],
            A = e.tracks,
            e = { name: e.name, duration: e.duration, tracks: t, uuid: e.uuid },
            r = 0,
            n = A.length;
          r !== n;
          ++r
        )
          t.push(i.toJSON(A[r]));
        return e;
      },
      CreateFromMorphTargetSequence: function (e, t, A, r) {
        for (var n = t.length, i = [], a = 0; a < n; a++) {
          var o = [],
            s =
              ((l = []).push((a + n - 1) % n, a, (a + 1) % n),
              o.push(0, 1, 0),
              B.getKeyframeOrder(l)),
            l = B.sortedArray(l, 1, s),
            o = B.sortedArray(o, 1, s);
          r || 0 !== l[0] || (l.push(n), o.push(o[0])),
            i.push(
              new _l('.morphTargetInfluences[' + t[a].name + ']', l, o).scale(
                1 / A,
              ),
            );
        }
        return new Ll(e, -1, i);
      },
      findByName: function (e, t) {
        var A = e;
        Array.isArray(e) ||
          (A = (e.geometry && e.geometry.animations) || e.animations);
        for (var r = 0; r < A.length; r++) if (A[r].name === t) return A[r];
        return null;
      },
      CreateClipsFromMorphTargetSequences: function (e, t, A) {
        for (
          var r = {}, n = /^([\w-]*?)([\d]+)$/, i = 0, a = e.length;
          i < a;
          i++
        ) {
          var o = e[i],
            s = o.name.match(n);
          s &&
            1 < s.length &&
            ((s = r[(l = s[1])]) || (r[l] = s = []), s.push(o));
        }
        var l,
          c = [];
        for (l in r) c.push(Ll.CreateFromMorphTargetSequence(l, r[l], t, A));
        return c;
      },
      parseAnimation: function (e, t) {
        if (!e)
          return (
            console.error(
              'THREE.AnimationClip: No animation in JSONLoader data.',
            ),
            null
          );
        for (
          var A = function (e, t, A, r, n) {
              var i;
              0 !== A.length &&
                (B.flattenJSON(A, (A = []), (i = []), r), 0 !== A.length) &&
                n.push(new e(t, A, i));
            },
            r = [],
            n = e.name || 'default',
            i = e.length || -1,
            a = e.fps || 30,
            o = e.hierarchy || [],
            s = 0;
          s < o.length;
          s++
        ) {
          var l = o[s].keys;
          if (l && 0 !== l.length)
            if (l[0].morphTargets) {
              for (var c, u = {}, h = 0; h < l.length; h++)
                if (l[h].morphTargets)
                  for (var d = 0; d < l[h].morphTargets.length; d++)
                    u[l[h].morphTargets[d]] = -1;
              for (c in u) {
                for (
                  var p = [], f = [], d = 0;
                  d !== l[h].morphTargets.length;
                  ++d
                ) {
                  var g = l[h];
                  p.push(g.time), f.push(g.morphTarget === c ? 1 : 0);
                }
                r.push(new _l('.morphTargetInfluence[' + c + ']', p, f));
              }
              i = u.length * (a || 1);
            } else {
              var m = '.bones[' + t[s].name + ']';
              A(Ql, m + '.position', l, 'pos', r),
                A(Ml, m + '.quaternion', l, 'rot', r),
                A(Ql, m + '.scale', l, 'scl', r);
            }
        }
        return 0 === r.length ? null : new Ll(n, i, r);
      },
    }),
    Object.assign(Ll.prototype, {
      resetDuration: function () {
        for (var e = 0, t = 0, A = this.tracks.length; t !== A; ++t)
          var r = this.tracks[t], e = Math.max(e, r.times[r.times.length - 1]);
        return (this.duration = e), this;
      },
      trim: function () {
        for (var e = 0; e < this.tracks.length; e++)
          this.tracks[e].trim(0, this.duration);
        return this;
      },
      validate: function () {
        for (var e = !0, t = 0; t < this.tracks.length; t++)
          e = e && this.tracks[t].validate();
        return e;
      },
      optimize: function () {
        for (var e = 0; e < this.tracks.length; e++) this.tracks[e].optimize();
        return this;
      },
    }),
    Object.assign(Il.prototype, {
      load: function (e, t, A, r) {
        var n = this;
        new Os(n.manager).load(
          e,
          function (e) {
            t(n.parse(JSON.parse(e)));
          },
          A,
          r,
        );
      },
      setTextures: function (e) {
        this.textures = e;
      },
      parse: function (e) {
        var t = this.textures;
        function A(e) {
          return (
            void 0 === t[e] &&
              console.warn('THREE.MaterialLoader: Undefined texture', e),
            t[e]
          );
        }
        var r,
          n = new Hs[e.type]();
        return (
          void 0 !== e.uuid && (n.uuid = e.uuid),
          void 0 !== e.name && (n.name = e.name),
          void 0 !== e.color && n.color.setHex(e.color),
          void 0 !== e.roughness && (n.roughness = e.roughness),
          void 0 !== e.metalness && (n.metalness = e.metalness),
          void 0 !== e.emissive && n.emissive.setHex(e.emissive),
          void 0 !== e.specular && n.specular.setHex(e.specular),
          void 0 !== e.shininess && (n.shininess = e.shininess),
          void 0 !== e.clearCoat && (n.clearCoat = e.clearCoat),
          void 0 !== e.clearCoatRoughness &&
            (n.clearCoatRoughness = e.clearCoatRoughness),
          void 0 !== e.uniforms && (n.uniforms = e.uniforms),
          void 0 !== e.vertexShader && (n.vertexShader = e.vertexShader),
          void 0 !== e.fragmentShader && (n.fragmentShader = e.fragmentShader),
          void 0 !== e.vertexColors && (n.vertexColors = e.vertexColors),
          void 0 !== e.fog && (n.fog = e.fog),
          void 0 !== e.flatShading && (n.flatShading = e.flatShading),
          void 0 !== e.blending && (n.blending = e.blending),
          void 0 !== e.side && (n.side = e.side),
          void 0 !== e.opacity && (n.opacity = e.opacity),
          void 0 !== e.transparent && (n.transparent = e.transparent),
          void 0 !== e.alphaTest && (n.alphaTest = e.alphaTest),
          void 0 !== e.depthTest && (n.depthTest = e.depthTest),
          void 0 !== e.depthWrite && (n.depthWrite = e.depthWrite),
          void 0 !== e.colorWrite && (n.colorWrite = e.colorWrite),
          void 0 !== e.wireframe && (n.wireframe = e.wireframe),
          void 0 !== e.wireframeLinewidth &&
            (n.wireframeLinewidth = e.wireframeLinewidth),
          void 0 !== e.wireframeLinecap &&
            (n.wireframeLinecap = e.wireframeLinecap),
          void 0 !== e.wireframeLinejoin &&
            (n.wireframeLinejoin = e.wireframeLinejoin),
          void 0 !== e.rotation && (n.rotation = e.rotation),
          1 !== e.linewidth && (n.linewidth = e.linewidth),
          void 0 !== e.dashSize && (n.dashSize = e.dashSize),
          void 0 !== e.gapSize && (n.gapSize = e.gapSize),
          void 0 !== e.scale && (n.scale = e.scale),
          void 0 !== e.polygonOffset && (n.polygonOffset = e.polygonOffset),
          void 0 !== e.polygonOffsetFactor &&
            (n.polygonOffsetFactor = e.polygonOffsetFactor),
          void 0 !== e.polygonOffsetUnits &&
            (n.polygonOffsetUnits = e.polygonOffsetUnits),
          void 0 !== e.skinning && (n.skinning = e.skinning),
          void 0 !== e.morphTargets && (n.morphTargets = e.morphTargets),
          void 0 !== e.dithering && (n.dithering = e.dithering),
          void 0 !== e.visible && (n.visible = e.visible),
          void 0 !== e.userData && (n.userData = e.userData),
          void 0 !== e.shading && (n.flatShading = 1 === e.shading),
          void 0 !== e.size && (n.size = e.size),
          void 0 !== e.sizeAttenuation &&
            (n.sizeAttenuation = e.sizeAttenuation),
          void 0 !== e.map && (n.map = A(e.map)),
          void 0 !== e.alphaMap &&
            ((n.alphaMap = A(e.alphaMap)), (n.transparent = !0)),
          void 0 !== e.bumpMap && (n.bumpMap = A(e.bumpMap)),
          void 0 !== e.bumpScale && (n.bumpScale = e.bumpScale),
          void 0 !== e.normalMap && (n.normalMap = A(e.normalMap)),
          void 0 !== e.normalMapType && (n.normalMapType = e.normalMapType),
          void 0 !== e.normalScale &&
            ((r = e.normalScale),
            !1 === Array.isArray(r) && (r = [r, r]),
            (n.normalScale = new he().fromArray(r))),
          void 0 !== e.displacementMap &&
            (n.displacementMap = A(e.displacementMap)),
          void 0 !== e.displacementScale &&
            (n.displacementScale = e.displacementScale),
          void 0 !== e.displacementBias &&
            (n.displacementBias = e.displacementBias),
          void 0 !== e.roughnessMap && (n.roughnessMap = A(e.roughnessMap)),
          void 0 !== e.metalnessMap && (n.metalnessMap = A(e.metalnessMap)),
          void 0 !== e.emissiveMap && (n.emissiveMap = A(e.emissiveMap)),
          void 0 !== e.emissiveIntensity &&
            (n.emissiveIntensity = e.emissiveIntensity),
          void 0 !== e.specularMap && (n.specularMap = A(e.specularMap)),
          void 0 !== e.envMap && (n.envMap = A(e.envMap)),
          void 0 !== e.reflectivity && (n.reflectivity = e.reflectivity),
          void 0 !== e.lightMap && (n.lightMap = A(e.lightMap)),
          void 0 !== e.lightMapIntensity &&
            (n.lightMapIntensity = e.lightMapIntensity),
          void 0 !== e.aoMap && (n.aoMap = A(e.aoMap)),
          void 0 !== e.aoMapIntensity && (n.aoMapIntensity = e.aoMapIntensity),
          void 0 !== e.gradientMap && (n.gradientMap = A(e.gradientMap)),
          n
        );
      },
    }),
    Object.assign(Rl.prototype, {
      load: function (e, t, A, r) {
        var n = this;
        new Os(n.manager).load(
          e,
          function (e) {
            t(n.parse(JSON.parse(e)));
          },
          A,
          r,
        );
      },
      parse: function (e) {
        var t,
          A = new $(),
          r = e.data.index,
          n =
            (void 0 !== r &&
              ((a = new Gl[r.type](r.array)), A.setIndex(new y(a, 1))),
            e.data.attributes);
        for (t in n) {
          var i = n[t],
            a = new Gl[i.type](i.array);
          A.addAttribute(t, new y(a, i.itemSize, i.normalized));
        }
        var o = e.data.groups || e.data.drawcalls || e.data.offsets;
        if (void 0 !== o)
          for (var s = 0, l = o.length; s !== l; ++s) {
            var c = o[s];
            A.addGroup(c.start, c.count, c.materialIndex);
          }
        r = e.data.boundingSphere;
        return (
          void 0 !== r &&
            ((e = new Ce()),
            void 0 !== r.center && e.fromArray(r.center),
            (A.boundingSphere = new kA(e, r.radius))),
          A
        );
      },
    });
  var Pl,
    Dl,
    Ol,
    Nl,
    Gl = {
      Int8Array: Int8Array,
      Uint8Array: Uint8Array,
      Uint8ClampedArray:
        'undefined' != typeof Uint8ClampedArray
          ? Uint8ClampedArray
          : Uint8Array,
      Int16Array: Int16Array,
      Uint16Array: Uint16Array,
      Int32Array: Int32Array,
      Uint32Array: Uint32Array,
      Float32Array: Float32Array,
      Float64Array: Float64Array,
    };
  function Vl() {}
  (Vl.Handlers = {
    handlers: [],
    add: function (e, t) {
      this.handlers.push(e, t);
    },
    get: function (e) {
      for (var t = this.handlers, A = 0, r = t.length; A < r; A += 2) {
        var n = t[A],
          i = t[A + 1];
        if (n.test(e)) return i;
      }
      return null;
    },
  }),
    Object.assign(Vl.prototype, {
      crossOrigin: 'anonymous',
      onLoadStart: function () {},
      onLoadProgress: function () {},
      onLoadComplete: function () {},
      initMaterials: function (e, t, A) {
        for (var r = [], n = 0; n < e.length; ++n)
          r[n] = this.createMaterial(e[n], t, A);
        return r;
      },
      createMaterial:
        ((Pl = {
          NoBlending: te,
          NormalBlending: Ae,
          AdditiveBlending: re,
          SubtractiveBlending: ne,
          MultiplyBlending: ie,
          CustomBlending: ae,
        }),
        (Dl = new de()),
        (Ol = new zs()),
        (Nl = new Il()),
        function (e, a, o) {
          var s = {};
          function t(e, t, A, r, n) {
            var e = a + e,
              i = Vl.Handlers.get(e),
              i = (null !== i ? i : (Ol.setCrossOrigin(o), Ol)).load(e),
              e =
                (void 0 !== t &&
                  (i.repeat.fromArray(t),
                  1 !== t[0] && (i.wrapS = qe),
                  1 !== t[1]) &&
                  (i.wrapT = qe),
                void 0 !== A && i.offset.fromArray(A),
                void 0 !== r &&
                  ('repeat' === r[0] && (i.wrapS = qe),
                  'mirror' === r[0] && (i.wrapS = et),
                  'repeat' === r[1] && (i.wrapT = qe),
                  'mirror' === r[1]) &&
                  (i.wrapT = et),
                void 0 !== n && (i.anisotropy = n),
                xe.generateUUID());
            return (s[e] = i), e;
          }
          var A,
            r = { uuid: xe.generateUUID(), type: 'MeshLambertMaterial' };
          for (A in e) {
            var n = e[A];
            switch (A) {
              case 'DbgColor':
              case 'DbgIndex':
              case 'opticalDensity':
              case 'illumination':
                break;
              case 'DbgName':
                r.name = n;
                break;
              case 'blending':
                r.blending = Pl[n];
                break;
              case 'colorAmbient':
              case 'mapAmbient':
                console.warn(
                  'THREE.Loader.createMaterial:',
                  A,
                  'is no longer supported.',
                );
                break;
              case 'colorDiffuse':
                r.color = Dl.fromArray(n).getHex();
                break;
              case 'colorSpecular':
                r.specular = Dl.fromArray(n).getHex();
                break;
              case 'colorEmissive':
                r.emissive = Dl.fromArray(n).getHex();
                break;
              case 'specularCoef':
                r.shininess = n;
                break;
              case 'shading':
                'basic' === n.toLowerCase() && (r.type = 'MeshBasicMaterial'),
                  'phong' === n.toLowerCase() && (r.type = 'MeshPhongMaterial'),
                  'standard' === n.toLowerCase() &&
                    (r.type = 'MeshStandardMaterial');
                break;
              case 'mapDiffuse':
                r.map = t(
                  n,
                  e.mapDiffuseRepeat,
                  e.mapDiffuseOffset,
                  e.mapDiffuseWrap,
                  e.mapDiffuseAnisotropy,
                );
                break;
              case 'mapDiffuseRepeat':
              case 'mapDiffuseOffset':
              case 'mapDiffuseWrap':
              case 'mapDiffuseAnisotropy':
                break;
              case 'mapEmissive':
                r.emissiveMap = t(
                  n,
                  e.mapEmissiveRepeat,
                  e.mapEmissiveOffset,
                  e.mapEmissiveWrap,
                  e.mapEmissiveAnisotropy,
                );
                break;
              case 'mapEmissiveRepeat':
              case 'mapEmissiveOffset':
              case 'mapEmissiveWrap':
              case 'mapEmissiveAnisotropy':
                break;
              case 'mapLight':
                r.lightMap = t(
                  n,
                  e.mapLightRepeat,
                  e.mapLightOffset,
                  e.mapLightWrap,
                  e.mapLightAnisotropy,
                );
                break;
              case 'mapLightRepeat':
              case 'mapLightOffset':
              case 'mapLightWrap':
              case 'mapLightAnisotropy':
                break;
              case 'mapAO':
                r.aoMap = t(
                  n,
                  e.mapAORepeat,
                  e.mapAOOffset,
                  e.mapAOWrap,
                  e.mapAOAnisotropy,
                );
                break;
              case 'mapAORepeat':
              case 'mapAOOffset':
              case 'mapAOWrap':
              case 'mapAOAnisotropy':
                break;
              case 'mapBump':
                r.bumpMap = t(
                  n,
                  e.mapBumpRepeat,
                  e.mapBumpOffset,
                  e.mapBumpWrap,
                  e.mapBumpAnisotropy,
                );
                break;
              case 'mapBumpScale':
                r.bumpScale = n;
                break;
              case 'mapBumpRepeat':
              case 'mapBumpOffset':
              case 'mapBumpWrap':
              case 'mapBumpAnisotropy':
                break;
              case 'mapNormal':
                r.normalMap = t(
                  n,
                  e.mapNormalRepeat,
                  e.mapNormalOffset,
                  e.mapNormalWrap,
                  e.mapNormalAnisotropy,
                );
                break;
              case 'mapNormalFactor':
                r.normalScale = n;
                break;
              case 'mapNormalRepeat':
              case 'mapNormalOffset':
              case 'mapNormalWrap':
              case 'mapNormalAnisotropy':
                break;
              case 'mapSpecular':
                r.specularMap = t(
                  n,
                  e.mapSpecularRepeat,
                  e.mapSpecularOffset,
                  e.mapSpecularWrap,
                  e.mapSpecularAnisotropy,
                );
                break;
              case 'mapSpecularRepeat':
              case 'mapSpecularOffset':
              case 'mapSpecularWrap':
              case 'mapSpecularAnisotropy':
                break;
              case 'mapMetalness':
                r.metalnessMap = t(
                  n,
                  e.mapMetalnessRepeat,
                  e.mapMetalnessOffset,
                  e.mapMetalnessWrap,
                  e.mapMetalnessAnisotropy,
                );
                break;
              case 'mapMetalnessRepeat':
              case 'mapMetalnessOffset':
              case 'mapMetalnessWrap':
              case 'mapMetalnessAnisotropy':
                break;
              case 'mapRoughness':
                r.roughnessMap = t(
                  n,
                  e.mapRoughnessRepeat,
                  e.mapRoughnessOffset,
                  e.mapRoughnessWrap,
                  e.mapRoughnessAnisotropy,
                );
                break;
              case 'mapRoughnessRepeat':
              case 'mapRoughnessOffset':
              case 'mapRoughnessWrap':
              case 'mapRoughnessAnisotropy':
                break;
              case 'mapAlpha':
                r.alphaMap = t(
                  n,
                  e.mapAlphaRepeat,
                  e.mapAlphaOffset,
                  e.mapAlphaWrap,
                  e.mapAlphaAnisotropy,
                );
                break;
              case 'mapAlphaRepeat':
              case 'mapAlphaOffset':
              case 'mapAlphaWrap':
              case 'mapAlphaAnisotropy':
                break;
              case 'flipSided':
                r.side = Ee;
                break;
              case 'doubleSided':
                r.side = ee;
                break;
              case 'transparency':
                console.warn(
                  'THREE.Loader.createMaterial: transparency has been renamed to opacity',
                ),
                  (r.opacity = n);
                break;
              case 'depthTest':
              case 'depthWrite':
              case 'colorWrite':
              case 'opacity':
              case 'reflectivity':
              case 'transparent':
              case 'visible':
              case 'wireframe':
                r[A] = n;
                break;
              case 'vertexColors':
                !0 === n && (r.vertexColors = 2),
                  'face' === n && (r.vertexColors = 1);
                break;
              default:
                console.error('THREE.Loader.createMaterial: Unsupported', A, n);
            }
          }
          return (
            'MeshBasicMaterial' === r.type && delete r.emissive,
            'MeshPhongMaterial' !== r.type && delete r.specular,
            r.opacity < 1 && (r.transparent = !0),
            Nl.setTextures(s),
            Nl.parse(r)
          );
        }),
    });
  var kl = {
    decodeText: function (e) {
      if ('undefined' != typeof TextDecoder) return new TextDecoder().decode(e);
      for (var t = '', A = 0, r = e.length; A < r; A++)
        t += String.fromCharCode(e[A]);
      return decodeURIComponent(escape(t));
    },
    extractUrlBase: function (e) {
      var t = e.lastIndexOf('/');
      return -1 === t ? './' : e.substr(0, t + 1);
    },
  };
  function zl(e) {
    'boolean' == typeof e &&
      (console.warn(
        'THREE.JSONLoader: showStatus parameter has been removed from constructor.',
      ),
      (e = void 0)),
      (this.manager = void 0 !== e ? e : Ps),
      (this.withCredentials = !1);
  }
  function Kl(e) {
    (this.manager = void 0 !== e ? e : Ps), (this.texturePath = '');
  }
  Object.assign(zl.prototype, {
    crossOrigin: 'anonymous',
    load: function (A, r, e, t) {
      var n = this,
        i =
          this.texturePath && 'string' == typeof this.texturePath
            ? this.texturePath
            : kl.extractUrlBase(A),
        a = new Os(this.manager);
      a.setWithCredentials(this.withCredentials),
        a.load(
          A,
          function (e) {
            var e = JSON.parse(e),
              t = e.metadata;
            if (void 0 !== t) {
              t = t.type;
              if (void 0 !== t && 'object' === t.toLowerCase())
                return void console.error(
                  'THREE.JSONLoader: ' +
                    A +
                    ' should be loaded with THREE.ObjectLoader instead.',
                );
            }
            t = n.parse(e, i);
            r(t.geometry, t.materials);
          },
          e,
          t,
        );
    },
    setCrossOrigin: function (e) {
      return (this.crossOrigin = e), this;
    },
    setTexturePath: function (e) {
      return (this.texturePath = e), this;
    },
    parse: function (e, R) {
      void 0 !== (e = void 0 !== e.data ? e.data : e).scale
        ? (e.scale = 1 / e.scale)
        : (e.scale = 1);
      var t,
        A,
        r,
        n,
        i,
        a,
        o,
        s,
        l,
        c,
        P,
        D,
        O,
        N,
        G,
        V,
        u,
        h,
        d,
        p,
        f,
        g,
        m,
        v,
        B = new pe(),
        w = e,
        y = B,
        E = w.faces,
        x = w.vertices,
        b = w.normals,
        k = w.colors,
        z = w.scale,
        K = 0;
      if (void 0 !== w.uvs) {
        for (t = 0; t < w.uvs.length; t++) w.uvs[t].length && K++;
        for (t = 0; t < K; t++) y.faceVertexUvs[t] = [];
      }
      for (n = 0, i = x.length; n < i; )
        ((u = new Ce()).x = x[n++] * z),
          (u.y = x[n++] * z),
          (u.z = x[n++] * z),
          y.vertices.push(u);
      for (n = 0, i = E.length; n < i; )
        if (
          ((P = (c = E[n++]) & 2),
          (D = c & 8),
          (O = c & 16),
          (N = c & 32),
          (G = c & 64),
          (V = c & 128),
          c & 1)
        ) {
          if (
            (((d = new Cr()).a = E[n]),
            (d.b = E[n + 1]),
            (d.c = E[n + 3]),
            ((p = new Cr()).a = E[n + 1]),
            (p.b = E[n + 2]),
            (p.c = E[n + 3]),
            (n += 4),
            P && ((l = E[n++]), (d.materialIndex = l), (p.materialIndex = l)),
            (r = y.faces.length),
            D)
          )
            for (t = 0; t < K; t++)
              for (
                m = w.uvs[t],
                  y.faceVertexUvs[t][r] = [],
                  y.faceVertexUvs[t][r + 1] = [],
                  A = 0;
                A < 4;
                A++
              )
                (v = new he(m[2 * (s = E[n++])], m[2 * s + 1])),
                  2 !== A && y.faceVertexUvs[t][r].push(v),
                  0 !== A && y.faceVertexUvs[t][r + 1].push(v);
          if (
            (O &&
              ((o = 3 * E[n++]),
              d.normal.set(b[o++], b[o++], b[o]),
              p.normal.copy(d.normal)),
            N)
          )
            for (t = 0; t < 4; t++)
              (o = 3 * E[n++]),
                (g = new Ce(b[o++], b[o++], b[o])),
                2 !== t && d.vertexNormals.push(g),
                0 !== t && p.vertexNormals.push(g);
          if (
            (G && ((f = k[(a = E[n++])]), d.color.setHex(f), p.color.setHex(f)),
            V)
          )
            for (t = 0; t < 4; t++)
              (f = k[(a = E[n++])]),
                2 !== t && d.vertexColors.push(new de(f)),
                0 !== t && p.vertexColors.push(new de(f));
          y.faces.push(d), y.faces.push(p);
        } else {
          if (
            (((h = new Cr()).a = E[n++]),
            (h.b = E[n++]),
            (h.c = E[n++]),
            P && ((l = E[n++]), (h.materialIndex = l)),
            (r = y.faces.length),
            D)
          )
            for (t = 0; t < K; t++)
              for (m = w.uvs[t], y.faceVertexUvs[t][r] = [], A = 0; A < 3; A++)
                (v = new he(m[2 * (s = E[n++])], m[2 * s + 1])),
                  y.faceVertexUvs[t][r].push(v);
          if ((O && ((o = 3 * E[n++]), h.normal.set(b[o++], b[o++], b[o])), N))
            for (t = 0; t < 3; t++)
              (o = 3 * E[n++]),
                (g = new Ce(b[o++], b[o++], b[o])),
                h.vertexNormals.push(g);
          if ((G && ((a = E[n++]), h.color.setHex(k[a])), V))
            for (t = 0; t < 3; t++)
              (a = E[n++]), h.vertexColors.push(new de(k[a]));
          y.faces.push(h);
        }
      var C = e,
        F = B,
        T = void 0 !== C.influencesPerVertex ? C.influencesPerVertex : 2;
      if (C.skinWeights)
        for (var _ = 0, X = C.skinWeights.length; _ < X; _ += T) {
          var j = C.skinWeights[_],
            W = 1 < T ? C.skinWeights[_ + 1] : 0,
            Y = 2 < T ? C.skinWeights[_ + 2] : 0,
            J = 3 < T ? C.skinWeights[_ + 3] : 0;
          F.skinWeights.push(new Fe(j, W, Y, J));
        }
      if (C.skinIndices)
        for (_ = 0, X = C.skinIndices.length; _ < X; _ += T) {
          var Z = C.skinIndices[_],
            q = 1 < T ? C.skinIndices[_ + 1] : 0,
            $ = 2 < T ? C.skinIndices[_ + 2] : 0,
            ee = 3 < T ? C.skinIndices[_ + 3] : 0;
          F.skinIndices.push(new Fe(Z, q, $, ee));
        }
      (F.bones = C.bones),
        F.bones &&
          0 < F.bones.length &&
          (F.skinWeights.length !== F.skinIndices.length ||
            F.skinIndices.length !== F.vertices.length) &&
          console.warn(
            'When skinning, number of vertices (' +
              F.vertices.length +
              '), skinIndices (' +
              F.skinIndices.length +
              '), and skinWeights (' +
              F.skinWeights.length +
              ') should match.',
          );
      var U = e,
        M = B,
        te = U.scale;
      if (void 0 !== U.morphTargets)
        for (var S = 0, Ae = U.morphTargets.length; S < Ae; S++) {
          (M.morphTargets[S] = {}),
            (M.morphTargets[S].name = U.morphTargets[S].name),
            (M.morphTargets[S].vertices = []);
          for (
            var re = M.morphTargets[S].vertices,
              ne = U.morphTargets[S].vertices,
              Q = 0,
              ie = ne.length;
            Q < ie;
            Q += 3
          ) {
            var ae = new Ce();
            (ae.x = ne[Q] * te),
              (ae.y = ne[Q + 1] * te),
              (ae.z = ne[Q + 2] * te),
              re.push(ae);
          }
        }
      if (void 0 !== U.morphColors && 0 < U.morphColors.length) {
        console.warn(
          'THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.',
        );
        for (
          var oe = M.faces, se = U.morphColors[0].colors, S = 0, Ae = oe.length;
          S < Ae;
          S++
        )
          oe[S].color.fromArray(se, 3 * S);
      }
      var L = e,
        le = B,
        H = [],
        I = [];
      void 0 !== L.animation && I.push(L.animation),
        void 0 !== L.animations &&
          (L.animations.length
            ? (I = I.concat(L.animations))
            : I.push(L.animations));
      for (var ce = 0; ce < I.length; ce++) {
        var ue = Ll.parseAnimation(I[ce], le.bones);
        ue && H.push(ue);
      }
      return (
        le.morphTargets &&
          ((L = Ll.CreateClipsFromMorphTargetSequences(le.morphTargets, 10)),
          (H = H.concat(L))),
        0 < H.length && (le.animations = H),
        B.computeFaceNormals(),
        B.computeBoundingSphere(),
        void 0 === e.materials || 0 === e.materials.length
          ? { geometry: B }
          : {
              geometry: B,
              materials: Vl.prototype.initMaterials(
                e.materials,
                R,
                this.crossOrigin,
              ),
            }
      );
    },
  }),
    Object.assign(Kl.prototype, {
      crossOrigin: 'anonymous',
      load: function (A, r, e, n) {
        '' === this.texturePath &&
          (this.texturePath = A.substring(0, A.lastIndexOf('/') + 1));
        var i = this;
        new Os(i.manager).load(
          A,
          function (e) {
            var t = null;
            try {
              t = JSON.parse(e);
            } catch (e) {
              return (
                void 0 !== n && n(e),
                void console.error(
                  "THREE:ObjectLoader: Can't parse " + A + '.',
                  e.message,
                )
              );
            }
            e = t.metadata;
            void 0 === e ||
            void 0 === e.type ||
            'geometry' === e.type.toLowerCase()
              ? console.error(
                  "THREE.ObjectLoader: Can't load " +
                    A +
                    '. Use THREE.JSONLoader instead.',
                )
              : i.parse(t, r);
          },
          e,
          n,
        );
      },
      setTexturePath: function (e) {
        return (this.texturePath = e), this;
      },
      setCrossOrigin: function (e) {
        return (this.crossOrigin = e), this;
      },
      parse: function (e, t) {
        var A = this.parseShape(e.shapes),
          A = this.parseGeometries(e.geometries, A),
          r = this.parseImages(e.images, function () {
            void 0 !== t && t(n);
          }),
          r = this.parseTextures(e.textures, r),
          r = this.parseMaterials(e.materials, r),
          n = this.parseObject(e.object, A, r);
        return (
          e.animations && (n.animations = this.parseAnimations(e.animations)),
          (void 0 !== e.images && 0 !== e.images.length) ||
            (void 0 !== t && t(n)),
          n
        );
      },
      parseShape: function (e) {
        var t = {};
        if (void 0 !== e)
          for (var A = 0, r = e.length; A < r; A++) {
            var n = new hl().fromJSON(e[A]);
            t[n.uuid] = n;
          }
        return t;
      },
      parseGeometries: function (e, t) {
        var A = {};
        if (void 0 !== e)
          for (
            var r = new zl(), n = new Rl(), i = 0, a = e.length;
            i < a;
            i++
          ) {
            var o,
              s = e[i];
            switch (s.type) {
              case 'PlaneGeometry':
              case 'PlaneBufferGeometry':
                o = new bs[s.type](
                  s.width,
                  s.height,
                  s.widthSegments,
                  s.heightSegments,
                );
                break;
              case 'BoxGeometry':
              case 'BoxBufferGeometry':
              case 'CubeGeometry':
                o = new bs[s.type](
                  s.width,
                  s.height,
                  s.depth,
                  s.widthSegments,
                  s.heightSegments,
                  s.depthSegments,
                );
                break;
              case 'CircleGeometry':
              case 'CircleBufferGeometry':
                o = new bs[s.type](
                  s.radius,
                  s.segments,
                  s.thetaStart,
                  s.thetaLength,
                );
                break;
              case 'CylinderGeometry':
              case 'CylinderBufferGeometry':
                o = new bs[s.type](
                  s.radiusTop,
                  s.radiusBottom,
                  s.height,
                  s.radialSegments,
                  s.heightSegments,
                  s.openEnded,
                  s.thetaStart,
                  s.thetaLength,
                );
                break;
              case 'ConeGeometry':
              case 'ConeBufferGeometry':
                o = new bs[s.type](
                  s.radius,
                  s.height,
                  s.radialSegments,
                  s.heightSegments,
                  s.openEnded,
                  s.thetaStart,
                  s.thetaLength,
                );
                break;
              case 'SphereGeometry':
              case 'SphereBufferGeometry':
                o = new bs[s.type](
                  s.radius,
                  s.widthSegments,
                  s.heightSegments,
                  s.phiStart,
                  s.phiLength,
                  s.thetaStart,
                  s.thetaLength,
                );
                break;
              case 'DodecahedronGeometry':
              case 'DodecahedronBufferGeometry':
              case 'IcosahedronGeometry':
              case 'IcosahedronBufferGeometry':
              case 'OctahedronGeometry':
              case 'OctahedronBufferGeometry':
              case 'TetrahedronGeometry':
              case 'TetrahedronBufferGeometry':
                o = new bs[s.type](s.radius, s.detail);
                break;
              case 'RingGeometry':
              case 'RingBufferGeometry':
                o = new bs[s.type](
                  s.innerRadius,
                  s.outerRadius,
                  s.thetaSegments,
                  s.phiSegments,
                  s.thetaStart,
                  s.thetaLength,
                );
                break;
              case 'TorusGeometry':
              case 'TorusBufferGeometry':
                o = new bs[s.type](
                  s.radius,
                  s.tube,
                  s.radialSegments,
                  s.tubularSegments,
                  s.arc,
                );
                break;
              case 'TorusKnotGeometry':
              case 'TorusKnotBufferGeometry':
                o = new bs[s.type](
                  s.radius,
                  s.tube,
                  s.tubularSegments,
                  s.radialSegments,
                  s.p,
                  s.q,
                );
                break;
              case 'LatheGeometry':
              case 'LatheBufferGeometry':
                o = new bs[s.type](
                  s.points,
                  s.segments,
                  s.phiStart,
                  s.phiLength,
                );
                break;
              case 'PolyhedronGeometry':
              case 'PolyhedronBufferGeometry':
                o = new bs[s.type](s.vertices, s.indices, s.radius, s.details);
                break;
              case 'ShapeGeometry':
              case 'ShapeBufferGeometry':
                for (var l = [], c = 0, u = s.shapes.length; c < u; c++) {
                  var h = t[s.shapes[c]];
                  l.push(h);
                }
                o = new bs[s.type](l, s.curveSegments);
                break;
              case 'ExtrudeGeometry':
              case 'ExtrudeBufferGeometry':
                for (l = [], c = 0, u = s.shapes.length; c < u; c++) {
                  h = t[s.shapes[c]];
                  l.push(h);
                }
                var d = s.options.extrudePath;
                void 0 !== d &&
                  (s.options.extrudePath = new ll[d.type]().fromJSON(d)),
                  (o = new bs[s.type](l, s.options));
                break;
              case 'BufferGeometry':
                o = n.parse(s);
                break;
              case 'Geometry':
                o = r.parse(s, this.texturePath).geometry;
                break;
              default:
                console.warn(
                  'THREE.ObjectLoader: Unsupported geometry type "' +
                    s.type +
                    '"',
                );
                continue;
            }
            (o.uuid = s.uuid),
              void 0 !== s.name && (o.name = s.name),
              !0 === o.isBufferGeometry &&
                void 0 !== s.userData &&
                (o.userData = s.userData),
              (A[s.uuid] = o);
          }
        return A;
      },
      parseMaterials: function (e, t) {
        var A = {};
        if (void 0 !== e) {
          var r = new Il();
          r.setTextures(t);
          for (var n = 0, i = e.length; n < i; n++) {
            var a = e[n];
            if ('MultiMaterial' === a.type) {
              for (var o = [], s = 0; s < a.materials.length; s++)
                o.push(r.parse(a.materials[s]));
              A[a.uuid] = o;
            } else A[a.uuid] = r.parse(a);
          }
        }
        return A;
      },
      parseAnimations: function (e) {
        for (var t = [], A = 0; A < e.length; A++) {
          var r = e[A],
            n = Ll.parse(r);
          void 0 !== r.uuid && (n.uuid = r.uuid), t.push(n);
        }
        return t;
      },
      parseImages: function (e, t) {
        var A = this,
          r = {};
        function n(e) {
          return (
            A.manager.itemStart(e),
            i.load(
              e,
              function () {
                A.manager.itemEnd(e);
              },
              void 0,
              function () {
                A.manager.itemEnd(e), A.manager.itemError(e);
              },
            )
          );
        }
        if (void 0 !== e && 0 < e.length) {
          var i = new Vs(new Rs(t));
          i.setCrossOrigin(this.crossOrigin);
          for (var a = 0, o = e.length; a < o; a++) {
            var s = e[a],
              l = s.url;
            if (Array.isArray(l)) {
              r[s.uuid] = [];
              for (var c = 0, u = l.length; c < u; c++) {
                var h = l[c],
                  d = /^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)
                    ? h
                    : A.texturePath + h;
                r[s.uuid].push(n(d));
              }
            } else {
              d = /^(\/\/)|([a-z]+:(\/\/)?)/i.test(s.url)
                ? s.url
                : A.texturePath + s.url;
              r[s.uuid] = n(d);
            }
          }
        }
        return r;
      },
      parseTextures: function (e, t) {
        function A(e, t) {
          return 'number' == typeof e
            ? e
            : (console.warn(
                'THREE.ObjectLoader.parseTexture: Constant should be in numeric form.',
                e,
              ),
              t[e]);
        }
        var r = {};
        if (void 0 !== e)
          for (var n = 0, i = e.length; n < i; n++) {
            var a,
              o = e[n];
            void 0 === o.image &&
              console.warn(
                'THREE.ObjectLoader: No "image" specified for',
                o.uuid,
              ),
              void 0 === t[o.image] &&
                console.warn('THREE.ObjectLoader: Undefined image', o.image),
              ((a = new (Array.isArray(t[o.image]) ? ci : h)(
                t[o.image],
              )).needsUpdate = !0),
              (a.uuid = o.uuid),
              void 0 !== o.name && (a.name = o.name),
              void 0 !== o.mapping && (a.mapping = A(o.mapping, jl)),
              void 0 !== o.offset && a.offset.fromArray(o.offset),
              void 0 !== o.repeat && a.repeat.fromArray(o.repeat),
              void 0 !== o.center && a.center.fromArray(o.center),
              void 0 !== o.rotation && (a.rotation = o.rotation),
              void 0 !== o.wrap &&
                ((a.wrapS = A(o.wrap[0], Wl)), (a.wrapT = A(o.wrap[1], Wl))),
              void 0 !== o.format && (a.format = o.format),
              void 0 !== o.minFilter && (a.minFilter = A(o.minFilter, Yl)),
              void 0 !== o.magFilter && (a.magFilter = A(o.magFilter, Yl)),
              void 0 !== o.anisotropy && (a.anisotropy = o.anisotropy),
              void 0 !== o.flipY && (a.flipY = o.flipY),
              (r[o.uuid] = a);
          }
        return r;
      },
      parseObject: function (e, t, i) {
        function A(e) {
          return (
            void 0 === t[e] &&
              console.warn('THREE.ObjectLoader: Undefined geometry', e),
            t[e]
          );
        }
        function r(e) {
          if (void 0 !== e) {
            if (Array.isArray(e)) {
              for (var t = [], A = 0, r = e.length; A < r; A++) {
                var n = e[A];
                void 0 === i[n] &&
                  console.warn('THREE.ObjectLoader: Undefined material', n),
                  t.push(i[n]);
              }
              return t;
            }
            return (
              void 0 === i[e] &&
                console.warn('THREE.ObjectLoader: Undefined material', e),
              i[e]
            );
          }
        }
        switch (e.type) {
          case 'Scene':
            (o = new Ao()),
              void 0 !== e.background &&
                Number.isInteger(e.background) &&
                (o.background = new de(e.background)),
              void 0 !== e.fog &&
                ('Fog' === e.fog.type
                  ? (o.fog = new to(e.fog.color, e.fog.near, e.fog.far))
                  : 'FogExp2' === e.fog.type &&
                    (o.fog = new eo(e.fog.color, e.fog.density)));
            break;
          case 'PerspectiveCamera':
            (o = new x(e.fov, e.aspect, e.near, e.far)),
              void 0 !== e.focus && (o.focus = e.focus),
              void 0 !== e.zoom && (o.zoom = e.zoom),
              void 0 !== e.filmGauge && (o.filmGauge = e.filmGauge),
              void 0 !== e.filmOffset && (o.filmOffset = e.filmOffset),
              void 0 !== e.view && (o.view = Object.assign({}, e.view));
            break;
          case 'OrthographicCamera':
            (o = new br(e.left, e.right, e.top, e.bottom, e.near, e.far)),
              void 0 !== e.zoom && (o.zoom = e.zoom),
              void 0 !== e.view && (o.view = Object.assign({}, e.view));
            break;
          case 'AmbientLight':
            o = new wl(e.color, e.intensity);
            break;
          case 'DirectionalLight':
            o = new Bl(e.color, e.intensity);
            break;
          case 'PointLight':
            o = new ml(e.color, e.intensity, e.distance, e.decay);
            break;
          case 'RectAreaLight':
            o = new yl(e.color, e.intensity, e.width, e.height);
            break;
          case 'SpotLight':
            o = new gl(
              e.color,
              e.intensity,
              e.distance,
              e.angle,
              e.penumbra,
              e.decay,
            );
            break;
          case 'HemisphereLight':
            o = new dl(e.color, e.groundColor, e.intensity);
            break;
          case 'SkinnedMesh':
            console.warn(
              'THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.',
            );
          case 'Mesh':
            var n = A(e.geometry),
              a = r(e.material),
              o = new (n.bones && 0 < n.bones.length ? uo : f)(n, a);
            break;
          case 'LOD':
            o = new so();
            break;
          case 'Line':
            o = new g(A(e.geometry), r(e.material), e.mode);
            break;
          case 'LineLoop':
            o = new ho(A(e.geometry), r(e.material));
            break;
          case 'LineSegments':
            o = new v(A(e.geometry), r(e.material));
            break;
          case 'PointCloud':
          case 'Points':
            o = new fo(A(e.geometry), r(e.material));
            break;
          case 'Sprite':
            o = new ao(r(e.material));
            break;
          case 'Group':
            o = new Ya();
            break;
          default:
            o = new p();
        }
        if (
          ((o.uuid = e.uuid),
          void 0 !== e.name && (o.name = e.name),
          void 0 !== e.matrix
            ? (o.matrix.fromArray(e.matrix),
              void 0 !== e.matrixAutoUpdate &&
                (o.matrixAutoUpdate = e.matrixAutoUpdate),
              o.matrixAutoUpdate &&
                o.matrix.decompose(o.position, o.quaternion, o.scale))
            : (void 0 !== e.position && o.position.fromArray(e.position),
              void 0 !== e.rotation && o.rotation.fromArray(e.rotation),
              void 0 !== e.quaternion && o.quaternion.fromArray(e.quaternion),
              void 0 !== e.scale && o.scale.fromArray(e.scale)),
          void 0 !== e.castShadow && (o.castShadow = e.castShadow),
          void 0 !== e.receiveShadow && (o.receiveShadow = e.receiveShadow),
          e.shadow &&
            (void 0 !== e.shadow.bias && (o.shadow.bias = e.shadow.bias),
            void 0 !== e.shadow.radius && (o.shadow.radius = e.shadow.radius),
            void 0 !== e.shadow.mapSize &&
              o.shadow.mapSize.fromArray(e.shadow.mapSize),
            void 0 !== e.shadow.camera) &&
            (o.shadow.camera = this.parseObject(e.shadow.camera)),
          void 0 !== e.visible && (o.visible = e.visible),
          void 0 !== e.frustumCulled && (o.frustumCulled = e.frustumCulled),
          void 0 !== e.renderOrder && (o.renderOrder = e.renderOrder),
          void 0 !== e.userData && (o.userData = e.userData),
          void 0 !== e.layers && (o.layers.mask = e.layers),
          void 0 !== e.children)
        )
          for (var s = e.children, l = 0; l < s.length; l++)
            o.add(this.parseObject(s[l], t, i));
        if ('LOD' === e.type)
          for (var c = e.levels, u = 0; u < c.length; u++) {
            var h = c[u],
              d = o.getObjectByProperty('uuid', h.object);
            void 0 !== d && o.addLevel(d, h.distance);
          }
        return o;
      },
    });
  var Xl,
    jl = {
      UVMapping: 300,
      CubeReflectionMapping: Ke,
      CubeRefractionMapping: Xe,
      EquirectangularReflectionMapping: je,
      EquirectangularRefractionMapping: We,
      SphericalReflectionMapping: Ye,
      CubeUVReflectionMapping: Je,
      CubeUVRefractionMapping: Ze,
    },
    Wl = {
      RepeatWrapping: qe,
      ClampToEdgeWrapping: $e,
      MirroredRepeatWrapping: et,
    },
    Yl = {
      NearestFilter: tt,
      NearestMipMapNearestFilter: At,
      NearestMipMapLinearFilter: rt,
      LinearFilter: U,
      LinearMipMapNearestFilter: nt,
      LinearMipMapLinearFilter: it,
    };
  function Jl(e) {
    'undefined' == typeof createImageBitmap &&
      console.warn(
        'THREE.ImageBitmapLoader: createImageBitmap() not supported.',
      ),
      'undefined' == typeof fetch &&
        console.warn('THREE.ImageBitmapLoader: fetch() not supported.'),
      (this.manager = void 0 !== e ? e : Ps),
      (this.options = void 0);
  }
  function Zl() {
    (this.type = 'ShapePath'),
      (this.color = new de()),
      (this.subPaths = []),
      (this.currentPath = null);
  }
  function ql(e) {
    (this.type = 'Font'), (this.data = e);
  }
  function $l(e) {
    this.manager = void 0 !== e ? e : Ps;
  }
  (Jl.prototype = {
    constructor: Jl,
    setOptions: function (e) {
      return (this.options = e), this;
    },
    load: function (t, A, e, r) {
      void 0 === t && (t = ''),
        void 0 !== this.path && (t = this.path + t),
        (t = this.manager.resolveURL(t));
      var n = this,
        i = Is.get(t);
      if (void 0 !== i)
        return (
          n.manager.itemStart(t),
          setTimeout(function () {
            A && A(i), n.manager.itemEnd(t);
          }, 0),
          i
        );
      fetch(t)
        .then(function (e) {
          return e.blob();
        })
        .then(function (e) {
          return createImageBitmap(e, n.options);
        })
        .then(function (e) {
          Is.add(t, e), A && A(e), n.manager.itemEnd(t);
        })
        .catch(function (e) {
          r && r(e), n.manager.itemEnd(t), n.manager.itemError(t);
        });
    },
    setCrossOrigin: function () {
      return this;
    },
    setPath: function (e) {
      return (this.path = e), this;
    },
  }),
    Object.assign(Zl.prototype, {
      moveTo: function (e, t) {
        (this.currentPath = new ul()),
          this.subPaths.push(this.currentPath),
          this.currentPath.moveTo(e, t);
      },
      lineTo: function (e, t) {
        this.currentPath.lineTo(e, t);
      },
      quadraticCurveTo: function (e, t, A, r) {
        this.currentPath.quadraticCurveTo(e, t, A, r);
      },
      bezierCurveTo: function (e, t, A, r, n, i) {
        this.currentPath.bezierCurveTo(e, t, A, r, n, i);
      },
      splineThru: function (e) {
        this.currentPath.splineThru(e);
      },
      toShapes: function (e, t) {
        function A(e) {
          for (var t = [], A = 0, r = e.length; A < r; A++) {
            var n = e[A],
              i = new hl();
            (i.curves = n.curves), t.push(i);
          }
          return t;
        }
        var r = $o.isClockWise,
          n = this.subPaths;
        if (0 === n.length) return [];
        if (!0 === t) return A(n);
        var i,
          a,
          o,
          s = [];
        if (1 === n.length)
          (a = n[0]), ((o = new hl()).curves = a.curves), s.push(o);
        else {
          var l,
            c = !r(n[0].getPoints()),
            c = e ? !c : c,
            u = [],
            h = [],
            d = [],
            p = 0;
          (h[p] = void 0), (d[p] = []);
          for (var f = 0, g = n.length; f < g; f++)
            (i = r((l = (a = n[f]).getPoints()))),
              (e ? !i : i)
                ? (!c && h[p] && p++,
                  (h[p] = { s: new hl(), p: l }),
                  (h[p].s.curves = a.curves),
                  c && p++,
                  (d[p] = []))
                : d[p].push({ h: a, p: l[0] });
          if (!h[0]) return A(n);
          if (1 < h.length) {
            for (var m = !1, v = [], B = 0, w = h.length; B < w; B++) u[B] = [];
            for (B = 0, w = h.length; B < w; B++)
              for (var y = d[B], E = 0; E < y.length; E++) {
                for (var x = y[E], b = !0, C = 0; C < h.length; C++)
                  !(function (e, t) {
                    for (
                      var A = t.length, r = !1, n = A - 1, i = 0;
                      i < A;
                      n = i++
                    ) {
                      var a = t[n],
                        o = t[i],
                        s = o.x - a.x,
                        l = o.y - a.y;
                      if (Math.abs(l) > Number.EPSILON) {
                        if (
                          (l < 0 &&
                            ((a = t[i]), (s = -s), (o = t[n]), (l = -l)),
                          !(e.y < a.y || e.y > o.y))
                        )
                          if (e.y === a.y) {
                            if (e.x === a.x) return 1;
                          } else {
                            l = l * (e.x - a.x) - s * (e.y - a.y);
                            if (0 == l) return 1;
                            l < 0 || (r = !r);
                          }
                      } else if (
                        e.y === a.y &&
                        ((o.x <= e.x && e.x <= a.x) ||
                          (a.x <= e.x && e.x <= o.x))
                      )
                        return 1;
                    }
                    return r;
                  })(x.p, h[C].p) ||
                    (B !== C && v.push({ froms: B, tos: C, hole: E }),
                    b ? ((b = !1), u[C].push(x)) : (m = !0));
                b && u[B].push(x);
              }
            0 < v.length && (m || (d = u));
          }
          for (var f = 0, F = h.length; f < F; f++) {
            (o = h[f].s), s.push(o);
            for (var T, _ = 0, U = (T = d[f]).length; _ < U; _++)
              o.holes.push(T[_].h);
          }
        }
        return s;
      },
    }),
    Object.assign(ql.prototype, {
      isFont: !0,
      generateShapes: function (e, t) {
        for (
          var A = [],
            r = (function (e, t, A) {
              for (
                var r = Array.from ? Array.from(e) : String(e).split(''),
                  n = t / A.resolution,
                  i =
                    (A.boundingBox.yMax -
                      A.boundingBox.yMin +
                      A.underlineThickness) *
                    n,
                  a = [],
                  o = 0,
                  s = 0,
                  l = 0;
                l < r.length;
                l++
              ) {
                var c = r[l];
                '\n' === c
                  ? ((o = 0), (s -= i))
                  : ((c = (function (e, t, A, r, n) {
                      e = n.glyphs[e] || n.glyphs['?'];
                      if (e) {
                        var i,
                          a,
                          o,
                          s,
                          l,
                          c,
                          u,
                          h,
                          d = new Zl();
                        if (e.o)
                          for (
                            var p =
                                e._cachedOutline ||
                                (e._cachedOutline = e.o.split(' ')),
                              f = 0,
                              g = p.length;
                            f < g;

                          )
                            switch (p[f++]) {
                              case 'm':
                                (i = p[f++] * t + A),
                                  (a = p[f++] * t + r),
                                  d.moveTo(i, a);
                                break;
                              case 'l':
                                (i = p[f++] * t + A),
                                  (a = p[f++] * t + r),
                                  d.lineTo(i, a);
                                break;
                              case 'q':
                                (o = p[f++] * t + A),
                                  (s = p[f++] * t + r),
                                  (l = p[f++] * t + A),
                                  (c = p[f++] * t + r),
                                  d.quadraticCurveTo(l, c, o, s);
                                break;
                              case 'b':
                                (o = p[f++] * t + A),
                                  (s = p[f++] * t + r),
                                  (l = p[f++] * t + A),
                                  (c = p[f++] * t + r),
                                  (u = p[f++] * t + A),
                                  (h = p[f++] * t + r),
                                  d.bezierCurveTo(l, c, u, h, o, s);
                            }
                        return { offsetX: e.ha * t, path: d };
                      }
                    })(c, n, o, s, A)),
                    (o += c.offsetX),
                    a.push(c.path));
              }
              return a;
            })(e, (t = void 0 === t ? 100 : t), this.data),
            n = 0,
            i = r.length;
          n < i;
          n++
        )
          Array.prototype.push.apply(A, r[n].toShapes());
        return A;
      },
    }),
    Object.assign($l.prototype, {
      load: function (e, r, t, A) {
        var n = this,
          i = new Os(this.manager);
        i.setPath(this.path),
          i.load(
            e,
            function (t) {
              var A;
              try {
                A = JSON.parse(t);
              } catch (e) {
                console.warn(
                  'THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.',
                ),
                  (A = JSON.parse(t.substring(65, t.length - 2)));
              }
              t = n.parse(A);
              r && r(t);
            },
            t,
            A,
          );
      },
      parse: function (e) {
        return new ql(e);
      },
      setPath: function (e) {
        return (this.path = e), this;
      },
    });
  var ec,
    tc,
    Ac,
    rc,
    nc,
    ic,
    ac,
    oc,
    sc,
    lc,
    cc,
    uc,
    hc,
    dc,
    pc,
    fc,
    gc,
    mc,
    vc = {
      getContext: function () {
        return (Xl =
          void 0 === Xl
            ? new (window.AudioContext || window.webkitAudioContext)()
            : Xl);
      },
      setContext: function (e) {
        Xl = e;
      },
    };
  function Bc(e) {
    this.manager = void 0 !== e ? e : Ps;
  }
  function wc() {
    (this.type = 'StereoCamera'),
      (this.aspect = 1),
      (this.eyeSep = 0.064),
      (this.cameraL = new x()),
      this.cameraL.layers.enable(1),
      (this.cameraL.matrixAutoUpdate = !1),
      (this.cameraR = new x()),
      this.cameraR.layers.enable(2),
      (this.cameraR.matrixAutoUpdate = !1);
  }
  function yc(e, t, A) {
    p.call(this), (this.type = 'CubeCamera');
    var n = new x(90, 1, e, t),
      i =
        (n.up.set(0, -1, 0),
        n.lookAt(new Ce(1, 0, 0)),
        this.add(n),
        new x(90, 1, e, t)),
      a =
        (i.up.set(0, -1, 0),
        i.lookAt(new Ce(-1, 0, 0)),
        this.add(i),
        new x(90, 1, e, t)),
      o =
        (a.up.set(0, 0, 1),
        a.lookAt(new Ce(0, 1, 0)),
        this.add(a),
        new x(90, 1, e, t)),
      s =
        (o.up.set(0, 0, -1),
        o.lookAt(new Ce(0, -1, 0)),
        this.add(o),
        new x(90, 1, e, t)),
      l =
        (s.up.set(0, -1, 0),
        s.lookAt(new Ce(0, 0, 1)),
        this.add(s),
        new x(90, 1, e, t)),
      e =
        (l.up.set(0, -1, 0),
        l.lookAt(new Ce(0, 0, -1)),
        this.add(l),
        { format: Bt, magFilter: U, minFilter: U });
    (this.renderTarget = new DA(A, A, e)),
      (this.renderTarget.texture.name = 'CubeCamera'),
      (this.update = function (e, t) {
        null === this.parent && this.updateMatrixWorld();
        var A = this.renderTarget,
          r = A.texture.generateMipmaps;
        (A.texture.generateMipmaps = !1),
          (A.activeCubeFace = 0),
          e.render(t, n, A),
          (A.activeCubeFace = 1),
          e.render(t, i, A),
          (A.activeCubeFace = 2),
          e.render(t, a, A),
          (A.activeCubeFace = 3),
          e.render(t, o, A),
          (A.activeCubeFace = 4),
          e.render(t, s, A),
          (A.texture.generateMipmaps = r),
          (A.activeCubeFace = 5),
          e.render(t, l, A),
          e.setRenderTarget(null);
      }),
      (this.clear = function (e, t, A, r) {
        for (var n = this.renderTarget, i = 0; i < 6; i++)
          (n.activeCubeFace = i), e.setRenderTarget(n), e.clear(t, A, r);
        e.setRenderTarget(null);
      });
  }
  function Ec() {
    p.call(this),
      (this.type = 'AudioListener'),
      (this.context = vc.getContext()),
      (this.gain = this.context.createGain()),
      this.gain.connect(this.context.destination),
      (this.filter = null);
  }
  function xc(e) {
    p.call(this),
      (this.type = 'Audio'),
      (this.context = e.context),
      (this.gain = this.context.createGain()),
      this.gain.connect(e.getInput()),
      (this.autoplay = !1),
      (this.buffer = null),
      (this.loop = !1),
      (this.startTime = 0),
      (this.offset = 0),
      (this.playbackRate = 1),
      (this.isPlaying = !1),
      (this.hasPlaybackControl = !0),
      (this.sourceType = 'empty'),
      (this.filters = []);
  }
  function bc(e) {
    xc.call(this, e),
      (this.panner = this.context.createPanner()),
      this.panner.connect(this.gain);
  }
  function Cc(e, t) {
    (this.analyser = e.context.createAnalyser()),
      (this.analyser.fftSize = void 0 !== t ? t : 2048),
      (this.data = new Uint8Array(this.analyser.frequencyBinCount)),
      e.getOutput().connect(this.analyser);
  }
  function Fc(e, t, A) {
    (this.binding = e), (this.valueSize = A);
    var r,
      n = Float64Array;
    switch (t) {
      case 'quaternion':
        r = this._slerp;
        break;
      case 'string':
      case 'bool':
        (n = Array), (r = this._select);
        break;
      default:
        r = this._lerp;
    }
    (this.buffer = new n(4 * A)),
      (this._mixBufferRegion = r),
      (this.cumulativeWeight = 0),
      (this.useCount = 0),
      (this.referenceCount = 0);
  }
  Object.assign(Bc.prototype, {
    load: function (e, t, A, r) {
      var n = new Os(this.manager);
      n.setResponseType('arraybuffer'),
        n.load(
          e,
          function (e) {
            e = e.slice(0);
            vc.getContext().decodeAudioData(e, function (e) {
              t(e);
            });
          },
          A,
          r,
        );
    },
  }),
    Object.assign(wc.prototype, {
      update:
        ((sc = new be()),
        (lc = new be()),
        function (e) {
          var t, A, r, n, i;
          (ec === this &&
            tc === e.focus &&
            Ac === e.fov &&
            rc === e.aspect * this.aspect &&
            nc === e.near &&
            ic === e.far &&
            ac === e.zoom &&
            oc === this.eyeSep) ||
            ((ec = this),
            (tc = e.focus),
            (Ac = e.fov),
            (rc = e.aspect * this.aspect),
            (nc = e.near),
            (ic = e.far),
            (ac = e.zoom),
            (t = e.projectionMatrix.clone()),
            (A = ((oc = this.eyeSep / 2) * nc) / tc),
            (r = (nc * Math.tan(xe.DEG2RAD * Ac * 0.5)) / ac),
            (lc.elements[12] = -oc),
            (sc.elements[12] = oc),
            (n = -r * rc + A),
            (i = r * rc + A),
            (t.elements[0] = (2 * nc) / (i - n)),
            (t.elements[8] = (i + n) / (i - n)),
            this.cameraL.projectionMatrix.copy(t),
            (n = -r * rc - A),
            (i = r * rc - A),
            (t.elements[0] = (2 * nc) / (i - n)),
            (t.elements[8] = (i + n) / (i - n)),
            this.cameraR.projectionMatrix.copy(t)),
            this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(lc),
            this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(sc);
        }),
    }),
    ((yc.prototype = Object.create(p.prototype)).constructor = yc),
    (Ec.prototype = Object.assign(Object.create(p.prototype), {
      constructor: Ec,
      getInput: function () {
        return this.gain;
      },
      removeFilter: function () {
        return (
          null !== this.filter &&
            (this.gain.disconnect(this.filter),
            this.filter.disconnect(this.context.destination),
            this.gain.connect(this.context.destination),
            (this.filter = null)),
          this
        );
      },
      getFilter: function () {
        return this.filter;
      },
      setFilter: function (e) {
        return (
          (null !== this.filter
            ? (this.gain.disconnect(this.filter), this.filter)
            : this.gain
          ).disconnect(this.context.destination),
          (this.filter = e),
          this.gain.connect(this.filter),
          this.filter.connect(this.context.destination),
          this
        );
      },
      getMasterVolume: function () {
        return this.gain.gain.value;
      },
      setMasterVolume: function (e) {
        return (
          this.gain.gain.setTargetAtTime(e, this.context.currentTime, 0.01),
          this
        );
      },
      updateMatrixWorld:
        ((cc = new Ce()),
        (uc = new E()),
        (hc = new Ce()),
        (dc = new Ce()),
        function (e) {
          p.prototype.updateMatrixWorld.call(this, e);
          var e = this.context.listener,
            t = this.up;
          this.matrixWorld.decompose(cc, uc, hc),
            dc.set(0, 0, -1).applyQuaternion(uc),
            e.positionX
              ? (e.positionX.setValueAtTime(cc.x, this.context.currentTime),
                e.positionY.setValueAtTime(cc.y, this.context.currentTime),
                e.positionZ.setValueAtTime(cc.z, this.context.currentTime),
                e.forwardX.setValueAtTime(dc.x, this.context.currentTime),
                e.forwardY.setValueAtTime(dc.y, this.context.currentTime),
                e.forwardZ.setValueAtTime(dc.z, this.context.currentTime),
                e.upX.setValueAtTime(t.x, this.context.currentTime),
                e.upY.setValueAtTime(t.y, this.context.currentTime),
                e.upZ.setValueAtTime(t.z, this.context.currentTime))
              : (e.setPosition(cc.x, cc.y, cc.z),
                e.setOrientation(dc.x, dc.y, dc.z, t.x, t.y, t.z));
        }),
    })),
    (xc.prototype = Object.assign(Object.create(p.prototype), {
      constructor: xc,
      getOutput: function () {
        return this.gain;
      },
      setNodeSource: function (e) {
        return (
          (this.hasPlaybackControl = !1),
          (this.sourceType = 'audioNode'),
          (this.source = e),
          this.connect(),
          this
        );
      },
      setMediaElementSource: function (e) {
        return (
          (this.hasPlaybackControl = !1),
          (this.sourceType = 'mediaNode'),
          (this.source = this.context.createMediaElementSource(e)),
          this.connect(),
          this
        );
      },
      setBuffer: function (e) {
        return (
          (this.buffer = e),
          (this.sourceType = 'buffer'),
          this.autoplay && this.play(),
          this
        );
      },
      play: function () {
        if (!0 === this.isPlaying)
          console.warn('THREE.Audio: Audio is already playing.');
        else {
          var e;
          if (!1 !== this.hasPlaybackControl)
            return (
              ((e = this.context.createBufferSource()).buffer = this.buffer),
              (e.loop = this.loop),
              (e.onended = this.onEnded.bind(this)),
              e.playbackRate.setValueAtTime(this.playbackRate, this.startTime),
              (this.startTime = this.context.currentTime),
              e.start(this.startTime, this.offset),
              (this.isPlaying = !0),
              (this.source = e),
              this.connect()
            );
          console.warn('THREE.Audio: this Audio has no playback control.');
        }
      },
      pause: function () {
        if (!1 !== this.hasPlaybackControl)
          return (
            !0 === this.isPlaying &&
              (this.source.stop(),
              (this.source.onended = null),
              (this.offset +=
                (this.context.currentTime - this.startTime) *
                this.playbackRate),
              (this.isPlaying = !1)),
            this
          );
        console.warn('THREE.Audio: this Audio has no playback control.');
      },
      stop: function () {
        if (!1 !== this.hasPlaybackControl)
          return (
            this.source.stop(),
            (this.source.onended = null),
            (this.offset = 0),
            (this.isPlaying = !1),
            this
          );
        console.warn('THREE.Audio: this Audio has no playback control.');
      },
      connect: function () {
        if (0 < this.filters.length) {
          this.source.connect(this.filters[0]);
          for (var e = 1, t = this.filters.length; e < t; e++)
            this.filters[e - 1].connect(this.filters[e]);
          this.filters[this.filters.length - 1].connect(this.getOutput());
        } else this.source.connect(this.getOutput());
        return this;
      },
      disconnect: function () {
        if (0 < this.filters.length) {
          this.source.disconnect(this.filters[0]);
          for (var e = 1, t = this.filters.length; e < t; e++)
            this.filters[e - 1].disconnect(this.filters[e]);
          this.filters[this.filters.length - 1].disconnect(this.getOutput());
        } else this.source.disconnect(this.getOutput());
        return this;
      },
      getFilters: function () {
        return this.filters;
      },
      setFilters: function (e) {
        return (
          (e = e || []),
          !0 === this.isPlaying
            ? (this.disconnect(), (this.filters = e), this.connect())
            : (this.filters = e),
          this
        );
      },
      getFilter: function () {
        return this.getFilters()[0];
      },
      setFilter: function (e) {
        return this.setFilters(e ? [e] : []);
      },
      setPlaybackRate: function (e) {
        if (!1 !== this.hasPlaybackControl)
          return (
            (this.playbackRate = e),
            !0 === this.isPlaying &&
              this.source.playbackRate.setValueAtTime(
                this.playbackRate,
                this.context.currentTime,
              ),
            this
          );
        console.warn('THREE.Audio: this Audio has no playback control.');
      },
      getPlaybackRate: function () {
        return this.playbackRate;
      },
      onEnded: function () {
        this.isPlaying = !1;
      },
      getLoop: function () {
        return !1 === this.hasPlaybackControl
          ? (console.warn('THREE.Audio: this Audio has no playback control.'),
            !1)
          : this.loop;
      },
      setLoop: function (e) {
        if (!1 !== this.hasPlaybackControl)
          return (
            (this.loop = e),
            !0 === this.isPlaying && (this.source.loop = this.loop),
            this
          );
        console.warn('THREE.Audio: this Audio has no playback control.');
      },
      getVolume: function () {
        return this.gain.gain.value;
      },
      setVolume: function (e) {
        return (
          this.gain.gain.setTargetAtTime(e, this.context.currentTime, 0.01),
          this
        );
      },
    })),
    (bc.prototype = Object.assign(Object.create(xc.prototype), {
      constructor: bc,
      getOutput: function () {
        return this.panner;
      },
      getRefDistance: function () {
        return this.panner.refDistance;
      },
      setRefDistance: function (e) {
        return (this.panner.refDistance = e), this;
      },
      getRolloffFactor: function () {
        return this.panner.rolloffFactor;
      },
      setRolloffFactor: function (e) {
        return (this.panner.rolloffFactor = e), this;
      },
      getDistanceModel: function () {
        return this.panner.distanceModel;
      },
      setDistanceModel: function (e) {
        return (this.panner.distanceModel = e), this;
      },
      getMaxDistance: function () {
        return this.panner.maxDistance;
      },
      setMaxDistance: function (e) {
        return (this.panner.maxDistance = e), this;
      },
      setDirectionalCone: function (e, t, A) {
        return (
          (this.panner.coneInnerAngle = e),
          (this.panner.coneOuterAngle = t),
          (this.panner.coneOuterGain = A),
          this
        );
      },
      updateMatrixWorld:
        ((pc = new Ce()),
        (fc = new E()),
        (gc = new Ce()),
        (mc = new Ce()),
        function (e) {
          p.prototype.updateMatrixWorld.call(this, e);
          e = this.panner;
          this.matrixWorld.decompose(pc, fc, gc),
            mc.set(0, 0, 1).applyQuaternion(fc),
            e.setPosition(pc.x, pc.y, pc.z),
            e.setOrientation(mc.x, mc.y, mc.z);
        }),
    })),
    Object.assign(Cc.prototype, {
      getFrequencyData: function () {
        return this.analyser.getByteFrequencyData(this.data), this.data;
      },
      getAverageFrequency: function () {
        for (var e = 0, t = this.getFrequencyData(), A = 0; A < t.length; A++)
          e += t[A];
        return e / t.length;
      },
    }),
    Object.assign(Fc.prototype, {
      accumulate: function (e, t) {
        var A = this.buffer,
          r = this.valueSize,
          n = e * r + r,
          e = this.cumulativeWeight;
        if (0 === e) {
          for (var i = 0; i !== r; ++i) A[n + i] = A[i];
          e = t;
        } else this._mixBufferRegion(A, n, 0, t / (e += t), r);
        this.cumulativeWeight = e;
      },
      apply: function (e) {
        var t = this.valueSize,
          A = this.buffer,
          r = e * t + t,
          e = this.cumulativeWeight,
          n = this.binding;
        (this.cumulativeWeight = 0),
          e < 1 && this._mixBufferRegion(A, r, 3 * t, 1 - e, t);
        for (var i = t, a = t + t; i !== a; ++i)
          if (A[i] !== A[i + t]) {
            n.setValue(A, r);
            break;
          }
      },
      saveOriginalState: function () {
        var e = this.binding,
          t = this.buffer,
          A = this.valueSize,
          r = 3 * A;
        e.getValue(t, r);
        for (var n = A, i = r; n !== i; ++n) t[n] = t[r + (n % A)];
        this.cumulativeWeight = 0;
      },
      restoreOriginalState: function () {
        var e = 3 * this.valueSize;
        this.binding.setValue(this.buffer, e);
      },
      _select: function (e, t, A, r, n) {
        if (0.5 <= r) for (var i = 0; i !== n; ++i) e[t + i] = e[A + i];
      },
      _slerp: function (e, t, A, r) {
        E.slerpFlat(e, t, e, t, e, A, r);
      },
      _lerp: function (e, t, A, r, n) {
        for (var i = 1 - r, a = 0; a !== n; ++a) {
          var o = t + a;
          e[o] = e[o] * i + e[A + a] * r;
        }
      },
    });
  var Tc,
    _c,
    Uc,
    Mc,
    Sc,
    Qc,
    Lc,
    Hc,
    Ic,
    Rc,
    Pc,
    Dc,
    Oc,
    Nc,
    Gc,
    Vc,
    kc,
    zc,
    Kc,
    Xc,
    jc,
    Wc,
    Yc,
    Jc,
    Zc,
    qc,
    $c,
    eu,
    tu,
    Au,
    ru,
    nu,
    iu,
    au,
    ou,
    su = '\\[\\]\\.:\\/';
  function lu(e, t, A) {
    A = A || T.parseTrackName(t);
    (this._targetGroup = e), (this._bindings = e.subscribe_(t, A));
  }
  function T(e, t, A) {
    (this.path = t),
      (this.parsedPath = A || T.parseTrackName(t)),
      (this.node = T.findNode(e, this.parsedPath.nodeName) || e),
      (this.rootNode = e);
  }
  function cu() {
    (this.uuid = xe.generateUUID()),
      (this._objects = Array.prototype.slice.call(arguments)),
      (this.nCachedObjects_ = 0);
    var e = {};
    this._indicesByUUID = e;
    for (var t = 0, A = arguments.length; t !== A; ++t)
      e[arguments[t].uuid] = t;
    (this._paths = []),
      (this._parsedPaths = []),
      (this._bindings = []),
      (this._bindingsIndicesByPath = {});
    var r = this;
    this.stats = {
      objects: {
        get total() {
          return r._objects.length;
        },
        get inUse() {
          return this.total - r.nCachedObjects_;
        },
      },
      get bindingsPerObject() {
        return r._bindings.length;
      },
    };
  }
  function uu(e, t, A) {
    (this._mixer = e), (this._clip = t), (this._localRoot = A || null);
    for (
      var r = t.tracks,
        n = r.length,
        i = new Array(n),
        a = { endingStart: Zt, endingEnd: Zt },
        o = 0;
      o !== n;
      ++o
    ) {
      var s = r[o].createInterpolant(null);
      (i[o] = s).settings = a;
    }
    (this._interpolantSettings = a),
      (this._interpolants = i),
      (this._propertyBindings = new Array(n)),
      (this._cacheIndex = null),
      (this._byClipCacheIndex = null),
      (this._timeScaleInterpolant = null),
      (this._weightInterpolant = null),
      (this.loop = 2201),
      (this._loopCount = -1),
      (this._startTime = null),
      (this.time = 0),
      (this.timeScale = 1),
      (this._effectiveTimeScale = 1),
      (this.weight = 1),
      (this._effectiveWeight = 1),
      (this.repetitions = 1 / 0),
      (this.paused = !1),
      (this.enabled = !0),
      (this.clampWhenFinished = !1),
      (this.zeroSlopeAtStart = !0),
      (this.zeroSlopeAtEnd = !0);
  }
  function hu(e) {
    (this._root = e),
      this._initMemoryManager(),
      (this._accuIndex = 0),
      (this.time = 0),
      (this.timeScale = 1);
  }
  function du(e) {
    'string' == typeof e &&
      (console.warn('THREE.Uniform: Type parameter is no longer needed.'),
      (e = arguments[1])),
      (this.value = e);
  }
  function pu() {
    $.call(this),
      (this.type = 'InstancedBufferGeometry'),
      (this.maxInstancedCount = void 0);
  }
  function fu(e, t, A) {
    ro.call(this, e, t), (this.meshPerAttribute = A || 1);
  }
  function gu(e, t, A) {
    y.call(this, e, t), (this.meshPerAttribute = A || 1);
  }
  function mu(e, t, A, r) {
    (this.ray = new Wn(e, t)),
      (this.near = A || 0),
      (this.far = r || 1 / 0),
      (this.params = {
        Mesh: {},
        Line: {},
        LOD: {},
        Points: { threshold: 1 },
        Sprite: {},
      }),
      Object.defineProperties(this.params, {
        PointCloud: {
          get: function () {
            return (
              console.warn(
                'THREE.Raycaster: params.PointCloud has been renamed to params.Points.',
              ),
              this.Points
            );
          },
        },
      });
  }
  function vu(e, t) {
    return e.distance - t.distance;
  }
  function Bu(e, t, A, r) {
    if (!1 !== e.visible && (e.raycast(t, A), !0 === r))
      for (var n = e.children, i = 0, a = n.length; i < a; i++)
        Bu(n[i], t, A, !0);
  }
  function wu(e) {
    (this.autoStart = void 0 === e || e),
      (this.startTime = 0),
      (this.oldTime = 0),
      (this.elapsedTime = 0),
      (this.running = !1);
  }
  function yu(e, t, A) {
    return (
      (this.radius = void 0 !== e ? e : 1),
      (this.phi = void 0 !== t ? t : 0),
      (this.theta = void 0 !== A ? A : 0),
      this
    );
  }
  function Eu(e, t, A) {
    return (
      (this.radius = void 0 !== e ? e : 1),
      (this.theta = void 0 !== t ? t : 0),
      (this.y = void 0 !== A ? A : 0),
      this
    );
  }
  function xu(e, t) {
    (this.min = void 0 !== e ? e : new he(1 / 0, 1 / 0)),
      (this.max = void 0 !== t ? t : new he(-1 / 0, -1 / 0));
  }
  function bu(e, t) {
    (this.start = void 0 !== e ? e : new Ce()),
      (this.end = void 0 !== t ? t : new Ce());
  }
  function Cu(e) {
    p.call(this), (this.material = e), (this.render = function () {});
  }
  function Fu(e, t, A, r) {
    (this.object = e), (this.size = void 0 !== t ? t : 1);
    (e = void 0 !== A ? A : 16711680),
      (t = void 0 !== r ? r : 1),
      (A = 0),
      (r = this.object.geometry),
      r && r.isGeometry
        ? (A = 3 * r.faces.length)
        : r && r.isBufferGeometry && (A = r.attributes.normal.count),
      (r = new $()),
      (A = new q(2 * A * 3, 3));
    r.addAttribute('position', A),
      v.call(this, r, new m({ color: e, linewidth: t })),
      (this.matrixAutoUpdate = !1),
      this.update();
  }
  function Tu(e, t) {
    p.call(this),
      (this.light = e),
      this.light.updateMatrixWorld(),
      (this.matrix = e.matrixWorld),
      (this.matrixAutoUpdate = !1),
      (this.color = t);
    for (
      var e = new $(),
        A = [
          0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, -1, 0, 1, 0, 0, 0, 0, 1,
          1, 0, 0, 0, 0, -1, 1,
        ],
        r = 0,
        n = 1;
      r < 32;
      r++, n++
    ) {
      var i = (r / 32) * Math.PI * 2,
        a = (n / 32) * Math.PI * 2;
      A.push(Math.cos(i), Math.sin(i), 1, Math.cos(a), Math.sin(a), 1);
    }
    e.addAttribute('position', new q(A, 3));
    t = new m({ fog: !1 });
    (this.cone = new v(e, t)), this.add(this.cone), this.update();
  }
  function _u(e) {
    for (
      var t = (function e(t) {
          var A = [];
          t && t.isBone && A.push(t);
          for (var r = 0; r < t.children.length; r++)
            A.push.apply(A, e(t.children[r]));
          return A;
        })(e),
        A = new $(),
        r = [],
        n = [],
        i = new de(0, 0, 1),
        a = new de(0, 1, 0),
        o = 0;
      o < t.length;
      o++
    ) {
      var s = t[o];
      s.parent &&
        s.parent.isBone &&
        (r.push(0, 0, 0),
        r.push(0, 0, 0),
        n.push(i.r, i.g, i.b),
        n.push(a.r, a.g, a.b));
    }
    A.addAttribute('position', new q(r, 3)),
      A.addAttribute('color', new q(n, 3));
    var l = new m({
      vertexColors: 2,
      depthTest: !1,
      depthWrite: !1,
      transparent: !0,
    });
    v.call(this, A, l),
      (this.root = e),
      (this.bones = t),
      (this.matrix = e.matrixWorld),
      (this.matrixAutoUpdate = !1);
  }
  function Uu(e, t, A) {
    (this.light = e), this.light.updateMatrixWorld(), (this.color = A);
    (e = new ls(t, 4, 2)), (A = new Xn({ wireframe: !0, fog: !1 }));
    f.call(this, e, A),
      (this.matrix = this.light.matrixWorld),
      (this.matrixAutoUpdate = !1),
      this.update();
  }
  function Mu(e, t) {
    p.call(this),
      (this.light = e),
      this.light.updateMatrixWorld(),
      (this.matrix = e.matrixWorld),
      (this.matrixAutoUpdate = !1),
      (this.color = t);
    (e = new m({ fog: !1 })), (t = new $());
    t.addAttribute('position', new y(new Float32Array(15), 3)),
      (this.line = new g(t, e)),
      this.add(this.line),
      this.update();
  }
  function Su(e, t, A) {
    p.call(this),
      (this.light = e),
      this.light.updateMatrixWorld(),
      (this.matrix = e.matrixWorld),
      (this.matrixAutoUpdate = !1),
      (this.color = A);
    (e = new _o(t)),
      e.rotateY(0.5 * Math.PI),
      (this.material = new Xn({ wireframe: !0, fog: !1 })),
      void 0 === this.color && (this.material.vertexColors = 2),
      (A = e.getAttribute('position')),
      (t = new Float32Array(3 * A.count));
    e.addAttribute('color', new y(t, 3)),
      this.add(new f(e, this.material)),
      this.update();
  }
  function Qu(e, t, A, r) {
    (e = e || 10),
      (t = t || 10),
      (A = new de(void 0 !== A ? A : 4473924)),
      (r = new de(void 0 !== r ? r : 8947848));
    for (
      var n = t / 2, i = e / t, a = e / 2, o = [], s = [], l = 0, c = 0, u = -a;
      l <= t;
      l++, u += i
    ) {
      o.push(-a, 0, u, a, 0, u), o.push(u, 0, -a, u, 0, a);
      var h = l === n ? A : r;
      h.toArray(s, c),
        (c += 3),
        h.toArray(s, c),
        (c += 3),
        h.toArray(s, c),
        (c += 3),
        h.toArray(s, c),
        (c += 3);
    }
    var e = new $(),
      d =
        (e.addAttribute('position', new q(o, 3)),
        e.addAttribute('color', new q(s, 3)),
        new m({ vertexColors: 2 }));
    v.call(this, e, d);
  }
  function Lu(e, t, A, r, n, i) {
    (e = e || 10),
      (t = t || 16),
      (A = A || 8),
      (r = r || 64),
      (n = new de(void 0 !== n ? n : 4473924)),
      (i = new de(void 0 !== i ? i : 8947848));
    for (var a, o, s, l, c, u, h = [], d = [], p = 0; p <= t; p++)
      (s = (p / t) * (2 * Math.PI)),
        (a = Math.sin(s) * e),
        (o = Math.cos(s) * e),
        h.push(0, 0, 0),
        h.push(a, 0, o),
        d.push((u = 1 & p ? n : i).r, u.g, u.b),
        d.push(u.r, u.g, u.b);
    for (p = 0; p <= A; p++)
      for (u = 1 & p ? n : i, c = e - (e / A) * p, l = 0; l < r; l++)
        (s = (l / r) * (2 * Math.PI)),
          (a = Math.sin(s) * c),
          (o = Math.cos(s) * c),
          h.push(a, 0, o),
          d.push(u.r, u.g, u.b),
          (s = ((l + 1) / r) * (2 * Math.PI)),
          (a = Math.sin(s) * c),
          (o = Math.cos(s) * c),
          h.push(a, 0, o),
          d.push(u.r, u.g, u.b);
    var f = new $(),
      g =
        (f.addAttribute('position', new q(h, 3)),
        f.addAttribute('color', new q(d, 3)),
        new m({ vertexColors: 2 }));
    v.call(this, f, g);
  }
  function Hu(e, t, A, r) {
    (this.object = e), (this.size = void 0 !== t ? t : 1);
    (e = void 0 !== A ? A : 16776960),
      (t = void 0 !== r ? r : 1),
      (A = 0),
      (r = this.object.geometry),
      r && r.isGeometry
        ? (A = r.faces.length)
        : console.warn(
            'THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.',
          ),
      (r = new $()),
      (A = new q(2 * A * 3, 3));
    r.addAttribute('position', A),
      v.call(this, r, new m({ color: e, linewidth: t })),
      (this.matrixAutoUpdate = !1),
      this.update();
  }
  function Iu(e, t, A) {
    p.call(this),
      (this.light = e),
      this.light.updateMatrixWorld(),
      (this.matrix = e.matrixWorld),
      (this.matrixAutoUpdate = !1),
      (this.color = A),
      void 0 === t && (t = 1);
    (e = new $()),
      e.addAttribute(
        'position',
        new q([-t, t, 0, t, t, 0, t, -t, 0, -t, -t, 0, -t, t, 0], 3),
      ),
      (A = new m({ fog: !1 }));
    (this.lightPlane = new g(e, A)),
      this.add(this.lightPlane),
      (e = new $()).addAttribute('position', new q([0, 0, 0, 0, 0, 1], 3)),
      (this.targetLine = new g(e, A)),
      this.add(this.targetLine),
      this.update();
  }
  function Ru(e) {
    var t = new $(),
      A = new m({ color: 16777215, vertexColors: 1 }),
      r = [],
      n = [],
      i = {},
      a = new de(16755200),
      o = new de(16711680),
      s = new de(43775),
      l = new de(16777215),
      c = new de(3355443);
    function u(e, t, A) {
      h(e, A), h(t, A);
    }
    function h(e, t) {
      r.push(0, 0, 0),
        n.push(t.r, t.g, t.b),
        void 0 === i[e] && (i[e] = []),
        i[e].push(r.length / 3 - 1);
    }
    u('n1', 'n2', a),
      u('n2', 'n4', a),
      u('n4', 'n3', a),
      u('n3', 'n1', a),
      u('f1', 'f2', a),
      u('f2', 'f4', a),
      u('f4', 'f3', a),
      u('f3', 'f1', a),
      u('n1', 'f1', a),
      u('n2', 'f2', a),
      u('n3', 'f3', a),
      u('n4', 'f4', a),
      u('p', 'n1', o),
      u('p', 'n2', o),
      u('p', 'n3', o),
      u('p', 'n4', o),
      u('u1', 'u2', s),
      u('u2', 'u3', s),
      u('u3', 'u1', s),
      u('c', 't', l),
      u('p', 'c', c),
      u('cn1', 'cn2', c),
      u('cn3', 'cn4', c),
      u('cf1', 'cf2', c),
      u('cf3', 'cf4', c),
      t.addAttribute('position', new q(r, 3)),
      t.addAttribute('color', new q(n, 3)),
      v.call(this, t, A),
      (this.camera = e),
      this.camera.updateProjectionMatrix &&
        this.camera.updateProjectionMatrix(),
      (this.matrix = e.matrixWorld),
      (this.matrixAutoUpdate = !1),
      (this.pointMap = i),
      this.update();
  }
  function A(e, t, A, r) {
    tu.set(t, A, r).unproject(Au);
    var n = eu[e];
    if (void 0 !== n)
      for (var i = $c.getAttribute('position'), a = 0, o = n.length; a < o; a++)
        i.setXYZ(n[a], tu.x, tu.y, tu.z);
  }
  function Pu(e, t) {
    (this.object = e), void 0 === t && (t = 16776960);
    var e = new Uint16Array([
        0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7,
      ]),
      A = new Float32Array(24),
      r = new $();
    r.setIndex(new y(e, 1)),
      r.addAttribute('position', new y(A, 3)),
      v.call(this, r, new m({ color: t })),
      (this.matrixAutoUpdate = !1),
      this.update();
  }
  function Du(e, t) {
    (this.type = 'Box3Helper'), (this.box = e);
    var e = void 0 !== t ? t : 16776960,
      t = new Uint16Array([
        0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7,
      ]),
      A = new $();
    A.setIndex(new y(t, 1)),
      A.addAttribute(
        'position',
        new q(
          [
            1, 1, 1, -1, 1, 1, -1, -1, 1, 1, -1, 1, 1, 1, -1, -1, 1, -1, -1, -1,
            -1, 1, -1, -1,
          ],
          3,
        ),
      ),
      v.call(this, A, new m({ color: e })),
      this.geometry.computeBoundingSphere();
  }
  function Ou(e, t, A) {
    (this.type = 'PlaneHelper'),
      (this.plane = e),
      (this.size = void 0 === t ? 1 : t);
    (e = void 0 !== A ? A : 16776960),
      (t = new $()),
      t.addAttribute(
        'position',
        new q(
          [
            1, -1, 1, -1, 1, 1, -1, -1, 1, 1, 1, 1, -1, 1, 1, -1, -1, 1, 1, -1,
            1, 1, 1, 1, 0, 0, 1, 0, 0, 0,
          ],
          3,
        ),
      ),
      t.computeBoundingSphere(),
      g.call(this, t, new m({ color: e })),
      (A = new $());
    A.addAttribute(
      'position',
      new q([1, 1, 1, -1, 1, 1, -1, -1, 1, 1, 1, 1, -1, -1, 1, 1, -1, 1], 3),
    ),
      A.computeBoundingSphere(),
      this.add(
        new f(
          A,
          new Xn({ color: e, opacity: 0.2, transparent: !0, depthWrite: !1 }),
        ),
      );
  }
  function Nu(e, t, A, r, n, i) {
    p.call(this),
      void 0 === r && (r = 16776960),
      void 0 === A && (A = 1),
      void 0 === n && (n = 0.2 * A),
      void 0 === i && (i = 0.2 * n),
      void 0 === nu &&
        ((nu = new $()).addAttribute('position', new q([0, 0, 0, 0, 1, 0], 3)),
        (iu = new Bs(0, 0.5, 1, 5, 1)).translate(0, -0.5, 0)),
      this.position.copy(t),
      (this.line = new g(nu, new m({ color: r }))),
      (this.line.matrixAutoUpdate = !1),
      this.add(this.line),
      (this.cone = new f(iu, new Xn({ color: r }))),
      (this.cone.matrixAutoUpdate = !1),
      this.add(this.cone),
      this.setDirection(e),
      this.setLength(A, n, i);
  }
  function Gu(e) {
    var e = [0, 0, 0, (e = e || 1), 0, 0, 0, 0, 0, 0, e, 0, 0, 0, 0, 0, 0, e],
      t = new $(),
      e =
        (t.addAttribute('position', new q(e, 3)),
        t.addAttribute(
          'color',
          new q(
            [1, 0, 0, 1, 0.6, 0, 0, 1, 0, 0.6, 1, 0, 0, 0, 1, 0, 0.6, 1],
            3,
          ),
        ),
        new m({ vertexColors: 2 }));
    v.call(this, t, e);
  }
  Object.assign(lu.prototype, {
    getValue: function (e, t) {
      this.bind();
      var A = this._targetGroup.nCachedObjects_,
        A = this._bindings[A];
      void 0 !== A && A.getValue(e, t);
    },
    setValue: function (e, t) {
      for (
        var A = this._bindings,
          r = this._targetGroup.nCachedObjects_,
          n = A.length;
        r !== n;
        ++r
      )
        A[r].setValue(e, t);
    },
    bind: function () {
      for (
        var e = this._bindings,
          t = this._targetGroup.nCachedObjects_,
          A = e.length;
        t !== A;
        ++t
      )
        e[t].bind();
    },
    unbind: function () {
      for (
        var e = this._bindings,
          t = this._targetGroup.nCachedObjects_,
          A = e.length;
        t !== A;
        ++t
      )
        e[t].unbind();
    },
  }),
    Object.assign(T, {
      Composite: lu,
      create: function (e, t, A) {
        return new (e && e.isAnimationObjectGroup ? T.Composite : T)(e, t, A);
      },
      sanitizeNodeName:
        ((Sc = new RegExp('[' + su + ']', 'g')),
        function (e) {
          return e.replace(/\s/g, '_').replace(Sc, '');
        }),
      parseTrackName:
        ((Tc = '[^' + su + ']'),
        (su = '[^' + su.replace('\\.', '') + ']'),
        (Xu = /((?:WC+[\/:])*)/.source.replace('WC', Tc)),
        (su = /(WCOD+)?/.source.replace('WCOD', su)),
        (_c = /(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace('WC', Tc)),
        (Tc = /\.(WC+)(?:\[(.+)\])?/.source.replace('WC', Tc)),
        (Uc = new RegExp('^' + Xu + su + _c + Tc + '$')),
        (Mc = ['material', 'materials', 'bones']),
        function (e) {
          var t = Uc.exec(e);
          if (!t)
            throw new Error('PropertyBinding: Cannot parse trackName: ' + e);
          var A,
            t = {
              nodeName: t[2],
              objectName: t[3],
              objectIndex: t[4],
              propertyName: t[5],
              propertyIndex: t[6],
            },
            r = t.nodeName && t.nodeName.lastIndexOf('.');
          if (
            (void 0 !== r &&
              -1 !== r &&
              ((A = t.nodeName.substring(r + 1)), -1 !== Mc.indexOf(A)) &&
              ((t.nodeName = t.nodeName.substring(0, r)), (t.objectName = A)),
            null === t.propertyName || 0 === t.propertyName.length)
          )
            throw new Error(
              'PropertyBinding: can not parse propertyName from trackName: ' +
                e,
            );
          return t;
        }),
      findNode: function (e, r) {
        if (
          !r ||
          '' === r ||
          'root' === r ||
          '.' === r ||
          -1 === r ||
          r === e.name ||
          r === e.uuid
        )
          return e;
        if (e.skeleton) {
          var t = e.skeleton.getBoneByName(r);
          if (void 0 !== t) return t;
        }
        if (e.children) {
          var n = function (e) {
              for (var t = 0; t < e.length; t++) {
                var A = e[t];
                if (A.name === r || A.uuid === r) return A;
                A = n(A.children);
                if (A) return A;
              }
              return null;
            },
            t = n(e.children);
          if (t) return t;
        }
        return null;
      },
    }),
    Object.assign(T.prototype, {
      _getValue_unavailable: function () {},
      _setValue_unavailable: function () {},
      BindingType: {
        Direct: 0,
        EntireArray: 1,
        ArrayElement: 2,
        HasFromToArray: 3,
      },
      Versioning: { None: 0, NeedsUpdate: 1, MatrixWorldNeedsUpdate: 2 },
      GetterByBindingType: [
        function (e, t) {
          e[t] = this.node[this.propertyName];
        },
        function (e, t) {
          for (var A = this.resolvedProperty, r = 0, n = A.length; r !== n; ++r)
            e[t++] = A[r];
        },
        function (e, t) {
          e[t] = this.resolvedProperty[this.propertyIndex];
        },
        function (e, t) {
          this.resolvedProperty.toArray(e, t);
        },
      ],
      SetterByBindingTypeAndVersioning: [
        [
          function (e, t) {
            this.targetObject[this.propertyName] = e[t];
          },
          function (e, t) {
            (this.targetObject[this.propertyName] = e[t]),
              (this.targetObject.needsUpdate = !0);
          },
          function (e, t) {
            (this.targetObject[this.propertyName] = e[t]),
              (this.targetObject.matrixWorldNeedsUpdate = !0);
          },
        ],
        [
          function (e, t) {
            for (
              var A = this.resolvedProperty, r = 0, n = A.length;
              r !== n;
              ++r
            )
              A[r] = e[t++];
          },
          function (e, t) {
            for (
              var A = this.resolvedProperty, r = 0, n = A.length;
              r !== n;
              ++r
            )
              A[r] = e[t++];
            this.targetObject.needsUpdate = !0;
          },
          function (e, t) {
            for (
              var A = this.resolvedProperty, r = 0, n = A.length;
              r !== n;
              ++r
            )
              A[r] = e[t++];
            this.targetObject.matrixWorldNeedsUpdate = !0;
          },
        ],
        [
          function (e, t) {
            this.resolvedProperty[this.propertyIndex] = e[t];
          },
          function (e, t) {
            (this.resolvedProperty[this.propertyIndex] = e[t]),
              (this.targetObject.needsUpdate = !0);
          },
          function (e, t) {
            (this.resolvedProperty[this.propertyIndex] = e[t]),
              (this.targetObject.matrixWorldNeedsUpdate = !0);
          },
        ],
        [
          function (e, t) {
            this.resolvedProperty.fromArray(e, t);
          },
          function (e, t) {
            this.resolvedProperty.fromArray(e, t),
              (this.targetObject.needsUpdate = !0);
          },
          function (e, t) {
            this.resolvedProperty.fromArray(e, t),
              (this.targetObject.matrixWorldNeedsUpdate = !0);
          },
        ],
      ],
      getValue: function (e, t) {
        this.bind(), this.getValue(e, t);
      },
      setValue: function (e, t) {
        this.bind(), this.setValue(e, t);
      },
      bind: function () {
        var e = this.node,
          t = this.parsedPath,
          A = t.objectName,
          r = t.propertyName,
          n = t.propertyIndex;
        if (
          (e ||
            ((e = T.findNode(this.rootNode, t.nodeName) || this.rootNode),
            (this.node = e)),
          (this.getValue = this._getValue_unavailable),
          (this.setValue = this._setValue_unavailable),
          e)
        ) {
          if (A) {
            var i = t.objectIndex;
            switch (A) {
              case 'materials':
                if (!e.material)
                  return void console.error(
                    'THREE.PropertyBinding: Can not bind to material as node does not have a material.',
                    this,
                  );
                if (!e.material.materials)
                  return void console.error(
                    'THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.',
                    this,
                  );
                e = e.material.materials;
                break;
              case 'bones':
                if (!e.skeleton)
                  return void console.error(
                    'THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.',
                    this,
                  );
                for (var e = e.skeleton.bones, a = 0; a < e.length; a++)
                  if (e[a].name === i) {
                    i = a;
                    break;
                  }
                break;
              default:
                if (void 0 === e[A])
                  return void console.error(
                    'THREE.PropertyBinding: Can not bind to objectName of node undefined.',
                    this,
                  );
                e = e[A];
            }
            if (void 0 !== i) {
              if (void 0 === e[i])
                return void console.error(
                  'THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.',
                  this,
                  e,
                );
              e = e[i];
            }
          }
          var o = e[r];
          if (void 0 === o)
            (t = t.nodeName),
              console.error(
                'THREE.PropertyBinding: Trying to update property for track: ' +
                  t +
                  '.' +
                  r +
                  " but it wasn't found.",
                e,
              );
          else {
            var t = this.Versioning.None,
              s =
                (void 0 !== e.needsUpdate
                  ? ((t = this.Versioning.NeedsUpdate), (this.targetObject = e))
                  : void 0 !== e.matrixWorldNeedsUpdate &&
                    ((t = this.Versioning.MatrixWorldNeedsUpdate),
                    (this.targetObject = e)),
                this.BindingType.Direct);
            if (void 0 !== n) {
              if ('morphTargetInfluences' === r) {
                if (!e.geometry)
                  return void console.error(
                    'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.',
                    this,
                  );
                if (e.geometry.isBufferGeometry) {
                  if (!e.geometry.morphAttributes)
                    return void console.error(
                      'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.',
                      this,
                    );
                  for (
                    a = 0;
                    a < this.node.geometry.morphAttributes.position.length;
                    a++
                  )
                    if (e.geometry.morphAttributes.position[a].name === n) {
                      n = a;
                      break;
                    }
                } else {
                  if (!e.geometry.morphTargets)
                    return void console.error(
                      'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.',
                      this,
                    );
                  for (a = 0; a < this.node.geometry.morphTargets.length; a++)
                    if (e.geometry.morphTargets[a].name === n) {
                      n = a;
                      break;
                    }
                }
              }
              (s = this.BindingType.ArrayElement),
                (this.resolvedProperty = o),
                (this.propertyIndex = n);
            } else
              void 0 !== o.fromArray && void 0 !== o.toArray
                ? ((s = this.BindingType.HasFromToArray),
                  (this.resolvedProperty = o))
                : Array.isArray(o)
                ? ((s = this.BindingType.EntireArray),
                  (this.resolvedProperty = o))
                : (this.propertyName = r);
            (this.getValue = this.GetterByBindingType[s]),
              (this.setValue = this.SetterByBindingTypeAndVersioning[s][t]);
          }
        } else
          console.error(
            'THREE.PropertyBinding: Trying to update node for track: ' +
              this.path +
              " but it wasn't found.",
          );
      },
      unbind: function () {
        (this.node = null),
          (this.getValue = this._getValue_unbound),
          (this.setValue = this._setValue_unbound);
      },
    }),
    Object.assign(T.prototype, {
      _getValue_unbound: T.prototype.getValue,
      _setValue_unbound: T.prototype.setValue,
    }),
    Object.assign(cu.prototype, {
      isAnimationObjectGroup: !0,
      add: function () {
        for (
          var e = this._objects,
            t = e.length,
            A = this.nCachedObjects_,
            r = this._indicesByUUID,
            n = this._paths,
            i = this._parsedPaths,
            a = this._bindings,
            o = a.length,
            s = void 0,
            l = 0,
            c = arguments.length;
          l !== c;
          ++l
        ) {
          var u = arguments[l],
            h = u.uuid,
            d = r[h];
          if (void 0 === d) {
            (d = t++), (r[h] = d), e.push(u);
            for (var p = 0, f = o; p !== f; ++p)
              a[p].push(new T(u, n[p], i[p]));
          } else if (d < A) {
            var s = e[d],
              g = --A,
              m = e[g];
            (e[(r[m.uuid] = d)] = m), (e[(r[h] = g)] = u);
            for (p = 0, f = o; p !== f; ++p) {
              var v = a[p],
                B = v[g],
                w = v[d];
              (v[d] = B),
                void 0 === w && (w = new T(u, n[p], i[p])),
                (v[g] = w);
            }
          } else
            e[d] !== s &&
              console.error(
                'THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.',
              );
        }
        this.nCachedObjects_ = A;
      },
      remove: function () {
        for (
          var e = this._objects,
            t = this.nCachedObjects_,
            A = this._indicesByUUID,
            r = this._bindings,
            n = r.length,
            i = 0,
            a = arguments.length;
          i !== a;
          ++i
        ) {
          var o = arguments[i],
            s = o.uuid,
            l = A[s];
          if (void 0 !== l && t <= l) {
            var c = t++,
              u = e[c];
            (e[(A[u.uuid] = l)] = u), (e[(A[s] = c)] = o);
            for (var h = 0, d = n; h !== d; ++h) {
              var p = r[h],
                f = p[c],
                g = p[l];
              (p[l] = f), (p[c] = g);
            }
          }
        }
        this.nCachedObjects_ = t;
      },
      uncache: function () {
        for (
          var e = this._objects,
            t = e.length,
            A = this.nCachedObjects_,
            r = this._indicesByUUID,
            n = this._bindings,
            i = n.length,
            a = 0,
            o = arguments.length;
          a !== o;
          ++a
        ) {
          var s = arguments[a].uuid,
            l = r[s];
          if (void 0 !== l)
            if ((delete r[s], l < A)) {
              var c,
                u = --A,
                s = e[u],
                h = e[(c = --t)];
              (e[(r[s.uuid] = l)] = s), (e[(r[h.uuid] = u)] = h), e.pop();
              for (var d = 0, p = i; d !== p; ++d) {
                var f = (m = n[d])[u],
                  g = m[c];
                (m[l] = f), (m[u] = g), m.pop();
              }
            } else {
              (e[(r[(h = e[(c = --t)]).uuid] = l)] = h), e.pop();
              for (var m, d = 0, p = i; d !== p; ++d)
                ((m = n[d])[l] = m[c]), m.pop();
            }
        }
        this.nCachedObjects_ = A;
      },
      subscribe_: function (e, t) {
        var A = this._bindingsIndicesByPath,
          r = A[e],
          n = this._bindings;
        if (void 0 !== r) return n[r];
        var i = this._paths,
          a = this._parsedPaths,
          o = this._objects,
          s = o.length,
          l = this.nCachedObjects_,
          c = new Array(s),
          r = n.length;
        (A[e] = r), i.push(e), a.push(t), n.push(c);
        for (var u = l, h = o.length; u !== h; ++u) {
          var d = o[u];
          c[u] = new T(d, e, t);
        }
        return c;
      },
      unsubscribe_: function (e) {
        var t,
          A,
          r,
          n,
          i,
          a = this._bindingsIndicesByPath,
          o = a[e];
        void 0 !== o &&
          ((t = this._paths),
          (A = this._parsedPaths),
          (i = (r = this._bindings)[(n = r.length - 1)]),
          (r[(a[e[n]] = o)] = i),
          r.pop(),
          (A[o] = A[n]),
          A.pop(),
          (t[o] = t[n]),
          t.pop());
      },
    }),
    Object.assign(uu.prototype, {
      play: function () {
        return this._mixer._activateAction(this), this;
      },
      stop: function () {
        return this._mixer._deactivateAction(this), this.reset();
      },
      reset: function () {
        return (
          (this.paused = !1),
          (this.enabled = !0),
          (this.time = 0),
          (this._loopCount = -1),
          (this._startTime = null),
          this.stopFading().stopWarping()
        );
      },
      isRunning: function () {
        return (
          this.enabled &&
          !this.paused &&
          0 !== this.timeScale &&
          null === this._startTime &&
          this._mixer._isActiveAction(this)
        );
      },
      isScheduled: function () {
        return this._mixer._isActiveAction(this);
      },
      startAt: function (e) {
        return (this._startTime = e), this;
      },
      setLoop: function (e, t) {
        return (this.loop = e), (this.repetitions = t), this;
      },
      setEffectiveWeight: function (e) {
        return (
          (this.weight = e),
          (this._effectiveWeight = this.enabled ? e : 0),
          this.stopFading()
        );
      },
      getEffectiveWeight: function () {
        return this._effectiveWeight;
      },
      fadeIn: function (e) {
        return this._scheduleFading(e, 0, 1);
      },
      fadeOut: function (e) {
        return this._scheduleFading(e, 1, 0);
      },
      crossFadeFrom: function (e, t, A) {
        var r, n;
        return (
          e.fadeOut(t),
          this.fadeIn(t),
          A &&
            ((n = (A = this._clip.duration) / (r = e._clip.duration)),
            e.warp(1, r / A, t),
            this.warp(n, 1, t)),
          this
        );
      },
      crossFadeTo: function (e, t, A) {
        return e.crossFadeFrom(this, t, A);
      },
      stopFading: function () {
        var e = this._weightInterpolant;
        return (
          null !== e &&
            ((this._weightInterpolant = null),
            this._mixer._takeBackControlInterpolant(e)),
          this
        );
      },
      setEffectiveTimeScale: function (e) {
        return (
          (this.timeScale = e),
          (this._effectiveTimeScale = this.paused ? 0 : e),
          this.stopWarping()
        );
      },
      getEffectiveTimeScale: function () {
        return this._effectiveTimeScale;
      },
      setDuration: function (e) {
        return (this.timeScale = this._clip.duration / e), this.stopWarping();
      },
      syncWith: function (e) {
        return (
          (this.time = e.time),
          (this.timeScale = e.timeScale),
          this.stopWarping()
        );
      },
      halt: function (e) {
        return this.warp(this._effectiveTimeScale, 0, e);
      },
      warp: function (e, t, A) {
        var r = this._mixer,
          n = r.time,
          i = this._timeScaleInterpolant,
          a = this.timeScale,
          r =
            (null === i &&
              ((i = r._lendControlInterpolant()),
              (this._timeScaleInterpolant = i)),
            i.parameterPositions),
          i = i.sampleValues;
        return (r[0] = n), (r[1] = n + A), (i[0] = e / a), (i[1] = t / a), this;
      },
      stopWarping: function () {
        var e = this._timeScaleInterpolant;
        return (
          null !== e &&
            ((this._timeScaleInterpolant = null),
            this._mixer._takeBackControlInterpolant(e)),
          this
        );
      },
      getMixer: function () {
        return this._mixer;
      },
      getClip: function () {
        return this._clip;
      },
      getRoot: function () {
        return this._localRoot || this._mixer._root;
      },
      _update: function (e, t, A, r) {
        if (this.enabled) {
          var n = this._startTime;
          if (null !== n) {
            n = (e - n) * A;
            if (n < 0 || 0 === A) return;
            (this._startTime = null), (t = A * n);
          }
          t *= this._updateTimeScale(e);
          var i = this._updateTime(t),
            a = this._updateWeight(e);
          if (0 < a)
            for (
              var o = this._interpolants,
                s = this._propertyBindings,
                l = 0,
                c = o.length;
              l !== c;
              ++l
            )
              o[l].evaluate(i), s[l].accumulate(r, a);
        } else this._updateWeight(e);
      },
      _updateWeight: function (e) {
        var t,
          A,
          r = 0;
        return (
          this.enabled &&
            ((r = this.weight), null !== (t = this._weightInterpolant)) &&
            ((r *= A = t.evaluate(e)[0]), e > t.parameterPositions[1]) &&
            (this.stopFading(), 0 === A) &&
            (this.enabled = !1),
          (this._effectiveWeight = r)
        );
      },
      _updateTimeScale: function (e) {
        var t,
          A = 0;
        return (
          this.paused ||
            ((A = this.timeScale),
            null !== (t = this._timeScaleInterpolant) &&
              ((A *= t.evaluate(e)[0]), e > t.parameterPositions[1]) &&
              (this.stopWarping(),
              0 === A ? (this.paused = !0) : (this.timeScale = A))),
          (this._effectiveTimeScale = A)
        );
      },
      _updateTime: function (e) {
        var t,
          A = this.time + e,
          r = this._clip.duration,
          n = this.loop,
          i = this._loopCount,
          a = 2202 === n;
        if (0 === e) return -1 !== i && a && 1 == (1 & i) ? r - A : A;
        if (2200 === n) {
          -1 === i && ((this._loopCount = 0), this._setEndings(!0, !0, !1));
          e: {
            if (r <= A) A = r;
            else {
              if (!(A < 0)) break e;
              A = 0;
            }
            this.clampWhenFinished ? (this.paused = !0) : (this.enabled = !1),
              this._mixer.dispatchEvent({
                type: 'finished',
                action: this,
                direction: e < 0 ? -1 : 1,
              });
          }
        } else if (
          (-1 === i &&
            (0 <= e
              ? this._setEndings(!(i = 0), 0 === this.repetitions, a)
              : this._setEndings(0 === this.repetitions, !0, a)),
          (r <= A || A < 0) &&
            ((A -= r * (n = Math.floor(A / r))),
            (i += Math.abs(n)),
            (t = this.repetitions - i) <= 0
              ? (this.clampWhenFinished
                  ? (this.paused = !0)
                  : (this.enabled = !1),
                (A = 0 < e ? r : 0),
                this._mixer.dispatchEvent({
                  type: 'finished',
                  action: this,
                  direction: 0 < e ? 1 : -1,
                }))
              : (1 == t
                  ? this._setEndings((t = e < 0), !t, a)
                  : this._setEndings(!1, !1, a),
                (this._loopCount = i),
                this._mixer.dispatchEvent({
                  type: 'loop',
                  action: this,
                  loopDelta: n,
                }))),
          a && 1 == (1 & i))
        )
          return r - (this.time = A);
        return (this.time = A);
      },
      _setEndings: function (e, t, A) {
        var r = this._interpolantSettings;
        A
          ? ((r.endingStart = qt), (r.endingEnd = qt))
          : ((r.endingStart = e ? (this.zeroSlopeAtStart ? qt : Zt) : $t),
            (r.endingEnd = t ? (this.zeroSlopeAtEnd ? qt : Zt) : $t));
      },
      _scheduleFading: function (e, t, A) {
        var r = this._mixer,
          n = r.time,
          i = this._weightInterpolant,
          r =
            (null === i &&
              ((i = r._lendControlInterpolant()),
              (this._weightInterpolant = i)),
            i.parameterPositions),
          i = i.sampleValues;
        return (r[0] = n), (i[0] = t), (r[1] = n + e), (i[1] = A), this;
      },
    }),
    (hu.prototype = Object.assign(Object.create(r.prototype), {
      constructor: hu,
      _bindAction: function (e, t) {
        var A = e._localRoot || this._root,
          r = e._clip.tracks,
          n = r.length,
          i = e._propertyBindings,
          a = e._interpolants,
          o = A.uuid,
          e = this._bindingsByRootAndName,
          s = e[o];
        void 0 === s && (e[o] = s = {});
        for (var l = 0; l !== n; ++l) {
          var c = r[l],
            u = c.name,
            h = s[u];
          if (void 0 === h) {
            if (void 0 !== (h = i[l])) {
              null === h._cacheIndex &&
                (++h.referenceCount, this._addInactiveBinding(h, o, u));
              continue;
            }
            var d = t && t._propertyBindings[l].binding.parsedPath;
            ++(h = new Fc(T.create(A, u, d), c.ValueTypeName, c.getValueSize()))
              .referenceCount,
              this._addInactiveBinding(h, o, u);
          }
          (i[l] = h), (a[l].resultBuffer = h.buffer);
        }
      },
      _activateAction: function (e) {
        if (!this._isActiveAction(e)) {
          null === e._cacheIndex &&
            ((t = (e._localRoot || this._root).uuid),
            (A = e._clip.uuid),
            (r = this._actionsByClip[A]),
            this._bindAction(e, r && r.knownActions[0]),
            this._addInactiveAction(e, A, t));
          for (
            var t, A, r, n = e._propertyBindings, i = 0, a = n.length;
            i !== a;
            ++i
          ) {
            var o = n[i];
            0 == o.useCount++ && (this._lendBinding(o), o.saveOriginalState());
          }
          this._lendAction(e);
        }
      },
      _deactivateAction: function (e) {
        if (this._isActiveAction(e)) {
          for (var t = e._propertyBindings, A = 0, r = t.length; A !== r; ++A) {
            var n = t[A];
            0 == --n.useCount &&
              (n.restoreOriginalState(), this._takeBackBinding(n));
          }
          this._takeBackAction(e);
        }
      },
      _initMemoryManager: function () {
        (this._actions = []),
          (this._nActiveActions = 0),
          (this._actionsByClip = {}),
          (this._bindings = []),
          (this._nActiveBindings = 0),
          (this._bindingsByRootAndName = {}),
          (this._controlInterpolants = []),
          (this._nActiveControlInterpolants = 0);
        var e = this;
        this.stats = {
          actions: {
            get total() {
              return e._actions.length;
            },
            get inUse() {
              return e._nActiveActions;
            },
          },
          bindings: {
            get total() {
              return e._bindings.length;
            },
            get inUse() {
              return e._nActiveBindings;
            },
          },
          controlInterpolants: {
            get total() {
              return e._controlInterpolants.length;
            },
            get inUse() {
              return e._nActiveControlInterpolants;
            },
          },
        };
      },
      _isActiveAction: function (e) {
        e = e._cacheIndex;
        return null !== e && e < this._nActiveActions;
      },
      _addInactiveAction: function (e, t, A) {
        var r = this._actions,
          n = this._actionsByClip,
          i = n[t];
        void 0 === i
          ? ((i = { knownActions: [e], actionByRoot: {} }),
            (e._byClipCacheIndex = 0),
            (n[t] = i))
          : ((n = i.knownActions), (e._byClipCacheIndex = n.length), n.push(e)),
          (e._cacheIndex = r.length),
          r.push(e),
          (i.actionByRoot[A] = e);
      },
      _removeInactiveAction: function (e) {
        var t = this._actions,
          A = t[t.length - 1],
          r = e._cacheIndex,
          r =
            ((t[(A._cacheIndex = r)] = A),
            t.pop(),
            (e._cacheIndex = null),
            e._clip.uuid),
          A = this._actionsByClip,
          t = A[r],
          n = t.knownActions,
          i = n[n.length - 1],
          a = e._byClipCacheIndex;
        (n[(i._byClipCacheIndex = a)] = i),
          n.pop(),
          (e._byClipCacheIndex = null),
          delete t.actionByRoot[(e._localRoot || this._root).uuid],
          0 === n.length && delete A[r],
          this._removeInactiveBindingsForAction(e);
      },
      _removeInactiveBindingsForAction: function (e) {
        for (var t = e._propertyBindings, A = 0, r = t.length; A !== r; ++A) {
          var n = t[A];
          0 == --n.referenceCount && this._removeInactiveBinding(n);
        }
      },
      _lendAction: function (e) {
        var t = this._actions,
          A = e._cacheIndex,
          r = this._nActiveActions++,
          n = t[r];
        (t[(e._cacheIndex = r)] = e), (t[(n._cacheIndex = A)] = n);
      },
      _takeBackAction: function (e) {
        var t = this._actions,
          A = e._cacheIndex,
          r = --this._nActiveActions,
          n = t[r];
        (t[(e._cacheIndex = r)] = e), (t[(n._cacheIndex = A)] = n);
      },
      _addInactiveBinding: function (e, t, A) {
        var r = this._bindingsByRootAndName,
          n = r[t],
          i = this._bindings;
        void 0 === n && (r[t] = n = {}),
          ((n[A] = e)._cacheIndex = i.length),
          i.push(e);
      },
      _removeInactiveBinding: function (e) {
        var t = this._bindings,
          A = e.binding,
          r = A.rootNode.uuid,
          A = A.path,
          n = this._bindingsByRootAndName,
          i = n[r],
          a = t[t.length - 1],
          e = e._cacheIndex;
        (t[(a._cacheIndex = e)] = a), t.pop(), delete i[A];
        e: {
          for (var o in i) break e;
          delete n[r];
        }
      },
      _lendBinding: function (e) {
        var t = this._bindings,
          A = e._cacheIndex,
          r = this._nActiveBindings++,
          n = t[r];
        (t[(e._cacheIndex = r)] = e), (t[(n._cacheIndex = A)] = n);
      },
      _takeBackBinding: function (e) {
        var t = this._bindings,
          A = e._cacheIndex,
          r = --this._nActiveBindings,
          n = t[r];
        (t[(e._cacheIndex = r)] = e), (t[(n._cacheIndex = A)] = n);
      },
      _lendControlInterpolant: function () {
        var e = this._controlInterpolants,
          t = this._nActiveControlInterpolants++,
          A = e[t];
        return (
          void 0 === A &&
            (e[
              ((A = new bl(
                new Float32Array(2),
                new Float32Array(2),
                1,
                this._controlInterpolantsResultBuffer,
              )).__cacheIndex = t)
            ] = A),
          A
        );
      },
      _takeBackControlInterpolant: function (e) {
        var t = this._controlInterpolants,
          A = e.__cacheIndex,
          r = --this._nActiveControlInterpolants,
          n = t[r];
        (t[(e.__cacheIndex = r)] = e), (t[(n.__cacheIndex = A)] = n);
      },
      _controlInterpolantsResultBuffer: new Float32Array(1),
      clipAction: function (e, t) {
        var A = t || this._root,
          r = A.uuid,
          A = 'string' == typeof e ? Ll.findByName(A, e) : e,
          e = null !== A ? A.uuid : e,
          n = this._actionsByClip[e],
          i = null;
        if (void 0 !== n) {
          var a = n.actionByRoot[r];
          if (void 0 !== a) return a;
          (i = n.knownActions[0]), null === A && (A = i._clip);
        }
        return null === A
          ? null
          : ((a = new uu(this, A, t)),
            this._bindAction(a, i),
            this._addInactiveAction(a, e, r),
            a);
      },
      existingAction: function (e, t) {
        var t = t || this._root,
          A = t.uuid,
          t = 'string' == typeof e ? Ll.findByName(t, e) : e,
          t = t ? t.uuid : e,
          e = this._actionsByClip[t];
        return (void 0 !== e && e.actionByRoot[A]) || null;
      },
      stopAllAction: function () {
        var e = this._actions,
          t = this._nActiveActions,
          A = this._bindings,
          r = this._nActiveBindings;
        this._nActiveActions = 0;
        for (var n = (this._nActiveBindings = 0); n !== t; ++n) e[n].reset();
        for (n = 0; n !== r; ++n) A[n].useCount = 0;
        return this;
      },
      update: function (e) {
        e *= this.timeScale;
        for (
          var t = this._actions,
            A = this._nActiveActions,
            r = (this.time += e),
            n = Math.sign(e),
            i = (this._accuIndex ^= 1),
            a = 0;
          a !== A;
          ++a
        )
          t[a]._update(r, e, n, i);
        for (
          var o = this._bindings, s = this._nActiveBindings, a = 0;
          a !== s;
          ++a
        )
          o[a].apply(i);
        return this;
      },
      getRoot: function () {
        return this._root;
      },
      uncacheClip: function (e) {
        var t = this._actions,
          e = e.uuid,
          A = this._actionsByClip,
          r = A[e];
        if (void 0 !== r) {
          for (var n = r.knownActions, i = 0, a = n.length; i !== a; ++i) {
            var o = n[i],
              s = (this._deactivateAction(o), o._cacheIndex),
              l = t[t.length - 1];
            (o._cacheIndex = null),
              (o._byClipCacheIndex = null),
              (t[(l._cacheIndex = s)] = l),
              t.pop(),
              this._removeInactiveBindingsForAction(o);
          }
          delete A[e];
        }
      },
      uncacheRoot: function (e) {
        var t,
          A = e.uuid,
          r = this._actionsByClip;
        for (t in r) {
          var n = r[t].actionByRoot[A];
          void 0 !== n &&
            (this._deactivateAction(n), this._removeInactiveAction(n));
        }
        var i = this._bindingsByRootAndName[A];
        if (void 0 !== i)
          for (var a in i) {
            a = i[a];
            a.restoreOriginalState(), this._removeInactiveBinding(a);
          }
      },
      uncacheAction: function (e, t) {
        e = this.existingAction(e, t);
        null !== e &&
          (this._deactivateAction(e), this._removeInactiveAction(e));
      },
    })),
    (du.prototype.clone = function () {
      return new du(
        void 0 === this.value.clone ? this.value : this.value.clone(),
      );
    }),
    (pu.prototype = Object.assign(Object.create($.prototype), {
      constructor: pu,
      isInstancedBufferGeometry: !0,
      copy: function (e) {
        return (
          $.prototype.copy.call(this, e),
          (this.maxInstancedCount = e.maxInstancedCount),
          this
        );
      },
      clone: function () {
        return new this.constructor().copy(this);
      },
    })),
    (fu.prototype = Object.assign(Object.create(ro.prototype), {
      constructor: fu,
      isInstancedInterleavedBuffer: !0,
      copy: function (e) {
        return (
          ro.prototype.copy.call(this, e),
          (this.meshPerAttribute = e.meshPerAttribute),
          this
        );
      },
    })),
    (gu.prototype = Object.assign(Object.create(y.prototype), {
      constructor: gu,
      isInstancedBufferAttribute: !0,
      copy: function (e) {
        return (
          y.prototype.copy.call(this, e),
          (this.meshPerAttribute = e.meshPerAttribute),
          this
        );
      },
    })),
    Object.assign(mu.prototype, {
      linePrecision: 1,
      set: function (e, t) {
        this.ray.set(e, t);
      },
      setFromCamera: function (e, t) {
        t && t.isPerspectiveCamera
          ? (this.ray.origin.setFromMatrixPosition(t.matrixWorld),
            this.ray.direction
              .set(e.x, e.y, 0.5)
              .unproject(t)
              .sub(this.ray.origin)
              .normalize())
          : t && t.isOrthographicCamera
          ? (this.ray.origin
              .set(e.x, e.y, (t.near + t.far) / (t.near - t.far))
              .unproject(t),
            this.ray.direction.set(0, 0, -1).transformDirection(t.matrixWorld))
          : console.error('THREE.Raycaster: Unsupported camera type.');
      },
      intersectObject: function (e, t, A) {
        A = A || [];
        return Bu(e, this, A, t), A.sort(vu), A;
      },
      intersectObjects: function (e, t, A) {
        var r = A || [];
        if (!1 === Array.isArray(e))
          console.warn(
            'THREE.Raycaster.intersectObjects: objects is not an Array.',
          );
        else {
          for (var n = 0, i = e.length; n < i; n++) Bu(e[n], this, r, t);
          r.sort(vu);
        }
        return r;
      },
    }),
    Object.assign(wu.prototype, {
      start: function () {
        (this.startTime = (
          'undefined' == typeof performance ? Date : performance
        ).now()),
          (this.oldTime = this.startTime),
          (this.elapsedTime = 0),
          (this.running = !0);
      },
      stop: function () {
        this.getElapsedTime(), (this.running = !1), (this.autoStart = !1);
      },
      getElapsedTime: function () {
        return this.getDelta(), this.elapsedTime;
      },
      getDelta: function () {
        var e,
          t = 0;
        return this.autoStart && !this.running
          ? (this.start(), 0)
          : (this.running &&
              ((t =
                ((e = (
                  'undefined' == typeof performance ? Date : performance
                ).now()) -
                  this.oldTime) /
                1e3),
              (this.oldTime = e),
              (this.elapsedTime += t)),
            t);
      },
    }),
    Object.assign(yu.prototype, {
      set: function (e, t, A) {
        return (this.radius = e), (this.phi = t), (this.theta = A), this;
      },
      clone: function () {
        return new this.constructor().copy(this);
      },
      copy: function (e) {
        return (
          (this.radius = e.radius),
          (this.phi = e.phi),
          (this.theta = e.theta),
          this
        );
      },
      makeSafe: function () {
        return (
          (this.phi = Math.max(1e-6, Math.min(Math.PI - 1e-6, this.phi))), this
        );
      },
      setFromVector3: function (e) {
        return (
          (this.radius = e.length()),
          0 === this.radius
            ? ((this.theta = 0), (this.phi = 0))
            : ((this.theta = Math.atan2(e.x, e.z)),
              (this.phi = Math.acos(xe.clamp(e.y / this.radius, -1, 1)))),
          this
        );
      },
    }),
    Object.assign(Eu.prototype, {
      set: function (e, t, A) {
        return (this.radius = e), (this.theta = t), (this.y = A), this;
      },
      clone: function () {
        return new this.constructor().copy(this);
      },
      copy: function (e) {
        return (
          (this.radius = e.radius), (this.theta = e.theta), (this.y = e.y), this
        );
      },
      setFromVector3: function (e) {
        return (
          (this.radius = Math.sqrt(e.x * e.x + e.z * e.z)),
          (this.theta = Math.atan2(e.x, e.z)),
          (this.y = e.y),
          this
        );
      },
    }),
    Object.assign(xu.prototype, {
      set: function (e, t) {
        return this.min.copy(e), this.max.copy(t), this;
      },
      setFromPoints: function (e) {
        this.makeEmpty();
        for (var t = 0, A = e.length; t < A; t++) this.expandByPoint(e[t]);
        return this;
      },
      setFromCenterAndSize:
        ((Lc = new he()),
        function (e, t) {
          t = Lc.copy(t).multiplyScalar(0.5);
          return this.min.copy(e).sub(t), this.max.copy(e).add(t), this;
        }),
      clone: function () {
        return new this.constructor().copy(this);
      },
      copy: function (e) {
        return this.min.copy(e.min), this.max.copy(e.max), this;
      },
      makeEmpty: function () {
        return (
          (this.min.x = this.min.y = 1 / 0),
          (this.max.x = this.max.y = -1 / 0),
          this
        );
      },
      isEmpty: function () {
        return this.max.x < this.min.x || this.max.y < this.min.y;
      },
      getCenter: function (e) {
        return (
          void 0 === e &&
            (console.warn('THREE.Box2: .getCenter() target is now required'),
            (e = new he())),
          this.isEmpty()
            ? e.set(0, 0)
            : e.addVectors(this.min, this.max).multiplyScalar(0.5)
        );
      },
      getSize: function (e) {
        return (
          void 0 === e &&
            (console.warn('THREE.Box2: .getSize() target is now required'),
            (e = new he())),
          this.isEmpty() ? e.set(0, 0) : e.subVectors(this.max, this.min)
        );
      },
      expandByPoint: function (e) {
        return this.min.min(e), this.max.max(e), this;
      },
      expandByVector: function (e) {
        return this.min.sub(e), this.max.add(e), this;
      },
      expandByScalar: function (e) {
        return this.min.addScalar(-e), this.max.addScalar(e), this;
      },
      containsPoint: function (e) {
        return !(
          e.x < this.min.x ||
          e.x > this.max.x ||
          e.y < this.min.y ||
          e.y > this.max.y
        );
      },
      containsBox: function (e) {
        return (
          this.min.x <= e.min.x &&
          e.max.x <= this.max.x &&
          this.min.y <= e.min.y &&
          e.max.y <= this.max.y
        );
      },
      getParameter: function (e, t) {
        return (
          void 0 === t &&
            (console.warn('THREE.Box2: .getParameter() target is now required'),
            (t = new he())),
          t.set(
            (e.x - this.min.x) / (this.max.x - this.min.x),
            (e.y - this.min.y) / (this.max.y - this.min.y),
          )
        );
      },
      intersectsBox: function (e) {
        return !(
          e.max.x < this.min.x ||
          e.min.x > this.max.x ||
          e.max.y < this.min.y ||
          e.min.y > this.max.y
        );
      },
      clampPoint: function (e, t) {
        return (
          void 0 === t &&
            (console.warn('THREE.Box2: .clampPoint() target is now required'),
            (t = new he())),
          t.copy(e).clamp(this.min, this.max)
        );
      },
      distanceToPoint:
        ((Qc = new he()),
        function (e) {
          return Qc.copy(e).clamp(this.min, this.max).sub(e).length();
        }),
      intersect: function (e) {
        return this.min.max(e.min), this.max.min(e.max), this;
      },
      union: function (e) {
        return this.min.min(e.min), this.max.max(e.max), this;
      },
      translate: function (e) {
        return this.min.add(e), this.max.add(e), this;
      },
      equals: function (e) {
        return e.min.equals(this.min) && e.max.equals(this.max);
      },
    }),
    Object.assign(bu.prototype, {
      set: function (e, t) {
        return this.start.copy(e), this.end.copy(t), this;
      },
      clone: function () {
        return new this.constructor().copy(this);
      },
      copy: function (e) {
        return this.start.copy(e.start), this.end.copy(e.end), this;
      },
      getCenter: function (e) {
        return (
          void 0 === e &&
            (console.warn('THREE.Line3: .getCenter() target is now required'),
            (e = new Ce())),
          e.addVectors(this.start, this.end).multiplyScalar(0.5)
        );
      },
      delta: function (e) {
        return (
          void 0 === e &&
            (console.warn('THREE.Line3: .delta() target is now required'),
            (e = new Ce())),
          e.subVectors(this.end, this.start)
        );
      },
      distanceSq: function () {
        return this.start.distanceToSquared(this.end);
      },
      distance: function () {
        return this.start.distanceTo(this.end);
      },
      at: function (e, t) {
        return (
          void 0 === t &&
            (console.warn('THREE.Line3: .at() target is now required'),
            (t = new Ce())),
          this.delta(t).multiplyScalar(e).add(this.start)
        );
      },
      closestPointToPointParameter:
        ((Hc = new Ce()),
        (Ic = new Ce()),
        function (e, t) {
          Hc.subVectors(e, this.start), Ic.subVectors(this.end, this.start);
          (e = Ic.dot(Ic)), (e = Ic.dot(Hc) / e);
          return (e = t ? xe.clamp(e, 0, 1) : e);
        }),
      closestPointToPoint: function (e, t, A) {
        e = this.closestPointToPointParameter(e, t);
        return (
          void 0 === A &&
            (console.warn(
              'THREE.Line3: .closestPointToPoint() target is now required',
            ),
            (A = new Ce())),
          this.delta(A).multiplyScalar(e).add(this.start)
        );
      },
      applyMatrix4: function (e) {
        return this.start.applyMatrix4(e), this.end.applyMatrix4(e), this;
      },
      equals: function (e) {
        return e.start.equals(this.start) && e.end.equals(this.end);
      },
    }),
    (((Cu.prototype = Object.create(p.prototype)).constructor =
      Cu).prototype.isImmediateRenderObject = !0),
    (((Fu.prototype = Object.create(v.prototype)).constructor =
      Fu).prototype.update =
      ((Rc = new Ce()),
      (Pc = new Ce()),
      (Dc = new F()),
      function () {
        var e = ['a', 'b', 'c'],
          t =
            (this.object.updateMatrixWorld(!0),
            Dc.getNormalMatrix(this.object.matrixWorld),
            this.object.matrixWorld),
          A = this.geometry.attributes.position,
          r = this.object.geometry;
        if (r && r.isGeometry)
          for (
            var n = r.vertices, i = r.faces, a = 0, o = 0, s = i.length;
            o < s;
            o++
          )
            for (var l = i[o], c = 0, u = l.vertexNormals.length; c < u; c++) {
              var h = n[l[e[c]]],
                d = l.vertexNormals[c];
              Rc.copy(h).applyMatrix4(t),
                Pc.copy(d)
                  .applyMatrix3(Dc)
                  .normalize()
                  .multiplyScalar(this.size)
                  .add(Rc),
                A.setXYZ(a, Rc.x, Rc.y, Rc.z),
                (a += 1),
                A.setXYZ(a, Pc.x, Pc.y, Pc.z),
                (a += 1);
            }
        else if (r && r.isBufferGeometry)
          for (
            var p = r.attributes.position,
              f = r.attributes.normal,
              a = 0,
              c = 0,
              u = p.count;
            c < u;
            c++
          )
            Rc.set(p.getX(c), p.getY(c), p.getZ(c)).applyMatrix4(t),
              Pc.set(f.getX(c), f.getY(c), f.getZ(c)),
              Pc.applyMatrix3(Dc).normalize().multiplyScalar(this.size).add(Rc),
              A.setXYZ(a, Rc.x, Rc.y, Rc.z),
              A.setXYZ((a += 1), Pc.x, Pc.y, Pc.z),
              (a += 1);
        A.needsUpdate = !0;
      })),
    (((Tu.prototype = Object.create(p.prototype)).constructor =
      Tu).prototype.dispose = function () {
      this.cone.geometry.dispose(), this.cone.material.dispose();
    }),
    (Tu.prototype.update =
      ((Oc = new Ce()),
      (Nc = new Ce()),
      function () {
        this.light.updateMatrixWorld();
        var e = this.light.distance || 1e3,
          t = e * Math.tan(this.light.angle);
        this.cone.scale.set(t, t, e),
          Oc.setFromMatrixPosition(this.light.matrixWorld),
          Nc.setFromMatrixPosition(this.light.target.matrixWorld),
          this.cone.lookAt(Nc.sub(Oc)),
          void 0 !== this.color
            ? this.cone.material.color.set(this.color)
            : this.cone.material.color.copy(this.light.color);
      })),
    (((_u.prototype = Object.create(v.prototype)).constructor =
      _u).prototype.updateMatrixWorld =
      ((Gc = new Ce()),
      (Vc = new be()),
      (kc = new be()),
      function (e) {
        var t = this.bones,
          A = this.geometry,
          r = A.getAttribute('position');
        kc.getInverse(this.root.matrixWorld);
        for (var n = 0, i = 0; n < t.length; n++) {
          var a = t[n];
          a.parent &&
            a.parent.isBone &&
            (Vc.multiplyMatrices(kc, a.matrixWorld),
            Gc.setFromMatrixPosition(Vc),
            r.setXYZ(i, Gc.x, Gc.y, Gc.z),
            Vc.multiplyMatrices(kc, a.parent.matrixWorld),
            Gc.setFromMatrixPosition(Vc),
            r.setXYZ(i + 1, Gc.x, Gc.y, Gc.z),
            (i += 2));
        }
        (A.getAttribute('position').needsUpdate = !0),
          p.prototype.updateMatrixWorld.call(this, e);
      })),
    (((Uu.prototype = Object.create(f.prototype)).constructor =
      Uu).prototype.dispose = function () {
      this.geometry.dispose(), this.material.dispose();
    }),
    (Uu.prototype.update = function () {
      void 0 !== this.color
        ? this.material.color.set(this.color)
        : this.material.color.copy(this.light.color);
    }),
    (((Mu.prototype = Object.create(p.prototype)).constructor =
      Mu).prototype.dispose = function () {
      this.children[0].geometry.dispose(), this.children[0].material.dispose();
    }),
    (Mu.prototype.update = function () {
      var e = 0.5 * this.light.width,
        t = 0.5 * this.light.height,
        A = this.line.geometry.attributes.position,
        r = A.array;
      (r[0] = e),
        (r[1] = -t),
        (r[2] = 0),
        (r[3] = e),
        (r[4] = t),
        (r[5] = 0),
        (r[6] = -e),
        (r[7] = t),
        (r[8] = 0),
        (r[9] = -e),
        (r[10] = -t),
        (r[11] = 0),
        (r[12] = e),
        (r[13] = -t),
        (r[14] = 0),
        (A.needsUpdate = !0),
        void 0 !== this.color
          ? this.line.material.color.set(this.color)
          : this.line.material.color.copy(this.light.color);
    }),
    (((Su.prototype = Object.create(p.prototype)).constructor =
      Su).prototype.dispose = function () {
      this.children[0].geometry.dispose(), this.children[0].material.dispose();
    }),
    (Su.prototype.update =
      ((zc = new Ce()),
      (Kc = new de()),
      (Xc = new de()),
      function () {
        var e = this.children[0];
        if (void 0 !== this.color) this.material.color.set(this.color);
        else {
          var t = e.geometry.getAttribute('color');
          Kc.copy(this.light.color), Xc.copy(this.light.groundColor);
          for (var A = 0, r = t.count; A < r; A++) {
            var n = A < r / 2 ? Kc : Xc;
            t.setXYZ(A, n.r, n.g, n.b);
          }
          t.needsUpdate = !0;
        }
        e.lookAt(zc.setFromMatrixPosition(this.light.matrixWorld).negate());
      })),
    ((Qu.prototype = Object.create(v.prototype)).constructor = Qu),
    ((Lu.prototype = Object.create(v.prototype)).constructor = Lu),
    (((Hu.prototype = Object.create(v.prototype)).constructor =
      Hu).prototype.update =
      ((jc = new Ce()),
      (Wc = new Ce()),
      (Yc = new F()),
      function () {
        this.object.updateMatrixWorld(!0),
          Yc.getNormalMatrix(this.object.matrixWorld);
        for (
          var e = this.object.matrixWorld,
            t = this.geometry.attributes.position,
            A = this.object.geometry,
            r = A.vertices,
            n = A.faces,
            i = 0,
            a = 0,
            o = n.length;
          a < o;
          a++
        ) {
          var s = n[a],
            l = s.normal;
          jc
            .copy(r[s.a])
            .add(r[s.b])
            .add(r[s.c])
            .divideScalar(3)
            .applyMatrix4(e),
            Wc.copy(l)
              .applyMatrix3(Yc)
              .normalize()
              .multiplyScalar(this.size)
              .add(jc),
            t.setXYZ(i, jc.x, jc.y, jc.z),
            (i += 1),
            t.setXYZ(i, Wc.x, Wc.y, Wc.z),
            (i += 1);
        }
        t.needsUpdate = !0;
      })),
    (((Iu.prototype = Object.create(p.prototype)).constructor =
      Iu).prototype.dispose = function () {
      this.lightPlane.geometry.dispose(),
        this.lightPlane.material.dispose(),
        this.targetLine.geometry.dispose(),
        this.targetLine.material.dispose();
    }),
    (Iu.prototype.update =
      ((Jc = new Ce()),
      (Zc = new Ce()),
      (qc = new Ce()),
      function () {
        Jc.setFromMatrixPosition(this.light.matrixWorld),
          Zc.setFromMatrixPosition(this.light.target.matrixWorld),
          qc.subVectors(Zc, Jc),
          this.lightPlane.lookAt(qc),
          void 0 !== this.color
            ? (this.lightPlane.material.color.set(this.color),
              this.targetLine.material.color.set(this.color))
            : (this.lightPlane.material.color.copy(this.light.color),
              this.targetLine.material.color.copy(this.light.color)),
          this.targetLine.lookAt(qc),
          (this.targetLine.scale.z = qc.length());
      })),
    (((Ru.prototype = Object.create(v.prototype)).constructor =
      Ru).prototype.update =
      ((tu = new Ce()),
      (Au = new xr()),
      function () {
        ($c = this.geometry), (eu = this.pointMap);
        Au.projectionMatrix.copy(this.camera.projectionMatrix),
          A('c', 0, 0, -1),
          A('t', 0, 0, 1),
          A('n1', -1, -1, -1),
          A('n2', 1, -1, -1),
          A('n3', -1, 1, -1),
          A('n4', 1, 1, -1),
          A('f1', -1, -1, 1),
          A('f2', 1, -1, 1),
          A('f3', -1, 1, 1),
          A('f4', 1, 1, 1),
          A('u1', 0.7, 1.1, -1),
          A('u2', -0.7, 1.1, -1),
          A('u3', 0, 2, -1),
          A('cf1', -1, 0, 1),
          A('cf2', 1, 0, 1),
          A('cf3', 0, -1, 1),
          A('cf4', 0, 1, 1),
          A('cn1', -1, 0, -1),
          A('cn2', 1, 0, -1),
          A('cn3', 0, -1, -1),
          A('cn4', 0, 1, -1),
          ($c.getAttribute('position').needsUpdate = !0);
      })),
    (((Pu.prototype = Object.create(v.prototype)).constructor =
      Pu).prototype.update =
      ((ru = new NA()),
      function (e) {
        var t, A, r;
        void 0 !== e &&
          console.warn('THREE.BoxHelper: .update() has no longer arguments.'),
          void 0 !== this.object && ru.setFromObject(this.object),
          ru.isEmpty() ||
            ((e = ru.min),
            (t = ru.max),
            ((r = (A = this.geometry.attributes.position).array)[0] = t.x),
            (r[1] = t.y),
            (r[2] = t.z),
            (r[3] = e.x),
            (r[4] = t.y),
            (r[5] = t.z),
            (r[6] = e.x),
            (r[7] = e.y),
            (r[8] = t.z),
            (r[9] = t.x),
            (r[10] = e.y),
            (r[11] = t.z),
            (r[12] = t.x),
            (r[13] = t.y),
            (r[14] = e.z),
            (r[15] = e.x),
            (r[16] = t.y),
            (r[17] = e.z),
            (r[18] = e.x),
            (r[19] = e.y),
            (r[20] = e.z),
            (r[21] = t.x),
            (r[22] = e.y),
            (r[23] = e.z),
            (A.needsUpdate = !0),
            this.geometry.computeBoundingSphere());
      })),
    (Pu.prototype.setFromObject = function (e) {
      return (this.object = e), this.update(), this;
    }),
    (((Du.prototype = Object.create(v.prototype)).constructor =
      Du).prototype.updateMatrixWorld = function (e) {
      var t = this.box;
      t.isEmpty() ||
        (t.getCenter(this.position),
        t.getSize(this.scale),
        this.scale.multiplyScalar(0.5),
        p.prototype.updateMatrixWorld.call(this, e));
    }),
    (((Ou.prototype = Object.create(g.prototype)).constructor =
      Ou).prototype.updateMatrixWorld = function (e) {
      var t = -this.plane.constant;
      Math.abs(t) < 1e-8 && (t = 1e-8),
        this.scale.set(0.5 * this.size, 0.5 * this.size, t),
        (this.children[0].material.side = t < 0 ? Ee : Z),
        this.lookAt(this.plane.normal),
        p.prototype.updateMatrixWorld.call(this, e);
    }),
    (((Nu.prototype = Object.create(p.prototype)).constructor =
      Nu).prototype.setDirection =
      ((ou = new Ce()),
      function (e) {
        0.99999 < e.y
          ? this.quaternion.set(0, 0, 0, 1)
          : e.y < -0.99999
          ? this.quaternion.set(1, 0, 0, 0)
          : (ou.set(e.z, 0, -e.x).normalize(),
            (au = Math.acos(e.y)),
            this.quaternion.setFromAxisAngle(ou, au));
      })),
    (Nu.prototype.setLength = function (e, t, A) {
      void 0 === t && (t = 0.2 * e),
        void 0 === A && (A = 0.2 * t),
        this.line.scale.set(1, Math.max(0, e - t), 1),
        this.line.updateMatrix(),
        this.cone.scale.set(A, t, A),
        (this.cone.position.y = e),
        this.cone.updateMatrix();
    }),
    (Nu.prototype.setColor = function (e) {
      this.line.material.color.copy(e), this.cone.material.color.copy(e);
    }),
    ((Gu.prototype = Object.create(v.prototype)).constructor = Gu);
  var Vu;
  function ku(e) {
    console.warn(
      'THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.',
    ),
      qs.call(this, e),
      (this.type = 'catmullrom'),
      (this.closed = !0);
  }
  function zu(e) {
    console.warn(
      'THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.',
    ),
      qs.call(this, e),
      (this.type = 'catmullrom');
  }
  function Ku(e) {
    console.warn(
      'THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.',
    ),
      qs.call(this, e),
      (this.type = 'catmullrom');
  }
  (l.create = function (e, t) {
    return (
      console.log('THREE.Curve.create() has been deprecated'),
      (e.prototype = Object.create(l.prototype)),
      ((e.prototype.constructor = e).prototype.getPoint = t),
      e
    );
  }),
    Object.assign(cl.prototype, {
      createPointsGeometry: function (e) {
        console.warn(
          'THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.',
        );
        e = this.getPoints(e);
        return this.createGeometry(e);
      },
      createSpacedPointsGeometry: function (e) {
        console.warn(
          'THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.',
        );
        e = this.getSpacedPoints(e);
        return this.createGeometry(e);
      },
      createGeometry: function (e) {
        console.warn(
          'THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.',
        );
        for (var t = new pe(), A = 0, r = e.length; A < r; A++) {
          var n = e[A];
          t.vertices.push(new Ce(n.x, n.y, n.z || 0));
        }
        return t;
      },
    }),
    Object.assign(ul.prototype, {
      fromPoints: function (e) {
        console.warn(
          'THREE.Path: .fromPoints() has been renamed to .setFromPoints().',
        ),
          this.setFromPoints(e);
      },
    }),
    (ku.prototype = Object.create(qs.prototype)),
    (zu.prototype = Object.create(qs.prototype)),
    (Ku.prototype = Object.create(qs.prototype)),
    Object.assign(Ku.prototype, {
      initFromArray: function () {
        console.error('THREE.Spline: .initFromArray() has been removed.');
      },
      getControlPointsArray: function () {
        console.error(
          'THREE.Spline: .getControlPointsArray() has been removed.',
        );
      },
      reparametrizeByArcLength: function () {
        console.error(
          'THREE.Spline: .reparametrizeByArcLength() has been removed.',
        );
      },
    }),
    (Qu.prototype.setColors = function () {
      console.error(
        'THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.',
      );
    }),
    (_u.prototype.update = function () {
      console.error(
        'THREE.SkeletonHelper: update() no longer needs to be called.',
      );
    }),
    Object.assign(Vl.prototype, {
      extractUrlBase: function (e) {
        return (
          console.warn(
            'THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.',
          ),
          kl.extractUrlBase(e)
        );
      },
    }),
    Object.assign(xu.prototype, {
      center: function (e) {
        return (
          console.warn(
            'THREE.Box2: .center() has been renamed to .getCenter().',
          ),
          this.getCenter(e)
        );
      },
      empty: function () {
        return (
          console.warn('THREE.Box2: .empty() has been renamed to .isEmpty().'),
          this.isEmpty()
        );
      },
      isIntersectionBox: function (e) {
        return (
          console.warn(
            'THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().',
          ),
          this.intersectsBox(e)
        );
      },
      size: function (e) {
        return (
          console.warn('THREE.Box2: .size() has been renamed to .getSize().'),
          this.getSize(e)
        );
      },
    }),
    Object.assign(NA.prototype, {
      center: function (e) {
        return (
          console.warn(
            'THREE.Box3: .center() has been renamed to .getCenter().',
          ),
          this.getCenter(e)
        );
      },
      empty: function () {
        return (
          console.warn('THREE.Box3: .empty() has been renamed to .isEmpty().'),
          this.isEmpty()
        );
      },
      isIntersectionBox: function (e) {
        return (
          console.warn(
            'THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().',
          ),
          this.intersectsBox(e)
        );
      },
      isIntersectionSphere: function (e) {
        return (
          console.warn(
            'THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().',
          ),
          this.intersectsSphere(e)
        );
      },
      size: function (e) {
        return (
          console.warn('THREE.Box3: .size() has been renamed to .getSize().'),
          this.getSize(e)
        );
      },
    }),
    (bu.prototype.center = function (e) {
      return (
        console.warn(
          'THREE.Line3: .center() has been renamed to .getCenter().',
        ),
        this.getCenter(e)
      );
    }),
    Object.assign(xe, {
      random16: function () {
        return (
          console.warn(
            'THREE.Math: .random16() has been deprecated. Use Math.random() instead.',
          ),
          Math.random()
        );
      },
      nearestPowerOfTwo: function (e) {
        return (
          console.warn(
            'THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().',
          ),
          xe.floorPowerOfTwo(e)
        );
      },
      nextPowerOfTwo: function (e) {
        return (
          console.warn(
            'THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().',
          ),
          xe.ceilPowerOfTwo(e)
        );
      },
    }),
    Object.assign(F.prototype, {
      flattenToArrayOffset: function (e, t) {
        return (
          console.warn(
            'THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.',
          ),
          this.toArray(e, t)
        );
      },
      multiplyVector3: function (e) {
        return (
          console.warn(
            'THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.',
          ),
          e.applyMatrix3(this)
        );
      },
      multiplyVector3Array: function () {
        console.error(
          'THREE.Matrix3: .multiplyVector3Array() has been removed.',
        );
      },
      applyToBuffer: function (e) {
        return (
          console.warn(
            'THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.',
          ),
          this.applyToBufferAttribute(e)
        );
      },
      applyToVector3Array: function () {
        console.error(
          'THREE.Matrix3: .applyToVector3Array() has been removed.',
        );
      },
    }),
    Object.assign(be.prototype, {
      extractPosition: function (e) {
        return (
          console.warn(
            'THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().',
          ),
          this.copyPosition(e)
        );
      },
      flattenToArrayOffset: function (e, t) {
        return (
          console.warn(
            'THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.',
          ),
          this.toArray(e, t)
        );
      },
      getPosition: function () {
        return (
          void 0 === Vu && (Vu = new Ce()),
          console.warn(
            'THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.',
          ),
          Vu.setFromMatrixColumn(this, 3)
        );
      },
      setRotationFromQuaternion: function (e) {
        return (
          console.warn(
            'THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().',
          ),
          this.makeRotationFromQuaternion(e)
        );
      },
      multiplyToArray: function () {
        console.warn('THREE.Matrix4: .multiplyToArray() has been removed.');
      },
      multiplyVector3: function (e) {
        return (
          console.warn(
            'THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.',
          ),
          e.applyMatrix4(this)
        );
      },
      multiplyVector4: function (e) {
        return (
          console.warn(
            'THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.',
          ),
          e.applyMatrix4(this)
        );
      },
      multiplyVector3Array: function () {
        console.error(
          'THREE.Matrix4: .multiplyVector3Array() has been removed.',
        );
      },
      rotateAxis: function (e) {
        console.warn(
          'THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.',
        ),
          e.transformDirection(this);
      },
      crossVector: function (e) {
        return (
          console.warn(
            'THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.',
          ),
          e.applyMatrix4(this)
        );
      },
      translate: function () {
        console.error('THREE.Matrix4: .translate() has been removed.');
      },
      rotateX: function () {
        console.error('THREE.Matrix4: .rotateX() has been removed.');
      },
      rotateY: function () {
        console.error('THREE.Matrix4: .rotateY() has been removed.');
      },
      rotateZ: function () {
        console.error('THREE.Matrix4: .rotateZ() has been removed.');
      },
      rotateByAxis: function () {
        console.error('THREE.Matrix4: .rotateByAxis() has been removed.');
      },
      applyToBuffer: function (e) {
        return (
          console.warn(
            'THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.',
          ),
          this.applyToBufferAttribute(e)
        );
      },
      applyToVector3Array: function () {
        console.error(
          'THREE.Matrix4: .applyToVector3Array() has been removed.',
        );
      },
      makeFrustum: function (e, t, A, r, n, i) {
        return (
          console.warn(
            'THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.',
          ),
          this.makePerspective(e, t, r, A, n, i)
        );
      },
    }),
    (zA.prototype.isIntersectionLine = function (e) {
      return (
        console.warn(
          'THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().',
        ),
        this.intersectsLine(e)
      );
    }),
    (E.prototype.multiplyVector3 = function (e) {
      return (
        console.warn(
          'THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.',
        ),
        e.applyQuaternion(this)
      );
    }),
    Object.assign(Wn.prototype, {
      isIntersectionBox: function (e) {
        return (
          console.warn(
            'THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().',
          ),
          this.intersectsBox(e)
        );
      },
      isIntersectionPlane: function (e) {
        return (
          console.warn(
            'THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().',
          ),
          this.intersectsPlane(e)
        );
      },
      isIntersectionSphere: function (e) {
        return (
          console.warn(
            'THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().',
          ),
          this.intersectsSphere(e)
        );
      },
    }),
    Object.assign(Yn.prototype, {
      area: function () {
        return (
          console.warn(
            'THREE.Triangle: .area() has been renamed to .getArea().',
          ),
          this.getArea()
        );
      },
      barycoordFromPoint: function (e, t) {
        return (
          console.warn(
            'THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().',
          ),
          this.getBarycoord(e, t)
        );
      },
      midpoint: function (e) {
        return (
          console.warn(
            'THREE.Triangle: .midpoint() has been renamed to .getMidpoint().',
          ),
          this.getMidpoint(e)
        );
      },
      normal: function (e) {
        return (
          console.warn(
            'THREE.Triangle: .normal() has been renamed to .getNormal().',
          ),
          this.getNormal(e)
        );
      },
      plane: function (e) {
        return (
          console.warn(
            'THREE.Triangle: .plane() has been renamed to .getPlane().',
          ),
          this.getPlane(e)
        );
      },
    }),
    Object.assign(Yn, {
      barycoordFromPoint: function (e, t, A, r, n) {
        return (
          console.warn(
            'THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().',
          ),
          Yn.getBarycoord(e, t, A, r, n)
        );
      },
      normal: function (e, t, A, r) {
        return (
          console.warn(
            'THREE.Triangle: .normal() has been renamed to .getNormal().',
          ),
          Yn.getNormal(e, t, A, r)
        );
      },
    }),
    Object.assign(hl.prototype, {
      extractAllPoints: function (e) {
        return (
          console.warn(
            'THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.',
          ),
          this.extractPoints(e)
        );
      },
      extrude: function (e) {
        return (
          console.warn(
            'THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.',
          ),
          new As(this, e)
        );
      },
      makeGeometry: function (e) {
        return (
          console.warn(
            'THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.',
          ),
          new ps(this, e)
        );
      },
    }),
    Object.assign(he.prototype, {
      fromAttribute: function (e, t, A) {
        return (
          console.warn(
            'THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().',
          ),
          this.fromBufferAttribute(e, t, A)
        );
      },
      distanceToManhattan: function (e) {
        return (
          console.warn(
            'THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().',
          ),
          this.manhattanDistanceTo(e)
        );
      },
      lengthManhattan: function () {
        return (
          console.warn(
            'THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().',
          ),
          this.manhattanLength()
        );
      },
    }),
    Object.assign(Ce.prototype, {
      setEulerFromRotationMatrix: function () {
        console.error(
          'THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.',
        );
      },
      setEulerFromQuaternion: function () {
        console.error(
          'THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.',
        );
      },
      getPositionFromMatrix: function (e) {
        return (
          console.warn(
            'THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().',
          ),
          this.setFromMatrixPosition(e)
        );
      },
      getScaleFromMatrix: function (e) {
        return (
          console.warn(
            'THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().',
          ),
          this.setFromMatrixScale(e)
        );
      },
      getColumnFromMatrix: function (e, t) {
        return (
          console.warn(
            'THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().',
          ),
          this.setFromMatrixColumn(t, e)
        );
      },
      applyProjection: function (e) {
        return (
          console.warn(
            'THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.',
          ),
          this.applyMatrix4(e)
        );
      },
      fromAttribute: function (e, t, A) {
        return (
          console.warn(
            'THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().',
          ),
          this.fromBufferAttribute(e, t, A)
        );
      },
      distanceToManhattan: function (e) {
        return (
          console.warn(
            'THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().',
          ),
          this.manhattanDistanceTo(e)
        );
      },
      lengthManhattan: function () {
        return (
          console.warn(
            'THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().',
          ),
          this.manhattanLength()
        );
      },
    }),
    Object.assign(Fe.prototype, {
      fromAttribute: function (e, t, A) {
        return (
          console.warn(
            'THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().',
          ),
          this.fromBufferAttribute(e, t, A)
        );
      },
      lengthManhattan: function () {
        return (
          console.warn(
            'THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().',
          ),
          this.manhattanLength()
        );
      },
    }),
    Object.assign(pe.prototype, {
      computeTangents: function () {
        console.error('THREE.Geometry: .computeTangents() has been removed.');
      },
      computeLineDistances: function () {
        console.error(
          'THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.',
        );
      },
    }),
    Object.assign(p.prototype, {
      getChildByName: function (e) {
        return (
          console.warn(
            'THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().',
          ),
          this.getObjectByName(e)
        );
      },
      renderDepth: function () {
        console.warn(
          'THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.',
        );
      },
      translate: function (e, t) {
        return (
          console.warn(
            'THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.',
          ),
          this.translateOnAxis(t, e)
        );
      },
      getWorldRotation: function () {
        console.error(
          'THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.',
        );
      },
    }),
    Object.defineProperties(p.prototype, {
      eulerOrder: {
        get: function () {
          return (
            console.warn('THREE.Object3D: .eulerOrder is now .rotation.order.'),
            this.rotation.order
          );
        },
        set: function (e) {
          console.warn('THREE.Object3D: .eulerOrder is now .rotation.order.'),
            (this.rotation.order = e);
        },
      },
      useQuaternion: {
        get: function () {
          console.warn(
            'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.',
          );
        },
        set: function () {
          console.warn(
            'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.',
          );
        },
      },
    }),
    Object.defineProperties(so.prototype, {
      objects: {
        get: function () {
          return (
            console.warn('THREE.LOD: .objects has been renamed to .levels.'),
            this.levels
          );
        },
      },
    }),
    Object.defineProperty(lo.prototype, 'useVertexTexture', {
      get: function () {
        console.warn('THREE.Skeleton: useVertexTexture has been removed.');
      },
      set: function () {
        console.warn('THREE.Skeleton: useVertexTexture has been removed.');
      },
    }),
    Object.defineProperty(l.prototype, '__arcLengthDivisions', {
      get: function () {
        return (
          console.warn(
            'THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.',
          ),
          this.arcLengthDivisions
        );
      },
      set: function (e) {
        console.warn(
          'THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.',
        ),
          (this.arcLengthDivisions = e);
      },
    }),
    (x.prototype.setLens = function (e, t) {
      console.warn(
        'THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.',
      ),
        void 0 !== t && (this.filmGauge = t),
        this.setFocalLength(e);
    }),
    Object.defineProperties(a.prototype, {
      onlyShadow: {
        set: function () {
          console.warn('THREE.Light: .onlyShadow has been removed.');
        },
      },
      shadowCameraFov: {
        set: function (e) {
          console.warn(
            'THREE.Light: .shadowCameraFov is now .shadow.camera.fov.',
          ),
            (this.shadow.camera.fov = e);
        },
      },
      shadowCameraLeft: {
        set: function (e) {
          console.warn(
            'THREE.Light: .shadowCameraLeft is now .shadow.camera.left.',
          ),
            (this.shadow.camera.left = e);
        },
      },
      shadowCameraRight: {
        set: function (e) {
          console.warn(
            'THREE.Light: .shadowCameraRight is now .shadow.camera.right.',
          ),
            (this.shadow.camera.right = e);
        },
      },
      shadowCameraTop: {
        set: function (e) {
          console.warn(
            'THREE.Light: .shadowCameraTop is now .shadow.camera.top.',
          ),
            (this.shadow.camera.top = e);
        },
      },
      shadowCameraBottom: {
        set: function (e) {
          console.warn(
            'THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.',
          ),
            (this.shadow.camera.bottom = e);
        },
      },
      shadowCameraNear: {
        set: function (e) {
          console.warn(
            'THREE.Light: .shadowCameraNear is now .shadow.camera.near.',
          ),
            (this.shadow.camera.near = e);
        },
      },
      shadowCameraFar: {
        set: function (e) {
          console.warn(
            'THREE.Light: .shadowCameraFar is now .shadow.camera.far.',
          ),
            (this.shadow.camera.far = e);
        },
      },
      shadowCameraVisible: {
        set: function () {
          console.warn(
            'THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.',
          );
        },
      },
      shadowBias: {
        set: function (e) {
          console.warn('THREE.Light: .shadowBias is now .shadow.bias.'),
            (this.shadow.bias = e);
        },
      },
      shadowDarkness: {
        set: function () {
          console.warn('THREE.Light: .shadowDarkness has been removed.');
        },
      },
      shadowMapWidth: {
        set: function (e) {
          console.warn(
            'THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.',
          ),
            (this.shadow.mapSize.width = e);
        },
      },
      shadowMapHeight: {
        set: function (e) {
          console.warn(
            'THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.',
          ),
            (this.shadow.mapSize.height = e);
        },
      },
    }),
    Object.defineProperties(y.prototype, {
      length: {
        get: function () {
          return (
            console.warn(
              'THREE.BufferAttribute: .length has been deprecated. Use .count instead.',
            ),
            this.array.length
          );
        },
      },
      copyIndicesArray: function () {
        console.error(
          'THREE.BufferAttribute: .copyIndicesArray() has been removed.',
        );
      },
    }),
    Object.assign($.prototype, {
      addIndex: function (e) {
        console.warn(
          'THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().',
        ),
          this.setIndex(e);
      },
      addDrawCall: function (e, t, A) {
        void 0 !== A &&
          console.warn(
            'THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.',
          ),
          console.warn(
            'THREE.BufferGeometry: .addDrawCall() is now .addGroup().',
          ),
          this.addGroup(e, t);
      },
      clearDrawCalls: function () {
        console.warn(
          'THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().',
        ),
          this.clearGroups();
      },
      computeTangents: function () {
        console.warn(
          'THREE.BufferGeometry: .computeTangents() has been removed.',
        );
      },
      computeOffsets: function () {
        console.warn(
          'THREE.BufferGeometry: .computeOffsets() has been removed.',
        );
      },
    }),
    Object.defineProperties($.prototype, {
      drawcalls: {
        get: function () {
          return (
            console.error(
              'THREE.BufferGeometry: .drawcalls has been renamed to .groups.',
            ),
            this.groups
          );
        },
      },
      offsets: {
        get: function () {
          return (
            console.warn(
              'THREE.BufferGeometry: .offsets has been renamed to .groups.',
            ),
            this.groups
          );
        },
      },
    }),
    Object.assign(rs.prototype, {
      getArrays: function () {
        console.error(
          'THREE.ExtrudeBufferGeometry: .getArrays() has been removed.',
        );
      },
      addShapeList: function () {
        console.error(
          'THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.',
        );
      },
      addShape: function () {
        console.error(
          'THREE.ExtrudeBufferGeometry: .addShape() has been removed.',
        );
      },
    }),
    Object.defineProperties(du.prototype, {
      dynamic: {
        set: function () {
          console.warn(
            'THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.',
          );
        },
      },
      onUpdate: {
        value: function () {
          return (
            console.warn(
              'THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.',
            ),
            this
          );
        },
      },
    }),
    Object.defineProperties(t.prototype, {
      wrapAround: {
        get: function () {
          console.warn('THREE.Material: .wrapAround has been removed.');
        },
        set: function () {
          console.warn('THREE.Material: .wrapAround has been removed.');
        },
      },
      wrapRGB: {
        get: function () {
          return (
            console.warn('THREE.Material: .wrapRGB has been removed.'), new de()
          );
        },
      },
      shading: {
        get: function () {
          console.error(
            'THREE.' +
              this.type +
              ': .shading has been removed. Use the boolean .flatShading instead.',
          );
        },
        set: function (e) {
          console.warn(
            'THREE.' +
              this.type +
              ': .shading has been removed. Use the boolean .flatShading instead.',
          ),
            (this.flatShading = 1 === e);
        },
      },
    }),
    Object.defineProperties(Us.prototype, {
      metal: {
        get: function () {
          return (
            console.warn(
              'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.',
            ),
            !1
          );
        },
        set: function () {
          console.warn(
            'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead',
          );
        },
      },
    }),
    Object.defineProperties(jn.prototype, {
      derivatives: {
        get: function () {
          return (
            console.warn(
              'THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.',
            ),
            this.extensions.derivatives
          );
        },
        set: function (e) {
          console.warn(
            'THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.',
          ),
            (this.extensions.derivatives = e);
        },
      },
    }),
    Object.assign($a.prototype, {
      animate: function (e) {
        console.warn(
          'THREE.WebGLRenderer: .animate() is now .setAnimationLoop().',
        ),
          this.setAnimationLoop(e);
      },
      getCurrentRenderTarget: function () {
        return (
          console.warn(
            'THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().',
          ),
          this.getRenderTarget()
        );
      },
      getMaxAnisotropy: function () {
        return (
          console.warn(
            'THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().',
          ),
          this.capabilities.getMaxAnisotropy()
        );
      },
      getPrecision: function () {
        return (
          console.warn(
            'THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.',
          ),
          this.capabilities.precision
        );
      },
      resetGLState: function () {
        return (
          console.warn(
            'THREE.WebGLRenderer: .resetGLState() is now .state.reset().',
          ),
          this.state.reset()
        );
      },
      supportsFloatTextures: function () {
        return (
          console.warn(
            "THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).",
          ),
          this.extensions.get('OES_texture_float')
        );
      },
      supportsHalfFloatTextures: function () {
        return (
          console.warn(
            "THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).",
          ),
          this.extensions.get('OES_texture_half_float')
        );
      },
      supportsStandardDerivatives: function () {
        return (
          console.warn(
            "THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).",
          ),
          this.extensions.get('OES_standard_derivatives')
        );
      },
      supportsCompressedTextureS3TC: function () {
        return (
          console.warn(
            "THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).",
          ),
          this.extensions.get('WEBGL_compressed_texture_s3tc')
        );
      },
      supportsCompressedTexturePVRTC: function () {
        return (
          console.warn(
            "THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).",
          ),
          this.extensions.get('WEBGL_compressed_texture_pvrtc')
        );
      },
      supportsBlendMinMax: function () {
        return (
          console.warn(
            "THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).",
          ),
          this.extensions.get('EXT_blend_minmax')
        );
      },
      supportsVertexTextures: function () {
        return (
          console.warn(
            'THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.',
          ),
          this.capabilities.vertexTextures
        );
      },
      supportsInstancedArrays: function () {
        return (
          console.warn(
            "THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).",
          ),
          this.extensions.get('ANGLE_instanced_arrays')
        );
      },
      enableScissorTest: function (e) {
        console.warn(
          'THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().',
        ),
          this.setScissorTest(e);
      },
      initMaterial: function () {
        console.warn('THREE.WebGLRenderer: .initMaterial() has been removed.');
      },
      addPrePlugin: function () {
        console.warn('THREE.WebGLRenderer: .addPrePlugin() has been removed.');
      },
      addPostPlugin: function () {
        console.warn('THREE.WebGLRenderer: .addPostPlugin() has been removed.');
      },
      updateShadowMap: function () {
        console.warn(
          'THREE.WebGLRenderer: .updateShadowMap() has been removed.',
        );
      },
      setFaceCulling: function () {
        console.warn(
          'THREE.WebGLRenderer: .setFaceCulling() has been removed.',
        );
      },
    }),
    Object.defineProperties($a.prototype, {
      shadowMapEnabled: {
        get: function () {
          return this.shadowMap.enabled;
        },
        set: function (e) {
          console.warn(
            'THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.',
          ),
            (this.shadowMap.enabled = e);
        },
      },
      shadowMapType: {
        get: function () {
          return this.shadowMap.type;
        },
        set: function (e) {
          console.warn(
            'THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.',
          ),
            (this.shadowMap.type = e);
        },
      },
      shadowMapCullFace: {
        get: function () {
          console.warn(
            'THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.',
          );
        },
        set: function () {
          console.warn(
            'THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.',
          );
        },
      },
    }),
    Object.defineProperties(Ka.prototype, {
      cullFace: {
        get: function () {
          console.warn(
            'THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.',
          );
        },
        set: function () {
          console.warn(
            'THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.',
          );
        },
      },
      renderReverseSided: {
        get: function () {
          console.warn(
            'THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.',
          );
        },
        set: function () {
          console.warn(
            'THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.',
          );
        },
      },
      renderSingleSided: {
        get: function () {
          console.warn(
            'THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.',
          );
        },
        set: function () {
          console.warn(
            'THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.',
          );
        },
      },
    }),
    Object.defineProperties(PA.prototype, {
      wrapS: {
        get: function () {
          return (
            console.warn(
              'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.',
            ),
            this.texture.wrapS
          );
        },
        set: function (e) {
          console.warn(
            'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.',
          ),
            (this.texture.wrapS = e);
        },
      },
      wrapT: {
        get: function () {
          return (
            console.warn(
              'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.',
            ),
            this.texture.wrapT
          );
        },
        set: function (e) {
          console.warn(
            'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.',
          ),
            (this.texture.wrapT = e);
        },
      },
      magFilter: {
        get: function () {
          return (
            console.warn(
              'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.',
            ),
            this.texture.magFilter
          );
        },
        set: function (e) {
          console.warn(
            'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.',
          ),
            (this.texture.magFilter = e);
        },
      },
      minFilter: {
        get: function () {
          return (
            console.warn(
              'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.',
            ),
            this.texture.minFilter
          );
        },
        set: function (e) {
          console.warn(
            'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.',
          ),
            (this.texture.minFilter = e);
        },
      },
      anisotropy: {
        get: function () {
          return (
            console.warn(
              'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.',
            ),
            this.texture.anisotropy
          );
        },
        set: function (e) {
          console.warn(
            'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.',
          ),
            (this.texture.anisotropy = e);
        },
      },
      offset: {
        get: function () {
          return (
            console.warn(
              'THREE.WebGLRenderTarget: .offset is now .texture.offset.',
            ),
            this.texture.offset
          );
        },
        set: function (e) {
          console.warn(
            'THREE.WebGLRenderTarget: .offset is now .texture.offset.',
          ),
            (this.texture.offset = e);
        },
      },
      repeat: {
        get: function () {
          return (
            console.warn(
              'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.',
            ),
            this.texture.repeat
          );
        },
        set: function (e) {
          console.warn(
            'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.',
          ),
            (this.texture.repeat = e);
        },
      },
      format: {
        get: function () {
          return (
            console.warn(
              'THREE.WebGLRenderTarget: .format is now .texture.format.',
            ),
            this.texture.format
          );
        },
        set: function (e) {
          console.warn(
            'THREE.WebGLRenderTarget: .format is now .texture.format.',
          ),
            (this.texture.format = e);
        },
      },
      type: {
        get: function () {
          return (
            console.warn(
              'THREE.WebGLRenderTarget: .type is now .texture.type.',
            ),
            this.texture.type
          );
        },
        set: function (e) {
          console.warn('THREE.WebGLRenderTarget: .type is now .texture.type.'),
            (this.texture.type = e);
        },
      },
      generateMipmaps: {
        get: function () {
          return (
            console.warn(
              'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.',
            ),
            this.texture.generateMipmaps
          );
        },
        set: function (e) {
          console.warn(
            'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.',
          ),
            (this.texture.generateMipmaps = e);
        },
      },
    }),
    Object.defineProperties(Za.prototype, {
      standing: {
        set: function () {
          console.warn('THREE.WebVRManager: .standing has been removed.');
        },
      },
    }),
    (xc.prototype.load = function (e) {
      console.warn(
        'THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.',
      );
      var t = this;
      return (
        new Bc().load(e, function (e) {
          t.setBuffer(e);
        }),
        this
      );
    }),
    (Cc.prototype.getData = function () {
      return (
        console.warn(
          'THREE.AudioAnalyser: .getData() is now .getFrequencyData().',
        ),
        this.getFrequencyData()
      );
    }),
    (yc.prototype.updateCubeMap = function (e, t) {
      return (
        console.warn('THREE.CubeCamera: .updateCubeMap() is now .update().'),
        this.update(e, t)
      );
    });
  var Xu = {
    merge: function (e, t, A) {
      var r;
      console.warn(
        'THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.',
      ),
        t.isMesh &&
          (t.matrixAutoUpdate && t.updateMatrix(),
          (r = t.matrix),
          (t = t.geometry)),
        e.merge(t, r, A);
    },
    center: function (e) {
      return (
        console.warn(
          'THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.',
        ),
        e.center()
      );
    },
  };
  (IA.crossOrigin = void 0),
    (IA.loadTexture = function (e, t, A, r) {
      console.warn(
        'THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.',
      );
      var n = new zs(),
        n = (n.setCrossOrigin(this.crossOrigin), n.load(e, A, void 0, r));
      return t && (n.mapping = t), n;
    }),
    (IA.loadTextureCube = function (e, t, A, r) {
      console.warn(
        'THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.',
      );
      var n = new ks(),
        n = (n.setCrossOrigin(this.crossOrigin), n.load(e, A, void 0, r));
      return t && (n.mapping = t), n;
    }),
    (IA.loadCompressedTexture = function () {
      console.error(
        'THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.',
      );
    }),
    (IA.loadCompressedTextureCube = function () {
      console.error(
        'THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.',
      );
    });
  su = {
    createMultiMaterialObject: function () {
      console.error(
        'THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js',
      );
    },
    detach: function () {
      console.error(
        'THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js',
      );
    },
    attach: function () {
      console.error(
        'THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js',
      );
    },
  };
  (e.WebGLRenderTargetCube = DA),
    (e.WebGLRenderTarget = PA),
    (e.WebGLRenderer = $a),
    (e.ShaderLib = $A),
    (e.UniformsLib = _e),
    (e.UniformsUtils = Te),
    (e.ShaderChunk = b),
    (e.FogExp2 = eo),
    (e.Fog = to),
    (e.Scene = Ao),
    (e.Sprite = ao),
    (e.LOD = so),
    (e.SkinnedMesh = uo),
    (e.Skeleton = lo),
    (e.Bone = co),
    (e.Mesh = f),
    (e.LineSegments = v),
    (e.LineLoop = ho),
    (e.Line = g),
    (e.Points = fo),
    (e.Group = Ya),
    (e.VideoTexture = go),
    (e.DataTexture = OA),
    (e.CompressedTexture = mo),
    (e.CubeTexture = ci),
    (e.CanvasTexture = vo),
    (e.DepthTexture = Bo),
    (e.Texture = h),
    (e.CompressedTextureLoader = Ns),
    (e.DataTextureLoader = Gs),
    (e.CubeTextureLoader = ks),
    (e.TextureLoader = zs),
    (e.ObjectLoader = Kl),
    (e.MaterialLoader = Il),
    (e.BufferGeometryLoader = Rl),
    (e.DefaultLoadingManager = Ps),
    (e.LoadingManager = Rs),
    (e.JSONLoader = zl),
    (e.ImageLoader = Vs),
    (e.ImageBitmapLoader = Jl),
    (e.FontLoader = $l),
    (e.FileLoader = Os),
    (e.Loader = Vl),
    (e.LoaderUtils = kl),
    (e.Cache = Is),
    (e.AudioLoader = Bc),
    (e.SpotLightShadow = fl),
    (e.SpotLight = gl),
    (e.PointLight = ml),
    (e.RectAreaLight = yl),
    (e.HemisphereLight = dl),
    (e.DirectionalLightShadow = vl),
    (e.DirectionalLight = Bl),
    (e.AmbientLight = wl),
    (e.LightShadow = pl),
    (e.Light = a),
    (e.StereoCamera = wc),
    (e.PerspectiveCamera = x),
    (e.OrthographicCamera = br),
    (e.CubeCamera = yc),
    (e.ArrayCamera = Ja),
    (e.Camera = xr),
    (e.AudioListener = Ec),
    (e.PositionalAudio = bc),
    (e.AudioContext = vc),
    (e.AudioAnalyser = Cc),
    (e.Audio = xc),
    (e.VectorKeyframeTrack = Ql),
    (e.StringKeyframeTrack = Sl),
    (e.QuaternionKeyframeTrack = Ml),
    (e.NumberKeyframeTrack = _l),
    (e.ColorKeyframeTrack = Tl),
    (e.BooleanKeyframeTrack = Fl),
    (e.PropertyMixer = Fc),
    (e.PropertyBinding = T),
    (e.KeyframeTrack = i),
    (e.AnimationUtils = B),
    (e.AnimationObjectGroup = cu),
    (e.AnimationMixer = hu),
    (e.AnimationClip = Ll),
    (e.Uniform = du),
    (e.InstancedBufferGeometry = pu),
    (e.BufferGeometry = $),
    (e.Geometry = pe),
    (e.InterleavedBufferAttribute = no),
    (e.InstancedInterleavedBuffer = fu),
    (e.InterleavedBuffer = ro),
    (e.InstancedBufferAttribute = gu),
    (e.Face3 = Cr),
    (e.Object3D = p),
    (e.Raycaster = mu),
    (e.Layers = rr),
    (e.EventDispatcher = r),
    (e.Clock = wu),
    (e.QuaternionLinearInterpolant = Ul),
    (e.LinearInterpolant = bl),
    (e.DiscreteInterpolant = Cl),
    (e.CubicInterpolant = xl),
    (e.Interpolant = El),
    (e.Triangle = Yn),
    (e.Math = xe),
    (e.Spherical = yu),
    (e.Cylindrical = Eu),
    (e.Plane = zA),
    (e.Frustum = KA),
    (e.Sphere = kA),
    (e.Ray = Wn),
    (e.Matrix4 = be),
    (e.Matrix3 = F),
    (e.Box3 = NA),
    (e.Box2 = xu),
    (e.Line3 = bu),
    (e.Euler = Ar),
    (e.Vector4 = Fe),
    (e.Vector3 = Ce),
    (e.Vector2 = he),
    (e.Quaternion = E),
    (e.Color = de),
    (e.ImmediateRenderObject = Cu),
    (e.VertexNormalsHelper = Fu),
    (e.SpotLightHelper = Tu),
    (e.SkeletonHelper = _u),
    (e.PointLightHelper = Uu),
    (e.RectAreaLightHelper = Mu),
    (e.HemisphereLightHelper = Su),
    (e.GridHelper = Qu),
    (e.PolarGridHelper = Lu),
    (e.FaceNormalsHelper = Hu),
    (e.DirectionalLightHelper = Iu),
    (e.CameraHelper = Ru),
    (e.BoxHelper = Pu),
    (e.Box3Helper = Du),
    (e.PlaneHelper = Ou),
    (e.ArrowHelper = Nu),
    (e.AxesHelper = Gu),
    (e.Shape = hl),
    (e.Path = ul),
    (e.ShapePath = Zl),
    (e.Font = ql),
    (e.CurvePath = cl),
    (e.Curve = l),
    (e.ImageUtils = IA),
    (e.ShapeUtils = $o),
    (e.WebGLUtils = Wa),
    (e.WireframeGeometry = wo),
    (e.ParametricGeometry = yo),
    (e.ParametricBufferGeometry = Eo),
    (e.TetrahedronGeometry = Co),
    (e.TetrahedronBufferGeometry = Fo),
    (e.OctahedronGeometry = To),
    (e.OctahedronBufferGeometry = _o),
    (e.IcosahedronGeometry = Uo),
    (e.IcosahedronBufferGeometry = Mo),
    (e.DodecahedronGeometry = So),
    (e.DodecahedronBufferGeometry = Qo),
    (e.PolyhedronGeometry = xo),
    (e.PolyhedronBufferGeometry = bo),
    (e.TubeGeometry = Lo),
    (e.TubeBufferGeometry = Ho),
    (e.TorusKnotGeometry = Io),
    (e.TorusKnotBufferGeometry = Ro),
    (e.TorusGeometry = Po),
    (e.TorusBufferGeometry = Do),
    (e.TextGeometry = as),
    (e.TextBufferGeometry = os),
    (e.SphereGeometry = ss),
    (e.SphereBufferGeometry = ls),
    (e.RingGeometry = cs),
    (e.RingBufferGeometry = us),
    (e.PlaneGeometry = rn),
    (e.PlaneBufferGeometry = nn),
    (e.LatheGeometry = hs),
    (e.LatheBufferGeometry = ds),
    (e.ShapeGeometry = ps),
    (e.ShapeBufferGeometry = fs),
    (e.ExtrudeGeometry = As),
    (e.ExtrudeBufferGeometry = rs),
    (e.EdgesGeometry = ms),
    (e.ConeGeometry = ws),
    (e.ConeBufferGeometry = ys),
    (e.CylinderGeometry = vs),
    (e.CylinderBufferGeometry = Bs),
    (e.CircleGeometry = Es),
    (e.CircleBufferGeometry = xs),
    (e.BoxGeometry = tn),
    (e.BoxBufferGeometry = An),
    (e.ShadowMaterial = Cs),
    (e.SpriteMaterial = io),
    (e.RawShaderMaterial = Fs),
    (e.ShaderMaterial = jn),
    (e.PointsMaterial = po),
    (e.MeshPhysicalMaterial = _s),
    (e.MeshStandardMaterial = Ts),
    (e.MeshPhongMaterial = Us),
    (e.MeshToonMaterial = Ms),
    (e.MeshNormalMaterial = Ss),
    (e.MeshLambertMaterial = Qs),
    (e.MeshDepthMaterial = ka),
    (e.MeshDistanceMaterial = za),
    (e.MeshBasicMaterial = Xn),
    (e.LineDashedMaterial = Ls),
    (e.LineBasicMaterial = m),
    (e.Material = t),
    (e.Float64BufferAttribute = Gr),
    (e.Float32BufferAttribute = q),
    (e.Uint32BufferAttribute = Nr),
    (e.Int32BufferAttribute = Or),
    (e.Uint16BufferAttribute = Dr),
    (e.Int16BufferAttribute = Pr),
    (e.Uint8ClampedBufferAttribute = Rr),
    (e.Uint8BufferAttribute = Ir),
    (e.Int8BufferAttribute = Hr),
    (e.BufferAttribute = y),
    (e.ArcCurve = Xs),
    (e.CatmullRomCurve3 = qs),
    (e.CubicBezierCurve = Al),
    (e.CubicBezierCurve3 = rl),
    (e.EllipseCurve = Ks),
    (e.LineCurve = nl),
    (e.LineCurve3 = il),
    (e.QuadraticBezierCurve = al),
    (e.QuadraticBezierCurve3 = ol),
    (e.SplineCurve = sl),
    (e.REVISION = '95'),
    (e.MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2, ROTATE: 0, DOLLY: 1, PAN: 2 }),
    (e.TOUCH = { ROTATE: 0, PAN: 1, DOLLY_PAN: 2, DOLLY_ROTATE: 3 }),
    (e.CullFaceNone = X),
    (e.CullFaceBack = j),
    (e.CullFaceFront = W),
    (e.CullFaceFrontBack = 3),
    (e.FrontFaceDirectionCW = 0),
    (e.FrontFaceDirectionCCW = 1),
    (e.BasicShadowMap = 0),
    (e.PCFShadowMap = Y),
    (e.PCFSoftShadowMap = J),
    (e.FrontSide = Z),
    (e.BackSide = Ee),
    (e.DoubleSide = ee),
    (e.FlatShading = 1),
    (e.SmoothShading = 2),
    (e.NoColors = 0),
    (e.FaceColors = 1),
    (e.VertexColors = 2),
    (e.NoBlending = te),
    (e.NormalBlending = Ae),
    (e.AdditiveBlending = re),
    (e.SubtractiveBlending = ne),
    (e.MultiplyBlending = ie),
    (e.CustomBlending = ae),
    (e.AddEquation = oe),
    (e.SubtractEquation = se),
    (e.ReverseSubtractEquation = le),
    (e.MinEquation = ce),
    (e.MaxEquation = ue),
    (e.ZeroFactor = fe),
    (e.OneFactor = ge),
    (e.SrcColorFactor = me),
    (e.OneMinusSrcColorFactor = ve),
    (e.SrcAlphaFactor = Be),
    (e.OneMinusSrcAlphaFactor = we),
    (e.DstAlphaFactor = ye),
    (e.OneMinusDstAlphaFactor = Ue),
    (e.DstColorFactor = Me),
    (e.OneMinusDstColorFactor = Se),
    (e.SrcAlphaSaturateFactor = Qe),
    (e.NeverDepth = Le),
    (e.AlwaysDepth = He),
    (e.LessDepth = Ie),
    (e.LessEqualDepth = Re),
    (e.EqualDepth = Pe),
    (e.GreaterEqualDepth = De),
    (e.GreaterDepth = Oe),
    (e.NotEqualDepth = Ne),
    (e.MultiplyOperation = Ge),
    (e.MixOperation = Ve),
    (e.AddOperation = ke),
    (e.NoToneMapping = ze),
    (e.LinearToneMapping = 1),
    (e.ReinhardToneMapping = 2),
    (e.Uncharted2ToneMapping = 3),
    (e.CineonToneMapping = 4),
    (e.UVMapping = 300),
    (e.CubeReflectionMapping = Ke),
    (e.CubeRefractionMapping = Xe),
    (e.EquirectangularReflectionMapping = je),
    (e.EquirectangularRefractionMapping = We),
    (e.SphericalReflectionMapping = Ye),
    (e.CubeUVReflectionMapping = Je),
    (e.CubeUVRefractionMapping = Ze),
    (e.RepeatWrapping = qe),
    (e.ClampToEdgeWrapping = $e),
    (e.MirroredRepeatWrapping = et),
    (e.NearestFilter = tt),
    (e.NearestMipMapNearestFilter = At),
    (e.NearestMipMapLinearFilter = rt),
    (e.LinearFilter = U),
    (e.LinearMipMapNearestFilter = nt),
    (e.LinearMipMapLinearFilter = it),
    (e.UnsignedByteType = at),
    (e.ByteType = ot),
    (e.ShortType = st),
    (e.UnsignedShortType = lt),
    (e.IntType = ct),
    (e.UnsignedIntType = ut),
    (e.FloatType = ht),
    (e.HalfFloatType = dt),
    (e.UnsignedShort4444Type = pt),
    (e.UnsignedShort5551Type = ft),
    (e.UnsignedShort565Type = gt),
    (e.UnsignedInt248Type = mt),
    (e.AlphaFormat = vt),
    (e.RGBFormat = Bt),
    (e.RGBAFormat = wt),
    (e.LuminanceFormat = yt),
    (e.LuminanceAlphaFormat = Et),
    (e.RGBEFormat = xt),
    (e.DepthFormat = bt),
    (e.DepthStencilFormat = Ct),
    (e.RGB_S3TC_DXT1_Format = Ft),
    (e.RGBA_S3TC_DXT1_Format = Tt),
    (e.RGBA_S3TC_DXT3_Format = _t),
    (e.RGBA_S3TC_DXT5_Format = Ut),
    (e.RGB_PVRTC_4BPPV1_Format = Mt),
    (e.RGB_PVRTC_2BPPV1_Format = St),
    (e.RGBA_PVRTC_4BPPV1_Format = Qt),
    (e.RGBA_PVRTC_2BPPV1_Format = Lt),
    (e.RGB_ETC1_Format = Ht),
    (e.RGBA_ASTC_4x4_Format = It),
    (e.RGBA_ASTC_5x4_Format = Rt),
    (e.RGBA_ASTC_5x5_Format = Pt),
    (e.RGBA_ASTC_6x5_Format = Dt),
    (e.RGBA_ASTC_6x6_Format = Ot),
    (e.RGBA_ASTC_8x5_Format = Nt),
    (e.RGBA_ASTC_8x6_Format = Gt),
    (e.RGBA_ASTC_8x8_Format = Vt),
    (e.RGBA_ASTC_10x5_Format = kt),
    (e.RGBA_ASTC_10x6_Format = zt),
    (e.RGBA_ASTC_10x8_Format = Kt),
    (e.RGBA_ASTC_10x10_Format = Xt),
    (e.RGBA_ASTC_12x10_Format = jt),
    (e.RGBA_ASTC_12x12_Format = Wt),
    (e.LoopOnce = 2200),
    (e.LoopRepeat = 2201),
    (e.LoopPingPong = 2202),
    (e.InterpolateDiscrete = Yt),
    (e.InterpolateLinear = Jt),
    (e.InterpolateSmooth = 2302),
    (e.ZeroCurvatureEnding = Zt),
    (e.ZeroSlopeEnding = qt),
    (e.WrapAroundEnding = $t),
    (e.TrianglesDrawMode = eA),
    (e.TriangleStripDrawMode = 1),
    (e.TriangleFanDrawMode = 2),
    (e.LinearEncoding = tA),
    (e.sRGBEncoding = 3001),
    (e.GammaEncoding = AA),
    (e.RGBEEncoding = 3002),
    (e.LogLuvEncoding = 3003),
    (e.RGBM7Encoding = 3004),
    (e.RGBM16Encoding = 3005),
    (e.RGBDEncoding = 3006),
    (e.BasicDepthPacking = rA),
    (e.RGBADepthPacking = nA),
    (e.TangentSpaceNormalMap = 0),
    (e.ObjectSpaceNormalMap = iA),
    (e.CubeGeometry = tn),
    (e.Face4 = function (e, t, A, r, n, i, a) {
      return (
        console.warn(
          'THREE.Face4 has been removed. A THREE.Face3 will be created instead.',
        ),
        new Cr(e, t, A, n, i, a)
      );
    }),
    (e.LineStrip = 0),
    (e.LinePieces = 1),
    (e.MeshFaceMaterial = function (e) {
      return (
        console.warn(
          'THREE.MeshFaceMaterial has been removed. Use an Array instead.',
        ),
        e
      );
    }),
    (e.MultiMaterial = function (e) {
      return (
        void 0 === e && (e = []),
        console.warn(
          'THREE.MultiMaterial has been removed. Use an Array instead.',
        ),
        (e.isMultiMaterial = !0),
        ((e.materials = e).clone = function () {
          return e.slice();
        }),
        e
      );
    }),
    (e.PointCloud = function (e, t) {
      return (
        console.warn('THREE.PointCloud has been renamed to THREE.Points.'),
        new fo(e, t)
      );
    }),
    (e.Particle = function (e) {
      return (
        console.warn('THREE.Particle has been renamed to THREE.Sprite.'),
        new ao(e)
      );
    }),
    (e.ParticleSystem = function (e, t) {
      return (
        console.warn('THREE.ParticleSystem has been renamed to THREE.Points.'),
        new fo(e, t)
      );
    }),
    (e.PointCloudMaterial = function (e) {
      return (
        console.warn(
          'THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.',
        ),
        new po(e)
      );
    }),
    (e.ParticleBasicMaterial = function (e) {
      return (
        console.warn(
          'THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.',
        ),
        new po(e)
      );
    }),
    (e.ParticleSystemMaterial = function (e) {
      return (
        console.warn(
          'THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.',
        ),
        new po(e)
      );
    }),
    (e.Vertex = function (e, t, A) {
      return (
        console.warn(
          'THREE.Vertex has been removed. Use THREE.Vector3 instead.',
        ),
        new Ce(e, t, A)
      );
    }),
    (e.DynamicBufferAttribute = function (e, t) {
      return (
        console.warn(
          'THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.',
        ),
        new y(e, t).setDynamic(!0)
      );
    }),
    (e.Int8Attribute = function (e, t) {
      return (
        console.warn(
          'THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.',
        ),
        new Hr(e, t)
      );
    }),
    (e.Uint8Attribute = function (e, t) {
      return (
        console.warn(
          'THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.',
        ),
        new Ir(e, t)
      );
    }),
    (e.Uint8ClampedAttribute = function (e, t) {
      return (
        console.warn(
          'THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.',
        ),
        new Rr(e, t)
      );
    }),
    (e.Int16Attribute = function (e, t) {
      return (
        console.warn(
          'THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.',
        ),
        new Pr(e, t)
      );
    }),
    (e.Uint16Attribute = function (e, t) {
      return (
        console.warn(
          'THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.',
        ),
        new Dr(e, t)
      );
    }),
    (e.Int32Attribute = function (e, t) {
      return (
        console.warn(
          'THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.',
        ),
        new Or(e, t)
      );
    }),
    (e.Uint32Attribute = function (e, t) {
      return (
        console.warn(
          'THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.',
        ),
        new Nr(e, t)
      );
    }),
    (e.Float32Attribute = function (e, t) {
      return (
        console.warn(
          'THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.',
        ),
        new q(e, t)
      );
    }),
    (e.Float64Attribute = function (e, t) {
      return (
        console.warn(
          'THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.',
        ),
        new Gr(e, t)
      );
    }),
    (e.ClosedSplineCurve3 = ku),
    (e.SplineCurve3 = zu),
    (e.Spline = Ku),
    (e.AxisHelper = function (e) {
      return (
        console.warn('THREE.AxisHelper has been renamed to THREE.AxesHelper.'),
        new Gu(e)
      );
    }),
    (e.BoundingBoxHelper = function (e, t) {
      return (
        console.warn(
          'THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.',
        ),
        new Pu(e, t)
      );
    }),
    (e.EdgesHelper = function (e, t) {
      return (
        console.warn(
          'THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.',
        ),
        new v(new ms(e.geometry), new m({ color: void 0 !== t ? t : 16777215 }))
      );
    }),
    (e.WireframeHelper = function (e, t) {
      return (
        console.warn(
          'THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.',
        ),
        new v(new wo(e.geometry), new m({ color: void 0 !== t ? t : 16777215 }))
      );
    }),
    (e.XHRLoader = function (e) {
      return (
        console.warn('THREE.XHRLoader has been renamed to THREE.FileLoader.'),
        new Os(e)
      );
    }),
    (e.BinaryTextureLoader = function (e) {
      return (
        console.warn(
          'THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.',
        ),
        new Gs(e)
      );
    }),
    (e.GeometryUtils = Xu),
    (e.Projector = function () {
      console.error(
        'THREE.Projector has been moved to /examples/js/renderers/Projector.js.',
      ),
        (this.projectVector = function (e, t) {
          console.warn(
            'THREE.Projector: .projectVector() is now vector.project().',
          ),
            e.project(t);
        }),
        (this.unprojectVector = function (e, t) {
          console.warn(
            'THREE.Projector: .unprojectVector() is now vector.unproject().',
          ),
            e.unproject(t);
        }),
        (this.pickingRay = function () {
          console.error(
            'THREE.Projector: .pickingRay() is now raycaster.setFromCamera().',
          );
        });
    }),
    (e.CanvasRenderer = function () {
      console.error(
        'THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js',
      ),
        (this.domElement = document.createElementNS(
          'http://www.w3.org/1999/xhtml',
          'canvas',
        )),
        (this.clear = function () {}),
        (this.render = function () {}),
        (this.setClearColor = function () {}),
        (this.setSize = function () {});
    }),
    (e.SceneUtils = su),
    (e.LensFlare = function () {
      console.error(
        'THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js',
      );
    }),
    Object.defineProperty(e, '__esModule', { value: !0 });
});
var Earcut = {
  triangulate: function (e, t, A) {
    A = A || 2;
    var r,
      n,
      i,
      a,
      o,
      s = t && t.length,
      l = s ? t[0] * A : e.length,
      c = linkedList(e, 0, l, A, !0),
      u = [];
    if (c) {
      if ((s && (c = eliminateHoles(e, t, c, A)), e.length > 80 * A)) {
        for (var h = (r = e[0]), d = (n = e[1]), p = A; p < l; p += A)
          (i = e[p]) < h && (h = i),
            (a = e[p + 1]) < d && (d = a),
            r < i && (r = i),
            n < a && (n = a);
        o = 0 !== (o = Math.max(r - h, n - d)) ? 1 / o : 0;
      }
      earcutLinked(c, u, A, h, d, o);
    }
    return u;
  },
};
function linkedList(e, t, A, r, n) {
  var i, a;
  if (n === 0 < signedArea(e, t, A, r))
    for (i = t; i < A; i += r) a = insertNode(i, e[i], e[i + 1], a);
  else for (i = A - r; t <= i; i -= r) a = insertNode(i, e[i], e[i + 1], a);
  return a && equals(a, a.next) && (removeNode(a), (a = a.next)), a;
}
function filterPoints(e, t) {
  if (!e) return e;
  t = t || e;
  var A,
    r = e;
  do {
    if (
      ((A = !1),
      r.steiner || (!equals(r, r.next) && 0 !== area(r.prev, r, r.next)))
    )
      r = r.next;
    else {
      if ((removeNode(r), (r = t = r.prev) === r.next)) break;
      A = !0;
    }
  } while (A || r !== t);
  return t;
}
function earcutLinked(e, t, A, r, n, i, a) {
  if (e) {
    !a && i && indexCurve(e, r, n, i);
    for (var o, s, l = e; e.prev !== e.next; )
      if (((o = e.prev), (s = e.next), i ? isEarHashed(e, r, n, i) : isEar(e)))
        t.push(o.i / A),
          t.push(e.i / A),
          t.push(s.i / A),
          removeNode(e),
          (e = s.next),
          (l = s.next);
      else if ((e = s) === l) {
        a
          ? 1 === a
            ? earcutLinked(
                (e = cureLocalIntersections(e, t, A)),
                t,
                A,
                r,
                n,
                i,
                2,
              )
            : 2 === a && splitEarcut(e, t, A, r, n, i)
          : earcutLinked(filterPoints(e), t, A, r, n, i, 1);
        break;
      }
  }
}
function isEar(e) {
  var t = e.prev,
    A = e,
    r = e.next;
  if (0 <= area(t, A, r)) return !1;
  for (var n = e.next.next; n !== e.prev; ) {
    if (
      pointInTriangle(t.x, t.y, A.x, A.y, r.x, r.y, n.x, n.y) &&
      0 <= area(n.prev, n, n.next)
    )
      return !1;
    n = n.next;
  }
  return !0;
}
function isEarHashed(e, t, A, r) {
  var n = e.prev,
    i = e,
    a = e.next;
  if (0 <= area(n, i, a)) return !1;
  for (
    var o = (n.x < i.x ? (n.x < a.x ? n : a) : i.x < a.x ? i : a).x,
      s = (n.y < i.y ? (n.y < a.y ? n : a) : i.y < a.y ? i : a).y,
      l = (n.x > i.x ? (n.x > a.x ? n : a) : i.x > a.x ? i : a).x,
      c = (n.y > i.y ? (n.y > a.y ? n : a) : i.y > a.y ? i : a).y,
      u = zOrder(o, s, t, A, r),
      h = zOrder(l, c, t, A, r),
      d = e.nextZ;
    d && d.z <= h;

  ) {
    if (
      d !== e.prev &&
      d !== e.next &&
      pointInTriangle(n.x, n.y, i.x, i.y, a.x, a.y, d.x, d.y) &&
      0 <= area(d.prev, d, d.next)
    )
      return !1;
    d = d.nextZ;
  }
  for (d = e.prevZ; d && d.z >= u; ) {
    if (
      d !== e.prev &&
      d !== e.next &&
      pointInTriangle(n.x, n.y, i.x, i.y, a.x, a.y, d.x, d.y) &&
      0 <= area(d.prev, d, d.next)
    )
      return !1;
    d = d.prevZ;
  }
  return !0;
}
function cureLocalIntersections(e, t, A) {
  var r = e;
  do {
    var n = r.prev,
      i = r.next.next;
  } while (
    (!equals(n, i) &&
      intersects(n, r, r.next, i) &&
      locallyInside(n, i) &&
      locallyInside(i, n) &&
      (t.push(n.i / A),
      t.push(r.i / A),
      t.push(i.i / A),
      removeNode(r),
      removeNode(r.next),
      (r = e = i)),
    (r = r.next) !== e)
  );
  return r;
}
function splitEarcut(e, t, A, r, n, i) {
  var a = e;
  do {
    for (var o, s = a.next.next; s !== a.prev; ) {
      if (a.i !== s.i && isValidDiagonal(a, s))
        return (
          (o = splitPolygon(a, s)),
          (a = filterPoints(a, a.next)),
          (o = filterPoints(o, o.next)),
          earcutLinked(a, t, A, r, n, i),
          void earcutLinked(o, t, A, r, n, i)
        );
      s = s.next;
    }
  } while ((a = a.next) !== e);
}
function eliminateHoles(e, t, A, r) {
  for (var n, i = [], a = 0, o = t.length; a < o; a++)
    (n = linkedList(
      e,
      t[a] * r,
      a < o - 1 ? t[a + 1] * r : e.length,
      r,
      !1,
    )) === n.next && (n.steiner = !0),
      i.push(getLeftmost(n));
  for (i.sort(compareX), a = 0; a < i.length; a++)
    eliminateHole(i[a], A), (A = filterPoints(A, A.next));
  return A;
}
function compareX(e, t) {
  return e.x - t.x;
}
function eliminateHole(e, t) {
  (t = findHoleBridge(e, t)) && filterPoints((t = splitPolygon(t, e)), t.next);
}
function findHoleBridge(e, t) {
  var A,
    r = t,
    n = e.x,
    i = e.y,
    a = -1 / 0;
  do {
    if (i <= r.y && i >= r.next.y && r.next.y !== r.y) {
      var o = r.x + ((i - r.y) * (r.next.x - r.x)) / (r.next.y - r.y);
      if (o <= n && a < o) {
        if ((a = o) === n) {
          if (i === r.y) return r;
          if (i === r.next.y) return r.next;
        }
        A = r.x < r.next.x ? r : r.next;
      }
    }
  } while ((r = r.next) !== t);
  if (!A) return null;
  if (n === a) return A.prev;
  for (var s, l = A, c = A.x, u = A.y, h = 1 / 0, r = A.next; r !== l; )
    n >= r.x &&
      r.x >= c &&
      n !== r.x &&
      pointInTriangle(i < u ? n : a, i, c, u, i < u ? a : n, i, r.x, r.y) &&
      ((s = Math.abs(i - r.y) / (n - r.x)) < h || (s === h && r.x > A.x)) &&
      locallyInside(r, e) &&
      ((A = r), (h = s)),
      (r = r.next);
  return A;
}
function indexCurve(e, t, A, r) {
  for (
    var n = e;
    null === n.z && (n.z = zOrder(n.x, n.y, t, A, r)),
      (n.prevZ = n.prev),
      (n.nextZ = n.next),
      (n = n.next) !== e;

  );
  (n.prevZ.nextZ = null), (n.prevZ = null), sortLinked(n);
}
function sortLinked(e) {
  var t,
    A,
    r,
    n,
    i,
    a,
    o,
    s,
    l = 1;
  do {
    for (A = e, i = e = null, a = 0; A; ) {
      for (a++, r = A, t = o = 0; t < l && (o++, (r = r.nextZ)); t++);
      for (s = l; 0 < o || (0 < s && r); )
        0 !== o && (0 === s || !r || A.z <= r.z)
          ? ((A = (n = A).nextZ), o--)
          : ((r = (n = r).nextZ), s--),
          i ? (i.nextZ = n) : (e = n),
          (n.prevZ = i),
          (i = n);
      A = r;
    }
  } while (((i.nextZ = null), (l *= 2), 1 < a));
  return e;
}
function zOrder(e, t, A, r, n) {
  return (
    (e =
      1431655765 &
      ((e =
        858993459 &
        ((e =
          252645135 &
          ((e = 16711935 & ((e = 32767 * (e - A) * n) | (e << 8))) |
            (e << 4))) |
          (e << 2))) |
        (e << 1))) |
    ((t =
      1431655765 &
      ((t =
        858993459 &
        ((t =
          252645135 &
          ((t = 16711935 & ((t = 32767 * (t - r) * n) | (t << 8))) |
            (t << 4))) |
          (t << 2))) |
        (t << 1))) <<
      1)
  );
}
function getLeftmost(e) {
  for (var t = e, A = e; t.x < A.x && (A = t), (t = t.next) !== e; );
  return A;
}
function pointInTriangle(e, t, A, r, n, i, a, o) {
  return (
    0 <= (n - a) * (t - o) - (e - a) * (i - o) &&
    0 <= (e - a) * (r - o) - (A - a) * (t - o) &&
    0 <= (A - a) * (i - o) - (n - a) * (r - o)
  );
}
function isValidDiagonal(e, t) {
  return (
    e.next.i !== t.i &&
    e.prev.i !== t.i &&
    !intersectsPolygon(e, t) &&
    locallyInside(e, t) &&
    locallyInside(t, e) &&
    middleInside(e, t)
  );
}
function area(e, t, A) {
  return (t.y - e.y) * (A.x - t.x) - (t.x - e.x) * (A.y - t.y);
}
function equals(e, t) {
  return e.x === t.x && e.y === t.y;
}
function intersects(e, t, A, r) {
  return (
    !!((equals(e, t) && equals(A, r)) || (equals(e, r) && equals(A, t))) ||
    (0 < area(e, t, A) != 0 < area(e, t, r) &&
      0 < area(A, r, e) != 0 < area(A, r, t))
  );
}
function intersectsPolygon(e, t) {
  var A = e;
  do {
    if (
      A.i !== e.i &&
      A.next.i !== e.i &&
      A.i !== t.i &&
      A.next.i !== t.i &&
      intersects(A, A.next, e, t)
    )
      return !0;
  } while ((A = A.next) !== e);
  return !1;
}
function locallyInside(e, t) {
  return area(e.prev, e, e.next) < 0
    ? 0 <= area(e, t, e.next) && 0 <= area(e, e.prev, t)
    : area(e, t, e.prev) < 0 || area(e, e.next, t) < 0;
}
function middleInside(e, t) {
  for (
    var A = e, r = !1, n = (e.x + t.x) / 2, i = (e.y + t.y) / 2;
    A.y > i != A.next.y > i &&
      A.next.y !== A.y &&
      n < ((A.next.x - A.x) * (i - A.y)) / (A.next.y - A.y) + A.x &&
      (r = !r),
      (A = A.next) !== e;

  );
  return r;
}
function splitPolygon(e, t) {
  var A = new EarcutNode(e.i, e.x, e.y),
    r = new EarcutNode(t.i, t.x, t.y),
    n = e.next,
    i = t.prev;
  return (
    ((e.next = t).prev = e),
    ((A.next = n).prev = A),
    ((r.next = A).prev = r),
    ((i.next = r).prev = i),
    r
  );
}
function insertNode(e, t, A, r) {
  e = new EarcutNode(e, t, A);
  return (
    r
      ? ((e.next = r.next), ((e.prev = r).next.prev = e), (r.next = e))
      : ((e.prev = e).next = e),
    e
  );
}
function removeNode(e) {
  (e.next.prev = e.prev),
    (e.prev.next = e.next),
    e.prevZ && (e.prevZ.nextZ = e.nextZ),
    e.nextZ && (e.nextZ.prevZ = e.prevZ);
}
function EarcutNode(e, t, A) {
  (this.i = e),
    (this.x = t),
    (this.y = A),
    (this.prev = null),
    (this.next = null),
    (this.z = null),
    (this.prevZ = null),
    (this.nextZ = null),
    (this.steiner = !1);
}
function signedArea(e, t, A, r) {
  for (var n = 0, i = t, a = A - r; i < A; i += r)
    (n += (e[a] - e[i]) * (e[i + 1] + e[a + 1])), (a = i);
  return n;
}
(THREE.OrbitControls = function (R, e) {
  void 0 === e &&
    console.warn(
      'THREE.OrbitControls: The second parameter "domElement" is now mandatory.',
    ),
    e === document &&
      console.error(
        'THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.',
      ),
    (this.object = R),
    (this.domElement = e),
    (this.enabled = !0),
    (this.target = new THREE.Vector3()),
    (this.minDistance = 0),
    (this.maxDistance = 1 / 0),
    (this.minZoom = 0),
    (this.maxZoom = 1 / 0),
    (this.minPolarAngle = 0),
    (this.maxPolarAngle = Math.PI),
    (this.minAzimuthAngle = -1 / 0),
    (this.maxAzimuthAngle = 1 / 0),
    (this.enableDamping = !1),
    (this.dampingFactor = 0.05),
    (this.enableZoom = !0),
    (this.zoomSpeed = 1),
    (this.enableRotate = !0),
    (this.rotateSpeed = 1),
    (this.enablePan = !0),
    (this.panSpeed = 1),
    (this.screenSpacePanning = !1),
    (this.keyPanSpeed = 7),
    (this.autoRotate = !1),
    (this.autoRotateSpeed = 2),
    (this.enableKeys = !0),
    (this.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 }),
    (this.mouseButtons = {
      LEFT: THREE.MOUSE.ROTATE,
      MIDDLE: THREE.MOUSE.DOLLY,
      RIGHT: THREE.MOUSE.PAN,
    }),
    (this.touches = { ONE: THREE.TOUCH.PAN, TWO: THREE.TOUCH.DOLLY_ROTATE }),
    (this.target0 = this.target.clone()),
    (this.position0 = this.object.position.clone()),
    (this.zoom0 = this.object.zoom),
    (this.getPolarAngle = function () {
      return c.phi;
    }),
    (this.getAzimuthalAngle = function () {
      return c.theta;
    }),
    (this.saveState = function () {
      a.target0.copy(a.target),
        a.position0.copy(a.object.position),
        (a.zoom0 = a.object.zoom);
    }),
    (this.reset = function () {
      a.target.copy(a.target0),
        a.object.position.copy(a.position0),
        (a.object.zoom = a.zoom0),
        a.object.updateProjectionMatrix(),
        a.dispatchEvent(D),
        a.update(),
        (l = s.NONE);
    }),
    (this.update =
      ((A = new THREE.Vector3()),
      (r = new THREE.Quaternion().setFromUnitVectors(
        R.up,
        new THREE.Vector3(0, 1, 0),
      )),
      (P = r.clone().inverse()),
      (n = new THREE.Vector3()),
      (i = new THREE.Quaternion()),
      function (e) {
        var t = a.object.position;
        if (
          (A.copy(t).sub(a.target),
          A.applyQuaternion(r),
          c.setFromVector3(A),
          a.autoRotate &&
            l === s.NONE &&
            U(((2 * Math.PI) / 60 / 60) * a.autoRotateSpeed),
          (c.theta += u.theta),
          (c.phi += u.phi),
          (c.theta = Math.max(
            a.minAzimuthAngle,
            Math.min(a.maxAzimuthAngle, c.theta),
          )),
          (c.phi = Math.max(a.minPolarAngle, Math.min(a.maxPolarAngle, c.phi))),
          c.makeSafe(),
          !0 === a.enableDamping)
        ) {
          c.radius *= p;
          let e = (p - 1) * (1 - a.dampingFactor) * 0.8;
          Math.abs(e) < 1e-5 && (e = 0), (p = 1 + e);
        } else (c.radius *= p), (p = 1);
        return (
          (c.radius = Math.max(
            a.minDistance,
            Math.min(a.maxDistance, c.radius),
          )),
          a.target.add(f),
          A.setFromSpherical(c),
          A.applyQuaternion(P),
          t.copy(a.target).add(A),
          a.object.lookAt(a.target),
          !0 === a.enableDamping
            ? (e && (d.set(h.radius, h.phi, h.theta), h.set(0, 0, 0)),
              (d.theta *= 1 - a.dampingFactor),
              (d.phi *= 1 - a.dampingFactor),
              (u.theta = d.theta),
              (u.phi = d.phi),
              e && (m.set(g.x, g.y, g.z), g.set(0, 0, 0)),
              m.multiplyScalar(1 - a.dampingFactor),
              f.set(m.x, m.y, m.z))
            : (u.set(0, 0, 0), f.set(0, 0, 0)),
          !(
            !(
              v ||
              n.distanceToSquared(a.object.position) > O ||
              8 * (1 - i.dot(a.object.quaternion)) > O
            ) ||
            (a.dispatchEvent(D),
            n.copy(a.object.position),
            i.copy(a.object.quaternion),
            (v = !1))
          )
        );
      })),
    (this.dispose = function () {
      a.domElement.removeEventListener('contextmenu', ie, !1),
        a.domElement.removeEventListener('mousedown', Z, !1),
        a.domElement.removeEventListener('wheel', ee, !1),
        a.domElement.removeEventListener('touchstart', Ae, !1),
        a.domElement.removeEventListener('touchend', ne, !1),
        a.domElement.removeEventListener('touchmove', re, !1),
        document.removeEventListener('mousemove', q, !1),
        document.removeEventListener('mouseup', $, !1),
        a.domElement.removeEventListener('keydown', te, !1);
    });
  var A,
    r,
    P,
    n,
    i,
    a = this,
    D = { type: 'change' },
    o = { type: 'start' },
    t = { type: 'end' },
    s = {
      NONE: -1,
      ROTATE: 0,
      DOLLY: 1,
      PAN: 2,
      TOUCH_ROTATE: 3,
      TOUCH_PAN: 4,
      TOUCH_DOLLY_PAN: 5,
      TOUCH_DOLLY_ROTATE: 6,
    },
    l = s.NONE,
    O = 1e-6,
    c = new THREE.Spherical(),
    u = new THREE.Spherical(),
    h = new THREE.Spherical(),
    d = new THREE.Spherical(),
    p = ((this.spherical = c), (this.sphericalDelta = u), 1),
    f = new THREE.Vector3(),
    g = new THREE.Vector3(),
    m = new THREE.Vector3(),
    v = !1,
    B = new THREE.Vector2(),
    w = new THREE.Vector2(),
    y = new THREE.Vector2(),
    E = new THREE.Vector2(),
    x = new THREE.Vector2(),
    b = new THREE.Vector2(),
    C = new THREE.Vector2(),
    F = new THREE.Vector2(),
    T = new THREE.Vector2();
  function _() {
    return Math.pow(0.95, a.zoomSpeed);
  }
  function U(e) {
    u.theta -= e;
  }
  function N(e) {
    u.phi -= e;
  }
  M = new THREE.Vector3();
  var M,
    S,
    Q,
    G = function (e, t) {
      M.setFromMatrixColumn(t, 0), M.multiplyScalar(-e), f.add(M);
    },
    V =
      ((S = new THREE.Vector3()),
      function (e, t) {
        !0 === a.screenSpacePanning
          ? S.setFromMatrixColumn(t, 1)
          : (S.setFromMatrixColumn(t, 0), S.crossVectors(a.object.up, S)),
          S.multiplyScalar(e),
          f.add(S);
      }),
    L =
      ((Q = new THREE.Vector3()),
      function (e, t) {
        var A,
          r = a.domElement;
        a.object.isPerspectiveCamera
          ? ((A = a.object.position),
            Q.copy(A).sub(a.target),
            (A = Q.length()),
            (A *= Math.tan(((a.object.fov / 2) * Math.PI) / 180)),
            G((2 * e * A) / r.clientHeight, a.object.matrix),
            V((2 * t * A) / r.clientHeight, a.object.matrix))
          : a.object.isOrthographicCamera
          ? (G(
              (e * (a.object.right - a.object.left)) /
                a.object.zoom /
                r.clientWidth,
              a.object.matrix,
            ),
            V(
              (t * (a.object.top - a.object.bottom)) /
                a.object.zoom /
                r.clientHeight,
              a.object.matrix,
            ))
          : (console.warn(
              'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.',
            ),
            (a.enablePan = !1)),
          g.set(f.x, f.y, f.z);
      });
  function H(e) {
    a.object.isPerspectiveCamera
      ? (p /= e)
      : a.object.isOrthographicCamera
      ? ((a.object.zoom = Math.max(
          a.minZoom,
          Math.min(a.maxZoom, a.object.zoom * e),
        )),
        a.object.updateProjectionMatrix(),
        (v = !0))
      : (console.warn(
          'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.',
        ),
        (a.enableZoom = !1));
  }
  function k(e) {
    a.object.isPerspectiveCamera
      ? (p *= e)
      : a.object.isOrthographicCamera
      ? ((a.object.zoom = Math.max(
          a.minZoom,
          Math.min(a.maxZoom, a.object.zoom / e),
        )),
        a.object.updateProjectionMatrix(),
        (v = !0))
      : (console.warn(
          'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.',
        ),
        (a.enableZoom = !1));
  }
  function I(e) {
    B.set(e.clientX, e.clientY);
  }
  function z(e) {
    E.set(e.clientX, e.clientY);
  }
  function K(e) {
    var t;
    1 == e.touches.length
      ? B.set(e.touches[0].pageX, e.touches[0].pageY)
      : ((t = 0.5 * (e.touches[0].pageX + e.touches[1].pageX)),
        (e = 0.5 * (e.touches[0].pageY + e.touches[1].pageY)),
        B.set(t, e));
  }
  function X(e) {
    var t;
    1 == e.touches.length
      ? E.set(e.touches[0].pageX, e.touches[0].pageY)
      : ((t = 0.5 * (e.touches[0].pageX + e.touches[1].pageX)),
        (e = 0.5 * (e.touches[0].pageY + e.touches[1].pageY)),
        E.set(t, e));
  }
  function j(e) {
    var t = e.touches[0].pageX - e.touches[1].pageX,
      e = e.touches[0].pageY - e.touches[1].pageY,
      t = Math.sqrt(t * t + e * e);
    C.set(0, t);
  }
  function W(e) {
    1 == e.touches.length
      ? w.set(e.touches[0].pageX, e.touches[0].pageY)
      : ((t = 0.5 * (e.touches[0].pageX + e.touches[1].pageX)),
        (e = 0.5 * (e.touches[0].pageY + e.touches[1].pageY)),
        w.set(t, e)),
      y.subVectors(w, B).multiplyScalar(a.rotateSpeed);
    var t = a.domElement;
    U((2 * Math.PI * y.x) / t.clientHeight),
      N((2 * Math.PI * y.y) / t.clientHeight),
      h.set(u.radius, u.phi, u.theta),
      B.copy(w);
  }
  function Y(e) {
    var t;
    1 == e.touches.length
      ? x.set(e.touches[0].pageX, e.touches[0].pageY)
      : ((t = 0.5 * (e.touches[0].pageX + e.touches[1].pageX)),
        (e = 0.5 * (e.touches[0].pageY + e.touches[1].pageY)),
        x.set(t, e)),
      b.subVectors(x, E).multiplyScalar(a.panSpeed),
      L(b.x, b.y),
      E.copy(x);
  }
  function J(e) {
    var t = e.touches[0].pageX - e.touches[1].pageX,
      e = e.touches[0].pageY - e.touches[1].pageY,
      t = Math.sqrt(t * t + e * e);
    F.set(0, t), T.set(0, Math.pow(F.y / C.y, a.zoomSpeed)), H(T.y), C.copy(F);
  }
  function Z(e) {
    if (!1 !== a.enabled) {
      switch (
        (e.preventDefault(),
        (a.domElement.focus ? a.domElement : window).focus(),
        e.button)
      ) {
        case 0:
          switch (a.mouseButtons.LEFT) {
            case THREE.MOUSE.ROTATE:
              if (e.ctrlKey || e.metaKey || e.shiftKey) {
                if (!1 === a.enablePan) return;
                z(e), (l = s.PAN);
              } else {
                if (!1 === a.enableRotate) return;
                I(e), (l = s.ROTATE);
              }
              break;
            case THREE.MOUSE.PAN:
              if (e.ctrlKey || e.metaKey || e.shiftKey) {
                if (!1 === a.enableRotate) return;
                I(e), (l = s.ROTATE);
              } else {
                if (!1 === a.enablePan) return;
                z(e), (l = s.PAN);
              }
              break;
            default:
              l = s.NONE;
          }
          break;
        case 1:
          if (a.mouseButtons.MIDDLE === THREE.MOUSE.DOLLY) {
            if (!1 === a.enableZoom) return;
            C.set(e.clientX, e.clientY), (l = s.DOLLY);
          } else l = s.NONE;
          break;
        case 2:
          switch (a.mouseButtons.RIGHT) {
            case THREE.MOUSE.ROTATE:
              if (!1 === a.enableRotate) return;
              I(e), (l = s.ROTATE);
              break;
            case THREE.MOUSE.PAN:
              if (!1 === a.enablePan) return;
              z(e), (l = s.PAN);
              break;
            default:
              l = s.NONE;
          }
      }
      l !== s.NONE &&
        (document.addEventListener('mousemove', q, !1),
        document.addEventListener('mouseup', $, !1),
        a.dispatchEvent(o));
    }
  }
  function q(e) {
    var t;
    if (!1 !== a.enabled)
      switch ((e.preventDefault(), l)) {
        case s.ROTATE:
          !1 !== a.enableRotate &&
            ((t = e),
            w.set(t.clientX, t.clientY),
            y.subVectors(w, B).multiplyScalar(a.rotateSpeed),
            (t = a.domElement),
            U((2 * Math.PI * y.x) / t.clientHeight),
            N((2 * Math.PI * y.y) / t.clientHeight),
            h.set(u.radius, u.phi, u.theta),
            B.copy(w),
            a.update());
          break;
        case s.DOLLY:
          !1 !== a.enableZoom &&
            (F.set(e.clientX, e.clientY),
            T.subVectors(F, C),
            0 < T.y ? H(_()) : T.y < 0 && k(_()),
            C.copy(F),
            a.update());
          break;
        case s.PAN:
          !1 !== a.enablePan &&
            (x.set(e.clientX, e.clientY),
            b.subVectors(x, E).multiplyScalar(a.panSpeed),
            L(b.x, b.y),
            E.copy(x),
            a.update());
      }
  }
  function $(e) {
    !1 !== a.enabled &&
      (a.update(!0),
      document.removeEventListener('mousemove', q, !1),
      document.removeEventListener('mouseup', $, !1),
      a.dispatchEvent(t),
      (l = s.NONE));
  }
  function ee(e) {
    !1 === a.enabled ||
      !1 === a.enableZoom ||
      (l !== s.NONE && l !== s.ROTATE) ||
      (e.preventDefault(),
      e.stopPropagation(),
      a.dispatchEvent(o),
      (e = e).deltaY < 0 ? k(_()) : 0 < e.deltaY && H(_()),
      a.update(),
      a.dispatchEvent(t));
  }
  function te(e) {
    if (!1 !== a.enabled && !1 !== a.enableKeys && !1 !== a.enablePan) {
      var t = !1;
      switch (e.keyCode) {
        case a.keys.UP:
          L(0, a.keyPanSpeed), (t = !0);
          break;
        case a.keys.BOTTOM:
          L(0, -a.keyPanSpeed), (t = !0);
          break;
        case a.keys.LEFT:
          L(a.keyPanSpeed, 0), (t = !0);
          break;
        case a.keys.RIGHT:
          L(-a.keyPanSpeed, 0), (t = !0);
      }
      t && (e.preventDefault(), a.update());
    }
  }
  function Ae(e) {
    if (!1 !== a.enabled) {
      switch ((e.preventDefault(), e.touches.length)) {
        case 1:
          switch (a.touches.ONE) {
            case THREE.TOUCH.ROTATE:
              if (!1 === a.enableRotate) return;
              K(e), (l = s.TOUCH_ROTATE);
              break;
            case THREE.TOUCH.PAN:
              if (!1 === a.enablePan) return;
              X(e), (l = s.TOUCH_PAN);
              break;
            default:
              l = s.NONE;
          }
          break;
        case 2:
          switch (a.touches.TWO) {
            case THREE.TOUCH.DOLLY_PAN:
              if (!1 === a.enableZoom && !1 === a.enablePan) return;
              (t = e),
                a.enableZoom && j(t),
                a.enablePan && X(t),
                (l = s.TOUCH_DOLLY_PAN);
              break;
            case THREE.TOUCH.DOLLY_ROTATE:
              if (!1 === a.enableZoom && !1 === a.enableRotate) return;
              (t = e),
                a.enableZoom && j(t),
                a.enableRotate && K(t),
                (l = s.TOUCH_DOLLY_ROTATE);
              break;
            default:
              l = s.NONE;
          }
          break;
        default:
          l = s.NONE;
      }
      var t;
      l !== s.NONE && a.dispatchEvent(o);
    }
  }
  function re(e) {
    var t;
    if (!1 !== a.enabled)
      switch ((e.preventDefault(), e.stopPropagation(), l)) {
        case s.TOUCH_ROTATE:
          !1 !== a.enableRotate && (W(e), a.update());
          break;
        case s.TOUCH_PAN:
          !1 !== a.enablePan && (Y(e), a.update());
          break;
        case s.TOUCH_DOLLY_PAN:
          (!1 === a.enableZoom && !1 === a.enablePan) ||
            ((t = e), a.enableZoom && J(t), a.enablePan && Y(t), a.update());
          break;
        case s.TOUCH_DOLLY_ROTATE:
          (!1 === a.enableZoom && !1 === a.enableRotate) ||
            ((t = e), a.enableZoom && J(t), a.enableRotate && W(t), a.update());
          break;
        default:
          l = s.NONE;
      }
  }
  function ne(e) {
    !1 !== a.enabled && (a.update(!0), a.dispatchEvent(t), (l = s.NONE));
  }
  function ie(e) {
    !1 !== a.enabled && e.preventDefault();
  }
  a.domElement.addEventListener('contextmenu', ie, !1),
    a.domElement.addEventListener('mousedown', Z, !1),
    a.domElement.addEventListener('wheel', ee, !1),
    a.domElement.addEventListener('touchstart', Ae, !1),
    a.domElement.addEventListener('touchend', ne, !1),
    a.domElement.addEventListener('touchmove', re, !1),
    a.domElement.addEventListener('keydown', te, !1),
    -1 === a.domElement.tabIndex && (a.domElement.tabIndex = 0),
    this.update();
}),
  (THREE.OrbitControls.prototype = Object.create(
    THREE.EventDispatcher.prototype,
  )),
  (THREE.OrbitControls.prototype.constructor = THREE.OrbitControls),
  (function (e, t) {
    'object' == typeof exports && 'undefined' != typeof module
      ? t(exports)
      : 'function' == typeof define && define.amd
      ? define(['exports'], t)
      : t(
          ((e =
            'undefined' != typeof globalThis ? globalThis : e || self).TWEEN =
            {}),
        );
  })(this, function (e) {
    'use strict';
    var A = {
        Linear: {
          None: function (e) {
            return e;
          },
        },
        Quadratic: {
          In: function (e) {
            return e * e;
          },
          Out: function (e) {
            return e * (2 - e);
          },
          InOut: function (e) {
            return (e *= 2) < 1 ? 0.5 * e * e : -0.5 * (--e * (e - 2) - 1);
          },
        },
        Cubic: {
          In: function (e) {
            return e * e * e;
          },
          Out: function (e) {
            return --e * e * e + 1;
          },
          InOut: function (e) {
            return (e *= 2) < 1
              ? 0.5 * e * e * e
              : 0.5 * ((e -= 2) * e * e + 2);
          },
        },
        Quartic: {
          In: function (e) {
            return e * e * e * e;
          },
          Out: function (e) {
            return 1 - --e * e * e * e;
          },
          InOut: function (e) {
            return (e *= 2) < 1
              ? 0.5 * e * e * e * e
              : -0.5 * ((e -= 2) * e * e * e - 2);
          },
        },
        Quintic: {
          In: function (e) {
            return e * e * e * e * e;
          },
          Out: function (e) {
            return --e * e * e * e * e + 1;
          },
          InOut: function (e) {
            return (e *= 2) < 1
              ? 0.5 * e * e * e * e * e
              : 0.5 * ((e -= 2) * e * e * e * e + 2);
          },
        },
        Sinusoidal: {
          In: function (e) {
            return 1 - Math.cos((e * Math.PI) / 2);
          },
          Out: function (e) {
            return Math.sin((e * Math.PI) / 2);
          },
          InOut: function (e) {
            return 0.5 * (1 - Math.cos(Math.PI * e));
          },
        },
        Exponential: {
          In: function (e) {
            return 0 === e ? 0 : Math.pow(1024, e - 1);
          },
          Out: function (e) {
            return 1 === e ? 1 : 1 - Math.pow(2, -10 * e);
          },
          InOut: function (e) {
            return 0 === e
              ? 0
              : 1 === e
              ? 1
              : (e *= 2) < 1
              ? 0.5 * Math.pow(1024, e - 1)
              : 0.5 * (2 - Math.pow(2, -10 * (e - 1)));
          },
        },
        Circular: {
          In: function (e) {
            return 1 - Math.sqrt(1 - e * e);
          },
          Out: function (e) {
            return Math.sqrt(1 - --e * e);
          },
          InOut: function (e) {
            return (e *= 2) < 1
              ? -0.5 * (Math.sqrt(1 - e * e) - 1)
              : 0.5 * (Math.sqrt(1 - (e -= 2) * e) + 1);
          },
        },
        Elastic: {
          In: function (e) {
            return 0 === e
              ? 0
              : 1 === e
              ? 1
              : -Math.pow(2, 10 * (e - 1)) * Math.sin(5 * (e - 1.1) * Math.PI);
          },
          Out: function (e) {
            return 0 === e
              ? 0
              : 1 === e
              ? 1
              : Math.pow(2, -10 * e) * Math.sin(5 * (e - 0.1) * Math.PI) + 1;
          },
          InOut: function (e) {
            return 0 === e
              ? 0
              : 1 === e
              ? 1
              : (e *= 2) < 1
              ? -0.5 *
                Math.pow(2, 10 * (e - 1)) *
                Math.sin(5 * (e - 1.1) * Math.PI)
              : 0.5 *
                  Math.pow(2, -10 * (e - 1)) *
                  Math.sin(5 * (e - 1.1) * Math.PI) +
                1;
          },
        },
        Back: {
          In: function (e) {
            return e * e * (2.70158 * e - 1.70158);
          },
          Out: function (e) {
            return --e * e * (2.70158 * e + 1.70158) + 1;
          },
          InOut: function (e) {
            var t = 2.5949095;
            return (e *= 2) < 1
              ? e * e * ((1 + t) * e - t) * 0.5
              : 0.5 * ((e -= 2) * e * ((1 + t) * e + t) + 2);
          },
        },
        Bounce: {
          In: function (e) {
            return 1 - A.Bounce.Out(1 - e);
          },
          Out: function (e) {
            return e < 1 / 2.75
              ? 7.5625 * e * e
              : e < 2 / 2.75
              ? 7.5625 * (e -= 1.5 / 2.75) * e + 0.75
              : e < 2.5 / 2.75
              ? 7.5625 * (e -= 2.25 / 2.75) * e + 0.9375
              : 7.5625 * (e -= 2.625 / 2.75) * e + 0.984375;
          },
          InOut: function (e) {
            return e < 0.5
              ? 0.5 * A.Bounce.In(2 * e)
              : 0.5 * A.Bounce.Out(2 * e - 1) + 0.5;
          },
        },
      },
      t =
        'undefined' == typeof self &&
        'undefined' != typeof process &&
        process.hrtime
          ? function () {
              var e = process.hrtime();
              return 1e3 * e[0] + e[1] / 1e6;
            }
          : 'undefined' != typeof self &&
            void 0 !== self.performance &&
            void 0 !== self.performance.now
          ? self.performance.now.bind(self.performance)
          : void 0 !== Date.now
          ? Date.now
          : function () {
              return new Date().getTime();
            },
      a = t,
      t =
        ((r.prototype.getAll = function () {
          var t = this;
          return Object.keys(this._tweens).map(function (e) {
            return t._tweens[e];
          });
        }),
        (r.prototype.removeAll = function () {
          this._tweens = {};
        }),
        (r.prototype.add = function (e) {
          (this._tweens[e.getId()] = e),
            (this._tweensAddedDuringUpdate[e.getId()] = e);
        }),
        (r.prototype.remove = function (e) {
          delete this._tweens[e.getId()],
            delete this._tweensAddedDuringUpdate[e.getId()];
        }),
        (r.prototype.update = function (e, t) {
          void 0 === e && (e = a()), void 0 === t && (t = !1);
          var A = Object.keys(this._tweens);
          if (0 === A.length) return !1;
          for (; 0 < A.length; ) {
            this._tweensAddedDuringUpdate = {};
            for (var r = 0; r < A.length; r++) {
              var n = this._tweens[A[r]];
              n && !1 === n.update(e, !t) && !t && delete this._tweens[A[r]];
            }
            A = Object.keys(this._tweensAddedDuringUpdate);
          }
          return !0;
        }),
        r);
    function r() {
      (this._tweens = {}), (this._tweensAddedDuringUpdate = {});
    }
    var n,
      o = {
        Linear: function (e, t) {
          var A = e.length - 1,
            r = A * t,
            n = Math.floor(r),
            i = o.Utils.Linear;
          return t < 0
            ? i(e[0], e[1], r)
            : 1 < t
            ? i(e[A], e[A - 1], A - r)
            : i(e[n], e[A < n + 1 ? A : n + 1], r - n);
        },
        Bezier: function (e, t) {
          for (
            var A = 0,
              r = e.length - 1,
              n = Math.pow,
              i = o.Utils.Bernstein,
              a = 0;
            a <= r;
            a++
          )
            A += n(1 - t, r - a) * n(t, a) * e[a] * i(r, a);
          return A;
        },
        CatmullRom: function (e, t) {
          var A = e.length - 1,
            r = A * t,
            n = Math.floor(r),
            i = o.Utils.CatmullRom;
          return e[0] === e[A]
            ? i(
                e[
                  ((n = t < 0 ? Math.floor((r = A * (1 + t))) : n) - 1 + A) % A
                ],
                e[n],
                e[(n + 1) % A],
                e[(n + 2) % A],
                r - n,
              )
            : t < 0
            ? e[0] - (i(e[0], e[0], e[1], e[1], -r) - e[0])
            : 1 < t
            ? e[A] - (i(e[A], e[A], e[A - 1], e[A - 1], r - A) - e[A])
            : i(
                e[n ? n - 1 : 0],
                e[n],
                e[A < n + 1 ? A : n + 1],
                e[A < n + 2 ? A : n + 2],
                r - n,
              );
        },
        Utils: {
          Linear: function (e, t, A) {
            return (t - e) * A + e;
          },
          Bernstein: function (e, t) {
            var A = o.Utils.Factorial;
            return A(e) / A(t) / A(e - t);
          },
          Factorial:
            ((n = [1]),
            function (e) {
              var t = 1;
              if (n[e]) return n[e];
              for (var A = e; 1 < A; A--) t *= A;
              return (n[e] = t);
            }),
          CatmullRom: function (e, t, A, r, n) {
            var e = 0.5 * (A - e),
              r = 0.5 * (r - t),
              i = n * n;
            return (
              (2 * t - 2 * A + e + r) * (n * i) +
              (-3 * t + 3 * A - 2 * e - r) * i +
              e * n +
              t
            );
          },
        },
      },
      i =
        ((s.nextId = function () {
          return s._nextId++;
        }),
        (s._nextId = 0),
        s);
    function s() {}
    var l = new t(),
      c =
        ((u.prototype.getId = function () {
          return this._id;
        }),
        (u.prototype.isPlaying = function () {
          return this._isPlaying;
        }),
        (u.prototype.isPaused = function () {
          return this._isPaused;
        }),
        (u.prototype.to = function (e, t) {
          return (
            (this._valuesEnd = Object.create(e)),
            void 0 !== t && (this._duration = t),
            this
          );
        }),
        (u.prototype.duration = function (e) {
          return (this._duration = e), this;
        }),
        (u.prototype.start = function (e) {
          if (!this._isPlaying) {
            if (
              (this._group && this._group.add(this),
              (this._repeat = this._initialRepeat),
              this._reversed)
            )
              for (var t in ((this._reversed = !1), this._valuesStartRepeat))
                this._swapEndStartRepeatValues(t),
                  (this._valuesStart[t] = this._valuesStartRepeat[t]);
            (this._isPlaying = !0),
              (this._isPaused = !1),
              (this._onStartCallbackFired = !1),
              (this._isChainStopped = !1),
              (this._startTime =
                void 0 !== e
                  ? 'string' == typeof e
                    ? a() + parseFloat(e)
                    : e
                  : a()),
              (this._startTime += this._delayTime),
              this._setupProperties(
                this._object,
                this._valuesStart,
                this._valuesEnd,
                this._valuesStartRepeat,
              );
          }
          return this;
        }),
        (u.prototype._setupProperties = function (e, t, A, r) {
          for (var n in A) {
            var i = e[n],
              a = Array.isArray(i),
              o = a ? 'array' : typeof i,
              s = !a && Array.isArray(A[n]);
            if ('undefined' != o && 'function' != o) {
              if (s) {
                var l = A[n];
                if (0 === l.length) continue;
                (l = l.map(this._handleRelativeValue.bind(this, i))),
                  (A[n] = [i].concat(l));
              }
              if (('object' != o && !a) || !i || s)
                void 0 === t[n] && (t[n] = i),
                  a || (t[n] *= 1),
                  (r[n] = s ? A[n].slice().reverse() : t[n] || 0);
              else {
                for (var c in ((t[n] = a ? [] : {}), i)) t[n][c] = i[c];
                (r[n] = a ? [] : {}),
                  this._setupProperties(i, t[n], A[n], r[n]);
              }
            }
          }
        }),
        (u.prototype.stop = function () {
          return (
            this._isChainStopped ||
              ((this._isChainStopped = !0), this.stopChainedTweens()),
            this._isPlaying &&
              (this._group && this._group.remove(this),
              (this._isPlaying = !1),
              (this._isPaused = !1),
              this._onStopCallback) &&
              this._onStopCallback(this._object),
            this
          );
        }),
        (u.prototype.end = function () {
          return (this._goToEnd = !0), this.update(1 / 0), this;
        }),
        (u.prototype.pause = function (e) {
          return (
            void 0 === e && (e = a()),
            !this._isPaused &&
              this._isPlaying &&
              ((this._isPaused = !0), (this._pauseStart = e), this._group) &&
              this._group.remove(this),
            this
          );
        }),
        (u.prototype.resume = function (e) {
          return (
            void 0 === e && (e = a()),
            this._isPaused &&
              this._isPlaying &&
              ((this._isPaused = !1),
              (this._startTime += e - this._pauseStart),
              (this._pauseStart = 0),
              this._group) &&
              this._group.add(this),
            this
          );
        }),
        (u.prototype.stopChainedTweens = function () {
          for (var e = 0, t = this._chainedTweens.length; e < t; e++)
            this._chainedTweens[e].stop();
          return this;
        }),
        (u.prototype.group = function (e) {
          return (this._group = e), this;
        }),
        (u.prototype.delay = function (e) {
          return (this._delayTime = e), this;
        }),
        (u.prototype.repeat = function (e) {
          return (this._initialRepeat = e), (this._repeat = e), this;
        }),
        (u.prototype.repeatDelay = function (e) {
          return (this._repeatDelayTime = e), this;
        }),
        (u.prototype.yoyo = function (e) {
          return (this._yoyo = e), this;
        }),
        (u.prototype.easing = function (e) {
          return (this._easingFunction = e), this;
        }),
        (u.prototype.interpolation = function (e) {
          return (this._interpolationFunction = e), this;
        }),
        (u.prototype.chain = function () {
          for (var e = [], t = 0; t < arguments.length; t++)
            e[t] = arguments[t];
          return (this._chainedTweens = e), this;
        }),
        (u.prototype.onStart = function (e) {
          return (this._onStartCallback = e), this;
        }),
        (u.prototype.onUpdate = function (e) {
          return (this._onUpdateCallback = e), this;
        }),
        (u.prototype.onRepeat = function (e) {
          return (this._onRepeatCallback = e), this;
        }),
        (u.prototype.onComplete = function (e) {
          return (this._onCompleteCallback = e), this;
        }),
        (u.prototype.onStop = function (e) {
          return (this._onStopCallback = e), this;
        }),
        (u.prototype.update = function (e, t) {
          if (
            (void 0 === e && (e = a()),
            void 0 === t && (t = !0),
            this._isPaused)
          )
            return !0;
          var A,
            r = this._startTime + this._duration;
          if (!this._goToEnd && !this._isPlaying) {
            if (r < e) return !1;
            t && this.start(e);
          }
          if (((this._goToEnd = !1), e < this._startTime)) return !0;
          !1 === this._onStartCallbackFired &&
            (this._onStartCallback && this._onStartCallback(this._object),
            (this._onStartCallbackFired = !0)),
            (r = (e - this._startTime) / this._duration);
          (r = 0 === this._duration || 1 < r ? 1 : r),
            (t = this._easingFunction(r));
          if (
            (this._updateProperties(
              this._object,
              this._valuesStart,
              this._valuesEnd,
              t,
            ),
            this._onUpdateCallback && this._onUpdateCallback(this._object, r),
            1 != r)
          )
            return !0;
          if (0 < this._repeat) {
            for (A in (isFinite(this._repeat) && this._repeat--,
            this._valuesStartRepeat))
              this._yoyo ||
                'string' != typeof this._valuesEnd[A] ||
                (this._valuesStartRepeat[A] =
                  this._valuesStartRepeat[A] + parseFloat(this._valuesEnd[A])),
                this._yoyo && this._swapEndStartRepeatValues(A),
                (this._valuesStart[A] = this._valuesStartRepeat[A]);
            return (
              this._yoyo && (this._reversed = !this._reversed),
              void 0 !== this._repeatDelayTime
                ? (this._startTime = e + this._repeatDelayTime)
                : (this._startTime = e + this._delayTime),
              this._onRepeatCallback && this._onRepeatCallback(this._object),
              !0
            );
          }
          this._onCompleteCallback && this._onCompleteCallback(this._object);
          for (var n = 0, i = this._chainedTweens.length; n < i; n++)
            this._chainedTweens[n].start(this._startTime + this._duration);
          return (this._isPlaying = !1);
        }),
        (u.prototype._updateProperties = function (e, t, A, r) {
          for (var n in A) {
            var i, a, o, s;
            void 0 !== t[n] &&
              ((i = t[n] || 0),
              (a = A[n]),
              (o = Array.isArray(e[n])),
              (s = Array.isArray(a)),
              !o && s
                ? (e[n] = this._interpolationFunction(a, r))
                : 'object' == typeof a && a
                ? this._updateProperties(e[n], i, a, r)
                : 'number' == typeof (a = this._handleRelativeValue(i, a)) &&
                  (e[n] = i + (a - i) * r));
          }
        }),
        (u.prototype._handleRelativeValue = function (e, t) {
          return 'string' != typeof t
            ? t
            : '+' === t.charAt(0) || '-' === t.charAt(0)
            ? e + parseFloat(t)
            : parseFloat(t);
        }),
        (u.prototype._swapEndStartRepeatValues = function (e) {
          var t = this._valuesStartRepeat[e],
            A = this._valuesEnd[e];
          (this._valuesStartRepeat[e] =
            'string' == typeof A
              ? this._valuesStartRepeat[e] + parseFloat(A)
              : this._valuesEnd[e]),
            (this._valuesEnd[e] = t);
        }),
        u);
    function u(e, t) {
      void 0 === t && (t = l),
        (this._object = e),
        (this._group = t),
        (this._isPaused = !1),
        (this._pauseStart = 0),
        (this._valuesStart = {}),
        (this._valuesEnd = {}),
        (this._valuesStartRepeat = {}),
        (this._duration = 1e3),
        (this._initialRepeat = 0),
        (this._repeat = 0),
        (this._yoyo = !1),
        (this._isPlaying = !1),
        (this._reversed = !1),
        (this._delayTime = 0),
        (this._startTime = 0),
        (this._easingFunction = A.Linear.None),
        (this._interpolationFunction = o.Linear),
        (this._chainedTweens = []),
        (this._onStartCallbackFired = !1),
        (this._id = i.nextId()),
        (this._isChainStopped = !1),
        (this._goToEnd = !1);
    }
    var h = i.nextId,
      d = l,
      p = d.getAll.bind(d),
      f = d.removeAll.bind(d),
      g = d.add.bind(d),
      m = d.remove.bind(d),
      d = d.update.bind(d),
      v = {
        Easing: A,
        Group: t,
        Interpolation: o,
        now: a,
        Sequence: i,
        nextId: h,
        Tween: c,
        VERSION: '18.6.4',
        getAll: p,
        removeAll: f,
        add: g,
        remove: m,
        update: d,
      };
    (e.Easing = A),
      (e.Group = t),
      (e.Interpolation = o),
      (e.Sequence = i),
      (e.Tween = c),
      (e.VERSION = '18.6.4'),
      (e.add = g),
      (e.default = v),
      (e.getAll = p),
      (e.nextId = h),
      (e.now = a),
      (e.remove = m),
      (e.removeAll = f),
      (e.update = d),
      Object.defineProperty(e, '__esModule', { value: !0 });
  }),
  function () {
    'use strict';
    var w = void 0,
      i = this;
    function e(e, t) {
      var A,
        r = e.split('.'),
        n = i;
      r[0] in n || !n.execScript || n.execScript('var ' + r[0]);
      for (; r.length && (A = r.shift()); )
        r.length || t === w ? (n = n[A] || (n[A] = {})) : (n[A] = t);
    }
    var y =
      'undefined' != typeof Uint8Array &&
      'undefined' != typeof Uint16Array &&
      'undefined' != typeof Uint32Array &&
      'undefined' != typeof DataView;
    function E(e) {
      for (
        var t,
          A,
          r,
          n,
          i,
          a,
          o,
          s,
          l,
          c = e.length,
          u = 0,
          h = Number.POSITIVE_INFINITY,
          d = 0;
        d < c;
        ++d
      )
        e[d] > u && (u = e[d]), e[d] < h && (h = e[d]);
      for (
        t = 1 << u, A = new (y ? Uint32Array : Array)(t), r = 1, n = 0, i = 2;
        r <= u;

      ) {
        for (d = 0; d < c; ++d)
          if (e[d] === r) {
            for (o = n, s = a = 0; s < r; ++s)
              (a = (a << 1) | (1 & o)), (o >>= 1);
            for (l = (r << 16) | d, s = a; s < t; s += i) A[s] = l;
            ++n;
          }
        ++r, (n <<= 1), (i <<= 1);
      }
      return [A, u, h];
    }
    function n(e, t) {
      switch (
        ((this.g = []),
        (this.h = 32768),
        (this.d = this.f = this.a = this.l = 0),
        (this.input = y ? new Uint8Array(e) : e),
        (this.m = !1),
        (this.i = b),
        (this.r = !1),
        (t
          ? (t.index && (this.a = t.index),
            t.bufferSize && (this.h = t.bufferSize),
            t.bufferType && (this.i = t.bufferType),
            t.resize)
          : ((t = {}), 0)) && (this.r = t.resize),
        this.i)
      ) {
        case x:
          (this.b = 32768),
            (this.c = new (y ? Uint8Array : Array)(32768 + this.h + 258));
          break;
        case b:
          (this.b = 0),
            (this.c = new (y ? Uint8Array : Array)(this.h)),
            (this.e = this.z),
            (this.n = this.v),
            (this.j = this.w);
          break;
        default:
          throw Error('invalid inflate mode');
      }
    }
    for (
      var x = 0,
        b = 1,
        t = x,
        A = b,
        r =
          ((n.prototype.k = function () {
            for (; !this.m; ) {
              var e = _(this, 3);
              switch ((1 & e && (this.m = !0), (e >>>= 1))) {
                case 0:
                  var t = this.input,
                    A = this.a,
                    r = this.c,
                    n = this.b,
                    i = t.length,
                    a = w,
                    o = r.length,
                    s = w;
                  if (((this.d = this.f = 0), i <= A + 1))
                    throw Error('invalid uncompressed block header: LEN');
                  if (((a = t[A++] | (t[A++] << 8)), i <= A + 1))
                    throw Error('invalid uncompressed block header: NLEN');
                  if (a === ~(t[A++] | (t[A++] << 8)))
                    throw Error(
                      'invalid uncompressed block header: length verify',
                    );
                  if (A + a > t.length) throw Error('input buffer is broken');
                  switch (this.i) {
                    case x:
                      for (; n + a > r.length; ) {
                        if (((a -= s = o - n), y))
                          r.set(t.subarray(A, A + s), n), (n += s), (A += s);
                        else for (; s--; ) r[n++] = t[A++];
                        (this.b = n), (r = this.e()), (n = this.b);
                      }
                      break;
                    case b:
                      for (; n + a > r.length; ) r = this.e({ p: 2 });
                      break;
                    default:
                      throw Error('invalid inflate mode');
                  }
                  if (y) r.set(t.subarray(A, A + a), n), (n += a), (A += a);
                  else for (; a--; ) r[n++] = t[A++];
                  (this.a = A), (this.b = n), (this.c = r);
                  break;
                case 1:
                  this.j(F, T);
                  break;
                case 2:
                  for (
                    var l,
                      c,
                      u,
                      h,
                      i = _(this, 5) + 257,
                      d = _(this, 5) + 1,
                      p = _(this, 4) + 4,
                      f = new (y ? Uint8Array : Array)(C.length),
                      g = w,
                      m = w,
                      v = w,
                      B = w,
                      B = 0;
                    B < p;
                    ++B
                  )
                    f[C[B]] = _(this, 3);
                  if (!y) for (B = p, p = f.length; B < p; ++B) f[C[B]] = 0;
                  for (
                    l = E(f),
                      g = new (y ? Uint8Array : Array)(i + d),
                      B = 0,
                      h = i + d;
                    B < h;

                  )
                    switch (((u = U(this, l)), u)) {
                      case 16:
                        for (v = 3 + _(this, 2); v--; ) g[B++] = m;
                        break;
                      case 17:
                        for (v = 3 + _(this, 3); v--; ) g[B++] = 0;
                        m = 0;
                        break;
                      case 18:
                        for (v = 11 + _(this, 7); v--; ) g[B++] = 0;
                        m = 0;
                        break;
                      default:
                        m = g[B++] = u;
                    }
                  (d = E(y ? g.subarray(0, i) : g.slice(0, i))),
                    (c = E(y ? g.subarray(i) : g.slice(i))),
                    this.j(d, c);
                  break;
                default:
                  throw Error('unknown BTYPE: ' + e);
              }
            }
            return this.n();
          }),
          [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]),
        C = y ? new Uint16Array(r) : r,
        r = [
          3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51,
          59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 258, 258,
        ],
        l = y ? new Uint16Array(r) : r,
        r = [
          0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4,
          4, 5, 5, 5, 5, 0, 0, 0,
        ],
        c = y ? new Uint8Array(r) : r,
        r = [
          1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385,
          513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385,
          24577,
        ],
        u = y ? new Uint16Array(r) : r,
        r = [
          0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10,
          10, 11, 11, 12, 12, 13, 13,
        ],
        h = y ? new Uint8Array(r) : r,
        a = new (y ? Uint8Array : Array)(288),
        o = 0,
        s = a.length;
      o < s;
      ++o
    )
      a[o] = o <= 143 ? 8 : o <= 255 ? 9 : o <= 279 ? 7 : 8;
    for (
      var F = E(a), d = new (y ? Uint8Array : Array)(30), p = 0, f = d.length;
      p < f;
      ++p
    )
      d[p] = 5;
    var T = E(d);
    function _(e, t) {
      for (
        var A, r = e.f, n = e.d, i = e.input, a = e.a, o = i.length;
        n < t;

      ) {
        if (o <= a) throw Error('input buffer is broken');
        (r |= i[a++] << n), (n += 8);
      }
      return (
        (A = r & ((1 << t) - 1)), (e.f = r >>> t), (e.d = n - t), (e.a = a), A
      );
    }
    function U(e, t) {
      for (
        var A = e.f,
          r = e.d,
          n = e.input,
          i = e.a,
          a = n.length,
          o = t[0],
          s = t[1];
        r < s && !(a <= i);

      )
        (A |= n[i++] << r), (r += 8);
      if (r < (o = (t = o[A & ((1 << s) - 1)]) >>> 16))
        throw Error('invalid code length: ' + o);
      return (e.f = A >> o), (e.d = r - o), (e.a = i), 65535 & t;
    }
    function g(e, t) {
      var A, r;
      if (
        ((this.input = e),
        (this.a = 0),
        (t ? (t.index && (this.a = t.index), t.verify) : ((t = {}), 0)) &&
          (this.A = t.verify),
        (A = e[this.a++]),
        (r = e[this.a++]),
        (15 & A) !== S)
      )
        throw Error('unsupported compression method');
      if (((this.method = S), 0 != ((A << 8) + r) % 31))
        throw Error('invalid fcheck flag:' + (((A << 8) + r) % 31));
      if (32 & r) throw Error('fdict flag is not supported');
      this.q = new n(e, {
        index: this.a,
        bufferSize: t.bufferSize,
        bufferType: t.bufferType,
        resize: t.resize,
      });
    }
    (n.prototype.j = function (e, t) {
      var A = this.c,
        r = this.b;
      this.o = e;
      for (var n, i, a, o, s = A.length - 258; 256 !== (n = U(this, e)); )
        if (n < 256)
          s <= r && ((this.b = r), (A = this.e()), (r = this.b)), (A[r++] = n);
        else
          for (
            o = l[(i = n - 257)],
              0 < c[i] && (o += _(this, c[i])),
              n = U(this, t),
              a = u[n],
              0 < h[n] && (a += _(this, h[n])),
              s <= r && ((this.b = r), (A = this.e()), (r = this.b));
            o--;

          )
            A[r] = A[r++ - a];
      for (; 8 <= this.d; ) (this.d -= 8), this.a--;
      this.b = r;
    }),
      (n.prototype.w = function (e, t) {
        var A = this.c,
          r = this.b;
        this.o = e;
        for (var n, i, a, o, s = A.length; 256 !== (n = U(this, e)); )
          if (n < 256) s <= r && (s = (A = this.e()).length), (A[r++] = n);
          else
            for (
              o = l[(i = n - 257)],
                0 < c[i] && (o += _(this, c[i])),
                n = U(this, t),
                a = u[n],
                0 < h[n] && (a += _(this, h[n])),
                s < r + o && (s = (A = this.e()).length);
              o--;

            )
              A[r] = A[r++ - a];
        for (; 8 <= this.d; ) (this.d -= 8), this.a--;
        this.b = r;
      }),
      (n.prototype.e = function () {
        var e,
          t,
          A = new (y ? Uint8Array : Array)(this.b - 32768),
          r = this.b - 32768,
          n = this.c;
        if (y) A.set(n.subarray(32768, A.length));
        else for (e = 0, t = A.length; e < t; ++e) A[e] = n[e + 32768];
        if ((this.g.push(A), (this.l += A.length), y))
          n.set(n.subarray(r, 32768 + r));
        else for (e = 0; e < 32768; ++e) n[e] = n[r + e];
        return (this.b = 32768), n;
      }),
      (n.prototype.z = function (e) {
        var t,
          A = (this.input.length / this.a + 1) | 0,
          r = this.input,
          n = this.c;
        return (
          e &&
            ('number' == typeof e.p && (A = e.p), 'number' == typeof e.u) &&
            (A += e.u),
          (r =
            A < 2
              ? (e = (((r.length - this.a) / this.o[2] / 2) * 258) | 0) <
                n.length
                ? n.length + e
                : n.length << 1
              : n.length * A),
          y ? (t = new Uint8Array(r)).set(n) : (t = n),
          (this.c = t)
        );
      }),
      (n.prototype.n = function () {
        var e,
          t,
          A,
          r,
          n,
          i = 0,
          a = this.c,
          o = this.g,
          s = new (y ? Uint8Array : Array)(this.l + (this.b - 32768));
        if (0 === o.length)
          return y
            ? this.c.subarray(32768, this.b)
            : this.c.slice(32768, this.b);
        for (t = 0, A = o.length; t < A; ++t)
          for (r = 0, n = (e = o[t]).length; r < n; ++r) s[i++] = e[r];
        for (t = 32768, A = this.b; t < A; ++t) s[i++] = a[t];
        return (this.g = []), (this.buffer = s);
      }),
      (n.prototype.v = function () {
        var e,
          t = this.b;
        return (
          y
            ? this.r
              ? (e = new Uint8Array(t)).set(this.c.subarray(0, t))
              : (e = this.c.subarray(0, t))
            : (this.c.length > t && (this.c.length = t), (e = this.c)),
          (this.buffer = e)
        );
      }),
      (g.prototype.k = function () {
        var e = this.input,
          t = this.q.k();
        if (((this.a = this.q.a), this.A)) {
          var e =
              ((e[this.a++] << 24) |
                (e[this.a++] << 16) |
                (e[this.a++] << 8) |
                e[this.a++]) >>>
              0,
            A = t;
          if ('string' == typeof A) {
            for (var r = A.split(''), n = 0, i = r.length; n < i; n++)
              r[n] = (255 & r[n].charCodeAt(0)) >>> 0;
            A = r;
          }
          for (var a, o = 1, s = 0, l = A.length, c = 0; 0 < l; ) {
            for (l -= a = 1024 < l ? 1024 : l; (s += o += A[c++]), --a; );
            (o %= 65521), (s %= 65521);
          }
          if (e != ((s << 16) | o) >>> 0)
            throw Error('invalid adler-32 checksum');
        }
        return t;
      });
    var m,
      v,
      B,
      M,
      S = 8,
      Q =
        (e('Zlib.Inflate', g),
        e('Zlib.Inflate.prototype.decompress', g.prototype.k),
        { ADAPTIVE: A, BLOCK: t });
    if (Object.keys) m = Object.keys(Q);
    else for (v in ((m = []), (B = 0), Q)) m[B++] = v;
    for (B = 0, M = m.length; B < M; ++B)
      e('Zlib.Inflate.BufferType.' + (v = m[B]), Q[v]);
  }.call(this),
  (THREE.DRACOLoader = function (e) {
    (this.timeLoaded = 0),
      (this.manager = e || THREE.DefaultLoadingManager),
      (this.materials = null),
      (this.verbosity = 0),
      (this.attributeOptions = {}),
      (this.drawMode = THREE.TrianglesDrawMode),
      (this.nativeAttributeMap = {
        position: 'POSITION',
        normal: 'NORMAL',
        color: 'COLOR',
        uv: 'TEX_COORD',
      });
  }),
  (THREE.DRACOLoader.prototype = {
    constructor: THREE.DRACOLoader,
    load: function (e, t, A, r) {
      var n = this,
        i = new THREE.FileLoader(n.manager);
      i.setPath(this.path),
        i.setResponseType('arraybuffer'),
        i.load(
          e,
          function (e) {
            n.decodeDracoFile(e, t);
          },
          A,
          r,
        );
    },
    setPath: function (e) {
      return (this.path = e), this;
    },
    setVerbosity: function (e) {
      return (this.verbosity = e), this;
    },
    setDrawMode: function (e) {
      return (this.drawMode = e), this;
    },
    setSkipDequantization: function (e, t) {
      t = void 0 === t || t;
      return (this.getAttributeOptions(e).skipDequantization = t), this;
    },
    decodeDracoFile: function (t, A, r, n) {
      var i = this;
      THREE.DRACOLoader.getDecoderModule().then(function (e) {
        i.decodeDracoFileInternal(t, e.decoder, A, r || {}, n || {});
      });
    },
    decodeDracoFileInternal: function (e, t, A, r, n) {
      var i,
        a = new t.DecoderBuffer(),
        e = (a.Init(new Int8Array(e), e.byteLength), new t.Decoder()),
        o = e.GetEncodedGeometryType(a);
      if (o == t.TRIANGULAR_MESH)
        0 < this.verbosity && console.log('Loaded a mesh.');
      else {
        if (o != t.POINT_CLOUD)
          throw (
            ((i = 'THREE.DRACOLoader: Unknown geometry type.'),
            console.error(i),
            new Error(i))
          );
        0 < this.verbosity && console.log('Loaded a point cloud.');
      }
      A(this.convertDracoGeometryTo3JS(t, e, o, a, r, n));
    },
    addAttributeToGeometry: function (e, t, A, r, n, i, a, o) {
      if (0 === i.ptr)
        throw (
          ((h = 'THREE.DRACOLoader: No attribute ' + r),
          console.error(h),
          new Error(h))
        );
      var s,
        l,
        c = i.num_components(),
        u = A.num_points() * c;
      switch (n) {
        case Float32Array:
          (s = new e.DracoFloat32Array()),
            t.GetAttributeFloatForAllPoints(A, i, s),
            (o[r] = new Float32Array(u)),
            (l = THREE.Float32BufferAttribute);
          break;
        case Int8Array:
          (s = new e.DracoInt8Array()),
            t.GetAttributeInt8ForAllPoints(A, i, s),
            (o[r] = new Int8Array(u)),
            (l = THREE.Int8BufferAttribute);
          break;
        case Int16Array:
          (s = new e.DracoInt16Array()),
            t.GetAttributeInt16ForAllPoints(A, i, s),
            (o[r] = new Int16Array(u)),
            (l = THREE.Int16BufferAttribute);
          break;
        case Int32Array:
          (s = new e.DracoInt32Array()),
            t.GetAttributeInt32ForAllPoints(A, i, s),
            (o[r] = new Int32Array(u)),
            (l = THREE.Int32BufferAttribute);
          break;
        case Uint8Array:
          (s = new e.DracoUInt8Array()),
            t.GetAttributeUInt8ForAllPoints(A, i, s),
            (o[r] = new Uint8Array(u)),
            (l = THREE.Uint8BufferAttribute);
          break;
        case Uint16Array:
          (s = new e.DracoUInt16Array()),
            t.GetAttributeUInt16ForAllPoints(A, i, s),
            (o[r] = new Uint16Array(u)),
            (l = THREE.Uint16BufferAttribute);
          break;
        case Uint32Array:
          (s = new e.DracoUInt32Array()),
            t.GetAttributeUInt32ForAllPoints(A, i, s),
            (o[r] = new Uint32Array(u)),
            (l = THREE.Uint32BufferAttribute);
          break;
        default:
          var h = 'THREE.DRACOLoader: Unexpected attribute type.';
          throw (console.error(h), new Error(h));
      }
      for (var d = 0; d < u; d++) o[r][d] = s.GetValue(d);
      a.addAttribute(r, new l(o[r], c)), e.destroy(s);
    },
    convertDracoGeometryTo3JS: function (e, t, A, r, n, i) {
      !0 === this.getAttributeOptions('position').skipDequantization &&
        t.SkipAttributeTransform(e.POSITION);
      var a,
        o = performance.now(),
        s =
          A === e.TRIANGULAR_MESH
            ? ((a = new e.Mesh()), t.DecodeBufferToMesh(r, a))
            : ((a = new e.PointCloud()), t.DecodeBufferToPointCloud(r, a));
      if (!s.ok() || 0 == a.ptr)
        throw (
          ((c = 'THREE.DRACOLoader: Decoding failed: '),
          (c += s.error_msg()),
          console.error(c),
          e.destroy(t),
          e.destroy(a),
          new Error(c))
        );
      var l,
        c,
        s = performance.now(),
        r =
          (e.destroy(r),
          A == e.TRIANGULAR_MESH
            ? ((l = a.num_faces()),
              0 < this.verbosity &&
                console.log('Number of faces loaded: ' + l.toString()))
            : (l = 0),
          a.num_points()),
        u = a.num_attributes(),
        r =
          (0 < this.verbosity &&
            (console.log('Number of points loaded: ' + r.toString()),
            console.log('Number of attributes loaded: ' + u.toString())),
          t.GetAttributeId(a, e.POSITION));
      if (-1 == r)
        throw (
          ((c = 'THREE.DRACOLoader: No position attribute found.'),
          console.error(c),
          e.destroy(t),
          e.destroy(a),
          new Error(c))
        );
      var h,
        d,
        u = t.GetAttribute(a, r),
        p = {},
        f = new THREE.BufferGeometry();
      for (d in this.nativeAttributeMap)
        void 0 === n[d] &&
          -1 !== (h = t.GetAttributeId(a, e[this.nativeAttributeMap[d]])) &&
          (0 < this.verbosity && console.log('Loaded ' + d + ' attribute.'),
          (v = t.GetAttribute(a, h)),
          this.addAttributeToGeometry(e, t, a, d, Float32Array, v, f, p));
      for (d in n) {
        var g = i[d] || Float32Array,
          m = n[d],
          v = t.GetAttributeByUniqueId(a, m);
        this.addAttributeToGeometry(e, t, a, d, g, v, f, p);
      }
      if (A == e.TRIANGULAR_MESH)
        if (this.drawMode === THREE.TriangleStripDrawMode) {
          var B = new e.DracoInt32Array();
          t.GetTriangleStripsFromMesh(a, B);
          p.indices = new Uint32Array(B.size());
          for (var w = 0; w < B.size(); ++w) p.indices[w] = B.GetValue(w);
          e.destroy(B);
        } else {
          p.indices = new Uint32Array(3 * l);
          for (var y = new e.DracoInt32Array(), w = 0; w < l; ++w) {
            t.GetFaceFromMesh(a, w, y);
            var E = 3 * w;
            (p.indices[E] = y.GetValue(0)),
              (p.indices[1 + E] = y.GetValue(1)),
              (p.indices[2 + E] = y.GetValue(2));
          }
          e.destroy(y);
        }
      (f.drawMode = this.drawMode),
        A == e.TRIANGULAR_MESH &&
          f.setIndex(
            new (65535 < p.indices.length
              ? THREE.Uint32BufferAttribute
              : THREE.Uint16BufferAttribute)(p.indices, 1),
          );
      var x = new e.AttributeQuantizationTransform();
      if (x.InitFromAttribute(u)) {
        (f.attributes.position.isQuantized = !0),
          (f.attributes.position.maxRange = x.range()),
          (f.attributes.position.numQuantizationBits = x.quantization_bits()),
          (f.attributes.position.minValues = new Float32Array(3));
        for (w = 0; w < 3; ++w)
          f.attributes.position.minValues[w] = x.min_value(w);
      }
      return (
        e.destroy(x),
        e.destroy(t),
        e.destroy(a),
        (this.decode_time = s - o),
        (this.import_time = performance.now() - s),
        0 < this.verbosity &&
          (console.log('Decode time: ' + this.decode_time),
          console.log('Import time: ' + this.import_time)),
        f
      );
    },
    isVersionSupported: function (t, A) {
      THREE.DRACOLoader.getDecoderModule().then(function (e) {
        A(e.decoder.isVersionSupported(t));
      });
    },
    getAttributeOptions: function (e) {
      return (
        void 0 === this.attributeOptions[e] && (this.attributeOptions[e] = {}),
        this.attributeOptions[e]
      );
    },
  }),
  (THREE.DRACOLoader.decoderPath = './'),
  (THREE.DRACOLoader.decoderConfig = {}),
  (THREE.DRACOLoader.decoderModulePromise = null),
  (THREE.DRACOLoader.setDecoderPath = function (e) {
    THREE.DRACOLoader.decoderPath = e;
  }),
  (THREE.DRACOLoader.setDecoderConfig = function (e) {
    var t = THREE.DRACOLoader.decoderConfig.wasmBinary;
    (THREE.DRACOLoader.decoderConfig = e || {}),
      THREE.DRACOLoader.releaseDecoderModule(),
      t && (THREE.DRACOLoader.decoderConfig.wasmBinary = t);
  }),
  (THREE.DRACOLoader.releaseDecoderModule = function () {
    THREE.DRACOLoader.decoderModulePromise = null;
  }),
  (THREE.DRACOLoader.getDecoderModule = function () {
    var A = this,
      e = THREE.DRACOLoader.decoderPath,
      r = THREE.DRACOLoader.decoderConfig,
      t = THREE.DRACOLoader.decoderModulePromise;
    return (
      t ||
        ((t = (t =
          'undefined' != typeof DracoDecoderModule
            ? Promise.resolve()
            : 'object' != typeof WebAssembly || 'js' === r.type
            ? THREE.DRACOLoader._loadScript(e + 'draco_decoder.js')
            : ((r.wasmBinaryFile = e + 'draco_decoder.wasm'),
              THREE.DRACOLoader._loadScript(e + 'draco_wasm_wrapper.js')
                .then(function () {
                  return THREE.DRACOLoader._loadArrayBuffer(r.wasmBinaryFile);
                })
                .then(function (e) {
                  r.wasmBinary = e;
                }))).then(function () {
          return new Promise(function (t) {
            (r.onModuleLoaded = function (e) {
              (A.timeLoaded = performance.now()), t({ decoder: e });
            }),
              DracoDecoderModule(r);
          });
        })),
        (THREE.DRACOLoader.decoderModulePromise = t)),
      t
    );
  }),
  (THREE.DRACOLoader._loadScript = function (e) {
    var t = document.getElementById('decoder_script'),
      A =
        (null !== t && t.parentNode.removeChild(t),
        document.getElementsByTagName('head')[0]),
      r = document.createElement('script');
    return (
      (r.id = 'decoder_script'),
      (r.type = 'text/javascript'),
      (r.src = e),
      new Promise(function (e) {
        (r.onload = e), A.appendChild(r);
      })
    );
  }),
  (THREE.DRACOLoader._loadArrayBuffer = function (A) {
    var r = new THREE.FileLoader();
    return (
      r.setResponseType('arraybuffer'),
      new Promise(function (e, t) {
        r.load(A, e, void 0, t);
      })
    );
  }),
  (THREE.GLTFLoader = (function () {
    function e(e) {
      (this.manager = void 0 !== e ? e : THREE.DefaultLoadingManager),
        (this.dracoLoader = null);
    }
    function r() {
      var A = {};
      return {
        get: function (e) {
          return A[e];
        },
        add: function (e, t) {
          A[e] = t;
        },
        remove: function (e) {
          delete A[e];
        },
        removeAll: function () {
          A = {};
        },
      };
    }
    e.prototype = {
      constructor: e,
      crossOrigin: 'Anonymous',
      load: function (e, t, A, r) {
        var n = this,
          i =
            void 0 !== this.path
              ? this.path
              : THREE.LoaderUtils.extractUrlBase(e),
          a = new THREE.FileLoader(n.manager);
        a.setResponseType('arraybuffer'),
          a.load(
            e,
            function (e) {
              try {
                n.parse(e, i, t, r);
              } catch (e) {
                if (void 0 === r) throw e;
                r(e);
              }
            },
            A,
            r,
          );
      },
      setCrossOrigin: function (e) {
        return (this.crossOrigin = e), this;
      },
      setPath: function (e) {
        return (this.path = e), this;
      },
      setDRACOLoader: function (e) {
        return (this.dracoLoader = e), this;
      },
      parse: function (e, t, i, A) {
        var r,
          n = {};
        if ('string' == typeof e) r = e;
        else if (THREE.LoaderUtils.decodeText(new Uint8Array(e, 0, 4)) === s) {
          try {
            n[R.KHR_BINARY_GLTF] = new u(e);
          } catch (e) {
            return void (A && A(e));
          }
          r = n[R.KHR_BINARY_GLTF].content;
        } else r = THREE.LoaderUtils.decodeText(new Uint8Array(e));
        e = JSON.parse(r);
        void 0 === e.asset || e.asset.version[0] < 2
          ? A &&
            A(
              new Error(
                'THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead.',
              ),
            )
          : (e.extensionsUsed &&
              (0 <= e.extensionsUsed.indexOf(R.KHR_LIGHTS) &&
                (n[R.KHR_LIGHTS] = new a(e)),
              0 <= e.extensionsUsed.indexOf(R.KHR_MATERIALS_UNLIT) &&
                (n[R.KHR_MATERIALS_UNLIT] = new o()),
              0 <=
                e.extensionsUsed.indexOf(
                  R.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,
                ) && (n[R.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS] = new d()),
              0 <= e.extensionsUsed.indexOf(R.KHR_DRACO_MESH_COMPRESSION)) &&
              (n[R.KHR_DRACO_MESH_COMPRESSION] = new h(this.dracoLoader)),
            new U(e, n, {
              path: t || this.path || '',
              crossOrigin: this.crossOrigin,
              manager: this.manager,
            }).parse(function (e, t, A, r, n) {
              i({ scene: e, scenes: t, cameras: A, animations: r, asset: n });
            }, A));
      },
    };
    var R = {
      KHR_BINARY_GLTF: 'KHR_binary_glTF',
      KHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',
      KHR_LIGHTS: 'KHR_lights',
      KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:
        'KHR_materials_pbrSpecularGlossiness',
      KHR_MATERIALS_UNLIT: 'KHR_materials_unlit',
    };
    function a(e) {
      (this.name = R.KHR_LIGHTS), (this.lights = {});
      var t,
        A = ((e.extensions && e.extensions[R.KHR_LIGHTS]) || {}).lights || {};
      for (t in A) {
        var r,
          n = A[t],
          i = new THREE.Color().fromArray(n.color);
        switch (n.type) {
          case 'directional':
            (r = new THREE.DirectionalLight(i)).position.set(0, 0, 1);
            break;
          case 'point':
            r = new THREE.PointLight(i);
            break;
          case 'spot':
            (r = new THREE.SpotLight(i)).position.set(0, 0, 1);
            break;
          case 'ambient':
            r = new THREE.AmbientLight(i);
        }
        r &&
          (void 0 !== n.constantAttenuation &&
            (r.intensity = n.constantAttenuation),
          void 0 !== n.linearAttenuation &&
            (r.distance = 1 / n.linearAttenuation),
          void 0 !== n.quadraticAttenuation &&
            (r.decay = n.quadraticAttenuation),
          void 0 !== n.fallOffAngle && (r.angle = n.fallOffAngle),
          void 0 !== n.fallOffExponent &&
            console.warn(
              'THREE.GLTFLoader:: light.fallOffExponent not currently supported.',
            ),
          (r.name = n.name || 'light_' + t),
          (this.lights[t] = r));
      }
    }
    function o(e) {
      this.name = R.KHR_MATERIALS_UNLIT;
    }
    (o.prototype.getMaterialType = function (e) {
      return THREE.MeshBasicMaterial;
    }),
      (o.prototype.extendParams = function (e, t, A) {
        var r,
          n = [],
          t =
            ((e.color = new THREE.Color(1, 1, 1)),
            (e.opacity = 1),
            t.pbrMetallicRoughness);
        return (
          t &&
            (Array.isArray(t.baseColorFactor) &&
              ((r = t.baseColorFactor),
              e.color.fromArray(r),
              (e.opacity = r[3])),
            void 0 !== t.baseColorTexture) &&
            n.push(A.assignTexture(e, 'map', t.baseColorTexture.index)),
          Promise.all(n)
        );
      });
    var s = 'glTF',
      l = 12,
      c = { JSON: 1313821514, BIN: 5130562 };
    function u(e) {
      (this.name = R.KHR_BINARY_GLTF),
        (this.content = null),
        (this.body = null);
      var t = new DataView(e, 0, l);
      if (
        ((this.header = {
          magic: THREE.LoaderUtils.decodeText(new Uint8Array(e.slice(0, 4))),
          version: t.getUint32(4, !0),
          length: t.getUint32(8, !0),
        }),
        this.header.magic !== s)
      )
        throw new Error('THREE.GLTFLoader: Unsupported glTF-Binary header.');
      if (this.header.version < 2)
        throw new Error(
          'THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.',
        );
      for (var A = new DataView(e, l), r = 0; r < A.byteLength; ) {
        var n,
          i = A.getUint32(r, !0),
          a = ((r += 4), A.getUint32(r, !0));
        (r += 4),
          a === c.JSON
            ? ((n = new Uint8Array(e, l + r, i)),
              (this.content = THREE.LoaderUtils.decodeText(n)))
            : a === c.BIN && (this.body = e.slice((n = l + r), n + i)),
          (r += i);
      }
      if (null === this.content)
        throw new Error('THREE.GLTFLoader: JSON content not found.');
    }
    function h(e) {
      if (!e)
        throw new Error('THREE.GLTFLoader: No DRACOLoader instance provided.');
      (this.name = R.KHR_DRACO_MESH_COMPRESSION), (this.dracoLoader = e);
    }
    function d() {
      return {
        name: R.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,
        specularGlossinessParams: [
          'color',
          'map',
          'lightMap',
          'lightMapIntensity',
          'aoMap',
          'aoMapIntensity',
          'emissive',
          'emissiveIntensity',
          'emissiveMap',
          'bumpMap',
          'bumpScale',
          'normalMap',
          'displacementMap',
          'displacementScale',
          'displacementBias',
          'specularMap',
          'specular',
          'glossinessMap',
          'glossiness',
          'alphaMap',
          'envMap',
          'envMapIntensity',
          'refractionRatio',
        ],
        getMaterialType: function () {
          return THREE.ShaderMaterial;
        },
        extendParams: function (e, t, A) {
          var t = t.extensions[this.name],
            r = THREE.ShaderLib.standard,
            n = THREE.UniformsUtils.clone(r.uniforms),
            i = [
              '#ifdef USE_SPECULARMAP',
              '\tuniform sampler2D specularMap;',
              '#endif',
            ].join('\n'),
            a = [
              '#ifdef USE_GLOSSINESSMAP',
              '\tuniform sampler2D glossinessMap;',
              '#endif',
            ].join('\n'),
            o = [
              'vec3 specularFactor = specular;',
              '#ifdef USE_SPECULARMAP',
              '\tvec4 texelSpecular = texture2D( specularMap, vUv );',
              '\ttexelSpecular = sRGBToLinear( texelSpecular );',
              '\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture',
              '\tspecularFactor *= texelSpecular.rgb;',
              '#endif',
            ].join('\n'),
            s = [
              'float glossinessFactor = glossiness;',
              '#ifdef USE_GLOSSINESSMAP',
              '\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );',
              '\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture',
              '\tglossinessFactor *= texelGlossiness.a;',
              '#endif',
            ].join('\n'),
            l = [
              'PhysicalMaterial material;',
              'material.diffuseColor = diffuseColor.rgb;',
              'material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );',
              'material.specularColor = specularFactor.rgb;',
            ].join('\n'),
            i = r.fragmentShader
              .replace('#include <specularmap_fragment>', '')
              .replace('uniform float roughness;', 'uniform vec3 specular;')
              .replace('uniform float metalness;', 'uniform float glossiness;')
              .replace('#include <roughnessmap_pars_fragment>', i)
              .replace('#include <metalnessmap_pars_fragment>', a)
              .replace('#include <roughnessmap_fragment>', o)
              .replace('#include <metalnessmap_fragment>', s)
              .replace('#include <lights_physical_fragment>', l),
            a =
              (delete n.roughness,
              delete n.metalness,
              delete n.roughnessMap,
              delete n.metalnessMap,
              (n.specular = { value: new THREE.Color().setHex(1118481) }),
              (n.glossiness = { value: 0.5 }),
              (n.specularMap = { value: null }),
              (n.glossinessMap = { value: null }),
              (e.vertexShader = r.vertexShader),
              (e.fragmentShader = i),
              (e.uniforms = n),
              (e.defines = { STANDARD: '' }),
              (e.color = new THREE.Color(1, 1, 1)),
              (e.opacity = 1),
              []);
          return (
            Array.isArray(t.diffuseFactor) &&
              ((o = t.diffuseFactor), e.color.fromArray(o), (e.opacity = o[3])),
            void 0 !== t.diffuseTexture &&
              a.push(A.assignTexture(e, 'map', t.diffuseTexture.index)),
            (e.emissive = new THREE.Color(0, 0, 0)),
            (e.glossiness =
              void 0 !== t.glossinessFactor ? t.glossinessFactor : 1),
            (e.specular = new THREE.Color(1, 1, 1)),
            Array.isArray(t.specularFactor) &&
              e.specular.fromArray(t.specularFactor),
            void 0 !== t.specularGlossinessTexture &&
              ((s = t.specularGlossinessTexture.index),
              a.push(A.assignTexture(e, 'glossinessMap', s)),
              a.push(A.assignTexture(e, 'specularMap', s))),
            Promise.all(a)
          );
        },
        createMaterial: function (e) {
          var t = new THREE.ShaderMaterial({
            defines: e.defines,
            vertexShader: e.vertexShader,
            fragmentShader: e.fragmentShader,
            uniforms: e.uniforms,
            fog: !0,
            lights: !0,
            opacity: e.opacity,
            transparent: e.transparent,
          });
          return (
            (t.isGLTFSpecularGlossinessMaterial = !0),
            (t.color = e.color),
            (t.map = void 0 === e.map ? null : e.map),
            (t.lightMap = null),
            (t.lightMapIntensity = 1),
            (t.aoMap = void 0 === e.aoMap ? null : e.aoMap),
            (t.aoMapIntensity = 1),
            (t.emissive = e.emissive),
            (t.emissiveIntensity = 1),
            (t.emissiveMap = void 0 === e.emissiveMap ? null : e.emissiveMap),
            (t.bumpMap = void 0 === e.bumpMap ? null : e.bumpMap),
            (t.bumpScale = 1),
            (t.normalMap = void 0 === e.normalMap ? null : e.normalMap),
            e.normalScale && (t.normalScale = e.normalScale),
            (t.displacementMap = null),
            (t.displacementScale = 1),
            (t.displacementBias = 0),
            (t.specularMap = void 0 === e.specularMap ? null : e.specularMap),
            (t.specular = e.specular),
            (t.glossinessMap =
              void 0 === e.glossinessMap ? null : e.glossinessMap),
            (t.glossiness = e.glossiness),
            (t.alphaMap = null),
            (t.envMap = void 0 === e.envMap ? null : e.envMap),
            (t.envMapIntensity = 1),
            (t.refractionRatio = 0.98),
            (t.extensions.derivatives = !0),
            t
          );
        },
        cloneMaterial: function (e) {
          for (
            var t = e.clone(),
              A =
                ((t.isGLTFSpecularGlossinessMaterial = !0),
                this.specularGlossinessParams),
              r = 0,
              n = A.length;
            r < n;
            r++
          )
            t[A[r]] = e[A[r]];
          return t;
        },
        refreshUniforms: function (e, t, A, r, n, i) {
          var a, o, s, l, c, u, h;
          !0 === n.isGLTFSpecularGlossinessMaterial &&
            ((a = n.uniforms),
            (o = n.defines),
            (a.opacity.value = n.opacity),
            a.diffuse.value.copy(n.color),
            a.emissive.value
              .copy(n.emissive)
              .multiplyScalar(n.emissiveIntensity),
            (a.map.value = n.map),
            (a.specularMap.value = n.specularMap),
            (a.alphaMap.value = n.alphaMap),
            (a.lightMap.value = n.lightMap),
            (a.lightMapIntensity.value = n.lightMapIntensity),
            (a.aoMap.value = n.aoMap),
            (a.aoMapIntensity.value = n.aoMapIntensity),
            n.map
              ? (s = n.map)
              : n.specularMap
              ? (s = n.specularMap)
              : n.displacementMap
              ? (s = n.displacementMap)
              : n.normalMap
              ? (s = n.normalMap)
              : n.bumpMap
              ? (s = n.bumpMap)
              : n.glossinessMap
              ? (s = n.glossinessMap)
              : n.alphaMap
              ? (s = n.alphaMap)
              : n.emissiveMap && (s = n.emissiveMap),
            void 0 !== s &&
              (void 0 !== (s = s.isWebGLRenderTarget ? s.texture : s).matrix
                ? (!0 === s.matrixAutoUpdate &&
                    ((l = s.offset),
                    (c = s.repeat),
                    (u = s.rotation),
                    (h = s.center),
                    s.matrix.setUvTransform(l.x, l.y, c.x, c.y, u, h.x, h.y)),
                  a.uvTransform.value.copy(s.matrix))
                : ((l = s.offset),
                  (c = s.repeat),
                  a.offsetRepeat.value.set(l.x, l.y, c.x, c.y))),
            (a.envMap.value = n.envMap),
            (a.envMapIntensity.value = n.envMapIntensity),
            (a.flipEnvMap.value = n.envMap && n.envMap.isCubeTexture ? -1 : 1),
            (a.refractionRatio.value = n.refractionRatio),
            a.specular.value.copy(n.specular),
            (a.glossiness.value = n.glossiness),
            (a.glossinessMap.value = n.glossinessMap),
            (a.emissiveMap.value = n.emissiveMap),
            (a.bumpMap.value = n.bumpMap),
            (a.normalMap.value = n.normalMap),
            (a.displacementMap.value = n.displacementMap),
            (a.displacementScale.value = n.displacementScale),
            (a.displacementBias.value = n.displacementBias),
            null !== a.glossinessMap.value &&
              void 0 === o.USE_GLOSSINESSMAP &&
              ((o.USE_GLOSSINESSMAP = ''), (o.USE_ROUGHNESSMAP = '')),
            null === a.glossinessMap.value) &&
            void 0 !== o.USE_GLOSSINESSMAP &&
            (delete o.USE_GLOSSINESSMAP, delete o.USE_ROUGHNESSMAP);
        },
      };
    }
    function B(e, t, A, r) {
      THREE.Interpolant.call(this, e, t, A, r);
    }
    (h.prototype.decodePrimitive = function (e, t) {
      var A,
        r = this.dracoLoader,
        n = e.extensions[this.name].bufferView,
        i = e.extensions[this.name].attributes,
        a = {};
      for (A in i) A in v && (a[v[A]] = i[A]);
      return t.getDependency('bufferView', n).then(function (t) {
        return new Promise(function (e) {
          r.decodeDracoFile(t, e, a);
        });
      });
    }),
      (((B.prototype = Object.create(THREE.Interpolant.prototype)).constructor =
        B).prototype.interpolate_ = function (e, t, A, r) {
        for (
          var n = this.resultBuffer,
            i = this.sampleValues,
            a = this.valueSize,
            o = 2 * a,
            s = 3 * a,
            l = r - t,
            r = (A - t) / l,
            A = r * r,
            t = A * r,
            c = e * s,
            u = c - s,
            h = 2 * t - 3 * A + 1,
            d = t - 2 * A + r,
            p = -2 * t + 3 * A,
            f = t - A,
            g = 0;
          g !== a;
          g++
        ) {
          var m = i[u + g + a],
            v = i[u + g + o] * l,
            B = i[c + g + a],
            w = i[c + g] * l;
          n[g] = h * m + d * v + p * B + f * w;
        }
        return n;
      });
    var P = 0,
      D = 1,
      O = 2,
      N = 3,
      G = 4,
      V = 5,
      k = 6,
      w =
        (Number,
        THREE.Matrix3,
        THREE.Matrix4,
        THREE.Vector2,
        THREE.Vector3,
        THREE.Vector4,
        THREE.Texture,
        {
          5120: Int8Array,
          5121: Uint8Array,
          5122: Int16Array,
          5123: Uint16Array,
          5125: Uint32Array,
          5126: Float32Array,
        }),
      p = {
        9728: THREE.NearestFilter,
        9729: THREE.LinearFilter,
        9984: THREE.NearestMipMapNearestFilter,
        9985: THREE.LinearMipMapNearestFilter,
        9986: THREE.NearestMipMapLinearFilter,
        9987: THREE.LinearMipMapLinearFilter,
      },
      f = {
        33071: THREE.ClampToEdgeWrapping,
        33648: THREE.MirroredRepeatWrapping,
        10497: THREE.RepeatWrapping,
      },
      g = {
        6406: THREE.AlphaFormat,
        6407: THREE.RGBFormat,
        6408: THREE.RGBAFormat,
        6409: THREE.LuminanceFormat,
        6410: THREE.LuminanceAlphaFormat,
      },
      m = {
        5121: THREE.UnsignedByteType,
        32819: THREE.UnsignedShort4444Type,
        32820: THREE.UnsignedShort5551Type,
        33635: THREE.UnsignedShort565Type,
      },
      y =
        (THREE.BackSide,
        THREE.FrontSide,
        THREE.NeverDepth,
        THREE.LessDepth,
        THREE.EqualDepth,
        THREE.LessEqualDepth,
        THREE.GreaterEqualDepth,
        THREE.NotEqualDepth,
        THREE.GreaterEqualDepth,
        THREE.AlwaysDepth,
        THREE.AddEquation,
        THREE.SubtractEquation,
        THREE.ReverseSubtractEquation,
        THREE.ZeroFactor,
        THREE.OneFactor,
        THREE.SrcColorFactor,
        THREE.OneMinusSrcColorFactor,
        THREE.SrcAlphaFactor,
        THREE.OneMinusSrcAlphaFactor,
        THREE.DstAlphaFactor,
        THREE.OneMinusDstAlphaFactor,
        THREE.DstColorFactor,
        THREE.OneMinusDstColorFactor,
        THREE.SrcAlphaSaturateFactor,
        { SCALAR: 1, VEC2: 2, VEC3: 3, VEC4: 4, MAT2: 4, MAT3: 9, MAT4: 16 }),
      v = {
        POSITION: 'position',
        NORMAL: 'normal',
        TEXCOORD_0: 'uv',
        TEXCOORD0: 'uv',
        TEXCOORD: 'uv',
        TEXCOORD_1: 'uv2',
        COLOR_0: 'color',
        COLOR0: 'color',
        COLOR: 'color',
        WEIGHTS_0: 'skinWeight',
        WEIGHT: 'skinWeight',
        JOINTS_0: 'skinIndex',
        JOINT: 'skinIndex',
      },
      E = {
        scale: 'scale',
        translation: 'position',
        rotation: 'quaternion',
        weights: 'morphTargetInfluences',
      },
      x = {
        CUBICSPLINE: THREE.InterpolateSmooth,
        LINEAR: THREE.InterpolateLinear,
        STEP: THREE.InterpolateDiscrete,
      },
      b = 'OPAQUE',
      C = 'MASK',
      F = 'BLEND';
    function T(e, t) {
      return 'string' != typeof e || '' === e
        ? ''
        : /^(https?:)?\/\//i.test(e) ||
          /^data:.*,.*$/i.test(e) ||
          /^blob:.*$/i.test(e)
        ? e
        : t + e;
    }
    function _(e, t) {
      for (var A = 0, r = e.length; A < r; A++) {
        var n = e[A];
        if (
          (function (e, t) {
            if (e.indices === t.indices) {
              var A = e.attributes || {},
                r = t.attributes || {},
                n = Object.keys(A),
                e = Object.keys(r);
              if (n.length === e.length) {
                for (var i = 0, a = n.length; i < a; i++) {
                  var o = n[i];
                  if (A[o] !== r[o]) return;
                }
                return 1;
              }
            }
          })(n.primitive, t)
        )
          return n.promise;
      }
      return null;
    }
    function z(e) {
      if (e.isInterleavedBufferAttribute) {
        for (
          var t = e.count, A = e.itemSize, r = e.array.slice(0, t * A), n = 0;
          n < t;
          ++n
        )
          (r[n] = e.getX(n)),
            2 <= A && (r[n + 1] = e.getY(n)),
            3 <= A && (r[n + 2] = e.getZ(n)),
            4 <= A && (r[n + 3] = e.getW(n));
        return new THREE.BufferAttribute(r, A, e.normalized);
      }
      return e.clone();
    }
    function U(e, t, A) {
      (this.json = e || {}),
        (this.extensions = t || {}),
        (this.options = A || {}),
        (this.cache = new r()),
        (this.primitiveCache = []),
        (this.textureLoader = new THREE.TextureLoader(this.options.manager)),
        this.textureLoader.setCrossOrigin(this.options.crossOrigin),
        (this.fileLoader = new THREE.FileLoader(this.options.manager)),
        this.fileLoader.setResponseType('arraybuffer');
    }
    function M(e, t, A) {
      var r,
        n = t.attributes;
      for (r in n) {
        var i = v[r],
          a = A[n[r]];
        !i || i in e.attributes || e.addAttribute(i, a);
      }
      void 0 === t.indices || e.index || e.setIndex(A[t.indices]);
    }
    return (
      (U.prototype.parse = function (i, e) {
        var a = this.json;
        this.cache.removeAll(),
          this.markDefs(),
          this.getMultiDependencies(['scene', 'animation', 'camera'])
            .then(function (e) {
              var t = e.scenes || [],
                A = t[a.scene || 0],
                r = e.animations || [],
                n = a.asset,
                e = e.cameras || [];
              i(A, t, e, r, n);
            })
            .catch(e);
      }),
      (U.prototype.markDefs = function () {
        for (
          var e = this.json.nodes || [],
            t = this.json.skins || [],
            A = this.json.meshes || [],
            r = {},
            n = {},
            i = 0,
            a = t.length;
          i < a;
          i++
        )
          for (var o = t[i].joints, s = 0, l = o.length; s < l; s++)
            e[o[s]].isBone = !0;
        for (var c = 0, u = e.length; c < u; c++) {
          var h = e[c];
          void 0 !== h.mesh &&
            (void 0 === r[h.mesh] && (r[h.mesh] = n[h.mesh] = 0),
            r[h.mesh]++,
            void 0 !== h.skin) &&
            (A[h.mesh].isSkinnedMesh = !0);
        }
        (this.json.meshReferences = r), (this.json.meshUses = n);
      }),
      (U.prototype.getDependency = function (e, t) {
        var A = e + ':' + t,
          r = this.cache.get(A);
        return (
          r ||
            ((r = this['load' + e.charAt(0).toUpperCase() + e.slice(1)](t)),
            this.cache.add(A, r)),
          r
        );
      }),
      (U.prototype.getDependencies = function (A) {
        var r,
          e,
          t = this.cache.get(A);
        return (
          t ||
            ((e = (r = this).json[A + ('mesh' === A ? 'es' : 's')] || []),
            (t = Promise.all(
              e.map(function (e, t) {
                return r.getDependency(A, t);
              }),
            )),
            this.cache.add(A, t)),
          t
        );
      }),
      (U.prototype.getMultiDependencies = function (e) {
        for (var A = {}, t = [], r = 0, n = e.length; r < n; r++) {
          var i = e[r],
            a = (a = this.getDependencies(i)).then(
              function (e, t) {
                A[e] = t;
              }.bind(this, i + ('mesh' === i ? 'es' : 's')),
            );
          t.push(a);
        }
        return Promise.all(t).then(function () {
          return A;
        });
      }),
      (U.prototype.loadBuffer = function (e) {
        var A,
          r = this.json.buffers[e],
          n = this.fileLoader;
        if (r.type && 'arraybuffer' !== r.type)
          throw new Error(
            'THREE.GLTFLoader: ' + r.type + ' buffer type is not supported.',
          );
        return void 0 === r.uri && 0 === e
          ? Promise.resolve(this.extensions[R.KHR_BINARY_GLTF].body)
          : ((A = this.options),
            new Promise(function (e, t) {
              n.load(T(r.uri, A.path), e, void 0, function () {
                t(
                  new Error(
                    'THREE.GLTFLoader: Failed to load buffer "' + r.uri + '".',
                  ),
                );
              });
            }));
      }),
      (U.prototype.loadBufferView = function (e) {
        var r = this.json.bufferViews[e];
        return this.getDependency('buffer', r.buffer).then(function (e) {
          var t = r.byteLength || 0,
            A = r.byteOffset || 0;
          return e.slice(A, A + t);
        });
      }),
      (U.prototype.loadAccessor = function (e) {
        var m = this,
          v = this.json,
          B = this.json.accessors[e];
        return void 0 === B.bufferView && void 0 === B.sparse
          ? null
          : ((e = []),
            void 0 !== B.bufferView
              ? e.push(this.getDependency('bufferView', B.bufferView))
              : e.push(null),
            void 0 !== B.sparse &&
              (e.push(
                this.getDependency('bufferView', B.sparse.indices.bufferView),
              ),
              e.push(
                this.getDependency('bufferView', B.sparse.values.bufferView),
              )),
            Promise.all(e).then(function (e) {
              var t,
                A = e[0],
                r = y[B.type],
                n = w[B.componentType],
                i = n.BYTES_PER_ELEMENT,
                a = B.byteOffset || 0,
                o = v.bufferViews[B.bufferView].byteStride,
                s = !0 === B.normalized,
                l =
                  o && o !== i * r
                    ? ((c =
                        'InterleavedBuffer:' +
                        B.bufferView +
                        ':' +
                        B.componentType),
                      (u = m.cache.get(c)) ||
                        ((t = new n(A)),
                        (u = new THREE.InterleavedBuffer(t, o / i)),
                        m.cache.add(c, u)),
                      new THREE.InterleavedBufferAttribute(u, r, a / i, s))
                    : ((t =
                        null === A
                          ? new n(B.count * r)
                          : new n(A, a, B.count * r)),
                      new THREE.BufferAttribute(t, r, s));
              if (void 0 !== B.sparse) {
                var o = w[B.sparse.indices.componentType],
                  c = B.sparse.indices.byteOffset || 0,
                  u = B.sparse.values.byteOffset || 0,
                  h = new o(e[1], c, B.sparse.count * y.SCALAR),
                  d = new n(e[2], u, B.sparse.count * r);
                null !== A && l.setArray(l.array.slice());
                for (var p = 0, f = h.length; p < f; p++) {
                  var g = h[p];
                  if (
                    (l.setX(g, d[p * r]),
                    2 <= r && l.setY(g, d[p * r + 1]),
                    3 <= r && l.setZ(g, d[p * r + 2]),
                    4 <= r && l.setW(g, d[p * r + 3]),
                    5 <= r)
                  )
                    throw new Error(
                      'THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.',
                    );
                }
              }
              return l;
            }));
      }),
      (U.prototype.loadTexture = function (e) {
        var A = this.json,
          n = this.options,
          t = this.textureLoader,
          r = window.URL || window.webkitURL,
          i = A.textures[e],
          a = A.images[i.source],
          o = a.uri,
          s = !1;
        return (
          void 0 !== a.bufferView &&
            (o = this.getDependency('bufferView', a.bufferView).then(function (
              e,
            ) {
              s = !0;
              e = new Blob([e], { type: a.mimeType });
              return (o = r.createObjectURL(e));
            })),
          Promise.resolve(o)
            .then(function (A) {
              var r = THREE.Loader.Handlers.get(A) || t;
              return new Promise(function (e, t) {
                r.load(T(A, n.path), e, void 0, t);
              });
            })
            .then(function (e) {
              !0 === s && r.revokeObjectURL(o),
                (e.flipY = !1),
                void 0 !== i.name && (e.name = i.name),
                (e.format =
                  void 0 !== i.format ? g[i.format] : THREE.RGBAFormat),
                void 0 !== i.internalFormat &&
                  e.format !== g[i.internalFormat] &&
                  console.warn(
                    'THREE.GLTFLoader: Three.js does not support texture internalFormat which is different from texture format. internalFormat will be forced to be the same value as format.',
                  ),
                (e.type =
                  void 0 !== i.type ? m[i.type] : THREE.UnsignedByteType);
              var t = (A.samplers || {})[i.sampler] || {};
              return (
                (e.magFilter = p[t.magFilter] || THREE.LinearFilter),
                (e.minFilter =
                  p[t.minFilter] || THREE.LinearMipMapLinearFilter),
                (e.wrapS = f[t.wrapS] || THREE.RepeatWrapping),
                (e.wrapT = f[t.wrapT] || THREE.RepeatWrapping),
                e
              );
            })
        );
      }),
      (U.prototype.assignTexture = function (t, A, e) {
        return this.getDependency('texture', e).then(function (e) {
          t[A] = e;
        });
      }),
      (U.prototype.loadMaterial = function (e) {
        this.json;
        var t,
          A,
          r = this.extensions,
          n = this.json.materials[e],
          i = {},
          e = n.extensions || {},
          a = [],
          e =
            (e[R.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS] &&
            r[R.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]
              ? (A = r[R.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]) &&
                ((t = A.getMaterialType(n)), a.push(A.extendParams(i, n, this)))
              : e[R.KHR_MATERIALS_UNLIT] && r[R.KHR_MATERIALS_UNLIT]
              ? (A = r[R.KHR_MATERIALS_UNLIT]) &&
                ((t = A.getMaterialType(n)), a.push(A.extendParams(i, n, this)))
              : void 0 !== n.pbrMetallicRoughness
              ? ((t = THREE.MeshStandardMaterial),
                (e = n.pbrMetallicRoughness),
                (i.color = new THREE.Color(1, 1, 1)),
                (i.opacity = 1),
                Array.isArray(e.baseColorFactor) &&
                  ((A = e.baseColorFactor),
                  i.color.fromArray(A),
                  (i.opacity = A[3])),
                void 0 !== e.baseColorTexture &&
                  a.push(
                    this.assignTexture(i, 'map', e.baseColorTexture.index),
                  ),
                (i.metalness =
                  void 0 !== e.metallicFactor ? e.metallicFactor : 1),
                (i.roughness =
                  void 0 !== e.roughnessFactor ? e.roughnessFactor : 1),
                void 0 !== e.metallicRoughnessTexture &&
                  ((A = e.metallicRoughnessTexture.index),
                  a.push(this.assignTexture(i, 'metalnessMap', A)),
                  a.push(this.assignTexture(i, 'roughnessMap', A))))
              : (n.values &&
                  void 0 !== n.values.diffuse &&
                  a.push(this.assignTexture(i, 'map', n.values.diffuse.index)),
                (t = THREE.MeshPhongMaterial)),
            !0 === n.doubleSided && (i.side = THREE.DoubleSide),
            n.alphaMode || b);
        return (
          e === F
            ? (i.transparent = !0)
            : ((i.transparent = !1),
              e === C &&
                (i.alphaTest = void 0 !== n.alphaCutoff ? n.alphaCutoff : 0.5)),
          void 0 !== n.normalTexture &&
            t !== THREE.MeshBasicMaterial &&
            (a.push(this.assignTexture(i, 'normalMap', n.normalTexture.index)),
            (i.normalScale = new THREE.Vector2(1, 1)),
            void 0 !== n.normalTexture.scale) &&
            i.normalScale.set(n.normalTexture.scale, n.normalTexture.scale),
          void 0 !== n.occlusionTexture &&
            t !== THREE.MeshBasicMaterial &&
            (a.push(this.assignTexture(i, 'aoMap', n.occlusionTexture.index)),
            void 0 !== n.occlusionTexture.strength) &&
            (i.aoMapIntensity = n.occlusionTexture.strength),
          void 0 !== n.emissiveFactor &&
            t !== THREE.MeshBasicMaterial &&
            (i.emissive = new THREE.Color().fromArray(n.emissiveFactor)),
          void 0 !== n.emissiveTexture &&
            t !== THREE.MeshBasicMaterial &&
            a.push(
              this.assignTexture(i, 'emissiveMap', n.emissiveTexture.index),
            ),
          Promise.all(a).then(function () {
            var e =
              t === THREE.ShaderMaterial
                ? r[R.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS] &&
                  r[R.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(i)
                : new (t || THREE.MeshPhysicalMaterial)(i);
            return (
              void 0 !== n.name && (e.name = n.name),
              e.normalScale && (e.normalScale.x = -e.normalScale.x),
              e.map && (e.map.encoding = THREE.sRGBEncoding),
              e.emissiveMap && (e.emissiveMap.encoding = THREE.sRGBEncoding),
              n.extras && (e.userData = n.extras),
              e
            );
          })
        );
      }),
      (U.prototype.loadGeometries = function (o) {
        var s = this,
          l = this.extensions,
          c = this.primitiveCache;
        return this.getDependencies('accessor').then(function (t) {
          for (var A = [], e = [], r = 0, n = o.length; r < n; r++) {
            var i = o[r],
              a = _(c, i);
            a
              ? e.push(
                  a.then(function (e) {
                    A.push(e);
                  }),
                )
              : i.extensions && i.extensions[R.KHR_DRACO_MESH_COMPRESSION]
              ? ((a = l[R.KHR_DRACO_MESH_COMPRESSION]
                  .decodePrimitive(i, s)
                  .then(function (e) {
                    return M(e, i, t), A.push(e), e;
                  })),
                c.push({ primitive: i, promise: a }),
                e.push(a))
              : (M((a = new THREE.BufferGeometry()), i, t),
                c.push({ primitive: i, promise: Promise.resolve(a) }),
                A.push(a));
          }
          return Promise.all(e).then(function () {
            return A;
          });
        });
      }),
      (U.prototype.loadMesh = function (Q) {
        var L = this,
          H = (this.json, this.extensions),
          I = this.json.meshes[Q];
        return this.getMultiDependencies(['accessor', 'material']).then(
          function (U) {
            var M = new THREE.Group(),
              S = I.primitives;
            return L.loadGeometries(S).then(function (e) {
              for (var t = 0, A = S.length; t < A; t++) {
                var r,
                  n = S[t],
                  i = e[t],
                  a =
                    void 0 === n.material
                      ? new THREE.MeshStandardMaterial({
                          color: 16777215,
                          emissive: 0,
                          metalness: 1,
                          roughness: 1,
                          transparent: !1,
                          depthTest: !0,
                          side: THREE.FrontSide,
                        })
                      : U.materials[n.material],
                  o =
                    (a.aoMap &&
                      void 0 === i.attributes.uv2 &&
                      void 0 !== i.attributes.uv &&
                      (console.log(
                        'THREE.GLTFLoader: Duplicating UVs to support aoMap.',
                      ),
                      i.addAttribute(
                        'uv2',
                        new THREE.BufferAttribute(i.attributes.uv.array, 2),
                      )),
                    void 0 !== i.attributes.color),
                  s = void 0 === i.attributes.normal,
                  l = !0 === I.isSkinnedMesh,
                  c = void 0 !== n.targets;
                if (
                  ((o || s || l || c) &&
                    (a = a.isGLTFSpecularGlossinessMaterial
                      ? H[
                          R.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS
                        ].cloneMaterial(a)
                      : a.clone()),
                  o &&
                    ((a.vertexColors = THREE.VertexColors),
                    (a.needsUpdate = !0)),
                  s && (a.flatShading = !0),
                  n.mode === G ||
                    n.mode === V ||
                    n.mode === k ||
                    void 0 === n.mode)
                )
                  l
                    ? ((r = new THREE.SkinnedMesh(i, a)), (a.skinning = !0))
                    : (r = new THREE.Mesh(i, a)),
                    n.mode === V
                      ? (r.drawMode = THREE.TriangleStripDrawMode)
                      : n.mode === k &&
                        (r.drawMode = THREE.TriangleFanDrawMode);
                else if (n.mode === D || n.mode === N || n.mode === O) {
                  var u = 'LineBasicMaterial:' + a.uuid,
                    o = L.cache.get(u);
                  o ||
                    ((o = new THREE.LineBasicMaterial()),
                    THREE.Material.prototype.copy.call(o, a),
                    o.color.copy(a.color),
                    (o.lights = !1),
                    L.cache.add(u, o)),
                    (a = o),
                    (r = new (
                      n.mode === D
                        ? THREE.LineSegments
                        : n.mode === N
                        ? THREE.ThinLine
                        : THREE.LineLoop
                    )(i, a));
                } else {
                  if (n.mode !== P)
                    throw new Error(
                      'THREE.GLTFLoader: Primitive mode unsupported: ' + n.mode,
                    );
                  (u = 'PointsMaterial:' + a.uuid), (s = L.cache.get(u));
                  s ||
                    ((s = new THREE.PointsMaterial()),
                    THREE.Material.prototype.copy.call(s, a),
                    s.color.copy(a.color),
                    (s.map = a.map),
                    (s.lights = !1),
                    L.cache.add(u, s)),
                    (a = s),
                    (r = new THREE.Points(i, a));
                }
                if (((r.name = I.name || 'mesh_' + Q), c)) {
                  _ =
                    F =
                    C =
                    b =
                    T =
                    x =
                    E =
                    y =
                    w =
                    B =
                    v =
                    m =
                    g =
                    f =
                    p =
                    l =
                    d =
                    h =
                      void 0;
                  var h = r,
                    d = I,
                    l = n,
                    p = U.accessors,
                    f = h.geometry,
                    g = h.material,
                    m = l.targets,
                    v = f.morphAttributes;
                  (v.position = []), (v.normal = []), (g.morphTargets = !0);
                  for (var B = 0, w = m.length; B < w; B++) {
                    var y = m[B],
                      E = 'morphTarget' + B;
                    if (void 0 !== y.POSITION)
                      for (
                        var x = z(p[y.POSITION]),
                          b = f.attributes.position,
                          C = 0,
                          F = x.count;
                        C < F;
                        C++
                      )
                        x.setXYZ(
                          C,
                          x.getX(C) + b.getX(C),
                          x.getY(C) + b.getY(C),
                          x.getZ(C) + b.getZ(C),
                        );
                    else
                      f.attributes.position && (x = z(f.attributes.position));
                    if (
                      (void 0 !== x && ((x.name = E), v.position.push(x)),
                      void 0 !== y.NORMAL)
                    ) {
                      g.morphNormals = !0;
                      for (
                        var T = z(p[y.NORMAL]),
                          _ = f.attributes.normal,
                          C = 0,
                          F = T.count;
                        C < F;
                        C++
                      )
                        T.setXYZ(
                          C,
                          T.getX(C) + _.getX(C),
                          T.getY(C) + _.getY(C),
                          T.getZ(C) + _.getZ(C),
                        );
                    } else
                      void 0 !== f.attributes.normal &&
                        (T = z(f.attributes.normal));
                    void 0 !== T && ((T.name = E), v.normal.push(T));
                  }
                  if ((h.updateMorphTargets(), void 0 !== d.weights))
                    for (B = 0, w = d.weights.length; B < w; B++)
                      h.morphTargetInfluences[B] = d.weights[B];
                  if (d.extras && Array.isArray(d.extras.targetNames))
                    for (B = 0, w = d.extras.targetNames.length; B < w; B++)
                      h.morphTargetDictionary[d.extras.targetNames[B]] = B;
                }
                if (
                  (void 0 !== I.extras && (r.userData = I.extras),
                  void 0 !== n.extras && (r.geometry.userData = n.extras),
                  !0 === a.isGLTFSpecularGlossinessMaterial &&
                    (r.onBeforeRender =
                      H[
                        R.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS
                      ].refreshUniforms),
                  !(1 < S.length))
                )
                  return r;
                (r.name += '_' + t), M.add(r);
              }
              return M;
            });
          },
        );
      }),
      (U.prototype.loadCamera = function (e) {
        var t,
          A,
          e = this.json.cameras[e],
          r = e[e.type];
        if (r)
          return (
            'perspective' === e.type
              ? ((t = r.aspectRatio || 1),
                (A = r.yfov * t),
                (A = new THREE.PerspectiveCamera(
                  THREE.Math.radToDeg(A),
                  t,
                  r.znear || 1,
                  r.zfar || 2e6,
                )))
              : 'orthographic' === e.type &&
                (A = new THREE.OrthographicCamera(
                  r.xmag / -2,
                  r.xmag / 2,
                  r.ymag / 2,
                  r.ymag / -2,
                  r.znear,
                  r.zfar,
                )),
            void 0 !== e.name && (A.name = e.name),
            e.extras && (A.userData = e.extras),
            Promise.resolve(A)
          );
        console.warn('THREE.GLTFLoader: Missing camera parameters.');
      }),
      (U.prototype.loadSkin = function (e) {
        var e = this.json.skins[e],
          t = { joints: e.joints };
        return void 0 === e.inverseBindMatrices
          ? Promise.resolve(t)
          : this.getDependency('accessor', e.inverseBindMatrices).then(
              function (e) {
                return (t.inverseBindMatrices = e), t;
              },
            );
      }),
      (U.prototype.loadAnimation = function (m) {
        this.json;
        var v = this.json.animations[m];
        return this.getMultiDependencies(['accessor', 'node']).then(function (
          e,
        ) {
          for (var t = [], A = 0, r = v.channels.length; A < r; A++) {
            var n = v.channels[A],
              i = v.samplers[n.sampler];
            if (i) {
              var a,
                o = n.target,
                s = void 0 !== o.node ? o.node : o.id,
                n = void 0 !== v.parameters ? v.parameters[i.input] : i.input,
                l = void 0 !== v.parameters ? v.parameters[i.output] : i.output,
                c = e.accessors[n],
                u = e.accessors[l],
                n = e.nodes[s];
              if (n) {
                switch (
                  (n.updateMatrix(), (n.matrixAutoUpdate = !0), E[o.path])
                ) {
                  case E.weights:
                    a = THREE.NumberKeyframeTrack;
                    break;
                  case E.rotation:
                    a = THREE.QuaternionKeyframeTrack;
                    break;
                  default:
                    a = THREE.VectorKeyframeTrack;
                }
                var l = n.name || n.uuid,
                  h =
                    void 0 !== i.interpolation
                      ? x[i.interpolation]
                      : THREE.InterpolateLinear,
                  d = [];
                E[o.path] === E.weights
                  ? n.traverse(function (e) {
                      !0 === e.isMesh &&
                        !0 === e.material.morphTargets &&
                        d.push(e.name || e.uuid);
                    })
                  : d.push(l);
                for (var p = 0, f = d.length; p < f; p++) {
                  var g = new a(
                    d[p] + '.' + E[o.path],
                    THREE.AnimationUtils.arraySlice(c.array, 0),
                    THREE.AnimationUtils.arraySlice(u.array, 0),
                    h,
                  );
                  'CUBICSPLINE' === i.interpolation &&
                    ((g.createInterpolant = function (e) {
                      return new B(
                        this.times,
                        this.values,
                        this.getValueSize() / 3,
                        e,
                      );
                    }),
                    (g.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline =
                      !0)),
                    t.push(g);
                }
              }
            }
          }
          s = void 0 !== v.name ? v.name : 'animation_' + m;
          return new THREE.AnimationClip(s, void 0, t);
        });
      }),
      (U.prototype.loadNode = function (e) {
        this.json;
        var a = this.extensions,
          o = this.json.meshReferences,
          s = this.json.meshUses,
          l = this.json.nodes[e];
        return this.getMultiDependencies(['mesh', 'skin', 'camera']).then(
          function (e) {
            if (!0 === l.isBone) A = new THREE.Bone();
            else if (void 0 !== l.mesh) {
              var t = e.meshes[l.mesh],
                A = t.clone();
              if (!0 === t.isGroup)
                for (var r = 0, n = t.children.length; r < n; r++) {
                  var i = t.children[r];
                  i.material &&
                    !0 === i.material.isGLTFSpecularGlossinessMaterial &&
                    (A.children[r].onBeforeRender = i.onBeforeRender);
                }
              else
                t.material &&
                  !0 === t.material.isGLTFSpecularGlossinessMaterial &&
                  (A.onBeforeRender = t.onBeforeRender);
              1 < o[l.mesh] && (A.name += '_instance_' + s[l.mesh]++);
            } else
              A =
                void 0 !== l.camera
                  ? e.cameras[l.camera]
                  : l.extensions &&
                    l.extensions[R.KHR_LIGHTS] &&
                    void 0 !== l.extensions[R.KHR_LIGHTS].light
                  ? a[R.KHR_LIGHTS].lights[l.extensions[R.KHR_LIGHTS].light]
                  : new THREE.Object3D();
            return (
              void 0 !== l.name &&
                (A.name = THREE.PropertyBinding.sanitizeNodeName(l.name)),
              l.extras && (A.userData = l.extras),
              void 0 !== l.matrix
                ? ((e = new THREE.Matrix4()).fromArray(l.matrix),
                  A.applyMatrix(e))
                : (void 0 !== l.translation &&
                    A.position.fromArray(l.translation),
                  void 0 !== l.rotation && A.quaternion.fromArray(l.rotation),
                  void 0 !== l.scale && A.scale.fromArray(l.scale)),
              A
            );
          },
        );
      }),
      (U.prototype.loadScene = function (e) {
        var a = this.json,
          o = this.extensions,
          s = this.json.scenes[e];
        return this.getMultiDependencies(['node', 'skin']).then(function (e) {
          for (
            var t,
              A = new THREE.Scene(),
              r =
                (void 0 !== s.name && (A.name = s.name),
                s.extras && (A.userData = s.extras),
                s.nodes || []),
              n = 0,
              i = r.length;
            n < i;
            n++
          )
            !(function e(t, A, r, n, i) {
              var a = n[t],
                o = r.nodes[t];
              if (void 0 !== o.skin)
                for (
                  var s = !0 === a.isGroup ? a.children : [a],
                    l = 0,
                    c = s.length;
                  l < c;
                  l++
                ) {
                  for (
                    var u = s[l],
                      h = i[o.skin],
                      d = [],
                      p = [],
                      f = 0,
                      g = h.joints.length;
                    f < g;
                    f++
                  ) {
                    var m = h.joints[f],
                      v = n[m];
                    v
                      ? (d.push(v),
                        (v = new THREE.Matrix4()),
                        void 0 !== h.inverseBindMatrices &&
                          v.fromArray(h.inverseBindMatrices.array, 16 * f),
                        p.push(v))
                      : console.warn(
                          'THREE.GLTFLoader: Joint "%s" could not be found.',
                          m,
                        );
                  }
                  u.bind(new THREE.Skeleton(d, p), u.matrixWorld);
                }
              if ((A.add(a), o.children))
                for (var B = o.children, l = 0, c = B.length; l < c; l++)
                  e(B[l], a, r, n, i);
            })(r[n], A, a, e.nodes, e.skins);
          return (
            s.extensions &&
              s.extensions[R.KHR_LIGHTS] &&
              void 0 !== s.extensions[R.KHR_LIGHTS].light &&
              ((t = o[R.KHR_LIGHTS].lights),
              A.add(t[s.extensions[R.KHR_LIGHTS].light])),
            A
          );
        });
      }),
      e
    );
  })()),
  (THREE.OBJLoader = (function () {
    var V = /^[og]\s*(.+)?/,
      k = /^mtllib /,
      z = /^usemtl /;
    function K() {
      var e = {
        objects: [],
        object: {},
        vertices: [],
        normals: [],
        colors: [],
        uvs: [],
        materialLibraries: [],
        startObject: function (e, t) {
          var A;
          this.object && !1 === this.object.fromDeclaration
            ? ((this.object.name = e), (this.object.fromDeclaration = !1 !== t))
            : ((A =
                this.object && 'function' == typeof this.object.currentMaterial
                  ? this.object.currentMaterial()
                  : void 0),
              this.object &&
                'function' == typeof this.object._finalize &&
                this.object._finalize(!0),
              (this.object = {
                name: e || '',
                fromDeclaration: !1 !== t,
                geometry: { vertices: [], normals: [], colors: [], uvs: [] },
                materials: [],
                smooth: !0,
                startMaterial: function (e, t) {
                  var A = this._finalize(!1),
                    e =
                      (A &&
                        (A.inherited || A.groupCount <= 0) &&
                        this.materials.splice(A.index, 1),
                      {
                        index: this.materials.length,
                        name: e || '',
                        mtllib:
                          Array.isArray(t) && 0 < t.length
                            ? t[t.length - 1]
                            : '',
                        smooth: (void 0 !== A ? A : this).smooth,
                        groupStart: void 0 !== A ? A.groupEnd : 0,
                        groupEnd: -1,
                        groupCount: -1,
                        inherited: !1,
                        clone: function (e) {
                          e = {
                            index: 'number' == typeof e ? e : this.index,
                            name: this.name,
                            mtllib: this.mtllib,
                            smooth: this.smooth,
                            groupStart: 0,
                            groupEnd: -1,
                            groupCount: -1,
                            inherited: !1,
                          };
                          return (e.clone = this.clone.bind(e)), e;
                        },
                      });
                  return this.materials.push(e), e;
                },
                currentMaterial: function () {
                  if (0 < this.materials.length)
                    return this.materials[this.materials.length - 1];
                },
                _finalize: function (e) {
                  var t = this.currentMaterial();
                  if (
                    (t &&
                      -1 === t.groupEnd &&
                      ((t.groupEnd = this.geometry.vertices.length / 3),
                      (t.groupCount = t.groupEnd - t.groupStart),
                      (t.inherited = !1)),
                    e && 1 < this.materials.length)
                  )
                    for (var A = this.materials.length - 1; 0 <= A; A--)
                      this.materials[A].groupCount <= 0 &&
                        this.materials.splice(A, 1);
                  return (
                    e &&
                      0 === this.materials.length &&
                      this.materials.push({ name: '', smooth: this.smooth }),
                    t
                  );
                },
              }),
              A &&
                A.name &&
                'function' == typeof A.clone &&
                (((e = A.clone(0)).inherited = !0),
                this.object.materials.push(e)),
              this.objects.push(this.object));
        },
        finalize: function () {
          this.object &&
            'function' == typeof this.object._finalize &&
            this.object._finalize(!0);
        },
        parseVertexIndex: function (e, t) {
          e = parseInt(e, 10);
          return 3 * (0 <= e ? e - 1 : e + t / 3);
        },
        parseNormalIndex: function (e, t) {
          e = parseInt(e, 10);
          return 3 * (0 <= e ? e - 1 : e + t / 3);
        },
        parseUVIndex: function (e, t) {
          e = parseInt(e, 10);
          return 2 * (0 <= e ? e - 1 : e + t / 2);
        },
        addVertex: function (e, t, A) {
          var r = this.vertices,
            n = this.object.geometry.vertices;
          n.push(r[e + 0], r[e + 1], r[e + 2]),
            n.push(r[t + 0], r[t + 1], r[t + 2]),
            n.push(r[A + 0], r[A + 1], r[A + 2]);
        },
        addVertexPoint: function (e) {
          var t = this.vertices;
          this.object.geometry.vertices.push(t[e + 0], t[e + 1], t[e + 2]);
        },
        addVertexLine: function (e) {
          var t = this.vertices;
          this.object.geometry.vertices.push(t[e + 0], t[e + 1], t[e + 2]);
        },
        addNormal: function (e, t, A) {
          var r = this.normals,
            n = this.object.geometry.normals;
          n.push(r[e + 0], r[e + 1], r[e + 2]),
            n.push(r[t + 0], r[t + 1], r[t + 2]),
            n.push(r[A + 0], r[A + 1], r[A + 2]);
        },
        addColor: function (e, t, A) {
          var r = this.colors,
            n = this.object.geometry.colors;
          n.push(r[e + 0], r[e + 1], r[e + 2]),
            n.push(r[t + 0], r[t + 1], r[t + 2]),
            n.push(r[A + 0], r[A + 1], r[A + 2]);
        },
        addUV: function (e, t, A) {
          var r = this.uvs,
            n = this.object.geometry.uvs;
          n.push(r[e + 0], r[e + 1]),
            n.push(r[t + 0], r[t + 1]),
            n.push(r[A + 0], r[A + 1]);
        },
        addUVLine: function (e) {
          var t = this.uvs;
          this.object.geometry.uvs.push(t[e + 0], t[e + 1]);
        },
        addFace: function (e, t, A, r, n, i, a, o, s) {
          var l = this.vertices.length,
            e = this.parseVertexIndex(e, l),
            t = this.parseVertexIndex(t, l),
            A = this.parseVertexIndex(A, l);
          this.addVertex(e, t, A),
            void 0 !== r &&
              '' !== r &&
              ((l = this.uvs.length),
              (e = this.parseUVIndex(r, l)),
              (t = this.parseUVIndex(n, l)),
              (A = this.parseUVIndex(i, l)),
              this.addUV(e, t, A)),
            void 0 !== a &&
              '' !== a &&
              ((r = this.normals.length),
              (e = this.parseNormalIndex(a, r)),
              (t = a === o ? e : this.parseNormalIndex(o, r)),
              (A = a === s ? e : this.parseNormalIndex(s, r)),
              this.addNormal(e, t, A)),
            0 < this.colors.length && this.addColor(e, t, A);
        },
        addPointGeometry: function (e) {
          this.object.geometry.type = 'Points';
          for (var t = this.vertices.length, A = 0, r = e.length; A < r; A++)
            this.addVertexPoint(this.parseVertexIndex(e[A], t));
        },
        addLineGeometry: function (e, t) {
          this.object.geometry.type = 'Line';
          for (
            var A = this.vertices.length,
              r = this.uvs.length,
              n = 0,
              i = e.length;
            n < i;
            n++
          )
            this.addVertexLine(this.parseVertexIndex(e[n], A));
          for (var a = 0, i = t.length; a < i; a++)
            this.addUVLine(this.parseUVIndex(t[a], r));
        },
      };
      return e.startObject('', !1), e;
    }
    function e(e) {
      (this.manager = void 0 !== e ? e : THREE.DefaultLoadingManager),
        (this.materials = null);
    }
    return (
      (e.prototype = {
        constructor: e,
        load: function (e, t, A, r) {
          var n = this,
            i = new THREE.FileLoader(n.manager);
          i.setPath(this.path),
            i.load(
              e,
              function (e) {
                t(n.parse(e));
              },
              A,
              r,
            );
        },
        setPath: function (e) {
          this.path = e;
        },
        setMaterials: function (e) {
          return (this.materials = e), this;
        },
        parse: function (e) {
          console.time('OBJLoader');
          for (
            var t,
              A,
              r = new K(),
              n = (e =
                -1 !==
                (e =
                  -1 !== e.indexOf('\r\n')
                    ? e.replace(/\r\n/g, '\n')
                    : e).indexOf('\\\n')
                  ? e.replace(/\\\n/g, '')
                  : e).split('\n'),
              i = '',
              a = [],
              R = 'function' == typeof ''.trimLeft,
              o = 0,
              s = n.length;
            o < s;
            o++
          )
            if (
              ((i = n[o]),
              0 !== (i = R ? i.trimLeft() : i.trim()).length &&
                '#' !== (t = i.charAt(0)))
            )
              if ('v' === t) {
                var l = i.split(/\s+/);
                switch (l[0]) {
                  case 'v':
                    r.vertices.push(
                      parseFloat(l[1]),
                      parseFloat(l[2]),
                      parseFloat(l[3]),
                    ),
                      8 === l.length &&
                        r.colors.push(
                          parseFloat(l[4]),
                          parseFloat(l[5]),
                          parseFloat(l[6]),
                        );
                    break;
                  case 'vn':
                    r.normals.push(
                      parseFloat(l[1]),
                      parseFloat(l[2]),
                      parseFloat(l[3]),
                    );
                    break;
                  case 'vt':
                    r.uvs.push(parseFloat(l[1]), parseFloat(l[2]));
                }
              } else if ('f' === t) {
                for (
                  var c = i.substr(1).trim().split(/\s+/),
                    u = [],
                    h = 0,
                    P = c.length;
                  h < P;
                  h++
                ) {
                  var d = c[h];
                  0 < d.length && ((d = d.split('/')), u.push(d));
                }
                for (var p = u[0], h = 1, P = u.length - 1; h < P; h++) {
                  var f = u[h],
                    g = u[h + 1];
                  r.addFace(
                    p[0],
                    f[0],
                    g[0],
                    p[1],
                    f[1],
                    g[1],
                    p[2],
                    f[2],
                    g[2],
                  );
                }
              } else if ('l' === t) {
                var m = i.substring(1).trim().split(' '),
                  v = [],
                  D = [];
                if (-1 === i.indexOf('/')) v = m;
                else
                  for (var B = 0, O = m.length; B < O; B++) {
                    var w = m[B].split('/');
                    '' !== w[0] && v.push(w[0]), '' !== w[1] && D.push(w[1]);
                  }
                r.addLineGeometry(v, D);
              } else if ('p' === t) {
                var y = i.substr(1).trim().split(' ');
                r.addPointGeometry(y);
              } else if (null !== (a = V.exec(i))) {
                y = (' ' + a[0].substr(1).trim()).substr(1);
                r.startObject(y);
              } else if (z.test(i))
                r.object.startMaterial(
                  i.substring(7).trim(),
                  r.materialLibraries,
                );
              else if (k.test(i))
                r.materialLibraries.push(i.substring(7).trim());
              else if ('s' === t)
                1 < (a = i.split(' ')).length
                  ? ((A = a[1].trim().toLowerCase()),
                    (r.object.smooth = '0' !== A && 'off' !== A))
                  : (r.object.smooth = !0),
                  (I = r.object.currentMaterial()) &&
                    (I.smooth = r.object.smooth);
              else if ('\0' !== i)
                throw new Error(
                  'THREE.OBJLoader: Unexpected line: "' + i + '"',
                );
          r.finalize();
          var E = new THREE.Group();
          E.materialLibraries = [].concat(r.materialLibraries);
          for (o = 0, s = r.objects.length; o < s; o++) {
            var x = r.objects[o],
              b = x.geometry,
              C = x.materials,
              F = 'Line' === b.type,
              T = 'Points' === b.type,
              N = !1;
            if (0 !== b.vertices.length) {
              for (
                var _,
                  U = new THREE.BufferGeometry(),
                  M =
                    (U.addAttribute(
                      'position',
                      new THREE.Float32BufferAttribute(b.vertices, 3),
                    ),
                    0 < b.normals.length
                      ? U.addAttribute(
                          'normal',
                          new THREE.Float32BufferAttribute(b.normals, 3),
                        )
                      : U.computeVertexNormals(),
                    0 < b.colors.length &&
                      ((N = !0),
                      U.addAttribute(
                        'color',
                        new THREE.Float32BufferAttribute(b.colors, 3),
                      )),
                    0 < b.uvs.length &&
                      U.addAttribute(
                        'uv',
                        new THREE.Float32BufferAttribute(b.uvs, 2),
                      ),
                    []),
                  S = 0,
                  Q = C.length;
                S < Q;
                S++
              ) {
                var G,
                  L,
                  H = C[S],
                  I = void 0;
                null !== this.materials &&
                  ((I = this.materials.create(H.name)),
                  !F || !I || I instanceof THREE.LineBasicMaterial
                    ? !T ||
                      !I ||
                      I instanceof THREE.PointsMaterial ||
                      ((G = new THREE.PointsMaterial({
                        size: 10,
                        sizeAttenuation: !1,
                      })),
                      L.copy(I),
                      (I = G))
                    : ((L = new THREE.LineBasicMaterial()).copy(I),
                      (L.lights = !1),
                      (I = L))),
                  I ||
                    ((I = F
                      ? new THREE.LineBasicMaterial()
                      : T
                      ? new THREE.PointsMaterial({
                          size: 1,
                          sizeAttenuation: !1,
                        })
                      : new THREE.MeshPhongMaterial()).name = H.name),
                  (I.flatShading = !H.smooth),
                  (I.vertexColors = N ? THREE.VertexColors : THREE.NoColors),
                  M.push(I);
              }
              if (1 < M.length) {
                for (S = 0, Q = C.length; S < Q; S++) {
                  H = C[S];
                  U.addGroup(H.groupStart, H.groupCount, S);
                }
                _ = new (
                  F ? THREE.LineSegments : T ? THREE.Points : THREE.Mesh
                )(U, M);
              } else
                _ = new (
                  F ? THREE.LineSegments : T ? THREE.Points : THREE.Mesh
                )(U, M[0]);
              (_.name = x.name), E.add(_);
            }
          }
          return console.timeEnd('OBJLoader'), E;
        },
      }),
      e
    );
  })()),
  (THREE.BinaryLoader = function (e) {
    'boolean' == typeof e &&
      (console.warn(
        'THREE.BinaryLoader: showStatus parameter has been removed from constructor.',
      ),
      (e = void 0)),
      (this.manager = void 0 !== e ? e : THREE.DefaultLoadingManager);
  }),
  (THREE.BinaryLoader.prototype = {
    constructor: THREE.BinaryLoader,
    crossOrigin: 'Anonymous',
    load: function (e, r, n, i) {
      var a = this.texturePath || THREE.LoaderUtils.extractUrlBase(e),
        o = this.binaryPath || THREE.LoaderUtils.extractUrlBase(e),
        s = this;
      new THREE.FileLoader(this.manager).load(
        e,
        function (e) {
          var t = JSON.parse(e),
            e = o + t.buffers,
            A = new THREE.FileLoader(s.manager);
          A.setResponseType('arraybuffer'),
            A.load(
              e,
              function (e) {
                s.parse(e, r, a, t.materials);
              },
              n,
              i,
            );
        },
        n,
        i,
      );
    },
    setBinaryPath: function (e) {
      this.binaryPath = e;
    },
    setCrossOrigin: function (e) {
      this.crossOrigin = e;
    },
    setTexturePath: function (e) {
      this.texturePath = e;
    },
    parse: function (T, e, t, A) {
      function r() {
        var o,
          e,
          t,
          A,
          r,
          C = this,
          n = 0,
          F = [],
          h = [],
          i =
            (THREE.Geometry.call(this),
            (n += (o = {
              signature: (function (e, t, A) {
                return THREE.LoaderUtils.decodeText(new Uint8Array(e, t, A));
              })((t = T), (c = 0), 12),
              header_bytes: p(t, c + 12),
              vertex_coordinate_bytes: p(t, c + 13),
              normal_coordinate_bytes: p(t, c + 14),
              uv_coordinate_bytes: p(t, c + 15),
              vertex_index_bytes: p(t, c + 16),
              normal_index_bytes: p(t, c + 17),
              uv_index_bytes: p(t, c + 18),
              material_index_bytes: p(t, c + 19),
              nvertices: f(t, c + 20),
              nnormals: f(t, c + 20 + 4),
              nuvs: f(t, c + 20 + 8),
              ntri_flat: f(t, c + 20 + 12),
              ntri_smooth: f(t, c + 20 + 16),
              ntri_flat_uv: f(t, c + 20 + 20),
              ntri_smooth_uv: f(t, c + 20 + 24),
              nquad_flat: f(t, c + 20 + 28),
              nquad_smooth: f(t, c + 20 + 32),
              nquad_flat_uv: f(t, c + 20 + 36),
              nquad_smooth_uv: f(t, c + 20 + 40),
            }).header_bytes),
            (t = 3 * o.vertex_index_bytes + o.material_index_bytes),
            (c = 4 * o.vertex_index_bytes + o.material_index_bytes),
            (r = o.ntri_flat * t),
            (a = o.ntri_smooth * (t + 3 * o.normal_index_bytes)),
            (u = o.ntri_flat_uv * (t + 3 * o.uv_index_bytes)),
            (t =
              o.ntri_smooth_uv *
              (t + 3 * o.normal_index_bytes + 3 * o.uv_index_bytes)),
            (e = o.nquad_flat * c),
            (l = o.nquad_smooth * (c + 4 * o.normal_index_bytes)),
            (c = o.nquad_flat_uv * (c + 4 * o.uv_index_bytes)),
            (c =
              (l =
                (e =
                  (t =
                    (u =
                      (a =
                        (r =
                          (n = n =
                            (n =
                              (n =
                                (n += (function (e) {
                                  var t,
                                    A,
                                    r,
                                    n,
                                    i = o.nvertices,
                                    a = new Float32Array(T, e, 3 * i);
                                  for (t = 0; t < i; t++)
                                    (A = a[3 * t]),
                                      (r = a[3 * t + 1]),
                                      (n = a[3 * t + 2]),
                                      C.vertices.push(
                                        new THREE.Vector3(A, r, n),
                                      );
                                  return 3 * i * Float32Array.BYTES_PER_ELEMENT;
                                })(n)) +
                                (function (e) {
                                  var t,
                                    A,
                                    r,
                                    n,
                                    i = o.nnormals;
                                  if (i) {
                                    var a = new Int8Array(T, e, 3 * i);
                                    for (t = 0; t < i; t++)
                                      (A = a[3 * t]),
                                        (r = a[3 * t + 1]),
                                        (n = a[3 * t + 2]),
                                        F.push(A / 127, r / 127, n / 127);
                                  }
                                  return 3 * i * Int8Array.BYTES_PER_ELEMENT;
                                })(n)) + d(3 * o.nnormals)) +
                            (function (e) {
                              var t,
                                A,
                                r,
                                n = o.nuvs;
                              if (n) {
                                var i = new Float32Array(T, e, 2 * n);
                                for (t = 0; t < n; t++)
                                  (A = i[2 * t]),
                                    (r = i[2 * t + 1]),
                                    h.push(A, r);
                              }
                              return 2 * n * Float32Array.BYTES_PER_ELEMENT;
                            })(n)) +
                          r +
                          d(2 * o.ntri_flat)) +
                        a +
                        d(2 * o.ntri_smooth)) +
                      u +
                      d(2 * o.ntri_flat_uv)) +
                    t +
                    d(2 * o.ntri_smooth_uv)) +
                  e +
                  d(2 * o.nquad_flat)) +
                l +
                d(2 * o.nquad_smooth)) +
              c +
              d(2 * o.nquad_flat_uv)),
            o.ntri_flat_uv),
          a =
            (i &&
              ((A = a + i * Uint32Array.BYTES_PER_ELEMENT * 3),
              (s = A + i * Uint32Array.BYTES_PER_ELEMENT * 3),
              v(i, a, s),
              g(i, A)),
            u),
          s = o.ntri_smooth_uv,
          a =
            (s &&
              ((i = a + s * Uint32Array.BYTES_PER_ELEMENT * 3),
              (A = i + s * Uint32Array.BYTES_PER_ELEMENT * 3),
              (u = A + s * Uint32Array.BYTES_PER_ELEMENT * 3),
              w(s, a, i, u),
              g(s, A)),
            l),
          a =
            ((i = o.nquad_flat_uv) &&
              ((u = a + i * Uint32Array.BYTES_PER_ELEMENT * 4),
              (l = u + i * Uint32Array.BYTES_PER_ELEMENT * 4),
              B(i, a, l),
              m(i, u)),
            c),
          a =
            ((l = o.nquad_smooth_uv) &&
              ((i = a + l * Uint32Array.BYTES_PER_ELEMENT * 4),
              (u = i + l * Uint32Array.BYTES_PER_ELEMENT * 4),
              (c = u + l * Uint32Array.BYTES_PER_ELEMENT * 4),
              y(l, a, i, c),
              m(l, u)),
            n),
          l =
            ((i = o.ntri_flat) &&
              ((c = a + i * Uint32Array.BYTES_PER_ELEMENT * 3), v(i, a, c)),
            r),
          a =
            ((u = o.ntri_smooth) &&
              ((n = l + u * Uint32Array.BYTES_PER_ELEMENT * 3),
              (i = n + u * Uint32Array.BYTES_PER_ELEMENT * 3),
              w(u, l, n, i)),
            t),
          c = o.nquad_flat,
          u =
            (c && ((r = a + c * Uint32Array.BYTES_PER_ELEMENT * 4), B(c, a, r)),
            e);
        function d(e) {
          return e % 4 ? 4 - (e % 4) : 0;
        }
        function p(e, t) {
          return new Uint8Array(e, t, 1)[0];
        }
        function f(e, t) {
          return new Uint32Array(e, t, 1)[0];
        }
        function g(e, t) {
          for (
            var A, r, n, i, a, o, s = new Uint32Array(T, t, 3 * e), l = 0;
            l < e;
            l++
          )
            (i = s[3 * l]),
              (a = s[3 * l + 1]),
              (o = s[3 * l + 2]),
              (A = h[2 * i]),
              (i = h[2 * i + 1]),
              (r = h[2 * a]),
              (a = h[2 * a + 1]),
              (n = h[2 * o]),
              (o = h[2 * o + 1]),
              C.faceVertexUvs[0].push([
                new THREE.Vector2(A, i),
                new THREE.Vector2(r, a),
                new THREE.Vector2(n, o),
              ]);
        }
        function m(e, t) {
          for (
            var A, r, n, i, a, o, s, l, c = new Uint32Array(T, t, 4 * e), u = 0;
            u < e;
            u++
          )
            (a = c[4 * u]),
              (o = c[4 * u + 1]),
              (s = c[4 * u + 2]),
              (l = c[4 * u + 3]),
              (A = h[2 * a]),
              (a = h[2 * a + 1]),
              (r = h[2 * o]),
              (o = h[2 * o + 1]),
              (n = h[2 * s]),
              (s = h[2 * s + 1]),
              (i = h[2 * l]),
              (l = h[2 * l + 1]),
              C.faceVertexUvs[0].push([
                new THREE.Vector2(A, a),
                new THREE.Vector2(r, o),
                new THREE.Vector2(i, l),
              ]),
              C.faceVertexUvs[0].push([
                new THREE.Vector2(r, o),
                new THREE.Vector2(n, s),
                new THREE.Vector2(i, l),
              ]);
        }
        function v(e, t, A) {
          for (
            var r,
              n,
              i,
              a,
              o = new Uint32Array(T, t, 3 * e),
              s = new Uint16Array(T, A, e),
              l = 0;
            l < e;
            l++
          )
            (r = o[3 * l]),
              (n = o[3 * l + 1]),
              (i = o[3 * l + 2]),
              (a = s[l]),
              C.faces.push(new THREE.Face3(r, n, i, null, null, a));
        }
        function B(e, t, A) {
          for (
            var r,
              n,
              i,
              a,
              o,
              s = new Uint32Array(T, t, 4 * e),
              l = new Uint16Array(T, A, e),
              c = 0;
            c < e;
            c++
          )
            (r = s[4 * c]),
              (n = s[4 * c + 1]),
              (i = s[4 * c + 2]),
              (a = s[4 * c + 3]),
              (o = l[c]),
              C.faces.push(new THREE.Face3(r, n, a, null, null, o)),
              C.faces.push(new THREE.Face3(n, i, a, null, null, o));
        }
        function w(e, t, A, r) {
          for (
            var n = new Uint32Array(T, t, 3 * e),
              i = new Uint32Array(T, A, 3 * e),
              a = new Uint16Array(T, r, e),
              o = 0;
            o < e;
            o++
          ) {
            var s = n[3 * o],
              l = n[3 * o + 1],
              c = n[3 * o + 2],
              u = i[3 * o],
              h = i[3 * o + 1],
              d = i[3 * o + 2],
              p = a[o],
              f = F[3 * u],
              g = F[3 * u + 1],
              u = F[3 * u + 2],
              m = F[3 * h],
              v = F[3 * h + 1],
              h = F[3 * h + 2],
              B = F[3 * d],
              w = F[3 * d + 1],
              d = F[3 * d + 2];
            C.faces.push(
              new THREE.Face3(
                s,
                l,
                c,
                [
                  new THREE.Vector3(f, g, u),
                  new THREE.Vector3(m, v, h),
                  new THREE.Vector3(B, w, d),
                ],
                null,
                p,
              ),
            );
          }
        }
        function y(e, t, A, r) {
          for (
            var n = new Uint32Array(T, t, 4 * e),
              i = new Uint32Array(T, A, 4 * e),
              a = new Uint16Array(T, r, e),
              o = 0;
            o < e;
            o++
          ) {
            var s = n[4 * o],
              l = n[4 * o + 1],
              c = n[4 * o + 2],
              u = n[4 * o + 3],
              h = i[4 * o],
              d = i[4 * o + 1],
              p = i[4 * o + 2],
              f = i[4 * o + 3],
              g = a[o],
              m = F[3 * h],
              v = F[3 * h + 1],
              h = F[3 * h + 2],
              B = F[3 * d],
              w = F[3 * d + 1],
              d = F[3 * d + 2],
              y = F[3 * p],
              E = F[3 * p + 1],
              p = F[3 * p + 2],
              x = F[3 * f],
              b = F[3 * f + 1],
              f = F[3 * f + 2];
            C.faces.push(
              new THREE.Face3(
                s,
                l,
                u,
                [
                  new THREE.Vector3(m, v, h),
                  new THREE.Vector3(B, w, d),
                  new THREE.Vector3(x, b, f),
                ],
                null,
                g,
              ),
            ),
              C.faces.push(
                new THREE.Face3(
                  l,
                  c,
                  u,
                  [
                    new THREE.Vector3(B, w, d),
                    new THREE.Vector3(y, E, p),
                    new THREE.Vector3(x, b, f),
                  ],
                  null,
                  g,
                ),
              );
          }
        }
        (l = o.nquad_smooth) &&
          ((n = u + l * Uint32Array.BYTES_PER_ELEMENT * 4),
          (i = n + l * Uint32Array.BYTES_PER_ELEMENT * 4),
          y(l, u, n, i)),
          this.computeFaceNormals();
      }
      e(
        new ((r.prototype = Object.create(
          THREE.Geometry.prototype,
        )).constructor = r)(),
        THREE.Loader.prototype.initMaterials(A, t, this.crossOrigin),
      );
    },
  }),
  (function () {
    function w(e, t, A, r) {
      return (
        'LayeredTexture' in e.Objects &&
          A in e.Objects.LayeredTexture &&
          (console.warn(
            'THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer.',
          ),
          (A = r.get(A).children[0].ID)),
        t.get(A)
      );
    }
    (THREE.FBXLoader = function (e) {
      this.manager = void 0 !== e ? e : THREE.DefaultLoadingManager;
    }),
      Object.assign(THREE.FBXLoader.prototype, {
        load: function (A, r, e, n) {
          var i = this,
            a = THREE.LoaderUtils.extractUrlBase(A),
            t = new THREE.FileLoader(this.manager);
          t.setResponseType('arraybuffer'),
            t.load(
              A,
              function (e) {
                try {
                  var t = i.parse(e, a);
                  r(t);
                } catch (e) {
                  window.setTimeout(function () {
                    n && n(e), i.manager.itemError(A);
                  }, 0);
                }
              },
              e,
              n,
            );
        },
        parse: function (e, t) {
          if (
            ((i = 'Kaydara FBX Binary  \0'),
            (A = e).byteLength >= i.length && i === _(A, 0, i.length))
          )
            r = new C().parse(e);
          else {
            var A = _(e);
            if (
              !(function (A) {
                var e = [
                    'K',
                    'a',
                    'y',
                    'd',
                    'a',
                    'r',
                    'a',
                    '\\',
                    'F',
                    'B',
                    'X',
                    '\\',
                    'B',
                    'i',
                    'n',
                    'a',
                    'r',
                    'y',
                    '\\',
                    '\\',
                  ],
                  r = 0;
                for (var t = 0; t < e.length; ++t)
                  if (
                    (function (e) {
                      var t = A[e - 1];
                      return (A = A.slice(r + e)), r++, t;
                    })(1) === e[t]
                  )
                    return;
                return 1;
              })(A)
            )
              throw new Error('THREE.FBXLoader: Unknown format.');
            if (F(A) < 7e3)
              throw new Error(
                'THREE.FBXLoader: FBX version not supported, FileVersion: ' +
                  F(A),
              );
            r = new b().parse(A);
          }
          var a,
            o,
            r,
            s,
            l,
            c,
            n,
            i = (function (e) {
              var n = new Map();
              'Connections' in e &&
                e.Connections.connections.forEach(function (e) {
                  var t = e[0],
                    A = e[1],
                    e = e[2],
                    r =
                      (n.has(t) || n.set(t, { parents: [], children: [] }),
                      { ID: A, relationship: e }),
                    r =
                      (n.get(t).parents.push(r),
                      n.has(A) || n.set(A, { parents: [], children: [] }),
                      { ID: t, relationship: e });
                  n.get(A).children.push(r);
                });
              return n;
            })(r),
            e = (function (e) {
              var t = {},
                A = {};
              if ('Video' in e.Objects) {
                var r,
                  n = e.Objects.Video;
                for (r in n) {
                  var i,
                    a,
                    o = n[r],
                    s = parseInt(r);
                  (t[s] = o.Filename),
                    'Content' in o &&
                      ((a =
                        o.Content instanceof ArrayBuffer &&
                        0 < o.Content.byteLength),
                      (i = 'string' == typeof o.Content && '' !== o.Content),
                      a || i) &&
                      ((a = (function (e) {
                        var t,
                          A = e.Content,
                          e = e.RelativeFilename || e.Filename,
                          r = e.slice(e.lastIndexOf('.') + 1).toLowerCase();
                        switch (r) {
                          case 'bmp':
                            t = 'image/bmp';
                            break;
                          case 'jpg':
                          case 'jpeg':
                            t = 'image/jpeg';
                            break;
                          case 'png':
                            t = 'image/png';
                            break;
                          case 'tif':
                            t = 'image/tiff';
                            break;
                          default:
                            return void console.warn(
                              'FBXLoader: Image type "' +
                                r +
                                '" is not supported.',
                            );
                        }
                        return 'string' == typeof A
                          ? 'data:' + t + ';base64,' + A
                          : ((e = new Uint8Array(A)),
                            window.URL.createObjectURL(
                              new Blob([e], { type: t }),
                            ));
                      })(n[r])),
                      (A[o.Filename] = a));
                }
              }
              for (s in t) {
                var l = t[s];
                t[s] = void 0 !== A[l] ? A[l] : t[s].split('\\').pop();
              }
              return t;
            })(r),
            A = (function (e, t, A) {
              var r = new Map();
              if ('Material' in e.Objects) {
                var n,
                  i = e.Objects.Material;
                for (n in i) {
                  var a = (function (e, t, A, r) {
                    var n = t.id,
                      i = t.attrName,
                      a = t.ShadingModel;
                    'object' == typeof a && (a = a.value);
                    if (!r.has(n)) return null;
                    var o,
                      e = (function (A, e, r, t, n) {
                        var i = {};
                        e.BumpFactor && (i.bumpScale = e.BumpFactor.value);
                        e.Diffuse
                          ? (i.color = new THREE.Color().fromArray(
                              e.Diffuse.value,
                            ))
                          : e.DiffuseColor &&
                            'Color' === e.DiffuseColor.type &&
                            (i.color = new THREE.Color().fromArray(
                              e.DiffuseColor.value,
                            ));
                        e.DisplacementFactor &&
                          (i.displacementScale = e.DisplacementFactor.value);
                        e.ReflectionFactor &&
                          (i.reflectivity = e.ReflectionFactor.value);
                        e.Specular
                          ? (i.specular = new THREE.Color().fromArray(
                              e.Specular.value,
                            ))
                          : e.SpecularColor &&
                            'Color' === e.SpecularColor.type &&
                            (i.emissive = new THREE.Color().fromArray(
                              e.SpecularColor.value,
                            ));
                        e.Shininess && (i.shininess = e.Shininess.value);
                        e.Emissive
                          ? (i.emissive = new THREE.Color().fromArray(
                              e.Emissive.value,
                            ))
                          : e.EmissiveColor &&
                            'Color' === e.EmissiveColor.type &&
                            (i.emissive = new THREE.Color().fromArray(
                              e.EmissiveColor.value,
                            ));
                        e.EmissiveFactor &&
                          (i.emissiveIntensity = parseFloat(
                            e.EmissiveFactor.value,
                          ));
                        e.Opacity && (i.opacity = parseFloat(e.Opacity.value));
                        i.opacity < 1 && (i.transparent = !0);
                        return (
                          n.get(t).children.forEach(function (e) {
                            var t = e.relationship;
                            switch (t) {
                              case 'Bump':
                                i.bumpMap = r.get(e.ID);
                                break;
                              case 'DiffuseColor':
                                i.map = w(A, r, e.ID, n);
                                break;
                              case 'DisplacementColor':
                                i.displacementMap = w(A, r, e.ID, n);
                                break;
                              case 'EmissiveColor':
                                i.emissiveMap = w(A, r, e.ID, n);
                                break;
                              case 'NormalMap':
                                i.normalMap = w(A, r, e.ID, n);
                                break;
                              case 'ReflectionColor':
                                (i.envMap = w(A, r, e.ID, n)),
                                  (i.envMap.mapping =
                                    THREE.EquirectangularReflectionMapping);
                                break;
                              case 'SpecularColor':
                                i.specularMap = w(A, r, e.ID, n);
                                break;
                              case 'TransparentColor':
                                (i.alphaMap = w(A, r, e.ID, n)),
                                  (i.transparent = !0);
                                break;
                              default:
                                console.warn(
                                  'THREE.FBXLoader: %s map is not supported in three.js, skipping texture.',
                                  t,
                                );
                            }
                          }),
                          i
                        );
                      })(e, t, A, n, r);
                    switch (a.toLowerCase()) {
                      case 'phong':
                        o = new THREE.MeshPhongMaterial();
                        break;
                      case 'lambert':
                        o = new THREE.MeshLambertMaterial();
                        break;
                      default:
                        console.warn(
                          'THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',
                          a,
                        ),
                          (o = new THREE.MeshPhongMaterial({ color: 3342591 }));
                    }
                    return o.setValues(e), (o.name = i), o;
                  })(e, i[n], t, A);
                  null !== a && r.set(parseInt(n), a);
                }
              }
              return r;
            })(
              r,
              (function (e, t, A, r) {
                var n = new Map();
                if ('Texture' in e.Objects) {
                  var i,
                    a = e.Objects.Texture;
                  for (i in a) {
                    var o = (function (e, t, A, r) {
                      (t = (function (e, t, A, r) {
                        var n,
                          i = t.path,
                          r = r.get(e.id).children;
                        void 0 !== r &&
                          0 < r.length &&
                          void 0 !== A[r[0].ID] &&
                          ((0 !== (n = A[r[0].ID]).indexOf('blob:') &&
                            0 !== n.indexOf('data:')) ||
                            t.setPath(void 0));
                        e = t.load(n);
                        return t.setPath(i), e;
                      })(e, t, A, r)),
                        (t.ID = e.id),
                        (t.name = e.attrName),
                        (A = e.WrapModeU),
                        (r = e.WrapModeV),
                        (A = void 0 !== A ? A.value : 0),
                        (r = void 0 !== r ? r.value : 0);
                      (t.wrapS =
                        0 === A
                          ? THREE.RepeatWrapping
                          : THREE.ClampToEdgeWrapping),
                        (t.wrapT =
                          0 === r
                            ? THREE.RepeatWrapping
                            : THREE.ClampToEdgeWrapping),
                        'Scaling' in e &&
                          ((A = e.Scaling.value),
                          (t.repeat.x = A[0]),
                          (t.repeat.y = A[1]));
                      return t;
                    })(a[i], t, A, r);
                    n.set(parseInt(i), o);
                  }
                }
                return n;
              })(r, new THREE.TextureLoader(this.manager).setPath(t), e, i),
              i,
            ),
            t = (function (e, t) {
              var A = {};
              if ('Deformer' in e.Objects) {
                var r,
                  n,
                  i,
                  a = e.Objects.Deformer;
                for (r in a)
                  'Skin' === a[r].attrType &&
                    ((n = t.get(parseInt(r))),
                    ((i = (function (e, A) {
                      var r = [];
                      return (
                        e.children.forEach(function (e) {
                          var t = A[e.ID];
                          'Cluster' === t.attrType &&
                            ((e = {
                              ID: e.ID,
                              indices: [],
                              weights: [],
                              transform: new THREE.Matrix4().fromArray(
                                t.Transform.a,
                              ),
                              transformLink: new THREE.Matrix4().fromArray(
                                t.TransformLink.a,
                              ),
                              linkMode: t.Mode,
                            }),
                            'Indexes' in t &&
                              ((e.indices = t.Indexes.a),
                              (e.weights = t.Weights.a)),
                            r.push(e));
                        }),
                        { rawBones: r, bones: [] }
                      );
                    })(n, a)).ID = r),
                    1 < n.parents.length &&
                      console.warn(
                        'THREE.FBXLoader: skeleton attached to more than one geometry is not supported.',
                      ),
                    (i.geometryID = n.parents[0].ID),
                    (A[r] = i));
              }
              return A;
            })(r, i),
            e = (function (e, t, A) {
              var r = new Map();
              if ('Geometry' in e.Objects) {
                var n,
                  i = e.Objects.Geometry;
                for (n in i) {
                  var a = t.get(parseInt(n)),
                    a = (function (e, t, A, r) {
                      switch (A.attrType) {
                        case 'Mesh':
                          return (function (t, e, A, r) {
                            var n,
                              c,
                              u,
                              h,
                              i,
                              a,
                              o = e.parents.map(function (e) {
                                return t.Objects.Model[e.ID];
                              });
                            if (0 !== o.length) {
                              (e = e.children.reduce(function (e, t) {
                                return (e = void 0 !== r[t.ID] ? r[t.ID] : e);
                              }, null)),
                                (n = new THREE.Matrix4()),
                                'GeometricRotation' in (o = o[0]) &&
                                  (((l = o.GeometricRotation.value.map(
                                    THREE.Math.degToRad,
                                  ))[3] = 'ZYX'),
                                  n.makeRotationFromEuler(
                                    new THREE.Euler().fromArray(l),
                                  )),
                                'GeometricTranslation' in o &&
                                  n.setPosition(
                                    new THREE.Vector3().fromArray(
                                      o.GeometricTranslation.value,
                                    ),
                                  ),
                                'GeometricScaling' in o &&
                                  n.scale(
                                    new THREE.Vector3().fromArray(
                                      o.GeometricScaling.value,
                                    ),
                                  );
                              var s = A,
                                d = e,
                                l = n,
                                p = s.Vertices.a,
                                f = s.PolygonVertexIndex.a,
                                g = [],
                                m = [],
                                v = [],
                                B = [],
                                w = [],
                                y = [],
                                E = [];
                              if (
                                (s.LayerElementColor &&
                                  (c = (function (e) {
                                    var t = e.MappingInformationType,
                                      A = e.ReferenceInformationType,
                                      r = e.Colors.a,
                                      n = [];
                                    'IndexToDirect' === A &&
                                      (n = e.ColorIndex.a);
                                    return {
                                      dataSize: 4,
                                      buffer: r,
                                      indices: n,
                                      mappingType: t,
                                      referenceType: A,
                                    };
                                  })(s.LayerElementColor[0])),
                                s.LayerElementMaterial &&
                                  (u = (function (e) {
                                    var t = e.MappingInformationType,
                                      A = e.ReferenceInformationType;
                                    if ('NoMappingInformation' === t)
                                      return {
                                        dataSize: 1,
                                        buffer: [0],
                                        indices: [0],
                                        mappingType: 'AllSame',
                                        referenceType: A,
                                      };
                                    for (
                                      var r = e.Materials.a, n = [], i = 0;
                                      i < r.length;
                                      ++i
                                    )
                                      n.push(i);
                                    return {
                                      dataSize: 1,
                                      buffer: r,
                                      indices: n,
                                      mappingType: t,
                                      referenceType: A,
                                    };
                                  })(s.LayerElementMaterial[0])),
                                s.LayerElementNormal &&
                                  (h = (function (e) {
                                    var t = e.MappingInformationType,
                                      A = e.ReferenceInformationType,
                                      r = e.Normals.a,
                                      n = [];
                                    'IndexToDirect' === A &&
                                      ('NormalIndex' in e
                                        ? (n = e.NormalIndex.a)
                                        : 'NormalsIndex' in e &&
                                          (n = e.NormalsIndex.a));
                                    return {
                                      dataSize: 3,
                                      buffer: r,
                                      indices: n,
                                      mappingType: t,
                                      referenceType: A,
                                    };
                                  })(s.LayerElementNormal[0])),
                                s.LayerElementUV)
                              )
                                for (var x = [], b = 0; s.LayerElementUV[b]; )
                                  x.push(
                                    (function (e) {
                                      var t = e.MappingInformationType,
                                        A = e.ReferenceInformationType,
                                        r = e.UV.a,
                                        n = [];
                                      'IndexToDirect' === A &&
                                        (n = e.UVIndex.a);
                                      return {
                                        dataSize: 2,
                                        buffer: r,
                                        indices: n,
                                        mappingType: t,
                                        referenceType: A,
                                      };
                                    })(s.LayerElementUV[b]),
                                  ),
                                    b++;
                              var C = {},
                                F =
                                  (null !== d &&
                                    d.rawBones.forEach(function (A, r) {
                                      A.indices.forEach(function (e, t) {
                                        void 0 === C[e] && (C[e] = []),
                                          C[e].push({
                                            id: r,
                                            weight: A.weights[t],
                                          });
                                      });
                                    }),
                                  0),
                                T = 0,
                                _ = !1,
                                U = [],
                                M = [],
                                S = [],
                                Q = [],
                                L = [],
                                H = [],
                                I =
                                  (f.forEach(function (A, r) {
                                    var i,
                                      a,
                                      e,
                                      t,
                                      n = !1,
                                      o =
                                        (A < 0 &&
                                          ((A ^= -1), (f[r] = A), (n = !0)),
                                        []),
                                      s = [];
                                    if (
                                      (U.push(3 * A, 3 * A + 1, 3 * A + 2),
                                      c &&
                                        ((e = R(r, F, A, c)),
                                        S.push(e[0], e[1], e[2])),
                                      d)
                                    ) {
                                      for (
                                        void 0 !== C[A] &&
                                          C[A].forEach(function (e) {
                                            s.push(e.weight), o.push(e.id);
                                          }),
                                          4 < s.length &&
                                            (_ ||
                                              (console.warn(
                                                'THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights.',
                                              ),
                                              (_ = !0)),
                                            (i = [0, 0, 0, 0]),
                                            (a = [0, 0, 0, 0]),
                                            s.forEach(function (e, t) {
                                              var r = e,
                                                n = o[t];
                                              a.forEach(function (e, t, A) {
                                                e < r &&
                                                  ((A[t] = r),
                                                  (r = e),
                                                  (A = i[t]),
                                                  (i[t] = n),
                                                  (n = A));
                                              });
                                            }),
                                            (o = i),
                                            (s = a));
                                        s.length < 4;

                                      )
                                        s.push(0), o.push(0);
                                      for (var l = 0; l < 4; ++l)
                                        L.push(s[l]), H.push(o[l]);
                                    }
                                    if (
                                      (h &&
                                        ((e = R(r, F, A, h)),
                                        M.push(e[0], e[1], e[2])),
                                      u &&
                                        'AllSame' !== u.mappingType &&
                                        (t = R(r, F, A, u)[0]),
                                      x &&
                                        x.forEach(function (e, t) {
                                          e = R(r, F, A, e);
                                          void 0 === Q[t] && (Q[t] = []),
                                            Q[t].push(e[0]),
                                            Q[t].push(e[1]);
                                        }),
                                      T++,
                                      n)
                                    ) {
                                      for (l = 2; l < T; l++)
                                        g.push(p[U[0]]),
                                          g.push(p[U[1]]),
                                          g.push(p[U[2]]),
                                          g.push(p[U[3 * (l - 1)]]),
                                          g.push(p[U[3 * (l - 1) + 1]]),
                                          g.push(p[U[3 * (l - 1) + 2]]),
                                          g.push(p[U[3 * l]]),
                                          g.push(p[U[3 * l + 1]]),
                                          g.push(p[U[3 * l + 2]]),
                                          d &&
                                            (y.push(L[0]),
                                            y.push(L[1]),
                                            y.push(L[2]),
                                            y.push(L[3]),
                                            y.push(L[4 * (l - 1)]),
                                            y.push(L[4 * (l - 1) + 1]),
                                            y.push(L[4 * (l - 1) + 2]),
                                            y.push(L[4 * (l - 1) + 3]),
                                            y.push(L[4 * l]),
                                            y.push(L[4 * l + 1]),
                                            y.push(L[4 * l + 2]),
                                            y.push(L[4 * l + 3]),
                                            E.push(H[0]),
                                            E.push(H[1]),
                                            E.push(H[2]),
                                            E.push(H[3]),
                                            E.push(H[4 * (l - 1)]),
                                            E.push(H[4 * (l - 1) + 1]),
                                            E.push(H[4 * (l - 1) + 2]),
                                            E.push(H[4 * (l - 1) + 3]),
                                            E.push(H[4 * l]),
                                            E.push(H[4 * l + 1]),
                                            E.push(H[4 * l + 2]),
                                            E.push(H[4 * l + 3])),
                                          c &&
                                            (v.push(S[0]),
                                            v.push(S[1]),
                                            v.push(S[2]),
                                            v.push(S[3 * (l - 1)]),
                                            v.push(S[3 * (l - 1) + 1]),
                                            v.push(S[3 * (l - 1) + 2]),
                                            v.push(S[3 * l]),
                                            v.push(S[3 * l + 1]),
                                            v.push(S[3 * l + 2])),
                                          u &&
                                            'AllSame' !== u.mappingType &&
                                            (w.push(t), w.push(t), w.push(t)),
                                          h &&
                                            (m.push(M[0]),
                                            m.push(M[1]),
                                            m.push(M[2]),
                                            m.push(M[3 * (l - 1)]),
                                            m.push(M[3 * (l - 1) + 1]),
                                            m.push(M[3 * (l - 1) + 2]),
                                            m.push(M[3 * l]),
                                            m.push(M[3 * l + 1]),
                                            m.push(M[3 * l + 2])),
                                          x &&
                                            x.forEach(function (e, t) {
                                              void 0 === B[t] && (B[t] = []),
                                                B[t].push(Q[t][0]),
                                                B[t].push(Q[t][1]),
                                                B[t].push(Q[t][2 * (l - 1)]),
                                                B[t].push(
                                                  Q[t][2 * (l - 1) + 1],
                                                ),
                                                B[t].push(Q[t][2 * l]),
                                                B[t].push(Q[t][2 * l + 1]);
                                            });
                                      F++,
                                        (T = 0),
                                        (U = []),
                                        (M = []),
                                        (S = []),
                                        (Q = []),
                                        (L = []),
                                        (H = []);
                                    }
                                  }),
                                  new THREE.BufferGeometry()),
                                o =
                                  ((I.name = s.name),
                                  new THREE.Float32BufferAttribute(g, 3));
                              return (
                                l.applyToBufferAttribute(o),
                                I.addAttribute('position', o),
                                0 < v.length &&
                                  I.addAttribute(
                                    'color',
                                    new THREE.Float32BufferAttribute(v, 3),
                                  ),
                                d &&
                                  (I.addAttribute(
                                    'skinIndex',
                                    new THREE.Float32BufferAttribute(E, 4),
                                  ),
                                  I.addAttribute(
                                    'skinWeight',
                                    new THREE.Float32BufferAttribute(y, 4),
                                  ),
                                  (I.FBX_Deformer = d)),
                                0 < m.length &&
                                  ((o = new THREE.Float32BufferAttribute(m, 3)),
                                  new THREE.Matrix3()
                                    .getNormalMatrix(l)
                                    .applyToBufferAttribute(o),
                                  I.addAttribute('normal', o)),
                                B.forEach(function (e, t) {
                                  var A = 'uv' + (t + 1).toString();
                                  I.addAttribute(
                                    (A = 0 === t ? 'uv' : A),
                                    new THREE.Float32BufferAttribute(B[t], 2),
                                  );
                                }),
                                u &&
                                  'AllSame' !== u.mappingType &&
                                  ((i = w[0]),
                                  (a = 0),
                                  w.forEach(function (e, t) {
                                    e !== i &&
                                      (I.addGroup(a, t - a, i),
                                      (i = e),
                                      (a = t));
                                  }),
                                  0 < I.groups.length &&
                                    ((l = I.groups[I.groups.length - 1]),
                                    (o = l.start + l.count) !== w.length) &&
                                    I.addGroup(o, w.length - o, i),
                                  0 === I.groups.length) &&
                                  I.addGroup(0, w.length, w[0]),
                                I
                              );
                            }
                          })(e, t, A, r);
                        case 'NurbsCurve':
                          return (function (e) {
                            if (void 0 === THREE.NURBSCurve)
                              return (
                                console.error(
                                  'THREE.FBXLoader: The loader relies on THREE.NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry.',
                                ),
                                new THREE.BufferGeometry()
                              );
                            var t = parseInt(e.Order);
                            if (isNaN(t))
                              return (
                                console.error(
                                  'THREE.FBXLoader: Invalid Order %s given for geometry ID: %s',
                                  e.Order,
                                  e.id,
                                ),
                                new THREE.BufferGeometry()
                              );
                            for (
                              var A,
                                r,
                                n = t - 1,
                                t = e.KnotVector.a,
                                i = [],
                                a = e.Points.a,
                                o = 0,
                                s = a.length;
                              o < s;
                              o += 4
                            )
                              i.push(new THREE.Vector4().fromArray(a, o));
                            if ('Closed' === e.Form) i.push(i[0]);
                            else if ('Periodic' === e.Form) {
                              (A = n), (r = t.length - 1 - A);
                              for (o = 0; o < n; ++o) i.push(i[o]);
                            }
                            var e = new THREE.NURBSCurve(
                                n,
                                t,
                                i,
                                A,
                                r,
                              ).getPoints(7 * i.length),
                              l = new Float32Array(3 * e.length),
                              t =
                                (e.forEach(function (e, t) {
                                  e.toArray(l, 3 * t);
                                }),
                                new THREE.BufferGeometry());
                            return (
                              t.addAttribute(
                                'position',
                                new THREE.BufferAttribute(l, 3),
                              ),
                              t
                            );
                          })(A);
                      }
                    })(e, a, i[n], A);
                  r.set(parseInt(n), a);
                }
              }
              return r;
            })(r, i, t),
            e =
              ((a = r),
              (o = i),
              (r = t),
              (i = e),
              (t = A),
              (s = new THREE.Group()),
              (l = (function (e, t, A, r, n) {
                var i,
                  a = new Map(),
                  o = e.Objects.Model;
                for (i in o) {
                  var s = parseInt(i),
                    l = o[i],
                    c = n.get(s),
                    u = (function (e, t, i, a) {
                      var o = null;
                      return (
                        e.parents.forEach(function (r) {
                          for (var e in t) {
                            var n = t[e];
                            n.rawBones.forEach(function (e, t) {
                              var A;
                              e.ID === r.ID &&
                                ((A = o),
                                (o = new THREE.Bone()).matrixWorld.copy(
                                  e.transformLink,
                                ),
                                (o.name =
                                  THREE.PropertyBinding.sanitizeNodeName(a)),
                                (o.ID = i),
                                (n.bones[t] = o),
                                null !== A) &&
                                o.add(A);
                            });
                          }
                        }),
                        o
                      );
                    })(c, t, s, l.attrName);
                  if (!u) {
                    switch (l.attrType) {
                      case 'Camera':
                        u = (function (t, e) {
                          var A, r;
                          if (
                            (e.children.forEach(function (e) {
                              e = t.Objects.NodeAttribute[e.ID];
                              void 0 !== e && (r = e);
                            }),
                            void 0 === r)
                          )
                            A = new THREE.Object3D();
                          else {
                            var n = 0,
                              i =
                                (void 0 !== r.CameraProjectionType &&
                                  1 === r.CameraProjectionType.value &&
                                  (n = 1),
                                1),
                              a =
                                (void 0 !== r.NearPlane &&
                                  (i = r.NearPlane.value / 1e3),
                                1e3),
                              o =
                                (void 0 !== r.FarPlane &&
                                  (a = r.FarPlane.value / 1e3),
                                window.innerWidth),
                              s = window.innerHeight,
                              l =
                                (void 0 !== r.AspectWidth &&
                                  void 0 !== r.AspectHeight &&
                                  ((o = r.AspectWidth.value),
                                  (s = r.AspectHeight.value)),
                                o / s),
                              c = 45,
                              u =
                                (void 0 !== r.FieldOfView &&
                                  (c = r.FieldOfView.value),
                                r.FocalLength ? r.FocalLength.value : null);
                            switch (n) {
                              case 0:
                                (A = new THREE.PerspectiveCamera(c, l, i, a)),
                                  null !== u && A.setFocalLength(u);
                                break;
                              case 1:
                                A = new THREE.OrthographicCamera(
                                  -o / 2,
                                  o / 2,
                                  s / 2,
                                  -s / 2,
                                  i,
                                  a,
                                );
                                break;
                              default:
                                console.warn(
                                  'THREE.FBXLoader: Unknown camera type ' +
                                    n +
                                    '.',
                                ),
                                  (A = new THREE.Object3D());
                            }
                          }
                          return A;
                        })(e, c);
                        break;
                      case 'Light':
                        u = (function (t, e) {
                          var A, r;
                          if (
                            (e.children.forEach(function (e) {
                              e = t.Objects.NodeAttribute[e.ID];
                              void 0 !== e && (r = e);
                            }),
                            void 0 === r)
                          )
                            A = new THREE.Object3D();
                          else {
                            e = void 0 === r.LightType ? 0 : r.LightType.value;
                            var n = 16777215,
                              i =
                                (void 0 !== r.Color &&
                                  (n = new THREE.Color().fromArray(
                                    r.Color.value,
                                  )),
                                void 0 === r.Intensity
                                  ? 1
                                  : r.Intensity.value / 100),
                              a =
                                (void 0 !== r.CastLightOnObject &&
                                  0 === r.CastLightOnObject.value &&
                                  (i = 0),
                                0);
                            void 0 !== r.FarAttenuationEnd &&
                              (a =
                                void 0 !== r.EnableFarAttenuation &&
                                0 === r.EnableFarAttenuation.value
                                  ? 0
                                  : r.FarAttenuationEnd.value);
                            switch (e) {
                              case 0:
                                A = new THREE.PointLight(n, i, a, 1);
                                break;
                              case 1:
                                A = new THREE.DirectionalLight(n, i);
                                break;
                              case 2:
                                var o = Math.PI / 3,
                                  s =
                                    (void 0 !== r.InnerAngle &&
                                      (o = THREE.Math.degToRad(
                                        r.InnerAngle.value,
                                      )),
                                    0);
                                void 0 !== r.OuterAngle &&
                                  ((s = THREE.Math.degToRad(
                                    r.OuterAngle.value,
                                  )),
                                  (s = Math.max(s, 1))),
                                  (A = new THREE.SpotLight(n, i, a, o, s, 1));
                                break;
                              default:
                                console.warn(
                                  'THREE.FBXLoader: Unknown light type ' +
                                    r.LightType.value +
                                    ', defaulting to a THREE.PointLight.',
                                ),
                                  (A = new THREE.PointLight(n, i));
                            }
                            void 0 !== r.CastShadows &&
                              1 === r.CastShadows.value &&
                              (A.castShadow = !0);
                          }
                          return A;
                        })(e, c);
                        break;
                      case 'Mesh':
                        u = (function (e, t, A) {
                          var r = null,
                            n = null,
                            i = [];
                          e.children.forEach(function (e) {
                            t.has(e.ID) && (r = t.get(e.ID)),
                              A.has(e.ID) && i.push(A.get(e.ID));
                          }),
                            1 < i.length
                              ? (n = i)
                              : 0 < i.length
                              ? (n = i[0])
                              : ((n = new THREE.MeshPhongMaterial({
                                  color: 13421772,
                                })),
                                i.push(n));
                          'color' in r.attributes &&
                            i.forEach(function (e) {
                              e.vertexColors = THREE.VertexColors;
                            });
                          e = new (
                            r.FBX_Deformer
                              ? (i.forEach(function (e) {
                                  e.skinning = !0;
                                }),
                                THREE.SkinnedMesh)
                              : THREE.Mesh
                          )(r, n);
                          return e;
                        })(c, A, r);
                        break;
                      case 'NurbsCurve':
                        u = (function (e, A) {
                          var e = e.children.reduce(function (e, t) {
                              return (e = A.has(t.ID) ? A.get(t.ID) : e);
                            }, null),
                            t = new THREE.LineBasicMaterial({
                              color: 3342591,
                              linewidth: 1,
                            });
                          return new THREE.ThinLine(e, t);
                        })(c, A);
                        break;
                      default:
                        u = new THREE.Group();
                    }
                    (u.name = THREE.PropertyBinding.sanitizeNodeName(
                      l.attrName,
                    )),
                      (u.ID = s);
                  }
                  !(function (e, t) {
                    'RotationOrder' in t &&
                      (0 < (A = parseInt(t.RotationOrder.value, 10)) && A < 6
                        ? console.warn(
                            'THREE.FBXLoader: unsupported Euler Order: %s. Currently only XYZ order is supported. Animations and rotations may be incorrect.',
                            [
                              'XYZ',
                              'XZY',
                              'YZX',
                              'ZXY',
                              'YXZ',
                              'ZYX',
                              'SphericXYZ',
                            ][A],
                          )
                        : 6 === A &&
                          console.warn(
                            'THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect.',
                          ));
                    'Lcl_Translation' in t &&
                      e.position.fromArray(t.Lcl_Translation.value);
                    'Lcl_Rotation' in t &&
                      ((A = t.Lcl_Rotation.value.map(THREE.Math.degToRad)).push(
                        'ZYX',
                      ),
                      e.quaternion.setFromEuler(
                        new THREE.Euler().fromArray(A),
                      ));
                    'Lcl_Scaling' in t &&
                      e.scale.fromArray(t.Lcl_Scaling.value);
                    {
                      var A;
                      'PreRotation' in t &&
                        (((A = t.PreRotation.value.map(
                          THREE.Math.degToRad,
                        ))[3] = 'ZYX'),
                        (t = new THREE.Euler().fromArray(A)),
                        (t = new THREE.Quaternion().setFromEuler(t)),
                        e.quaternion.premultiply(t));
                    }
                  })(u, l),
                    a.set(s, u);
                }
                return a;
              })(a, r, i, t, o)),
              (c = a.Objects.Model),
              l.forEach(function (t) {
                var A,
                  r,
                  e,
                  n,
                  i = c[t.ID];
                (A = a),
                  (r = t),
                  (e = o),
                  (n = s),
                  'LookAtProperty' in i &&
                    e.get(r.ID).children.forEach(function (e) {
                      'LookAtProperty' === e.relationship &&
                        'Lcl_Translation' in (e = A.Objects.Model[e.ID]) &&
                        ((e = e.Lcl_Translation.value),
                        void 0 !== r.target
                          ? (r.target.position.fromArray(e), n.add(r.target))
                          : r.lookAt(new THREE.Vector3().fromArray(e)));
                    }),
                  o.get(t.ID).parents.forEach(function (e) {
                    e = l.get(e.ID);
                    void 0 !== e && e.add(t);
                  }),
                  null === t.parent && s.add(t);
              }),
              a),
            u = r,
            h = i,
            d = l,
            p = o,
            f = (function (e) {
              var t = {};
              if ('Pose' in e.Objects) {
                var A,
                  r,
                  n = e.Objects.Pose;
                for (A in n)
                  'BindPose' === n[A].attrType &&
                    ((r = n[A].PoseNode),
                    Array.isArray(r)
                      ? r.forEach(function (e) {
                          t[e.Node] = new THREE.Matrix4().fromArray(e.Matrix.a);
                        })
                      : (t[r.Node] = new THREE.Matrix4().fromArray(
                          r.Matrix.a,
                        )));
              }
              return t;
            })(e);
          for (n in u) {
            var g = u[n];
            p.get(parseInt(g.ID)).parents.forEach(function (e) {
              h.has(e.ID) &&
                ((e = e.ID),
                p.get(e).parents.forEach(function (e) {
                  d.has(e.ID) &&
                    d.get(e.ID).bind(new THREE.Skeleton(g.bones), f[e.ID]);
                }));
            });
          }
          var A = a,
            t = o,
            m = s,
            v =
              ((m.animations = []),
              (function (e, t) {
                var A;
                if (void 0 !== e.Objects.AnimationCurve) {
                  A = (function (e) {
                    var t,
                      A = e.Objects.AnimationCurveNode,
                      r = new Map();
                    for (t in A) {
                      var n = A[t];
                      null !== n.attrName.match(/S|R|T/) &&
                        ((n = { id: n.id, attr: n.attrName, curves: {} }),
                        r.set(n.id, n));
                    }
                    return r;
                  })(e);
                  var r,
                    n = t,
                    i = A,
                    a = e.Objects.AnimationCurve;
                  for (r in a) {
                    var o = {
                        id: a[r].id,
                        times: a[r].KeyTime.a.map(T),
                        values: a[r].KeyValueFloat.a,
                      },
                      s = n.get(o.id);
                    if (void 0 !== s) {
                      var l = s.parents[0].ID,
                        s = s.parents[0].relationship,
                        c = '';
                      if (s.match(/X/)) c = 'x';
                      else if (s.match(/Y/)) c = 'y';
                      else {
                        if (!s.match(/Z/)) continue;
                        c = 'z';
                      }
                      i.get(l).curves[c] = o;
                    }
                  }
                  A = (function (i, a, o) {
                    var e,
                      t = i.Objects.AnimationLayer,
                      A = new Map();
                    for (e in t) {
                      var s = [],
                        r = a.get(parseInt(e));
                      void 0 !== r &&
                        (r.children.forEach(function (e, t) {
                          var A, r, n;
                          !o.has(e.ID) ||
                            (void 0 === (A = o.get(e.ID)).curves.x &&
                              void 0 === A.curves.y &&
                              void 0 === A.curves.z) ||
                            (void 0 === s[t] &&
                              (a.get(e.ID).parents.forEach(function (e) {
                                void 0 !== e.relationship && (r = e.ID);
                              }),
                              (e = i.Objects.Model[r.toString()]),
                              (n = {
                                modelName:
                                  THREE.PropertyBinding.sanitizeNodeName(
                                    e.attrName,
                                  ),
                                initialPosition: [0, 0, 0],
                                initialRotation: [0, 0, 0],
                                initialScale: [1, 1, 1],
                              }),
                              'Lcl_Translation' in e &&
                                (n.initialPosition = e.Lcl_Translation.value),
                              'Lcl_Rotation' in e &&
                                (n.initialRotation = e.Lcl_Rotation.value),
                              'Lcl_Scaling' in e &&
                                (n.initialScale = e.Lcl_Scaling.value),
                              'PreRotation' in e &&
                                (n.preRotations = e.PreRotation.value),
                              (s[t] = n)),
                            (s[t][A.attr] = A));
                        }),
                        A.set(parseInt(e), s));
                    }
                    return A;
                  })(e, t, A);
                  var u,
                    h = t,
                    d = A,
                    p = e.Objects.AnimationStack,
                    f = {};
                  for (u in p) {
                    var g = h.get(parseInt(u)).children,
                      g =
                        (1 < g.length &&
                          console.warn(
                            'THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.',
                          ),
                        d.get(g[0].ID));
                    f[u] = { name: p[u].attrName, layer: g };
                  }
                  return f;
                }
              })(A, t));
          if (void 0 !== v)
            for (var B in v) {
              B = (function (e) {
                var t = [];
                return (
                  e.layer.forEach(function (e) {
                    t = t.concat(
                      (function (e) {
                        var t = [];
                        void 0 !== e.T &&
                          0 < Object.keys(e.T.curves).length &&
                          void 0 !==
                            (A = y(
                              e.modelName,
                              e.T.curves,
                              e.initialPosition,
                              'position',
                            )) &&
                          t.push(A);
                        void 0 !== e.R &&
                          0 < Object.keys(e.R.curves).length &&
                          void 0 !==
                            (A = (function (e, t, A, r) {
                              void 0 !== t.x &&
                                (t.x.values = t.x.values.map(
                                  THREE.Math.degToRad,
                                ));
                              void 0 !== t.y &&
                                (t.y.values = t.y.values.map(
                                  THREE.Math.degToRad,
                                ));
                              void 0 !== t.z &&
                                (t.z.values = t.z.values.map(
                                  THREE.Math.degToRad,
                                ));
                              var n = x(t),
                                i = E(n, t, A);
                              void 0 !== r &&
                                ((r = r.map(THREE.Math.degToRad)).push('ZYX'),
                                (r = new THREE.Euler().fromArray(r)),
                                (r = new THREE.Quaternion().setFromEuler(r)));
                              for (
                                var a = new THREE.Quaternion(),
                                  o = new THREE.Euler(),
                                  s = [],
                                  l = 0;
                                l < i.length;
                                l += 3
                              )
                                o.set(i[l], i[l + 1], i[l + 2], 'ZYX'),
                                  a.setFromEuler(o),
                                  void 0 !== r && a.premultiply(r),
                                  a.toArray(s, (l / 3) * 4);
                              return new THREE.QuaternionKeyframeTrack(
                                e + '.quaternion',
                                n,
                                s,
                              );
                            })(
                              e.modelName,
                              e.R.curves,
                              e.initialRotation,
                              e.preRotations,
                            )) &&
                          t.push(A);
                        {
                          var A;
                          void 0 !== e.S &&
                            0 < Object.keys(e.S.curves).length &&
                            void 0 !==
                              (A = y(
                                e.modelName,
                                e.S.curves,
                                e.initialScale,
                                'scale',
                              )) &&
                            t.push(A);
                        }
                        return t;
                      })(e),
                    );
                  }),
                  new THREE.AnimationClip(e.name, -1, t)
                );
              })(v[B]);
              m.animations.push(B);
            }
          (i = a), (e = s);
          return (
            'GlobalSettings' in i &&
              'AmbientColor' in i.GlobalSettings &&
              ((i = i.GlobalSettings.AmbientColor.value),
              (A = i[0]),
              (t = i[1]),
              (i = i[2]),
              (0 === A && 0 === t && 0 === i) ||
                ((A = new THREE.Color(A, t, i)),
                e.add(new THREE.AmbientLight(A, 1)))),
            s
          );
        },
      });
    var a = [],
      n = {
        ByPolygonVertex: {
          Direct: function (e, t, A, r) {
            var n = e * r.dataSize,
              e = e * r.dataSize + r.dataSize;
            return l(a, r.buffer, n, e);
          },
          IndexToDirect: function (e, t, A, r) {
            var e = r.indices[e],
              n = e * r.dataSize,
              e = e * r.dataSize + r.dataSize;
            return l(a, r.buffer, n, e);
          },
        },
        ByPolygon: {
          Direct: function (e, t, A, r) {
            var n = t * r.dataSize,
              t = t * r.dataSize + r.dataSize;
            return l(a, r.buffer, n, t);
          },
          IndexToDirect: function (e, t, A, r) {
            var t = r.indices[t],
              n = t * r.dataSize,
              t = t * r.dataSize + r.dataSize;
            return l(a, r.buffer, n, t);
          },
        },
        ByVertice: {
          Direct: function (e, t, A, r) {
            var n = A * r.dataSize,
              A = A * r.dataSize + r.dataSize;
            return l(a, r.buffer, n, A);
          },
        },
        AllSame: {
          IndexToDirect: function (e, t, A, r) {
            var n = r.indices[0] * r.dataSize,
              i = r.indices[0] * r.dataSize + r.dataSize;
            return l(a, r.buffer, n, i);
          },
        },
      };
    function R(e, t, A, r) {
      return n[r.mappingType][r.referenceType](e, t, A, r);
    }
    function y(e, t, A, r) {
      var n = x(t),
        t = E(n, t, A);
      return new THREE.VectorKeyframeTrack(e + '.' + r, n, t);
    }
    function E(e, t, A) {
      var r = A,
        n = [],
        i = -1,
        a = -1,
        o = -1;
      return (
        e.forEach(function (e) {
          t.x && (i = t.x.times.indexOf(e)),
            t.y && (a = t.y.times.indexOf(e)),
            t.z && (o = t.z.times.indexOf(e)),
            -1 !== i
              ? ((e = t.x.values[i]), n.push(e), (r[0] = e))
              : n.push(r[0]),
            -1 !== a
              ? ((e = t.y.values[a]), n.push(e), (r[1] = e))
              : n.push(r[1]),
            -1 !== o
              ? ((e = t.z.values[o]), n.push(e), (r[2] = e))
              : n.push(r[2]);
        }),
        n
      );
    }
    function x(e) {
      var t = [];
      return (
        void 0 !== e.x && (t = t.concat(e.x.times)),
        void 0 !== e.y && (t = t.concat(e.y.times)),
        (t = (t = void 0 !== e.z ? t.concat(e.z.times) : t)
          .sort(function (e, t) {
            return e - t;
          })
          .filter(function (e, t, A) {
            return A.indexOf(e) == t;
          }))
      );
    }
    function b() {}
    function C() {}
    function o(e, t) {
      (this.dv = new DataView(e)),
        (this.offset = 0),
        (this.littleEndian = void 0 === t || t);
    }
    function s() {}
    function F(e) {
      e = e.match(/FBXVersion: (\d+)/);
      if (e) return parseInt(e[1]);
      throw new Error(
        'THREE.FBXLoader: Cannot find the version number for the file given.',
      );
    }
    function T(e) {
      return e / 46186158e3;
    }
    function u(e) {
      return e.split(',').map(function (e) {
        return parseFloat(e);
      });
    }
    function _(e, t, A) {
      return (
        void 0 === t && (t = 0),
        void 0 === A && (A = e.byteLength),
        THREE.LoaderUtils.decodeText(new Uint8Array(e, t, A))
      );
    }
    function l(e, t, A, r) {
      for (var n = A, i = 0; n < r; n++, i++) e[i] = t[n];
      return e;
    }
    Object.assign(b.prototype, {
      getPrevNode: function () {
        return this.nodeStack[this.currentIndent - 2];
      },
      getCurrentNode: function () {
        return this.nodeStack[this.currentIndent - 1];
      },
      getCurrentProp: function () {
        return this.currentProp;
      },
      pushStack: function (e) {
        this.nodeStack.push(e), (this.currentIndent += 1);
      },
      popStack: function () {
        this.nodeStack.pop(), --this.currentIndent;
      },
      setCurrentProp: function (e, t) {
        (this.currentProp = e), (this.currentPropName = t);
      },
      parse: function (e) {
        (this.currentIndent = 0),
          (this.allNodes = new s()),
          (this.nodeStack = []),
          (this.currentProp = []),
          (this.currentPropName = '');
        var i = this,
          a = e.split('\n');
        return (
          a.forEach(function (e, t) {
            var A,
              r = e.match(/^[\s\t]*;/),
              n = e.match(/^[\s\t]*$/);
            r ||
              n ||
              ((r = e.match('^\\t{' + i.currentIndent + '}(\\w+):(.*){', '')),
              (n = e.match(
                '^\\t{' + i.currentIndent + '}(\\w+):[\\s\\t\\r\\n](.*)',
              )),
              (A = e.match('^\\t{' + (i.currentIndent - 1) + '}}')),
              r
                ? i.parseNodeBegin(e, r)
                : n
                ? i.parseNodeProperty(e, n, a[++t])
                : A
                ? i.popStack()
                : e.match(/^[^\s\t}]/) && i.parseNodePropertyContinued(e));
          }),
          this.allNodes
        );
      },
      parseNodeBegin: function (e, t) {
        var A = t[1].trim().replace(/^"/, '').replace(/"$/, ''),
          t = t[2].split(',').map(function (e) {
            return e.trim().replace(/^"/, '').replace(/"$/, '');
          }),
          r = { name: A },
          t = this.parseNodeAttr(t),
          n = this.getCurrentNode();
        0 === this.currentIndent
          ? this.allNodes.add(A, r)
          : A in n
          ? ('PoseNode' === A
              ? n.PoseNode.push(r)
              : void 0 !== n[A].id && ((n[A] = {}), (n[A][n[A].id] = n[A])),
            '' !== t.id && (n[A][t.id] = r))
          : 'number' == typeof t.id
          ? ((n[A] = {}), (n[A][t.id] = r))
          : 'Properties70' !== A && (n[A] = 'PoseNode' === A ? [r] : r),
          'number' == typeof t.id && (r.id = t.id),
          '' !== t.name && (r.attrName = t.name),
          '' !== t.type && (r.attrType = t.type),
          this.pushStack(r);
      },
      parseNodeAttr: function (e) {
        var t = e[0],
          A =
            ('' !== e[0] && ((t = parseInt(e[0])), isNaN(t)) && (t = e[0]), ''),
          r = '';
        return (
          1 < e.length && ((A = e[1].replace(/^(\w+)::/, '')), (r = e[2])),
          { id: t, name: A, type: r }
        );
      },
      parseNodeProperty: function (e, t, A) {
        var r = t[1].replace(/^"/, '').replace(/"$/, '').trim(),
          t = t[2].replace(/^"/, '').replace(/"$/, '').trim(),
          A =
            ('Content' === r &&
              ',' === t &&
              (t = A.replace(/"/g, '').replace(/,$/, '').trim()),
            this.getCurrentNode());
        if ('Properties70' === A.name) this.parseNodeSpecialProperty(e, r, t);
        else {
          if ('C' === r) {
            for (
              var e = t.split(',').slice(1),
                n = parseInt(e[0]),
                e = parseInt(e[1]),
                i = (i = t.split(',').slice(3)).map(function (e) {
                  return e.trim().replace(/^"/, '');
                }),
                r = 'connections',
                a = (t = [n, e]),
                o = i,
                s = 0,
                l = a.length,
                c = o.length;
              s < c;
              s++, l++
            )
              a[l] = o[s];
            void 0 === A[r] && (A[r] = []);
          }
          'Node' === r && (A.id = t),
            r in A && Array.isArray(A[r])
              ? A[r].push(t)
              : 'a' !== r
              ? (A[r] = t)
              : (A.a = t),
            this.setCurrentProp(A, r),
            'a' === r && ',' !== t.slice(-1) && (A.a = u(t));
        }
      },
      parseNodePropertyContinued: function (e) {
        var t = this.getCurrentNode();
        (t.a += e), ',' !== e.slice(-1) && (t.a = u(t.a));
      },
      parseNodeSpecialProperty: function (e, t, A) {
        var A = A.split('",').map(function (e) {
            return e.trim().replace(/^\"/, '').replace(/\s/, '_');
          }),
          r = A[0],
          n = A[1],
          i = A[2],
          a = A[3],
          o = A[4];
        switch (n) {
          case 'int':
          case 'enum':
          case 'bool':
          case 'ULongLong':
          case 'double':
          case 'Number':
          case 'FieldOfView':
            o = parseFloat(o);
            break;
          case 'Color':
          case 'ColorRGB':
          case 'Vector3D':
          case 'Lcl_Translation':
          case 'Lcl_Rotation':
          case 'Lcl_Scaling':
            o = u(o);
        }
        (this.getPrevNode()[r] = { type: n, type2: i, flag: a, value: o }),
          this.setCurrentProp(this.getPrevNode(), r);
      },
    }),
      Object.assign(C.prototype, {
        parse: function (e) {
          for (
            var t = new o(e),
              A = (t.skip(23), t.getUint32()),
              r =
                (console.log('THREE.FBXLoader: FBX binary version: ' + A),
                new s());
            !this.endOfContent(t);

          ) {
            var n = this.parseNode(t, A);
            null !== n && r.add(n.name, n);
          }
          return r;
        },
        endOfContent: function (e) {
          return e.size() % 16 == 0
            ? ((e.getOffset() + 160 + 16) & -16) >= e.size()
            : e.getOffset() + 160 + 16 >= e.size();
        },
        parseNode: function (e, t) {
          var A = {},
            r = 7500 <= t ? e.getUint64() : e.getUint32(),
            n = 7500 <= t ? e.getUint64() : e.getUint32(),
            i = (7500 <= t ? e.getUint64() : e.getUint32(), e.getUint8()),
            a = e.getString(i);
          if (0 === r) return null;
          for (var o = [], s = 0; s < n; s++) o.push(this.parseProperty(e));
          var i = 0 < o.length ? o[0] : '',
            l = 1 < o.length ? o[1] : '',
            c = 2 < o.length ? o[2] : '';
          for (
            A.singleProperty = 1 === n && e.getOffset() === r;
            r > e.getOffset();

          ) {
            var u = this.parseNode(e, t);
            null !== u && this.parseSubNode(a, A, u);
          }
          return (
            (A.propertyList = o),
            'number' == typeof i && (A.id = i),
            '' !== l && (A.attrName = l),
            '' !== c && (A.attrType = c),
            '' !== a && (A.name = a),
            A
          );
        },
        parseSubNode: function (e, t, A) {
          var r, n, i, a, o;
          !0 === A.singleProperty
            ? ((n = A.propertyList[0]),
              Array.isArray(n) ? ((t[A.name] = A).a = n) : (t[A.name] = n))
            : 'Connections' === e && 'C' === A.name
            ? ((r = []),
              A.propertyList.forEach(function (e, t) {
                0 !== t && r.push(e);
              }),
              void 0 === t.connections && (t.connections = []),
              t.connections.push(r))
            : 'Properties70' === A.name
            ? Object.keys(A).forEach(function (e) {
                t[e] = A[e];
              })
            : 'Properties70' === e && 'P' === A.name
            ? ((n = A.propertyList[0]),
              (e = A.propertyList[1]),
              (i = A.propertyList[2]),
              (a = A.propertyList[3]),
              0 === n.indexOf('Lcl ') && (n = n.replace('Lcl ', 'Lcl_')),
              (o =
                'Color' ===
                  (e =
                    0 === e.indexOf('Lcl ') ? e.replace('Lcl ', 'Lcl_') : e) ||
                'ColorRGB' === e ||
                'Vector' === e ||
                'Vector3D' === e ||
                0 === e.indexOf('Lcl_')
                  ? [A.propertyList[4], A.propertyList[5], A.propertyList[6]]
                  : A.propertyList[4]),
              (t[n] = { type: e, type2: i, flag: a, value: o }))
            : void 0 === t[A.name]
            ? 'number' == typeof A.id
              ? ((t[A.name] = {}), (t[A.name][A.id] = A))
              : (t[A.name] = A)
            : 'PoseNode' === A.name
            ? (Array.isArray(t[A.name]) || (t[A.name] = [t[A.name]]),
              t[A.name].push(A))
            : void 0 === t[A.name][A.id] && (t[A.name][A.id] = A);
        },
        parseProperty: function (e) {
          var t = e.getString(1);
          switch (t) {
            case 'C':
              return e.getBoolean();
            case 'D':
              return e.getFloat64();
            case 'F':
              return e.getFloat32();
            case 'I':
              return e.getInt32();
            case 'L':
              return e.getInt64();
            case 'R':
              var A = e.getUint32();
              return e.getArrayBuffer(A);
            case 'S':
              A = e.getUint32();
              return e.getString(A);
            case 'Y':
              return e.getInt16();
            case 'b':
            case 'c':
            case 'd':
            case 'f':
            case 'i':
            case 'l':
              var r = e.getUint32(),
                A = e.getUint32(),
                n = e.getUint32();
              if (0 === A)
                switch (t) {
                  case 'b':
                  case 'c':
                    return e.getBooleanArray(r);
                  case 'd':
                    return e.getFloat64Array(r);
                  case 'f':
                    return e.getFloat32Array(r);
                  case 'i':
                    return e.getInt32Array(r);
                  case 'l':
                    return e.getInt64Array(r);
                }
              void 0 === window.Zlib &&
                console.error(
                  'THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js',
                );
              var i = new o(
                new Zlib.Inflate(
                  new Uint8Array(e.getArrayBuffer(n)),
                ).decompress().buffer,
              );
              switch (t) {
                case 'b':
                case 'c':
                  return i.getBooleanArray(r);
                case 'd':
                  return i.getFloat64Array(r);
                case 'f':
                  return i.getFloat32Array(r);
                case 'i':
                  return i.getInt32Array(r);
                case 'l':
                  return i.getInt64Array(r);
              }
            default:
              throw new Error('THREE.FBXLoader: Unknown property type ' + t);
          }
        },
      }),
      Object.assign(o.prototype, {
        getOffset: function () {
          return this.offset;
        },
        size: function () {
          return this.dv.buffer.byteLength;
        },
        skip: function (e) {
          this.offset += e;
        },
        getBoolean: function () {
          return 1 == (1 & this.getUint8());
        },
        getBooleanArray: function (e) {
          for (var t = [], A = 0; A < e; A++) t.push(this.getBoolean());
          return t;
        },
        getUint8: function () {
          var e = this.dv.getUint8(this.offset);
          return (this.offset += 1), e;
        },
        getInt16: function () {
          var e = this.dv.getInt16(this.offset, this.littleEndian);
          return (this.offset += 2), e;
        },
        getInt32: function () {
          var e = this.dv.getInt32(this.offset, this.littleEndian);
          return (this.offset += 4), e;
        },
        getInt32Array: function (e) {
          for (var t = [], A = 0; A < e; A++) t.push(this.getInt32());
          return t;
        },
        getUint32: function () {
          var e = this.dv.getUint32(this.offset, this.littleEndian);
          return (this.offset += 4), e;
        },
        getInt64: function () {
          var e, t;
          return (
            this.littleEndian
              ? ((e = this.getUint32()), (t = this.getUint32()))
              : ((t = this.getUint32()), (e = this.getUint32())),
            2147483648 & t
              ? ((t = 4294967295 & ~t),
                -(
                  4294967296 *
                    (t =
                      4294967295 === (e = 4294967295 & ~e)
                        ? (t + 1) & 4294967295
                        : t) +
                  (e = (e + 1) & 4294967295)
                ))
              : 4294967296 * t + e
          );
        },
        getInt64Array: function (e) {
          for (var t = [], A = 0; A < e; A++) t.push(this.getInt64());
          return t;
        },
        getUint64: function () {
          var e, t;
          return (
            this.littleEndian
              ? ((e = this.getUint32()), (t = this.getUint32()))
              : ((t = this.getUint32()), (e = this.getUint32())),
            4294967296 * t + e
          );
        },
        getFloat32: function () {
          var e = this.dv.getFloat32(this.offset, this.littleEndian);
          return (this.offset += 4), e;
        },
        getFloat32Array: function (e) {
          for (var t = [], A = 0; A < e; A++) t.push(this.getFloat32());
          return t;
        },
        getFloat64: function () {
          var e = this.dv.getFloat64(this.offset, this.littleEndian);
          return (this.offset += 8), e;
        },
        getFloat64Array: function (e) {
          for (var t = [], A = 0; A < e; A++) t.push(this.getFloat64());
          return t;
        },
        getArrayBuffer: function (e) {
          var t = this.dv.buffer.slice(this.offset, this.offset + e);
          return (this.offset += e), t;
        },
        getString: function (e) {
          for (var t = new Uint8Array(e), A = 0; A < e; A++)
            t[A] = this.getUint8();
          var r = t.indexOf(0);
          return 0 <= r && (t = t.slice(0, r)), THREE.LoaderUtils.decodeText(t);
        },
      }),
      Object.assign(s.prototype, {
        add: function (e, t) {
          this[e] = t;
        },
      });
  })(),
  (THREE.CopyShader = {
    uniforms: { tDiffuse: { value: null }, opacity: { value: 1 } },
    vertexShader: [
      'varying vec2 vUv;',
      'void main() {',
      'vUv = uv;',
      'gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',
      '}',
    ].join('\n'),
    fragmentShader: [
      'uniform float opacity;',
      'uniform sampler2D tDiffuse;',
      'varying vec2 vUv;',
      'void main() {',
      'vec4 texel = texture2D( tDiffuse, vUv );',
      'gl_FragColor = opacity * texel;',
      '}',
    ].join('\n'),
  }),
  (THREE.ConvolutionShader = {
    defines: { KERNEL_SIZE_FLOAT: '25.0', KERNEL_SIZE_INT: '25' },
    uniforms: {
      tDiffuse: { value: null },
      uImageIncrement: { value: new THREE.Vector2(0.001953125, 0) },
      cKernel: { value: [] },
    },
    vertexShader: [
      'uniform vec2 uImageIncrement;',
      'varying vec2 vUv;',
      'void main() {',
      'vUv = uv - ( ( KERNEL_SIZE_FLOAT - 1.0 ) / 2.0 ) * uImageIncrement;',
      'gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',
      '}',
    ].join('\n'),
    fragmentShader: [
      'uniform float cKernel[ KERNEL_SIZE_INT ];',
      'uniform sampler2D tDiffuse;',
      'uniform vec2 uImageIncrement;',
      'varying vec2 vUv;',
      'void main() {',
      'vec2 imageCoord = vUv;',
      'vec4 sum = vec4( 0.0, 0.0, 0.0, 0.0 );',
      'for( int i = 0; i < KERNEL_SIZE_INT; i ++ ) {',
      'sum += texture2D( tDiffuse, imageCoord ) * cKernel[ i ];',
      'imageCoord += uImageIncrement;',
      '}',
      'gl_FragColor = sum;',
      '}',
    ].join('\n'),
    buildKernel: function (e) {
      for (
        var t,
          A,
          r = 2 * Math.ceil(3 * e) + 1,
          n = 0.5 * ((r = 25 < r ? 25 : r) - 1),
          i = new Array(r),
          a = (t = 0);
        a < r;
        ++a
      )
        (i[a] = ((A = a - n), Math.exp((-A * A) / (2 * e * e)))), (t += i[a]);
      for (a = 0; a < r; ++a) i[a] /= t;
      return i;
    },
  }),
  (THREE.LuminosityHighPassShader = {
    shaderID: 'luminosityHighPass',
    uniforms: {
      tDiffuse: { type: 't', value: null },
      luminosityThreshold: { type: 'f', value: 1 },
      smoothWidth: { type: 'f', value: 1 },
      defaultColor: { type: 'c', value: new THREE.Color(0) },
      defaultOpacity: { type: 'f', value: 0 },
    },
    vertexShader: [
      'varying vec2 vUv;',
      'void main() {',
      'vUv = uv;',
      'gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',
      '}',
    ].join('\n'),
    fragmentShader: [
      'uniform sampler2D tDiffuse;',
      'uniform vec3 defaultColor;',
      'uniform float defaultOpacity;',
      'uniform float luminosityThreshold;',
      'uniform float smoothWidth;',
      'varying vec2 vUv;',
      'void main() {',
      'vec4 texel = texture2D( tDiffuse, vUv );',
      'vec3 luma = vec3( 0.299, 0.587, 0.114 );',
      'float v = dot( texel.xyz, luma );',
      'vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );',
      'float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );',
      'gl_FragColor = mix( outputColor, texel, alpha );',
      '}',
    ].join('\n'),
  }),
  (THREE.EffectComposer = function (e, t) {
    var A;
    (this.renderer = e),
      void 0 === t &&
        ((A = {
          minFilter: THREE.LinearFilter,
          magFilter: THREE.LinearFilter,
          format: THREE.RGBAFormat,
          stencilBuffer: !1,
        }),
        (e = e.getDrawingBufferSize()),
        ((t = new THREE.WebGLRenderTarget(e.width, e.height, A)).texture.name =
          'EffectComposer.rt1')),
      (this.renderTarget1 = t),
      (this.renderTarget2 = t.clone()),
      (this.renderTarget2.texture.name = 'EffectComposer.rt2'),
      (this.writeBuffer = this.renderTarget1),
      (this.readBuffer = this.renderTarget2),
      (this.passes = []),
      void 0 === THREE.CopyShader &&
        console.error('THREE.EffectComposer relies on THREE.CopyShader'),
      void 0 === THREE.ShaderPass &&
        console.error('THREE.EffectComposer relies on THREE.ShaderPass'),
      (this.copyPass = new THREE.ShaderPass(THREE.CopyShader));
  }),
  Object.assign(THREE.EffectComposer.prototype, {
    swapBuffers: function () {
      var e = this.readBuffer;
      (this.readBuffer = this.writeBuffer), (this.writeBuffer = e);
    },
    addPass: function (e) {
      this.passes.push(e);
      var t = this.renderer.getDrawingBufferSize();
      e.setSize(t.width, t.height);
    },
    insertPass: function (e, t) {
      this.passes.splice(t, 0, e);
    },
    render: function (e) {
      for (var t, A, r = !1, n = this.passes.length, i = 0; i < n; i++)
        !1 !== (A = this.passes[i]).enabled &&
          (A.render(this.renderer, this.writeBuffer, this.readBuffer, e, r),
          A.needsSwap &&
            (r &&
              ((t = this.renderer.context).stencilFunc(
                t.NOTEQUAL,
                1,
                4294967295,
              ),
              this.copyPass.render(
                this.renderer,
                this.writeBuffer,
                this.readBuffer,
                e,
              ),
              t.stencilFunc(t.EQUAL, 1, 4294967295)),
            this.swapBuffers()),
          void 0 !== THREE.MaskPass) &&
          (A instanceof THREE.MaskPass
            ? (r = !0)
            : A instanceof THREE.ClearMaskPass && (r = !1));
    },
    reset: function (e) {
      var t;
      void 0 === e &&
        ((t = this.renderer.getDrawingBufferSize()),
        (e = this.renderTarget1.clone()).setSize(t.width, t.height)),
        this.renderTarget1.dispose(),
        this.renderTarget2.dispose(),
        (this.renderTarget1 = e),
        (this.renderTarget2 = e.clone()),
        (this.writeBuffer = this.renderTarget1),
        (this.readBuffer = this.renderTarget2);
    },
    setSize: function (e, t) {
      this.renderTarget1.setSize(e, t), this.renderTarget2.setSize(e, t);
      for (var A = 0; A < this.passes.length; A++) this.passes[A].setSize(e, t);
    },
  }),
  (THREE.Pass = function () {
    (this.enabled = !0),
      (this.needsSwap = !0),
      (this.clear = !1),
      (this.renderToScreen = !1);
  }),
  Object.assign(THREE.Pass.prototype, {
    setSize: function (e, t) {},
    render: function (e, t, A, r, n) {
      console.error(
        'THREE.Pass: .render() must be implemented in derived pass.',
      );
    },
  }),
  (THREE.RenderPass = function (e, t, A, r, n) {
    THREE.Pass.call(this),
      (this.scene = e),
      (this.camera = t),
      (this.overrideMaterial = A),
      (this.clearColor = r),
      (this.clearAlpha = void 0 !== n ? n : 0),
      (this.clear = !0),
      (this.clearDepth = !1),
      (this.needsSwap = !1);
  }),
  (THREE.RenderPass.prototype = Object.assign(
    Object.create(THREE.Pass.prototype),
    {
      constructor: THREE.RenderPass,
      render: function (e, t, A, r, n) {
        var i,
          a,
          o = e.autoClear;
        (e.autoClear = !1),
          (this.scene.overrideMaterial = this.overrideMaterial),
          this.clearColor &&
            ((i = e.getClearColor().getHex()),
            (a = e.getClearAlpha()),
            e.setClearColor(this.clearColor, this.clearAlpha)),
          this.clearDepth && e.clearDepth(),
          e.render(
            this.scene,
            this.camera,
            this.renderToScreen ? null : A,
            this.clear,
          ),
          this.clearColor && e.setClearColor(i, a),
          (this.scene.overrideMaterial = null),
          (e.autoClear = o);
      },
    },
  )),
  (THREE.ShaderPass = function (e, t) {
    THREE.Pass.call(this),
      (this.textureID = void 0 !== t ? t : 'tDiffuse'),
      e instanceof THREE.ShaderMaterial
        ? ((this.uniforms = e.uniforms), (this.material = e))
        : e &&
          ((this.uniforms = THREE.UniformsUtils.clone(e.uniforms)),
          (this.material = new THREE.ShaderMaterial({
            defines: Object.assign({}, e.defines),
            uniforms: this.uniforms,
            vertexShader: e.vertexShader,
            fragmentShader: e.fragmentShader,
          }))),
      (this.camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1)),
      (this.scene = new THREE.Scene()),
      (this.quad = new THREE.Mesh(new THREE.PlaneBufferGeometry(2, 2), null)),
      (this.quad.frustumCulled = !1),
      this.scene.add(this.quad);
  }),
  (THREE.ShaderPass.prototype = Object.assign(
    Object.create(THREE.Pass.prototype),
    {
      constructor: THREE.ShaderPass,
      render: function (e, t, A, r, n) {
        this.uniforms[this.textureID] &&
          (this.uniforms[this.textureID].value = A.texture),
          (this.quad.material = this.material),
          this.renderToScreen
            ? e.render(this.scene, this.camera)
            : e.render(this.scene, this.camera, t, this.clear);
      },
    },
  )),
  (THREE.UnrealBloomPass = function (e, t, A, r) {
    THREE.Pass.call(this),
      (this.strength = void 0 !== t ? t : 1),
      (this.radius = A),
      (this.threshold = r),
      (this.resolution =
        void 0 !== e
          ? new THREE.Vector2(e.x, e.y)
          : new THREE.Vector2(256, 256));
    var n = {
        minFilter: THREE.LinearFilter,
        magFilter: THREE.LinearFilter,
        format: THREE.RGBAFormat,
      },
      i =
        ((this.renderTargetsHorizontal = []),
        (this.renderTargetsVertical = []),
        (this.nMips = 5),
        Math.round(this.resolution.x / 2)),
      a = Math.round(this.resolution.y / 2);
    (this.renderTargetBright = new THREE.WebGLRenderTarget(i, a, n)),
      (this.renderTargetBright.texture.name = 'UnrealBloomPass.bright'),
      (this.renderTargetBright.texture.generateMipmaps = !1);
    for (var o = 0; o < this.nMips; o++) {
      var s = new THREE.WebGLRenderTarget(i, a, n);
      (s.texture.name = 'UnrealBloomPass.h' + o),
        (s.texture.generateMipmaps = !1),
        this.renderTargetsHorizontal.push(s),
        ((s = new THREE.WebGLRenderTarget(i, a, n)).texture.name =
          'UnrealBloomPass.v' + o),
        (s.texture.generateMipmaps = !1),
        this.renderTargetsVertical.push(s),
        (i = Math.round(i / 2)),
        (a = Math.round(a / 2));
    }
    void 0 === THREE.LuminosityHighPassShader &&
      console.error(
        'THREE.UnrealBloomPass relies on THREE.LuminosityHighPassShader',
      );
    for (
      var A = THREE.LuminosityHighPassShader,
        l =
          ((this.highPassUniforms = THREE.UniformsUtils.clone(A.uniforms)),
          (this.highPassUniforms.luminosityThreshold.value = r),
          (this.highPassUniforms.smoothWidth.value = 0.01),
          (this.materialHighPassFilter = new THREE.ShaderMaterial({
            uniforms: this.highPassUniforms,
            vertexShader: A.vertexShader,
            fragmentShader: A.fragmentShader,
            defines: {},
          })),
          (this.separableBlurMaterials = []),
          [3, 5, 7, 9, 11]),
        i = Math.round(this.resolution.x / 2),
        a = Math.round(this.resolution.y / 2),
        o = 0;
      o < this.nMips;
      o++
    )
      this.separableBlurMaterials.push(this.getSeperableBlurMaterial(l[o])),
        (this.separableBlurMaterials[o].uniforms.texSize.value =
          new THREE.Vector2(i, a)),
        (i = Math.round(i / 2)),
        (a = Math.round(a / 2));
    (this.compositeMaterial = this.getCompositeMaterial(this.nMips)),
      (this.compositeMaterial.uniforms.blurTexture1.value =
        this.renderTargetsVertical[0].texture),
      (this.compositeMaterial.uniforms.blurTexture2.value =
        this.renderTargetsVertical[1].texture),
      (this.compositeMaterial.uniforms.blurTexture3.value =
        this.renderTargetsVertical[2].texture),
      (this.compositeMaterial.uniforms.blurTexture4.value =
        this.renderTargetsVertical[3].texture),
      (this.compositeMaterial.uniforms.blurTexture5.value =
        this.renderTargetsVertical[4].texture),
      (this.compositeMaterial.uniforms.bloomStrength.value = t),
      (this.compositeMaterial.uniforms.bloomRadius.value = 0.1),
      (this.compositeMaterial.needsUpdate = !0);
    (this.compositeMaterial.uniforms.bloomFactors.value = [
      1, 0.8, 0.6, 0.4, 0.2,
    ]),
      (this.bloomTintColors = [
        new THREE.Vector3(1, 1, 1),
        new THREE.Vector3(1, 1, 1),
        new THREE.Vector3(1, 1, 1),
        new THREE.Vector3(1, 1, 1),
        new THREE.Vector3(1, 1, 1),
      ]),
      (this.compositeMaterial.uniforms.bloomTintColors.value =
        this.bloomTintColors),
      void 0 === THREE.CopyShader &&
        console.error('THREE.BloomPass relies on THREE.CopyShader');
    e = THREE.CopyShader;
    (this.copyUniforms = THREE.UniformsUtils.clone(e.uniforms)),
      (this.copyUniforms.opacity.value = 1),
      (this.materialCopy = new THREE.ShaderMaterial({
        uniforms: this.copyUniforms,
        vertexShader: e.vertexShader,
        fragmentShader: e.fragmentShader,
        blending: THREE.AdditiveBlending,
        depthTest: !1,
        depthWrite: !1,
        transparent: !0,
      })),
      (this.enabled = !0),
      (this.needsSwap = !1),
      (this.oldClearColor = new THREE.Color()),
      (this.oldClearAlpha = 1),
      (this.camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1)),
      (this.scene = new THREE.Scene()),
      (this.basic = new THREE.MeshBasicMaterial()),
      (this.quad = new THREE.Mesh(new THREE.PlaneBufferGeometry(2, 2), null)),
      (this.quad.frustumCulled = !1),
      this.scene.add(this.quad);
  }),
  (THREE.UnrealBloomPass.prototype = Object.assign(
    Object.create(THREE.Pass.prototype),
    {
      constructor: THREE.UnrealBloomPass,
      dispose: function () {
        for (var e = 0; e < this.renderTargetsHorizontal.length; e++)
          this.renderTargetsHorizontal[e].dispose();
        for (e = 0; e < this.renderTargetsVertical.length; e++)
          this.renderTargetsVertical[e].dispose();
        this.renderTargetBright.dispose();
      },
      setSize: function (e, t) {
        var A = Math.round(e / 2),
          r = Math.round(t / 2);
        this.renderTargetBright.setSize(A, r);
        for (var n = 0; n < this.nMips; n++)
          this.renderTargetsHorizontal[n].setSize(A, r),
            this.renderTargetsVertical[n].setSize(A, r),
            (this.separableBlurMaterials[n].uniforms.texSize.value =
              new THREE.Vector2(A, r)),
            (A = Math.round(A / 2)),
            (r = Math.round(r / 2));
      },
      render: function (e, t, A, r, n) {
        this.oldClearColor.copy(e.getClearColor()),
          (this.oldClearAlpha = e.getClearAlpha());
        for (
          var i = e.autoClear,
            a =
              ((e.autoClear = !1),
              e.setClearColor(new THREE.Color(0, 0, 0), 0),
              n && e.context.disable(e.context.STENCIL_TEST),
              this.renderToScreen &&
                ((this.quad.material = this.basic),
                (this.basic.map = A.texture),
                e.render(this.scene, this.camera, void 0, !0)),
              (this.highPassUniforms.tDiffuse.value = A.texture),
              (this.highPassUniforms.luminosityThreshold.value =
                this.threshold),
              (this.quad.material = this.materialHighPassFilter),
              e.render(this.scene, this.camera, this.renderTargetBright, !0),
              this.renderTargetBright),
            o = 0;
          o < this.nMips;
          o++
        )
          (this.quad.material = this.separableBlurMaterials[o]),
            (this.separableBlurMaterials[o].uniforms.colorTexture.value =
              a.texture),
            (this.separableBlurMaterials[o].uniforms.direction.value =
              THREE.UnrealBloomPass.BlurDirectionX),
            e.render(
              this.scene,
              this.camera,
              this.renderTargetsHorizontal[o],
              !0,
            ),
            (this.separableBlurMaterials[o].uniforms.colorTexture.value =
              this.renderTargetsHorizontal[o].texture),
            (this.separableBlurMaterials[o].uniforms.direction.value =
              THREE.UnrealBloomPass.BlurDirectionY),
            e.render(
              this.scene,
              this.camera,
              this.renderTargetsVertical[o],
              !0,
            ),
            (a = this.renderTargetsVertical[o]);
        (this.quad.material = this.compositeMaterial),
          (this.compositeMaterial.uniforms.bloomStrength.value = this.strength),
          (this.compositeMaterial.uniforms.bloomRadius.value = this.radius),
          (this.compositeMaterial.uniforms.bloomTintColors.value =
            this.bloomTintColors),
          e.render(
            this.scene,
            this.camera,
            this.renderTargetsHorizontal[0],
            !0,
          ),
          (this.quad.material = this.materialCopy),
          (this.copyUniforms.tDiffuse.value =
            this.renderTargetsHorizontal[0].texture),
          n && e.context.enable(e.context.STENCIL_TEST),
          this.renderToScreen
            ? e.render(this.scene, this.camera, void 0, !1)
            : e.render(this.scene, this.camera, A, !1),
          e.setClearColor(this.oldClearColor, this.oldClearAlpha),
          (e.autoClear = i);
      },
      getSeperableBlurMaterial: function (e) {
        return new THREE.ShaderMaterial({
          defines: { KERNEL_RADIUS: e, SIGMA: e },
          uniforms: {
            colorTexture: { value: null },
            texSize: { value: new THREE.Vector2(0.5, 0.5) },
            direction: { value: new THREE.Vector2(0.5, 0.5) },
          },
          vertexShader:
            'varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}',
          fragmentShader:
            '#include <common>\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 direction;\t\t\t\t\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\t\t\t\t}\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tfloat fSigma = float(SIGMA);\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\t\t\t\t\t\tfloat x = float(i);\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\t\t\t\t\t\tweightSum += 2.0 * w;\t\t\t\t\t}\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n\t\t\t\t}',
        });
      },
      getCompositeMaterial: function (e) {
        return new THREE.ShaderMaterial({
          defines: { NUM_MIPS: e },
          uniforms: {
            blurTexture1: { value: null },
            blurTexture2: { value: null },
            blurTexture3: { value: null },
            blurTexture4: { value: null },
            blurTexture5: { value: null },
            dirtTexture: { value: null },
            bloomStrength: { value: 1 },
            bloomFactors: { value: null },
            bloomTintColors: { value: null },
            bloomRadius: { value: 0 },
          },
          vertexShader:
            'varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}',
          fragmentShader:
            'varying vec2 vUv;\t\t\t\tuniform sampler2D blurTexture1;\t\t\t\tuniform sampler2D blurTexture2;\t\t\t\tuniform sampler2D blurTexture3;\t\t\t\tuniform sampler2D blurTexture4;\t\t\t\tuniform sampler2D blurTexture5;\t\t\t\tuniform sampler2D dirtTexture;\t\t\t\tuniform float bloomStrength;\t\t\t\tuniform float bloomRadius;\t\t\t\tuniform float bloomFactors[NUM_MIPS];\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\t\t\t\t\t\t\t\tfloat lerpBloomFactor(const in float factor) { \t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\t\t\t\t}\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\t\t\t\t}',
        });
      },
    },
  )),
  (THREE.UnrealBloomPass.BlurDirectionX = new THREE.Vector2(1, 0)),
  (THREE.UnrealBloomPass.BlurDirectionY = new THREE.Vector2(0, 1)),
  (THREE.OutlinePass = function (e, t, A, r) {
    (this.renderScene = t),
      (this.renderCamera = A),
      (this.selectedObjects = void 0 !== r ? r : []),
      (this.visibleEdgeColor = new THREE.Color(1, 1, 1)),
      (this.hiddenEdgeColor = new THREE.Color(0.1, 0.04, 0.02)),
      (this.edgeGlow = 0),
      (this.usePatternTexture = !1),
      (this.edgeThickness = 1),
      (this.edgeStrength = 3),
      (this.downSampleRatio = 2),
      (this.pulsePeriod = 0),
      THREE.Pass.call(this),
      (this.resolution =
        void 0 !== e
          ? new THREE.Vector2(e.x, e.y)
          : new THREE.Vector2(256, 256));
    (t = {
      minFilter: THREE.LinearFilter,
      magFilter: THREE.LinearFilter,
      format: THREE.RGBAFormat,
    }),
      (A = Math.round(this.resolution.x / this.downSampleRatio)),
      (r = Math.round(this.resolution.y / this.downSampleRatio)),
      (this.maskBufferMaterial = new THREE.MeshBasicMaterial({
        color: 16777215,
      })),
      (this.maskBufferMaterial.side = THREE.DoubleSide),
      (this.renderTargetMaskBuffer = new THREE.WebGLRenderTarget(
        this.resolution.x,
        this.resolution.y,
        t,
      )),
      (this.renderTargetMaskBuffer.texture.name = 'OutlinePass.mask'),
      (this.renderTargetMaskBuffer.texture.generateMipmaps = !1),
      (this.depthMaterial = new THREE.MeshDepthMaterial()),
      (this.depthMaterial.side = THREE.DoubleSide),
      (this.depthMaterial.depthPacking = THREE.RGBADepthPacking),
      (this.depthMaterial.blending = THREE.NoBlending),
      (this.prepareMaskMaterial = this.getPrepareMaskMaterial()),
      (this.prepareMaskMaterial.side = THREE.DoubleSide),
      (this.prepareMaskMaterial.fragmentShader = (function (e, t) {
        t = t.isPerspectiveCamera ? 'perspective' : 'orthographic';
        return e.replace(/DEPTH_TO_VIEW_Z/g, t + 'DepthToViewZ');
      })(this.prepareMaskMaterial.fragmentShader, this.renderCamera)),
      (this.renderTargetDepthBuffer = new THREE.WebGLRenderTarget(
        this.resolution.x,
        this.resolution.y,
        t,
      )),
      (this.renderTargetDepthBuffer.texture.name = 'OutlinePass.depth'),
      (this.renderTargetDepthBuffer.texture.generateMipmaps = !1),
      (this.renderTargetMaskDownSampleBuffer = new THREE.WebGLRenderTarget(
        A,
        r,
        t,
      )),
      (this.renderTargetMaskDownSampleBuffer.texture.name =
        'OutlinePass.depthDownSample'),
      (this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps = !1),
      (this.renderTargetBlurBuffer1 = new THREE.WebGLRenderTarget(A, r, t)),
      (this.renderTargetBlurBuffer1.texture.name = 'OutlinePass.blur1'),
      (this.renderTargetBlurBuffer1.texture.generateMipmaps = !1),
      (this.renderTargetBlurBuffer2 = new THREE.WebGLRenderTarget(
        Math.round(A / 2),
        Math.round(r / 2),
        t,
      )),
      (this.renderTargetBlurBuffer2.texture.name = 'OutlinePass.blur2'),
      (this.renderTargetBlurBuffer2.texture.generateMipmaps = !1),
      (this.edgeDetectionMaterial = this.getEdgeDetectionMaterial()),
      (this.renderTargetEdgeBuffer1 = new THREE.WebGLRenderTarget(A, r, t)),
      (this.renderTargetEdgeBuffer1.texture.name = 'OutlinePass.edge1'),
      (this.renderTargetEdgeBuffer1.texture.generateMipmaps = !1),
      (this.renderTargetEdgeBuffer2 = new THREE.WebGLRenderTarget(
        Math.round(A / 2),
        Math.round(r / 2),
        t,
      )),
      (this.renderTargetEdgeBuffer2.texture.name = 'OutlinePass.edge2'),
      (this.renderTargetEdgeBuffer2.texture.generateMipmaps = !1),
      (this.separableBlurMaterial1 = this.getSeperableBlurMaterial(4)),
      (this.separableBlurMaterial1.uniforms.texSize.value = new THREE.Vector2(
        A,
        r,
      )),
      (this.separableBlurMaterial1.uniforms.kernelRadius.value = 1),
      (this.separableBlurMaterial2 = this.getSeperableBlurMaterial(4)),
      (this.separableBlurMaterial2.uniforms.texSize.value = new THREE.Vector2(
        Math.round(A / 2),
        Math.round(r / 2),
      )),
      (this.separableBlurMaterial2.uniforms.kernelRadius.value = 4),
      (this.overlayMaterial = this.getOverlayMaterial()),
      void 0 === THREE.CopyShader &&
        console.error('THREE.OutlinePass relies on THREE.CopyShader'),
      (e = THREE.CopyShader);
    (this.copyUniforms = THREE.UniformsUtils.clone(e.uniforms)),
      (this.copyUniforms.opacity.value = 1),
      (this.materialCopy = new THREE.ShaderMaterial({
        uniforms: this.copyUniforms,
        vertexShader: e.vertexShader,
        fragmentShader: e.fragmentShader,
        blending: THREE.NoBlending,
        depthTest: !1,
        depthWrite: !1,
        transparent: !0,
      })),
      (this.enabled = !0),
      (this.needsSwap = !1),
      (this.oldClearColor = new THREE.Color()),
      (this.oldClearAlpha = 1),
      (this.camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1)),
      (this.scene = new THREE.Scene()),
      (this.quad = new THREE.Mesh(new THREE.PlaneBufferGeometry(2, 2), null)),
      (this.quad.frustumCulled = !1),
      this.scene.add(this.quad),
      (this.tempPulseColor1 = new THREE.Color()),
      (this.tempPulseColor2 = new THREE.Color()),
      (this.textureMatrix = new THREE.Matrix4());
  }),
  (THREE.OutlinePass.prototype = Object.assign(
    Object.create(THREE.Pass.prototype),
    {
      constructor: THREE.OutlinePass,
      dispose: function () {
        this.renderTargetMaskBuffer.dispose(),
          this.renderTargetDepthBuffer.dispose(),
          this.renderTargetMaskDownSampleBuffer.dispose(),
          this.renderTargetBlurBuffer1.dispose(),
          this.renderTargetBlurBuffer2.dispose(),
          this.renderTargetEdgeBuffer1.dispose(),
          this.renderTargetEdgeBuffer2.dispose();
      },
      setSize: function (e, t) {
        this.renderTargetMaskBuffer.setSize(e, t);
        (e = Math.round(e / this.downSampleRatio)),
          (t = Math.round(t / this.downSampleRatio));
        this.renderTargetMaskDownSampleBuffer.setSize(e, t),
          this.renderTargetBlurBuffer1.setSize(e, t),
          this.renderTargetEdgeBuffer1.setSize(e, t),
          (this.separableBlurMaterial1.uniforms.texSize.value =
            new THREE.Vector2(e, t)),
          (e = Math.round(e / 2)),
          (t = Math.round(t / 2)),
          this.renderTargetBlurBuffer2.setSize(e, t),
          this.renderTargetEdgeBuffer2.setSize(e, t),
          (this.separableBlurMaterial2.uniforms.texSize.value =
            new THREE.Vector2(e, t));
      },
      changeVisibilityOfSelectedObjects: function (t) {
        function e(e) {
          e.isMesh &&
            (t
              ? ((e.visible = e.userData.oldVisible),
                delete e.userData.oldVisible)
              : ((e.userData.oldVisible = e.visible), (e.visible = t)));
        }
        for (var A = 0; A < this.selectedObjects.length; A++)
          this.selectedObjects[A].traverse(e);
      },
      changeVisibilityOfNonSelectedObjects: function (n) {
        var i = [];
        function e(e) {
          e.isMesh && i.push(e);
        }
        for (var t = 0; t < this.selectedObjects.length; t++)
          this.selectedObjects[t].traverse(e);
        this.renderScene.traverse(function (e) {
          if (e.isPoints || e.isMesh || e.isLine || e.isSprite) {
            for (var t, A = !1, r = 0; r < i.length; r++)
              if (i[r].id === e.id) {
                A = !0;
                break;
              }
            A ||
              ((t = e.visible),
              (n && !e.bVisible) || (e.visible = n),
              (e.bVisible = t));
          }
        });
      },
      updateTextureMatrix: function () {
        this.textureMatrix.set(
          0.5,
          0,
          0,
          0.5,
          0,
          0.5,
          0,
          0.5,
          0,
          0,
          0.5,
          0.5,
          0,
          0,
          0,
          1,
        ),
          this.textureMatrix.multiply(this.renderCamera.projectionMatrix),
          this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse);
      },
      render: function (e, t, A, r, n) {
        var i, a;
        0 < this.selectedObjects.length &&
          (this.oldClearColor.copy(e.getClearColor()),
          (this.oldClearAlpha = e.getClearAlpha()),
          (i = e.autoClear),
          (e.autoClear = !1),
          n && e.context.disable(e.context.STENCIL_TEST),
          e.setClearColor(16777215, 1),
          this.changeVisibilityOfSelectedObjects(!1),
          (a = this.renderScene.background),
          (this.renderScene.background = null),
          (this.renderScene.overrideMaterial = this.depthMaterial),
          e.render(
            this.renderScene,
            this.renderCamera,
            this.renderTargetDepthBuffer,
            !0,
          ),
          this.changeVisibilityOfSelectedObjects(!0),
          this.updateTextureMatrix(),
          this.changeVisibilityOfNonSelectedObjects(!1),
          (this.renderScene.overrideMaterial = this.prepareMaskMaterial),
          (this.prepareMaskMaterial.uniforms.cameraNearFar.value =
            new THREE.Vector2(this.renderCamera.near, this.renderCamera.far)),
          (this.prepareMaskMaterial.uniforms.depthTexture.value =
            this.renderTargetDepthBuffer.texture),
          (this.prepareMaskMaterial.uniforms.textureMatrix.value =
            this.textureMatrix),
          e.render(
            this.renderScene,
            this.renderCamera,
            this.renderTargetMaskBuffer,
            !0,
          ),
          (this.renderScene.overrideMaterial = null),
          this.changeVisibilityOfNonSelectedObjects(!0),
          (this.renderScene.background = a),
          (this.quad.material = this.materialCopy),
          (this.copyUniforms.tDiffuse.value =
            this.renderTargetMaskBuffer.texture),
          e.render(
            this.scene,
            this.camera,
            this.renderTargetMaskDownSampleBuffer,
            !0,
          ),
          this.tempPulseColor1.copy(this.visibleEdgeColor),
          this.tempPulseColor2.copy(this.hiddenEdgeColor),
          0 < this.pulsePeriod &&
            ((a =
              0.625 +
              (0.75 * Math.cos((0.01 * performance.now()) / this.pulsePeriod)) /
                2),
            this.tempPulseColor1.multiplyScalar(a),
            this.tempPulseColor2.multiplyScalar(a)),
          (this.quad.material = this.edgeDetectionMaterial),
          (this.edgeDetectionMaterial.uniforms.maskTexture.value =
            this.renderTargetMaskDownSampleBuffer.texture),
          (this.edgeDetectionMaterial.uniforms.texSize.value =
            new THREE.Vector2(
              this.renderTargetMaskDownSampleBuffer.width,
              this.renderTargetMaskDownSampleBuffer.height,
            )),
          (this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value =
            this.tempPulseColor1),
          (this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value =
            this.tempPulseColor2),
          e.render(this.scene, this.camera, this.renderTargetEdgeBuffer1, !0),
          (this.quad.material = this.separableBlurMaterial1),
          (this.separableBlurMaterial1.uniforms.colorTexture.value =
            this.renderTargetEdgeBuffer1.texture),
          (this.separableBlurMaterial1.uniforms.direction.value =
            THREE.OutlinePass.BlurDirectionX),
          (this.separableBlurMaterial1.uniforms.kernelRadius.value =
            this.edgeThickness),
          e.render(this.scene, this.camera, this.renderTargetBlurBuffer1, !0),
          (this.separableBlurMaterial1.uniforms.colorTexture.value =
            this.renderTargetBlurBuffer1.texture),
          (this.separableBlurMaterial1.uniforms.direction.value =
            THREE.OutlinePass.BlurDirectionY),
          e.render(this.scene, this.camera, this.renderTargetEdgeBuffer1, !0),
          (this.quad.material = this.separableBlurMaterial2),
          (this.separableBlurMaterial2.uniforms.colorTexture.value =
            this.renderTargetEdgeBuffer1.texture),
          (this.separableBlurMaterial2.uniforms.direction.value =
            THREE.OutlinePass.BlurDirectionX),
          e.render(this.scene, this.camera, this.renderTargetBlurBuffer2, !0),
          (this.separableBlurMaterial2.uniforms.colorTexture.value =
            this.renderTargetBlurBuffer2.texture),
          (this.separableBlurMaterial2.uniforms.direction.value =
            THREE.OutlinePass.BlurDirectionY),
          e.render(this.scene, this.camera, this.renderTargetEdgeBuffer2, !0),
          (this.quad.material = this.overlayMaterial),
          (this.overlayMaterial.uniforms.maskTexture.value =
            this.renderTargetMaskBuffer.texture),
          (this.overlayMaterial.uniforms.edgeTexture1.value =
            this.renderTargetEdgeBuffer1.texture),
          (this.overlayMaterial.uniforms.edgeTexture2.value =
            this.renderTargetEdgeBuffer2.texture),
          (this.overlayMaterial.uniforms.patternTexture.value =
            this.patternTexture),
          (this.overlayMaterial.uniforms.edgeStrength.value =
            this.edgeStrength),
          (this.overlayMaterial.uniforms.edgeGlow.value = this.edgeGlow),
          (this.overlayMaterial.uniforms.usePatternTexture.value =
            this.usePatternTexture),
          n && e.context.enable(e.context.STENCIL_TEST),
          e.render(this.scene, this.camera, A, !1),
          e.setClearColor(this.oldClearColor, this.oldClearAlpha),
          (e.autoClear = i)),
          this.renderToScreen &&
            ((this.quad.material = this.materialCopy),
            (this.copyUniforms.tDiffuse.value = A.texture),
            e.render(this.scene, this.camera));
      },
      getPrepareMaskMaterial: function () {
        return new THREE.ShaderMaterial({
          uniforms: {
            depthTexture: { value: null },
            cameraNearFar: { value: new THREE.Vector2(0.5, 0.5) },
            textureMatrix: { value: new THREE.Matrix4() },
          },
          vertexShader: [
            'varying vec4 projTexCoord;',
            'varying vec4 vPosition;',
            'uniform mat4 textureMatrix;',
            'void main() {',
            '\tvPosition = modelViewMatrix * vec4( position, 1.0 );',
            '\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );',
            '\tprojTexCoord = textureMatrix * worldPosition;',
            '\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',
            '}',
          ].join('\n'),
          fragmentShader: [
            '#include <packing>',
            'varying vec4 vPosition;',
            'varying vec4 projTexCoord;',
            'uniform sampler2D depthTexture;',
            'uniform vec2 cameraNearFar;',
            'void main() {',
            '\tfloat depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));',
            '\tfloat viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );',
            '\tfloat depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;',
            '\tgl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);',
            '}',
          ].join('\n'),
        });
      },
      getEdgeDetectionMaterial: function () {
        return new THREE.ShaderMaterial({
          uniforms: {
            maskTexture: { value: null },
            texSize: { value: new THREE.Vector2(0.5, 0.5) },
            visibleEdgeColor: { value: new THREE.Vector3(1, 1, 1) },
            hiddenEdgeColor: { value: new THREE.Vector3(1, 1, 1) },
          },
          vertexShader:
            'varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}',
          fragmentShader:
            'varying vec2 vUv;\t\t\t\tuniform sampler2D maskTexture;\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec3 visibleEdgeColor;\t\t\t\tuniform vec3 hiddenEdgeColor;\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tvec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);\t\t\t\t\tvec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);\t\t\t\t\tvec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);\t\t\t\t\tvec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);\t\t\t\t\tvec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);\t\t\t\t\tfloat diff1 = (c1.r - c2.r)*0.5;\t\t\t\t\tfloat diff2 = (c3.r - c4.r)*0.5;\t\t\t\t\tfloat d = length( vec2(diff1, diff2) );\t\t\t\t\tfloat a1 = min(c1.g, c2.g);\t\t\t\t\tfloat a2 = min(c3.g, c4.g);\t\t\t\t\tfloat visibilityFactor = min(a1, a2);\t\t\t\t\tvec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;\t\t\t\t\tgl_FragColor = vec4(edgeColor, 1.0) * vec4(d);\t\t\t\t}',
        });
      },
      getSeperableBlurMaterial: function (e) {
        return new THREE.ShaderMaterial({
          defines: { MAX_RADIUS: e },
          uniforms: {
            colorTexture: { value: null },
            texSize: { value: new THREE.Vector2(0.5, 0.5) },
            direction: { value: new THREE.Vector2(0.5, 0.5) },
            kernelRadius: { value: 1 },
          },
          vertexShader:
            'varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}',
          fragmentShader:
            '#include <common>\t\t\t\tvarying vec2 vUv;\t\t\t\tuniform sampler2D colorTexture;\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 direction;\t\t\t\tuniform float kernelRadius;\t\t\t\t\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\t\t\t\t}\t\t\t\tvoid main() {\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, kernelRadius);\t\t\t\t\tvec4 difColor = texture2D( colorTexture, vUv);\t\t\t\t\tvec3 diffuseSum = difColor.rgb * weightSum;\t\t\t\t\tfloat diffuseAlphaSum = difColor.a * weightSum;\t\t\t\t\tvec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);\t\t\t\t\tvec2 uvOffset = delta;\t\t\t\t\tfor( int i = 1; i <= MAX_RADIUS; i ++ ) {\t\t\t\t\t\tfloat w = gaussianPdf(uvOffset.x, kernelRadius);\t\t\t\t\t\tvec4 sample1Color = texture2D( colorTexture, vUv + uvOffset);\t\t\t\t\t\tvec3 sample1 = sample1Color.rgb;\t\t\t\t\t\tvec4 sample2Color = texture2D( colorTexture, vUv - uvOffset);\t\t\t\t\t\tvec3 sample2 = sample2Color.rgb;\t\t\t\t\t\tdiffuseSum += ((sample1 + sample2) * w);\t\t\t\t\t\tdiffuseAlphaSum += ((sample1Color.a + sample2Color.a) * w);\t\t\t\t\t\tweightSum += (2.0 * w);\t\t\t\t\t\tuvOffset += delta;\t\t\t\t\t}\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, diffuseAlphaSum/weightSum);\t\t\t\t}',
        });
      },
      getOverlayMaterial: function () {
        return new THREE.ShaderMaterial({
          uniforms: {
            maskTexture: { value: null },
            edgeTexture1: { value: null },
            edgeTexture2: { value: null },
            patternTexture: { value: null },
            edgeStrength: { value: 1 },
            edgeGlow: { value: 1 },
            usePatternTexture: { value: 0 },
          },
          vertexShader:
            'varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}',
          fragmentShader:
            'varying vec2 vUv;\t\t\t\tuniform sampler2D maskTexture;\t\t\t\tuniform sampler2D edgeTexture1;\t\t\t\tuniform sampler2D edgeTexture2;\t\t\t\tuniform sampler2D patternTexture;\t\t\t\tuniform float edgeStrength;\t\t\t\tuniform float edgeGlow;\t\t\t\tuniform bool usePatternTexture;\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tvec4 edgeValue1 = texture2D(edgeTexture1, vUv);\t\t\t\t\tvec4 edgeValue2 = texture2D(edgeTexture2, vUv);\t\t\t\t\tvec4 maskColor = texture2D(maskTexture, vUv);\t\t\t\t\tvec4 patternColor = texture2D(patternTexture, 6.0 * vUv);\t\t\t\t\tfloat visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;\t\t\t\t\tvec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;\t\t\t\t\tvec4 finalColor = edgeStrength * maskColor.r * edgeValue;\t\t\t\t\tif(usePatternTexture)\t\t\t\t\t\tfinalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);\t\t\t\t\tgl_FragColor = finalColor;\t\t\t\t}',
          blending: THREE.NormalBlending,
          depthTest: !1,
          depthWrite: !1,
          transparent: !0,
        });
      },
    },
  )),
  (THREE.OutlinePass.BlurDirectionX = new THREE.Vector2(1, 0)),
  (THREE.OutlinePass.BlurDirectionY = new THREE.Vector2(0, 1)),
  (THREE.FXAAShader = {
    uniforms: {
      tDiffuse: { value: null },
      resolution: { value: new THREE.Vector2(1 / 1024, 1 / 512) },
    },
    vertexShader: [
      'varying vec2 vUv;',
      'void main() {',
      'vUv = uv;',
      'gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',
      '}',
    ].join('\n'),
    fragmentShader: [
      'precision highp float;',
      '',
      'uniform sampler2D tDiffuse;',
      '',
      'uniform vec2 resolution;',
      '',
      'varying vec2 vUv;',
      '',
      '// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)',
      '',
      '//----------------------------------------------------------------------------------',
      '// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag',
      '// SDK Version: v3.00',
      '// Email:       gameworks@nvidia.com',
      '// Site:        http://developer.nvidia.com/',
      '//',
      '// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.',
      '//',
      '// Redistribution and use in source and binary forms, with or without',
      '// modification, are permitted provided that the following conditions',
      '// are met:',
      '//  * Redistributions of source code must retain the above copyright',
      '//    notice, this list of conditions and the following disclaimer.',
      '//  * Redistributions in binary form must reproduce the above copyright',
      '//    notice, this list of conditions and the following disclaimer in the',
      '//    documentation and/or other materials provided with the distribution.',
      '//  * Neither the name of NVIDIA CORPORATION nor the names of its',
      '//    contributors may be used to endorse or promote products derived',
      '//    from this software without specific prior written permission.',
      '//',
      "// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY",
      '// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE',
      '// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR',
      '// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR',
      '// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,',
      '// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,',
      '// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR',
      '// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY',
      '// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT',
      '// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE',
      '// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.',
      '//',
      '//----------------------------------------------------------------------------------',
      '',
      '#define FXAA_PC 1',
      '#define FXAA_GLSL_100 1',
      '#define FXAA_QUALITY_PRESET 12',
      '',
      '#define FXAA_GREEN_AS_LUMA 1',
      '',
      '/*--------------------------------------------------------------------------*/',
      '#ifndef FXAA_PC_CONSOLE',
      '    //',
      '    // The console algorithm for PC is included',
      '    // for developers targeting really low spec machines.',
      '    // Likely better to just run FXAA_PC, and use a really low preset.',
      '    //',
      '    #define FXAA_PC_CONSOLE 0',
      '#endif',
      '/*--------------------------------------------------------------------------*/',
      '#ifndef FXAA_GLSL_120',
      '    #define FXAA_GLSL_120 0',
      '#endif',
      '/*--------------------------------------------------------------------------*/',
      '#ifndef FXAA_GLSL_130',
      '    #define FXAA_GLSL_130 0',
      '#endif',
      '/*--------------------------------------------------------------------------*/',
      '#ifndef FXAA_HLSL_3',
      '    #define FXAA_HLSL_3 0',
      '#endif',
      '/*--------------------------------------------------------------------------*/',
      '#ifndef FXAA_HLSL_4',
      '    #define FXAA_HLSL_4 0',
      '#endif',
      '/*--------------------------------------------------------------------------*/',
      '#ifndef FXAA_HLSL_5',
      '    #define FXAA_HLSL_5 0',
      '#endif',
      '/*==========================================================================*/',
      '#ifndef FXAA_GREEN_AS_LUMA',
      '    //',
      '    // For those using non-linear color,',
      '    // and either not able to get luma in alpha, or not wanting to,',
      '    // this enables FXAA to run using green as a proxy for luma.',
      '    // So with this enabled, no need to pack luma in alpha.',
      '    //',
      '    // This will turn off AA on anything which lacks some amount of green.',
      '    // Pure red and blue or combination of only R and B, will get no AA.',
      '    //',
      '    // Might want to lower the settings for both,',
      '    //    fxaaConsoleEdgeThresholdMin',
      '    //    fxaaQualityEdgeThresholdMin',
      '    // In order to insure AA does not get turned off on colors',
      '    // which contain a minor amount of green.',
      '    //',
      '    // 1 = On.',
      '    // 0 = Off.',
      '    //',
      '    #define FXAA_GREEN_AS_LUMA 0',
      '#endif',
      '/*--------------------------------------------------------------------------*/',
      '#ifndef FXAA_EARLY_EXIT',
      '    //',
      "    // Controls algorithm's early exit path.",
      '    // On PS3 turning this ON adds 2 cycles to the shader.',
      '    // On 360 turning this OFF adds 10ths of a millisecond to the shader.',
      '    // Turning this off on console will result in a more blurry image.',
      '    // So this defaults to on.',
      '    //',
      '    // 1 = On.',
      '    // 0 = Off.',
      '    //',
      '    #define FXAA_EARLY_EXIT 1',
      '#endif',
      '/*--------------------------------------------------------------------------*/',
      '#ifndef FXAA_DISCARD',
      '    //',
      '    // Only valid for PC OpenGL currently.',
      '    // Probably will not work when FXAA_GREEN_AS_LUMA = 1.',
      '    //',
      "    // 1 = Use discard on pixels which don't need AA.",
      '    //     For APIs which enable concurrent TEX+ROP from same surface.',
      "    // 0 = Return unchanged color on pixels which don't need AA.",
      '    //',
      '    #define FXAA_DISCARD 0',
      '#endif',
      '/*--------------------------------------------------------------------------*/',
      '#ifndef FXAA_FAST_PIXEL_OFFSET',
      '    //',
      '    // Used for GLSL 120 only.',
      '    //',
      '    // 1 = GL API supports fast pixel offsets',
      '    // 0 = do not use fast pixel offsets',
      '    //',
      '    #ifdef GL_EXT_gpu_shader4',
      '        #define FXAA_FAST_PIXEL_OFFSET 1',
      '    #endif',
      '    #ifdef GL_NV_gpu_shader5',
      '        #define FXAA_FAST_PIXEL_OFFSET 1',
      '    #endif',
      '    #ifdef GL_ARB_gpu_shader5',
      '        #define FXAA_FAST_PIXEL_OFFSET 1',
      '    #endif',
      '    #ifndef FXAA_FAST_PIXEL_OFFSET',
      '        #define FXAA_FAST_PIXEL_OFFSET 0',
      '    #endif',
      '#endif',
      '/*--------------------------------------------------------------------------*/',
      '#ifndef FXAA_GATHER4_ALPHA',
      '    //',
      '    // 1 = API supports gather4 on alpha channel.',
      '    // 0 = API does not support gather4 on alpha channel.',
      '    //',
      '    #if (FXAA_HLSL_5 == 1)',
      '        #define FXAA_GATHER4_ALPHA 1',
      '    #endif',
      '    #ifdef GL_ARB_gpu_shader5',
      '        #define FXAA_GATHER4_ALPHA 1',
      '    #endif',
      '    #ifdef GL_NV_gpu_shader5',
      '        #define FXAA_GATHER4_ALPHA 1',
      '    #endif',
      '    #ifndef FXAA_GATHER4_ALPHA',
      '        #define FXAA_GATHER4_ALPHA 0',
      '    #endif',
      '#endif',
      '',
      '',
      '/*============================================================================',
      '                        FXAA QUALITY - TUNING KNOBS',
      '------------------------------------------------------------------------------',
      'NOTE the other tuning knobs are now in the shader function inputs!',
      '============================================================================*/',
      '#ifndef FXAA_QUALITY_PRESET',
      '    //',
      '    // Choose the quality preset.',
      '    // This needs to be compiled into the shader as it effects code.',
      '    // Best option to include multiple presets is to',
      '    // in each shader define the preset, then include this file.',
      '    //',
      '    // OPTIONS',
      '    // -----------------------------------------------------------------------',
      '    // 10 to 15 - default medium dither (10=fastest, 15=highest quality)',
      '    // 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)',
      '    // 39       - no dither, very expensive',
      '    //',
      '    // NOTES',
      '    // -----------------------------------------------------------------------',
      '    // 12 = slightly faster then FXAA 3.9 and higher edge quality (default)',
      '    // 13 = about same speed as FXAA 3.9 and better than 12',
      '    // 23 = closest to FXAA 3.9 visually and performance wise',
      '    //  _ = the lowest digit is directly related to performance',
      '    // _  = the highest digit is directly related to style',
      '    //',
      '    #define FXAA_QUALITY_PRESET 12',
      '#endif',
      '',
      '',
      '/*============================================================================',
      '',
      '                           FXAA QUALITY - PRESETS',
      '',
      '============================================================================*/',
      '',
      '/*============================================================================',
      '                     FXAA QUALITY - MEDIUM DITHER PRESETS',
      '============================================================================*/',
      '#if (FXAA_QUALITY_PRESET == 10)',
      '    #define FXAA_QUALITY_PS 3',
      '    #define FXAA_QUALITY_P0 1.5',
      '    #define FXAA_QUALITY_P1 3.0',
      '    #define FXAA_QUALITY_P2 12.0',
      '#endif',
      '/*--------------------------------------------------------------------------*/',
      '#if (FXAA_QUALITY_PRESET == 11)',
      '    #define FXAA_QUALITY_PS 4',
      '    #define FXAA_QUALITY_P0 1.0',
      '    #define FXAA_QUALITY_P1 1.5',
      '    #define FXAA_QUALITY_P2 3.0',
      '    #define FXAA_QUALITY_P3 12.0',
      '#endif',
      '/*--------------------------------------------------------------------------*/',
      '#if (FXAA_QUALITY_PRESET == 12)',
      '    #define FXAA_QUALITY_PS 5',
      '    #define FXAA_QUALITY_P0 1.0',
      '    #define FXAA_QUALITY_P1 1.5',
      '    #define FXAA_QUALITY_P2 2.0',
      '    #define FXAA_QUALITY_P3 4.0',
      '    #define FXAA_QUALITY_P4 12.0',
      '#endif',
      '/*--------------------------------------------------------------------------*/',
      '#if (FXAA_QUALITY_PRESET == 13)',
      '    #define FXAA_QUALITY_PS 6',
      '    #define FXAA_QUALITY_P0 1.0',
      '    #define FXAA_QUALITY_P1 1.5',
      '    #define FXAA_QUALITY_P2 2.0',
      '    #define FXAA_QUALITY_P3 2.0',
      '    #define FXAA_QUALITY_P4 4.0',
      '    #define FXAA_QUALITY_P5 12.0',
      '#endif',
      '/*--------------------------------------------------------------------------*/',
      '#if (FXAA_QUALITY_PRESET == 14)',
      '    #define FXAA_QUALITY_PS 7',
      '    #define FXAA_QUALITY_P0 1.0',
      '    #define FXAA_QUALITY_P1 1.5',
      '    #define FXAA_QUALITY_P2 2.0',
      '    #define FXAA_QUALITY_P3 2.0',
      '    #define FXAA_QUALITY_P4 2.0',
      '    #define FXAA_QUALITY_P5 4.0',
      '    #define FXAA_QUALITY_P6 12.0',
      '#endif',
      '/*--------------------------------------------------------------------------*/',
      '#if (FXAA_QUALITY_PRESET == 15)',
      '    #define FXAA_QUALITY_PS 8',
      '    #define FXAA_QUALITY_P0 1.0',
      '    #define FXAA_QUALITY_P1 1.5',
      '    #define FXAA_QUALITY_P2 2.0',
      '    #define FXAA_QUALITY_P3 2.0',
      '    #define FXAA_QUALITY_P4 2.0',
      '    #define FXAA_QUALITY_P5 2.0',
      '    #define FXAA_QUALITY_P6 4.0',
      '    #define FXAA_QUALITY_P7 12.0',
      '#endif',
      '',
      '/*============================================================================',
      '                     FXAA QUALITY - LOW DITHER PRESETS',
      '============================================================================*/',
      '#if (FXAA_QUALITY_PRESET == 20)',
      '    #define FXAA_QUALITY_PS 3',
      '    #define FXAA_QUALITY_P0 1.5',
      '    #define FXAA_QUALITY_P1 2.0',
      '    #define FXAA_QUALITY_P2 8.0',
      '#endif',
      '/*--------------------------------------------------------------------------*/',
      '#if (FXAA_QUALITY_PRESET == 21)',
      '    #define FXAA_QUALITY_PS 4',
      '    #define FXAA_QUALITY_P0 1.0',
      '    #define FXAA_QUALITY_P1 1.5',
      '    #define FXAA_QUALITY_P2 2.0',
      '    #define FXAA_QUALITY_P3 8.0',
      '#endif',
      '/*--------------------------------------------------------------------------*/',
      '#if (FXAA_QUALITY_PRESET == 22)',
      '    #define FXAA_QUALITY_PS 5',
      '    #define FXAA_QUALITY_P0 1.0',
      '    #define FXAA_QUALITY_P1 1.5',
      '    #define FXAA_QUALITY_P2 2.0',
      '    #define FXAA_QUALITY_P3 2.0',
      '    #define FXAA_QUALITY_P4 8.0',
      '#endif',
      '/*--------------------------------------------------------------------------*/',
      '#if (FXAA_QUALITY_PRESET == 23)',
      '    #define FXAA_QUALITY_PS 6',
      '    #define FXAA_QUALITY_P0 1.0',
      '    #define FXAA_QUALITY_P1 1.5',
      '    #define FXAA_QUALITY_P2 2.0',
      '    #define FXAA_QUALITY_P3 2.0',
      '    #define FXAA_QUALITY_P4 2.0',
      '    #define FXAA_QUALITY_P5 8.0',
      '#endif',
      '/*--------------------------------------------------------------------------*/',
      '#if (FXAA_QUALITY_PRESET == 24)',
      '    #define FXAA_QUALITY_PS 7',
      '    #define FXAA_QUALITY_P0 1.0',
      '    #define FXAA_QUALITY_P1 1.5',
      '    #define FXAA_QUALITY_P2 2.0',
      '    #define FXAA_QUALITY_P3 2.0',
      '    #define FXAA_QUALITY_P4 2.0',
      '    #define FXAA_QUALITY_P5 3.0',
      '    #define FXAA_QUALITY_P6 8.0',
      '#endif',
      '/*--------------------------------------------------------------------------*/',
      '#if (FXAA_QUALITY_PRESET == 25)',
      '    #define FXAA_QUALITY_PS 8',
      '    #define FXAA_QUALITY_P0 1.0',
      '    #define FXAA_QUALITY_P1 1.5',
      '    #define FXAA_QUALITY_P2 2.0',
      '    #define FXAA_QUALITY_P3 2.0',
      '    #define FXAA_QUALITY_P4 2.0',
      '    #define FXAA_QUALITY_P5 2.0',
      '    #define FXAA_QUALITY_P6 4.0',
      '    #define FXAA_QUALITY_P7 8.0',
      '#endif',
      '/*--------------------------------------------------------------------------*/',
      '#if (FXAA_QUALITY_PRESET == 26)',
      '    #define FXAA_QUALITY_PS 9',
      '    #define FXAA_QUALITY_P0 1.0',
      '    #define FXAA_QUALITY_P1 1.5',
      '    #define FXAA_QUALITY_P2 2.0',
      '    #define FXAA_QUALITY_P3 2.0',
      '    #define FXAA_QUALITY_P4 2.0',
      '    #define FXAA_QUALITY_P5 2.0',
      '    #define FXAA_QUALITY_P6 2.0',
      '    #define FXAA_QUALITY_P7 4.0',
      '    #define FXAA_QUALITY_P8 8.0',
      '#endif',
      '/*--------------------------------------------------------------------------*/',
      '#if (FXAA_QUALITY_PRESET == 27)',
      '    #define FXAA_QUALITY_PS 10',
      '    #define FXAA_QUALITY_P0 1.0',
      '    #define FXAA_QUALITY_P1 1.5',
      '    #define FXAA_QUALITY_P2 2.0',
      '    #define FXAA_QUALITY_P3 2.0',
      '    #define FXAA_QUALITY_P4 2.0',
      '    #define FXAA_QUALITY_P5 2.0',
      '    #define FXAA_QUALITY_P6 2.0',
      '    #define FXAA_QUALITY_P7 2.0',
      '    #define FXAA_QUALITY_P8 4.0',
      '    #define FXAA_QUALITY_P9 8.0',
      '#endif',
      '/*--------------------------------------------------------------------------*/',
      '#if (FXAA_QUALITY_PRESET == 28)',
      '    #define FXAA_QUALITY_PS 11',
      '    #define FXAA_QUALITY_P0 1.0',
      '    #define FXAA_QUALITY_P1 1.5',
      '    #define FXAA_QUALITY_P2 2.0',
      '    #define FXAA_QUALITY_P3 2.0',
      '    #define FXAA_QUALITY_P4 2.0',
      '    #define FXAA_QUALITY_P5 2.0',
      '    #define FXAA_QUALITY_P6 2.0',
      '    #define FXAA_QUALITY_P7 2.0',
      '    #define FXAA_QUALITY_P8 2.0',
      '    #define FXAA_QUALITY_P9 4.0',
      '    #define FXAA_QUALITY_P10 8.0',
      '#endif',
      '/*--------------------------------------------------------------------------*/',
      '#if (FXAA_QUALITY_PRESET == 29)',
      '    #define FXAA_QUALITY_PS 12',
      '    #define FXAA_QUALITY_P0 1.0',
      '    #define FXAA_QUALITY_P1 1.5',
      '    #define FXAA_QUALITY_P2 2.0',
      '    #define FXAA_QUALITY_P3 2.0',
      '    #define FXAA_QUALITY_P4 2.0',
      '    #define FXAA_QUALITY_P5 2.0',
      '    #define FXAA_QUALITY_P6 2.0',
      '    #define FXAA_QUALITY_P7 2.0',
      '    #define FXAA_QUALITY_P8 2.0',
      '    #define FXAA_QUALITY_P9 2.0',
      '    #define FXAA_QUALITY_P10 4.0',
      '    #define FXAA_QUALITY_P11 8.0',
      '#endif',
      '',
      '/*============================================================================',
      '                     FXAA QUALITY - EXTREME QUALITY',
      '============================================================================*/',
      '#if (FXAA_QUALITY_PRESET == 39)',
      '    #define FXAA_QUALITY_PS 12',
      '    #define FXAA_QUALITY_P0 1.0',
      '    #define FXAA_QUALITY_P1 1.0',
      '    #define FXAA_QUALITY_P2 1.0',
      '    #define FXAA_QUALITY_P3 1.0',
      '    #define FXAA_QUALITY_P4 1.0',
      '    #define FXAA_QUALITY_P5 1.5',
      '    #define FXAA_QUALITY_P6 2.0',
      '    #define FXAA_QUALITY_P7 2.0',
      '    #define FXAA_QUALITY_P8 2.0',
      '    #define FXAA_QUALITY_P9 2.0',
      '    #define FXAA_QUALITY_P10 4.0',
      '    #define FXAA_QUALITY_P11 8.0',
      '#endif',
      '',
      '',
      '',
      '/*============================================================================',
      '',
      '                                API PORTING',
      '',
      '============================================================================*/',
      '#if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)',
      '    #define FxaaBool bool',
      '    #define FxaaDiscard discard',
      '    #define FxaaFloat float',
      '    #define FxaaFloat2 vec2',
      '    #define FxaaFloat3 vec3',
      '    #define FxaaFloat4 vec4',
      '    #define FxaaHalf float',
      '    #define FxaaHalf2 vec2',
      '    #define FxaaHalf3 vec3',
      '    #define FxaaHalf4 vec4',
      '    #define FxaaInt2 ivec2',
      '    #define FxaaSat(x) clamp(x, 0.0, 1.0)',
      '    #define FxaaTex sampler2D',
      '#else',
      '    #define FxaaBool bool',
      '    #define FxaaDiscard clip(-1)',
      '    #define FxaaFloat float',
      '    #define FxaaFloat2 float2',
      '    #define FxaaFloat3 float3',
      '    #define FxaaFloat4 float4',
      '    #define FxaaHalf half',
      '    #define FxaaHalf2 half2',
      '    #define FxaaHalf3 half3',
      '    #define FxaaHalf4 half4',
      '    #define FxaaSat(x) saturate(x)',
      '#endif',
      '/*--------------------------------------------------------------------------*/',
      '#if (FXAA_GLSL_100 == 1)',
      '  #define FxaaTexTop(t, p) texture2D(t, p, 0.0)',
      '  #define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), 0.0)',
      '#endif',
      '/*--------------------------------------------------------------------------*/',
      '#if (FXAA_GLSL_120 == 1)',
      '    // Requires,',
      '    //  #version 120',
      '    // And at least,',
      '    //  #extension GL_EXT_gpu_shader4 : enable',
      '    //  (or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)',
      '    #define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)',
      '    #if (FXAA_FAST_PIXEL_OFFSET == 1)',
      '        #define FxaaTexOff(t, p, o, r) texture2DLodOffset(t, p, 0.0, o)',
      '    #else',
      '        #define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)',
      '    #endif',
      '    #if (FXAA_GATHER4_ALPHA == 1)',
      '        // use #extension GL_ARB_gpu_shader5 : enable',
      '        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)',
      '        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)',
      '        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)',
      '        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)',
      '    #endif',
      '#endif',
      '/*--------------------------------------------------------------------------*/',
      '#if (FXAA_GLSL_130 == 1)',
      '    // Requires "#version 130" or better',
      '    #define FxaaTexTop(t, p) textureLod(t, p, 0.0)',
      '    #define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)',
      '    #if (FXAA_GATHER4_ALPHA == 1)',
      '        // use #extension GL_ARB_gpu_shader5 : enable',
      '        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)',
      '        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)',
      '        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)',
      '        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)',
      '    #endif',
      '#endif',
      '/*--------------------------------------------------------------------------*/',
      '#if (FXAA_HLSL_3 == 1)',
      '    #define FxaaInt2 float2',
      '    #define FxaaTex sampler2D',
      '    #define FxaaTexTop(t, p) tex2Dlod(t, float4(p, 0.0, 0.0))',
      '    #define FxaaTexOff(t, p, o, r) tex2Dlod(t, float4(p + (o * r), 0, 0))',
      '#endif',
      '/*--------------------------------------------------------------------------*/',
      '#if (FXAA_HLSL_4 == 1)',
      '    #define FxaaInt2 int2',
      '    struct FxaaTex { SamplerState smpl; Texture2D tex; };',
      '    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)',
      '    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)',
      '#endif',
      '/*--------------------------------------------------------------------------*/',
      '#if (FXAA_HLSL_5 == 1)',
      '    #define FxaaInt2 int2',
      '    struct FxaaTex { SamplerState smpl; Texture2D tex; };',
      '    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)',
      '    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)',
      '    #define FxaaTexAlpha4(t, p) t.tex.GatherAlpha(t.smpl, p)',
      '    #define FxaaTexOffAlpha4(t, p, o) t.tex.GatherAlpha(t.smpl, p, o)',
      '    #define FxaaTexGreen4(t, p) t.tex.GatherGreen(t.smpl, p)',
      '    #define FxaaTexOffGreen4(t, p, o) t.tex.GatherGreen(t.smpl, p, o)',
      '#endif',
      '',
      '',
      '/*============================================================================',
      '                   GREEN AS LUMA OPTION SUPPORT FUNCTION',
      '============================================================================*/',
      '#if (FXAA_GREEN_AS_LUMA == 0)',
      '    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.w; }',
      '#else',
      '    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }',
      '#endif',
      '',
      '',
      '',
      '',
      '/*============================================================================',
      '',
      '                             FXAA3 QUALITY - PC',
      '',
      '============================================================================*/',
      '#if (FXAA_PC == 1)',
      '/*--------------------------------------------------------------------------*/',
      'FxaaFloat4 FxaaPixelShader(',
      '    //',
      '    // Use noperspective interpolation here (turn off perspective interpolation).',
      '    // {xy} = center of pixel',
      '    FxaaFloat2 pos,',
      '    //',
      '    // Used only for FXAA Console, and not used on the 360 version.',
      '    // Use noperspective interpolation here (turn off perspective interpolation).',
      '    // {xy_} = upper left of pixel',
      '    // {_zw} = lower right of pixel',
      '    FxaaFloat4 fxaaConsolePosPos,',
      '    //',
      '    // Input color texture.',
      '    // {rgb_} = color in linear or perceptual color space',
      '    // if (FXAA_GREEN_AS_LUMA == 0)',
      '    //     {__a} = luma in perceptual color space (not linear)',
      '    FxaaTex tex,',
      '    //',
      '    // Only used on the optimized 360 version of FXAA Console.',
      '    // For everything but 360, just use the same input here as for "tex".',
      '    // For 360, same texture, just alias with a 2nd sampler.',
      '    // This sampler needs to have an exponent bias of -1.',
      '    FxaaTex fxaaConsole360TexExpBiasNegOne,',
      '    //',
      '    // Only used on the optimized 360 version of FXAA Console.',
      '    // For everything but 360, just use the same input here as for "tex".',
      '    // For 360, same texture, just alias with a 3nd sampler.',
      '    // This sampler needs to have an exponent bias of -2.',
      '    FxaaTex fxaaConsole360TexExpBiasNegTwo,',
      '    //',
      '    // Only used on FXAA Quality.',
      '    // This must be from a constant/uniform.',
      '    // {x_} = 1.0/screenWidthInPixels',
      '    // {_y} = 1.0/screenHeightInPixels',
      '    FxaaFloat2 fxaaQualityRcpFrame,',
      '    //',
      '    // Only used on FXAA Console.',
      '    // This must be from a constant/uniform.',
      '    // This effects sub-pixel AA quality and inversely sharpness.',
      '    //   Where N ranges between,',
      '    //     N = 0.50 (default)',
      '    //     N = 0.33 (sharper)',
      '    // {x__} = -N/screenWidthInPixels',
      '    // {_y_} = -N/screenHeightInPixels',
      '    // {_z_} =  N/screenWidthInPixels',
      '    // {__w} =  N/screenHeightInPixels',
      '    FxaaFloat4 fxaaConsoleRcpFrameOpt,',
      '    //',
      '    // Only used on FXAA Console.',
      '    // Not used on 360, but used on PS3 and PC.',
      '    // This must be from a constant/uniform.',
      '    // {x__} = -2.0/screenWidthInPixels',
      '    // {_y_} = -2.0/screenHeightInPixels',
      '    // {_z_} =  2.0/screenWidthInPixels',
      '    // {__w} =  2.0/screenHeightInPixels',
      '    FxaaFloat4 fxaaConsoleRcpFrameOpt2,',
      '    //',
      '    // Only used on FXAA Console.',
      '    // Only used on 360 in place of fxaaConsoleRcpFrameOpt2.',
      '    // This must be from a constant/uniform.',
      '    // {x__} =  8.0/screenWidthInPixels',
      '    // {_y_} =  8.0/screenHeightInPixels',
      '    // {_z_} = -4.0/screenWidthInPixels',
      '    // {__w} = -4.0/screenHeightInPixels',
      '    FxaaFloat4 fxaaConsole360RcpFrameOpt2,',
      '    //',
      '    // Only used on FXAA Quality.',
      '    // This used to be the FXAA_QUALITY_SUBPIX define.',
      '    // It is here now to allow easier tuning.',
      '    // Choose the amount of sub-pixel aliasing removal.',
      '    // This can effect sharpness.',
      '    //   1.00 - upper limit (softer)',
      '    //   0.75 - default amount of filtering',
      '    //   0.50 - lower limit (sharper, less sub-pixel aliasing removal)',
      '    //   0.25 - almost off',
      '    //   0.00 - completely off',
      '    FxaaFloat fxaaQualitySubpix,',
      '    //',
      '    // Only used on FXAA Quality.',
      '    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.',
      '    // It is here now to allow easier tuning.',
      '    // The minimum amount of local contrast required to apply algorithm.',
      '    //   0.333 - too little (faster)',
      '    //   0.250 - low quality',
      '    //   0.166 - default',
      '    //   0.125 - high quality',
      '    //   0.063 - overkill (slower)',
      '    FxaaFloat fxaaQualityEdgeThreshold,',
      '    //',
      '    // Only used on FXAA Quality.',
      '    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.',
      '    // It is here now to allow easier tuning.',
      '    // Trims the algorithm from processing darks.',
      '    //   0.0833 - upper limit (default, the start of visible unfiltered edges)',
      '    //   0.0625 - high quality (faster)',
      '    //   0.0312 - visible limit (slower)',
      '    // Special notes when using FXAA_GREEN_AS_LUMA,',
      '    //   Likely want to set this to zero.',
      '    //   As colors that are mostly not-green',
      '    //   will appear very dark in the green channel!',
      '    //   Tune by looking at mostly non-green content,',
      '    //   then start at zero and increase until aliasing is a problem.',
      '    FxaaFloat fxaaQualityEdgeThresholdMin,',
      '    //',
      '    // Only used on FXAA Console.',
      '    // This used to be the FXAA_CONSOLE_EDGE_SHARPNESS define.',
      '    // It is here now to allow easier tuning.',
      '    // This does not effect PS3, as this needs to be compiled in.',
      '    //   Use FXAA_CONSOLE_PS3_EDGE_SHARPNESS for PS3.',
      '    //   Due to the PS3 being ALU bound,',
      '    //   there are only three safe values here: 2 and 4 and 8.',
      '    //   These options use the shaders ability to a free *|/ by 2|4|8.',
      '    // For all other platforms can be a non-power of two.',
      '    //   8.0 is sharper (default!!!)',
      '    //   4.0 is softer',
      '    //   2.0 is really soft (good only for vector graphics inputs)',
      '    FxaaFloat fxaaConsoleEdgeSharpness,',
      '    //',
      '    // Only used on FXAA Console.',
      '    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD define.',
      '    // It is here now to allow easier tuning.',
      '    // This does not effect PS3, as this needs to be compiled in.',
      '    //   Use FXAA_CONSOLE_PS3_EDGE_THRESHOLD for PS3.',
      '    //   Due to the PS3 being ALU bound,',
      '    //   there are only two safe values here: 1/4 and 1/8.',
      '    //   These options use the shaders ability to a free *|/ by 2|4|8.',
      '    // The console setting has a different mapping than the quality setting.',
      '    // Other platforms can use other values.',
      '    //   0.125 leaves less aliasing, but is softer (default!!!)',
      '    //   0.25 leaves more aliasing, and is sharper',
      '    FxaaFloat fxaaConsoleEdgeThreshold,',
      '    //',
      '    // Only used on FXAA Console.',
      '    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD_MIN define.',
      '    // It is here now to allow easier tuning.',
      '    // Trims the algorithm from processing darks.',
      '    // The console setting has a different mapping than the quality setting.',
      '    // This only applies when FXAA_EARLY_EXIT is 1.',
      '    // This does not apply to PS3,',
      '    // PS3 was simplified to avoid more shader instructions.',
      '    //   0.06 - faster but more aliasing in darks',
      '    //   0.05 - default',
      '    //   0.04 - slower and less aliasing in darks',
      '    // Special notes when using FXAA_GREEN_AS_LUMA,',
      '    //   Likely want to set this to zero.',
      '    //   As colors that are mostly not-green',
      '    //   will appear very dark in the green channel!',
      '    //   Tune by looking at mostly non-green content,',
      '    //   then start at zero and increase until aliasing is a problem.',
      '    FxaaFloat fxaaConsoleEdgeThresholdMin,',
      '    //',
      '    // Extra constants for 360 FXAA Console only.',
      '    // Use zeros or anything else for other platforms.',
      '    // These must be in physical constant registers and NOT immedates.',
      '    // Immedates will result in compiler un-optimizing.',
      '    // {xyzw} = float4(1.0, -1.0, 0.25, -0.25)',
      '    FxaaFloat4 fxaaConsole360ConstDir',
      ') {',
      '/*--------------------------------------------------------------------------*/',
      '    FxaaFloat2 posM;',
      '    posM.x = pos.x;',
      '    posM.y = pos.y;',
      '    #if (FXAA_GATHER4_ALPHA == 1)',
      '        #if (FXAA_DISCARD == 0)',
      '            FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);',
      '            #if (FXAA_GREEN_AS_LUMA == 0)',
      '                #define lumaM rgbyM.w',
      '            #else',
      '                #define lumaM rgbyM.y',
      '            #endif',
      '        #endif',
      '        #if (FXAA_GREEN_AS_LUMA == 0)',
      '            FxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);',
      '            FxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));',
      '        #else',
      '            FxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);',
      '            FxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));',
      '        #endif',
      '        #if (FXAA_DISCARD == 1)',
      '            #define lumaM luma4A.w',
      '        #endif',
      '        #define lumaE luma4A.z',
      '        #define lumaS luma4A.x',
      '        #define lumaSE luma4A.y',
      '        #define lumaNW luma4B.w',
      '        #define lumaN luma4B.z',
      '        #define lumaW luma4B.x',
      '    #else',
      '        FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);',
      '        #if (FXAA_GREEN_AS_LUMA == 0)',
      '            #define lumaM rgbyM.w',
      '        #else',
      '            #define lumaM rgbyM.y',
      '        #endif',
      '        #if (FXAA_GLSL_100 == 1)',
      '          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0, 1.0), fxaaQualityRcpFrame.xy));',
      '          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 0.0), fxaaQualityRcpFrame.xy));',
      '          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0,-1.0), fxaaQualityRcpFrame.xy));',
      '          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));',
      '        #else',
      '          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));',
      '          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));',
      '          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));',
      '          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));',
      '        #endif',
      '    #endif',
      '/*--------------------------------------------------------------------------*/',
      '    FxaaFloat maxSM = max(lumaS, lumaM);',
      '    FxaaFloat minSM = min(lumaS, lumaM);',
      '    FxaaFloat maxESM = max(lumaE, maxSM);',
      '    FxaaFloat minESM = min(lumaE, minSM);',
      '    FxaaFloat maxWN = max(lumaN, lumaW);',
      '    FxaaFloat minWN = min(lumaN, lumaW);',
      '    FxaaFloat rangeMax = max(maxWN, maxESM);',
      '    FxaaFloat rangeMin = min(minWN, minESM);',
      '    FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;',
      '    FxaaFloat range = rangeMax - rangeMin;',
      '    FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);',
      '    FxaaBool earlyExit = range < rangeMaxClamped;',
      '/*--------------------------------------------------------------------------*/',
      '    if(earlyExit)',
      '        #if (FXAA_DISCARD == 1)',
      '            FxaaDiscard;',
      '        #else',
      '            return rgbyM;',
      '        #endif',
      '/*--------------------------------------------------------------------------*/',
      '    #if (FXAA_GATHER4_ALPHA == 0)',
      '        #if (FXAA_GLSL_100 == 1)',
      '          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0,-1.0), fxaaQualityRcpFrame.xy));',
      '          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 1.0), fxaaQualityRcpFrame.xy));',
      '          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0,-1.0), fxaaQualityRcpFrame.xy));',
      '          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));',
      '        #else',
      '          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));',
      '          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));',
      '          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));',
      '          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));',
      '        #endif',
      '    #else',
      '        FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));',
      '        FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));',
      '    #endif',
      '/*--------------------------------------------------------------------------*/',
      '    FxaaFloat lumaNS = lumaN + lumaS;',
      '    FxaaFloat lumaWE = lumaW + lumaE;',
      '    FxaaFloat subpixRcpRange = 1.0/range;',
      '    FxaaFloat subpixNSWE = lumaNS + lumaWE;',
      '    FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;',
      '    FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;',
      '/*--------------------------------------------------------------------------*/',
      '    FxaaFloat lumaNESE = lumaNE + lumaSE;',
      '    FxaaFloat lumaNWNE = lumaNW + lumaNE;',
      '    FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;',
      '    FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;',
      '/*--------------------------------------------------------------------------*/',
      '    FxaaFloat lumaNWSW = lumaNW + lumaSW;',
      '    FxaaFloat lumaSWSE = lumaSW + lumaSE;',
      '    FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);',
      '    FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);',
      '    FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;',
      '    FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;',
      '    FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;',
      '    FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;',
      '/*--------------------------------------------------------------------------*/',
      '    FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;',
      '    FxaaFloat lengthSign = fxaaQualityRcpFrame.x;',
      '    FxaaBool horzSpan = edgeHorz >= edgeVert;',
      '    FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;',
      '/*--------------------------------------------------------------------------*/',
      '    if(!horzSpan) lumaN = lumaW;',
      '    if(!horzSpan) lumaS = lumaE;',
      '    if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;',
      '    FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;',
      '/*--------------------------------------------------------------------------*/',
      '    FxaaFloat gradientN = lumaN - lumaM;',
      '    FxaaFloat gradientS = lumaS - lumaM;',
      '    FxaaFloat lumaNN = lumaN + lumaM;',
      '    FxaaFloat lumaSS = lumaS + lumaM;',
      '    FxaaBool pairN = abs(gradientN) >= abs(gradientS);',
      '    FxaaFloat gradient = max(abs(gradientN), abs(gradientS));',
      '    if(pairN) lengthSign = -lengthSign;',
      '    FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);',
      '/*--------------------------------------------------------------------------*/',
      '    FxaaFloat2 posB;',
      '    posB.x = posM.x;',
      '    posB.y = posM.y;',
      '    FxaaFloat2 offNP;',
      '    offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;',
      '    offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;',
      '    if(!horzSpan) posB.x += lengthSign * 0.5;',
      '    if( horzSpan) posB.y += lengthSign * 0.5;',
      '/*--------------------------------------------------------------------------*/',
      '    FxaaFloat2 posN;',
      '    posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;',
      '    posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;',
      '    FxaaFloat2 posP;',
      '    posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;',
      '    posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;',
      '    FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;',
      '    FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));',
      '    FxaaFloat subpixE = subpixC * subpixC;',
      '    FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));',
      '/*--------------------------------------------------------------------------*/',
      '    if(!pairN) lumaNN = lumaSS;',
      '    FxaaFloat gradientScaled = gradient * 1.0/4.0;',
      '    FxaaFloat lumaMM = lumaM - lumaNN * 0.5;',
      '    FxaaFloat subpixF = subpixD * subpixE;',
      '    FxaaBool lumaMLTZero = lumaMM < 0.0;',
      '/*--------------------------------------------------------------------------*/',
      '    lumaEndN -= lumaNN * 0.5;',
      '    lumaEndP -= lumaNN * 0.5;',
      '    FxaaBool doneN = abs(lumaEndN) >= gradientScaled;',
      '    FxaaBool doneP = abs(lumaEndP) >= gradientScaled;',
      '    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;',
      '    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;',
      '    FxaaBool doneNP = (!doneN) || (!doneP);',
      '    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;',
      '    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;',
      '/*--------------------------------------------------------------------------*/',
      '    if(doneNP) {',
      '        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));',
      '        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));',
      '        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;',
      '        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;',
      '        doneN = abs(lumaEndN) >= gradientScaled;',
      '        doneP = abs(lumaEndP) >= gradientScaled;',
      '        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;',
      '        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;',
      '        doneNP = (!doneN) || (!doneP);',
      '        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;',
      '        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;',
      '/*--------------------------------------------------------------------------*/',
      '        #if (FXAA_QUALITY_PS > 3)',
      '        if(doneNP) {',
      '            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));',
      '            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));',
      '            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;',
      '            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;',
      '            doneN = abs(lumaEndN) >= gradientScaled;',
      '            doneP = abs(lumaEndP) >= gradientScaled;',
      '            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;',
      '            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;',
      '            doneNP = (!doneN) || (!doneP);',
      '            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;',
      '            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;',
      '/*--------------------------------------------------------------------------*/',
      '            #if (FXAA_QUALITY_PS > 4)',
      '            if(doneNP) {',
      '                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));',
      '                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));',
      '                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;',
      '                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;',
      '                doneN = abs(lumaEndN) >= gradientScaled;',
      '                doneP = abs(lumaEndP) >= gradientScaled;',
      '                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;',
      '                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;',
      '                doneNP = (!doneN) || (!doneP);',
      '                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;',
      '                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;',
      '/*--------------------------------------------------------------------------*/',
      '                #if (FXAA_QUALITY_PS > 5)',
      '                if(doneNP) {',
      '                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));',
      '                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));',
      '                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;',
      '                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;',
      '                    doneN = abs(lumaEndN) >= gradientScaled;',
      '                    doneP = abs(lumaEndP) >= gradientScaled;',
      '                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;',
      '                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;',
      '                    doneNP = (!doneN) || (!doneP);',
      '                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;',
      '                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;',
      '/*--------------------------------------------------------------------------*/',
      '                    #if (FXAA_QUALITY_PS > 6)',
      '                    if(doneNP) {',
      '                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));',
      '                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));',
      '                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;',
      '                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;',
      '                        doneN = abs(lumaEndN) >= gradientScaled;',
      '                        doneP = abs(lumaEndP) >= gradientScaled;',
      '                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;',
      '                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;',
      '                        doneNP = (!doneN) || (!doneP);',
      '                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;',
      '                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;',
      '/*--------------------------------------------------------------------------*/',
      '                        #if (FXAA_QUALITY_PS > 7)',
      '                        if(doneNP) {',
      '                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));',
      '                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));',
      '                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;',
      '                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;',
      '                            doneN = abs(lumaEndN) >= gradientScaled;',
      '                            doneP = abs(lumaEndP) >= gradientScaled;',
      '                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;',
      '                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;',
      '                            doneNP = (!doneN) || (!doneP);',
      '                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;',
      '                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;',
      '/*--------------------------------------------------------------------------*/',
      '    #if (FXAA_QUALITY_PS > 8)',
      '    if(doneNP) {',
      '        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));',
      '        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));',
      '        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;',
      '        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;',
      '        doneN = abs(lumaEndN) >= gradientScaled;',
      '        doneP = abs(lumaEndP) >= gradientScaled;',
      '        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;',
      '        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;',
      '        doneNP = (!doneN) || (!doneP);',
      '        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;',
      '        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;',
      '/*--------------------------------------------------------------------------*/',
      '        #if (FXAA_QUALITY_PS > 9)',
      '        if(doneNP) {',
      '            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));',
      '            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));',
      '            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;',
      '            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;',
      '            doneN = abs(lumaEndN) >= gradientScaled;',
      '            doneP = abs(lumaEndP) >= gradientScaled;',
      '            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;',
      '            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;',
      '            doneNP = (!doneN) || (!doneP);',
      '            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;',
      '            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;',
      '/*--------------------------------------------------------------------------*/',
      '            #if (FXAA_QUALITY_PS > 10)',
      '            if(doneNP) {',
      '                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));',
      '                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));',
      '                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;',
      '                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;',
      '                doneN = abs(lumaEndN) >= gradientScaled;',
      '                doneP = abs(lumaEndP) >= gradientScaled;',
      '                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;',
      '                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;',
      '                doneNP = (!doneN) || (!doneP);',
      '                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;',
      '                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;',
      '/*--------------------------------------------------------------------------*/',
      '                #if (FXAA_QUALITY_PS > 11)',
      '                if(doneNP) {',
      '                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));',
      '                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));',
      '                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;',
      '                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;',
      '                    doneN = abs(lumaEndN) >= gradientScaled;',
      '                    doneP = abs(lumaEndP) >= gradientScaled;',
      '                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;',
      '                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;',
      '                    doneNP = (!doneN) || (!doneP);',
      '                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;',
      '                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;',
      '/*--------------------------------------------------------------------------*/',
      '                    #if (FXAA_QUALITY_PS > 12)',
      '                    if(doneNP) {',
      '                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));',
      '                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));',
      '                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;',
      '                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;',
      '                        doneN = abs(lumaEndN) >= gradientScaled;',
      '                        doneP = abs(lumaEndP) >= gradientScaled;',
      '                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;',
      '                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;',
      '                        doneNP = (!doneN) || (!doneP);',
      '                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;',
      '                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;',
      '/*--------------------------------------------------------------------------*/',
      '                    }',
      '                    #endif',
      '/*--------------------------------------------------------------------------*/',
      '                }',
      '                #endif',
      '/*--------------------------------------------------------------------------*/',
      '            }',
      '            #endif',
      '/*--------------------------------------------------------------------------*/',
      '        }',
      '        #endif',
      '/*--------------------------------------------------------------------------*/',
      '    }',
      '    #endif',
      '/*--------------------------------------------------------------------------*/',
      '                        }',
      '                        #endif',
      '/*--------------------------------------------------------------------------*/',
      '                    }',
      '                    #endif',
      '/*--------------------------------------------------------------------------*/',
      '                }',
      '                #endif',
      '/*--------------------------------------------------------------------------*/',
      '            }',
      '            #endif',
      '/*--------------------------------------------------------------------------*/',
      '        }',
      '        #endif',
      '/*--------------------------------------------------------------------------*/',
      '    }',
      '/*--------------------------------------------------------------------------*/',
      '    FxaaFloat dstN = posM.x - posN.x;',
      '    FxaaFloat dstP = posP.x - posM.x;',
      '    if(!horzSpan) dstN = posM.y - posN.y;',
      '    if(!horzSpan) dstP = posP.y - posM.y;',
      '/*--------------------------------------------------------------------------*/',
      '    FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;',
      '    FxaaFloat spanLength = (dstP + dstN);',
      '    FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;',
      '    FxaaFloat spanLengthRcp = 1.0/spanLength;',
      '/*--------------------------------------------------------------------------*/',
      '    FxaaBool directionN = dstN < dstP;',
      '    FxaaFloat dst = min(dstN, dstP);',
      '    FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;',
      '    FxaaFloat subpixG = subpixF * subpixF;',
      '    FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;',
      '    FxaaFloat subpixH = subpixG * fxaaQualitySubpix;',
      '/*--------------------------------------------------------------------------*/',
      '    FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;',
      '    FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);',
      '    if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;',
      '    if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;',
      '    #if (FXAA_DISCARD == 1)',
      '        return FxaaTexTop(tex, posM);',
      '    #else',
      '        return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);',
      '    #endif',
      '}',
      '/*==========================================================================*/',
      '#endif',
      '',
      'void main() {',
      '  gl_FragColor = FxaaPixelShader(',
      '    vUv,',
      '    vec4(0.0),',
      '    tDiffuse,',
      '    tDiffuse,',
      '    tDiffuse,',
      '    resolution,',
      '    vec4(0.0),',
      '    vec4(0.0),',
      '    vec4(0.0),',
      '    0.75,',
      '    0.166,',
      '    0.0833,',
      '    0.0,',
      '    0.0,',
      '    0.0,',
      '    vec4(0.0)',
      '  );',
      '',
      '  // TODO avoid querying texture twice for same texel',
      '  gl_FragColor.a = texture2D(tDiffuse, vUv).a;',
      '}',
    ].join('\n'),
  }),
  (THREE.BrightnessContrastShader = {
    uniforms: {
      tDiffuse: { value: null },
      brightness: { value: 0 },
      contrast: { value: 0 },
      hue: { value: 0 },
      saturation: { value: 0 },
    },
    vertexShader: [
      'varying vec2 vUv;',
      'void main() {',
      'vUv = uv;',
      'gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',
      '}',
    ].join('\n'),
    fragmentShader: [
      'uniform sampler2D tDiffuse;',
      'uniform float brightness;',
      'uniform float contrast;',
      'uniform float hue;',
      'uniform float saturation;',
      'varying vec2 vUv;',
      'void main() {',
      'gl_FragColor = texture2D( tDiffuse, vUv );',
      'gl_FragColor.rgb += brightness;',
      'float angle = hue * 3.14159265;',
      'float s = sin(angle), c = cos(angle);',
      'vec3 weights = (vec3(2.0 * c, -sqrt(3.0) * s - c, sqrt(3.0) * s - c) + 1.0) / 3.0;',
      'float len = length(gl_FragColor.rgb);',
      'gl_FragColor.rgb = vec3(',
      'dot(gl_FragColor.rgb, weights.xyz),',
      'dot(gl_FragColor.rgb, weights.zxy),',
      'dot(gl_FragColor.rgb, weights.yzx)',
      ');',
      'float average = (gl_FragColor.r + gl_FragColor.g + gl_FragColor.b) / 3.0;',
      'if (saturation > 0.0) {',
      'gl_FragColor.rgb += (average - gl_FragColor.rgb) * (1.0 - 1.0 / (1.001 - saturation));',
      '} else {',
      'gl_FragColor.rgb += (average - gl_FragColor.rgb) * (-saturation);',
      '}',
      'if (contrast > 0.0) {',
      'gl_FragColor.rgb = (gl_FragColor.rgb - 0.5) / (1.0 - contrast) + 0.5;',
      '} else {',
      'gl_FragColor.rgb = (gl_FragColor.rgb - 0.5) * (1.0 + contrast) + 0.5;',
      '}',
      '}',
    ].join('\n'),
  }),
  (function (e, t) {
    'undefined' != typeof module && module.exports
      ? (module.exports = t())
      : 'function' == typeof define && define.amd
      ? define(t)
      : (e.h337 = t());
  })(this, function () {
    var l,
      n = {
        defaultRadius: 40,
        defaultRenderer: 'canvas2d',
        defaultGradient: {
          0.25: 'rgb(0,0,255)',
          0.55: 'rgb(0,255,0)',
          0.85: 'yellow',
          1: 'rgb(255,0,0)',
        },
        defaultMaxOpacity: 1,
        defaultMinOpacity: 0,
        defaultBlur: 0.85,
        defaultXField: 'x',
        defaultYField: 'y',
        defaultValueField: 'value',
        plugins: {},
      },
      i =
        ((l = n.defaultRadius),
        (e.prototype = {
          _organiseData: function (e, t) {
            var A = e[this._xField],
              r = e[this._yField],
              n = this._radi,
              i = this._data,
              a = this._max,
              o = this._min,
              s = e[this._valueField] || 1,
              e = e.radius || this._cfgRadius || l;
            return (
              i[A] || ((i[A] = []), (n[A] = [])),
              i[A][r] ? (i[A][r] += s) : ((i[A][r] = s), (n[A][r] = e)),
              i[A][r] > a
                ? (t ? this.setDataMax(i[A][r]) : (this._max = i[A][r]), !1)
                : { x: A, y: r, value: s, radius: e, min: o, max: a }
            );
          },
          _unOrganizeData: function () {
            var e,
              t = [],
              A = this._data,
              r = this._radi;
            for (e in A)
              for (var n in A[e])
                t.push({ x: e, y: n, radius: r[e][n], value: A[e][n] });
            return { min: this._min, max: this._max, data: t };
          },
          _onExtremaChange: function () {
            this._coordinator.emit('extremachange', {
              min: this._min,
              max: this._max,
            });
          },
          addData: function () {
            if (0 < arguments[0].length)
              for (var e = arguments[0], t = e.length; t--; )
                this.addData.call(this, e[t]);
            else {
              var A = this._organiseData(arguments[0], !0);
              A &&
                this._coordinator.emit('renderpartial', {
                  min: this._min,
                  max: this._max,
                  data: [A],
                });
            }
            return this;
          },
          setData: function (e) {
            var t = e.data,
              A = t.length;
            (this._data = []), (this._radi = []);
            for (var r = 0; r < A; r++) this._organiseData(t[r], !1);
            return (
              (this._max = e.max),
              (this._min = e.min || 0),
              this._onExtremaChange(),
              this._coordinator.emit('renderall', this._getInternalData()),
              this
            );
          },
          removeData: function () {},
          setDataMax: function (e) {
            return (
              (this._max = e),
              this._onExtremaChange(),
              this._coordinator.emit('renderall', this._getInternalData()),
              this
            );
          },
          setDataMin: function (e) {
            return (
              (this._min = e),
              this._onExtremaChange(),
              this._coordinator.emit('renderall', this._getInternalData()),
              this
            );
          },
          setCoordinator: function (e) {
            this._coordinator = e;
          },
          _getInternalData: function () {
            return {
              max: this._max,
              min: this._min,
              data: this._data,
              radi: this._radi,
            };
          },
          getData: function () {
            return this._unOrganizeData();
          },
        }),
        e);
    function e(e) {
      (this._coordinator = {}),
        (this._data = []),
        (this._radi = []),
        (this._min = 0),
        (this._max = 1),
        (this._xField = e.xField || e.defaultXField),
        (this._yField = e.yField || e.defaultYField),
        (this._valueField = e.valueField || e.defaultValueField),
        e.radius && (this._cfgRadius = e.radius);
    }
    function a(e) {
      var t,
        A = e.gradient || e.defaultGradient,
        r = (e = document.createElement('canvas')).getContext('2d'),
        n =
          ((e.width = 256),
          (e.height = 1),
          r.createLinearGradient(0, 0, 256, 1));
      for (t in A) n.addColorStop(t, A[t]);
      return (
        (r.fillStyle = n),
        r.fillRect(0, 0, 256, 1),
        r.getImageData(0, 0, 256, 1).data
      );
    }
    function t(e) {
      var t = e.container,
        A = (this.shadowCanvas = document.createElement('canvas')),
        r = (this.canvas = e.canvas || document.createElement('canvas')),
        n =
          ((this._renderBoundaries = [1e4, 1e4, 0, 0]),
          getComputedStyle(e.container) || {});
      (r.className = 'heatmap-canvas'),
        (this._width =
          r.width =
          A.width =
            e.width || +n.width.replace(/px/, '')),
        (this._height =
          r.height =
          A.height =
            e.height || +n.height.replace(/px/, '')),
        (this.shadowCtx = A.getContext('2d')),
        (this.ctx = r.getContext('2d')),
        (r.style.cssText = A.style.cssText = 'position:absolute;left:0;top:0;'),
        (t.style.position = 'relative'),
        t.appendChild(r),
        (this._palette = a(e)),
        (this._templates = {}),
        this._setStyles(e);
    }
    A = !(t.prototype = {
      renderPartial: function (e) {
        0 < e.data.length && (this._drawAlpha(e), this._colorize());
      },
      renderAll: function (e) {
        this._clear(),
          0 < e.data.length &&
            (this._drawAlpha(
              (function (e) {
                for (
                  var t = [],
                    A = e.min,
                    r = e.max,
                    n = e.radi,
                    e = e.data,
                    i = Object.keys(e),
                    a = i.length;
                  a--;

                )
                  for (
                    var o = i[a], s = Object.keys(e[o]), l = s.length;
                    l--;

                  ) {
                    var c = s[l],
                      u = e[o][c],
                      h = n[o][c];
                    t.push({ x: o, y: c, value: u, radius: h });
                  }
                return { min: A, max: r, data: t };
              })(e),
            ),
            this._colorize());
      },
      _updateGradient: function (e) {
        this._palette = a(e);
      },
      updateConfig: function (e) {
        e.gradient && this._updateGradient(e), this._setStyles(e);
      },
      setDimensions: function (e, t) {
        (this._width = e),
          (this._height = t),
          (this.canvas.width = this.shadowCanvas.width = e),
          (this.canvas.height = this.shadowCanvas.height = t);
      },
      _clear: function () {
        this.shadowCtx.clearRect(0, 0, this._width, this._height),
          this.ctx.clearRect(0, 0, this._width, this._height);
      },
      _setStyles: function (e) {
        (this._blur = 0 == e.blur ? 0 : e.blur || e.defaultBlur),
          e.backgroundColor &&
            (this.canvas.style.backgroundColor = e.backgroundColor),
          (this._width =
            this.canvas.width =
            this.shadowCanvas.width =
              e.width || this._width),
          (this._height =
            this.canvas.height =
            this.shadowCanvas.height =
              e.height || this._height),
          (this._opacity = 255 * (e.opacity || 0)),
          (this._maxOpacity = 255 * (e.maxOpacity || e.defaultMaxOpacity)),
          (this._minOpacity = 255 * (e.minOpacity || e.defaultMinOpacity)),
          (this._useGradientOpacity = !!e.useGradientOpacity);
      },
      _drawAlpha: function (e) {
        for (
          var t,
            A,
            r,
            n,
            i,
            a = (this._min = e.min),
            o = (this._max = e.max),
            s = (e = e.data || []).length,
            l = 1 - this._blur;
          s--;

        ) {
          var c,
            u = e[s],
            h = u.x,
            d = u.y,
            p = u.radius,
            u = Math.min(u.value, o),
            h = h - p,
            d = d - p,
            f = this.shadowCtx,
            g =
              (this._templates[p]
                ? (c = this._templates[p])
                : (this._templates[p] =
                    ((t = p),
                    (A = l),
                    (i = g = n = r = void 0),
                    (r = document.createElement('canvas')),
                    (n = r.getContext('2d')),
                    (i = g = t),
                    (r.width = r.height = 2 * t),
                    1 == A
                      ? (n.beginPath(),
                        n.arc(g, i, t, 0, 2 * Math.PI, !1),
                        (n.fillStyle = 'rgba(0,0,0,1)'),
                        n.fill())
                      : ((A = n.createRadialGradient(
                          g,
                          i,
                          t * A,
                          g,
                          i,
                          t,
                        )).addColorStop(0, 'rgba(0,0,0,1)'),
                        A.addColorStop(1, 'rgba(0,0,0,0)'),
                        (n.fillStyle = A),
                        n.fillRect(0, 0, 2 * t, 2 * t)),
                    (c = r))),
              (u - a) / (o - a));
          (f.globalAlpha = g < 0.01 ? 0.01 : g),
            f.drawImage(c, h, d),
            h < this._renderBoundaries[0] && (this._renderBoundaries[0] = h),
            d < this._renderBoundaries[1] && (this._renderBoundaries[1] = d),
            h + 2 * p > this._renderBoundaries[2] &&
              (this._renderBoundaries[2] = h + 2 * p),
            d + 2 * p > this._renderBoundaries[3] &&
              (this._renderBoundaries[3] = d + 2 * p);
        }
      },
      _colorize: function () {
        for (
          var e = this._renderBoundaries[0],
            t = this._renderBoundaries[1],
            A = this._renderBoundaries[2] - e,
            r = this._renderBoundaries[3] - t,
            n = this._width,
            i = this._height,
            a = this._opacity,
            o = this._maxOpacity,
            s = this._minOpacity,
            l = this._useGradientOpacity,
            n = this.shadowCtx.getImageData(
              (e = e < 0 ? 0 : e),
              (t = t < 0 ? 0 : t),
              (A = n < e + A ? n - e : A),
              (r = i < t + r ? i - t : r),
            ),
            c = n.data,
            u = c.length,
            h = this._palette,
            d = 3;
          d < u;
          d += 4
        ) {
          var p = c[d],
            f = 4 * p;
          f &&
            ((p = 0 < a ? a : p < o ? (p < s ? s : p) : o),
            (c[d - 3] = h[f]),
            (c[d - 2] = h[1 + f]),
            (c[d - 1] = h[2 + f]),
            (c[d] = l ? h[3 + f] : p));
        }
        (n.data = c),
          this.ctx.putImageData(n, e, t),
          (this._renderBoundaries = [1e3, 1e3, 0, 0]);
      },
      getValueAt: function (e) {
        var e = this.shadowCtx.getImageData(e.x, e.y, 1, 1).data[3],
          t = this._max,
          A = this._min;
        return (Math.abs(t - A) * (e / 255)) >> 0;
      },
      getDataURL: function () {
        return this.canvas.toDataURL();
      },
    });
    var A,
      o,
      s = (A = 'canvas2d' === n.defaultRenderer ? t : A),
      c = function () {
        for (var e = {}, t = arguments.length, A = 0; A < t; A++) {
          var r,
            n = arguments[A];
          for (r in n) e[r] = n[r];
        }
        return e;
      },
      r =
        ((u.prototype = {
          on: function (e, t, A) {
            var r = this.cStore;
            r[e] || (r[e] = []),
              r[e].push(function (e) {
                return t.call(A, e);
              });
          },
          emit: function (e, t) {
            var A = this.cStore;
            if (A[e])
              for (var r = A[e].length, n = 0; n < r; n++) (0, A[e][n])(t);
          },
        }),
        (o = u),
        (h.prototype = {
          addData: function () {
            return this._store.addData.apply(this._store, arguments), this;
          },
          removeData: function () {
            return (
              this._store.removeData &&
                this._store.removeData.apply(this._store, arguments),
              this
            );
          },
          setData: function () {
            return this._store.setData.apply(this._store, arguments), this;
          },
          setDataMax: function () {
            return this._store.setDataMax.apply(this._store, arguments), this;
          },
          setDataMin: function () {
            return this._store.setDataMin.apply(this._store, arguments), this;
          },
          configure: function (e) {
            return (
              (this._config = c(this._config, e)),
              this._renderer.updateConfig(this._config),
              this._coordinator.emit(
                'renderall',
                this._store._getInternalData(),
              ),
              this
            );
          },
          repaint: function () {
            return (
              this._coordinator.emit(
                'renderall',
                this._store._getInternalData(),
              ),
              this
            );
          },
          getData: function () {
            return this._store.getData();
          },
          getDataURL: function () {
            return this._renderer.getDataURL();
          },
          getValueAt: function (e) {
            return this._store.getValueAt
              ? this._store.getValueAt(e)
              : this._renderer.getValueAt
              ? this._renderer.getValueAt(e)
              : null;
          },
        }),
        h);
    function u() {
      this.cStore = {};
    }
    function h() {
      var t,
        e,
        A = (this._config = c(n, arguments[0] || {}));
      if (((this._coordinator = new o()), A.plugin)) {
        var r = A.plugin;
        if (!n.plugins[r])
          throw new Error(
            "Plugin '" + r + "' not found. Maybe it was not registered.",
          );
        var r = n.plugins[r];
        (this._renderer = new r.renderer(A)), (this._store = new r.store(A));
      } else (this._renderer = new s(A)), (this._store = new i(A));
      (r = (t = this)._renderer),
        (A = t._coordinator),
        (e = t._store),
        A.on('renderpartial', r.renderPartial, r),
        A.on('renderall', r.renderAll, r),
        A.on('extremachange', function (e) {
          t._config.onExtremaChange &&
            t._config.onExtremaChange({
              min: e.min,
              max: e.max,
              gradient: t._config.gradient || t._config.defaultGradient,
            });
        }),
        e.setCoordinator(A);
    }
    return {
      create: function (e) {
        return new r(e);
      },
      register: function (e, t) {
        n.plugins[e] = t;
      },
    };
  }),
  (THREE.Reflector = function (e, t) {
    THREE.Mesh.call(this, e), (this.type = 'Reflector');
    var a = this,
      e =
        void 0 !== (t = t || {}).color
          ? new THREE.Color(t.color)
          : new THREE.Color(8355711),
      A = t.textureWidth || 512,
      r = t.textureHeight || 512,
      o = t.clipBias || 0,
      n = t.shader || THREE.Reflector.ReflectorShader,
      s = void 0 !== t.recursion ? t.recursion : 0,
      l = new THREE.Plane(),
      c = new THREE.Vector3(),
      u = new THREE.Vector3(),
      h = new THREE.Vector3(),
      d = new THREE.Matrix4(),
      p = new THREE.Vector3(0, 0, -1),
      f = new THREE.Vector4(),
      g = new THREE.Vector4(),
      m = new THREE.Vector3(),
      v = new THREE.Vector3(),
      B = new THREE.Vector4(),
      w = new THREE.Matrix4(),
      y = new THREE.PerspectiveCamera(),
      t = {
        minFilter: THREE.LinearFilter,
        magFilter: THREE.LinearFilter,
        format: THREE.RGBFormat,
        stencilBuffer: !1,
      },
      E = new THREE.WebGLRenderTarget(A, r, t),
      t =
        ((THREE.Math.isPowerOfTwo(A) && THREE.Math.isPowerOfTwo(r)) ||
          (E.texture.generateMipmaps = !1),
        new THREE.ShaderMaterial({
          uniforms: THREE.UniformsUtils.clone(n.uniforms),
          fragmentShader: n.fragmentShader,
          vertexShader: n.vertexShader,
        }));
    (t.uniforms.tDiffuse.value = E.texture),
      (t.uniforms.color.value = e),
      (t.uniforms.textureMatrix.value = w),
      (this.material = t),
      (this.renderOrder = -1 / 0),
      (this.onBeforeRender = function (e, t, A) {
        if ('recursion' in A.userData) {
          if (A.userData.recursion === s) return;
          A.userData.recursion++;
        }
        var r, n, i;
        u.setFromMatrixPosition(a.matrixWorld),
          h.setFromMatrixPosition(A.matrixWorld),
          d.extractRotation(a.matrixWorld),
          c.set(0, 0, 1),
          c.applyMatrix4(d),
          m.subVectors(u, h),
          0 < m.dot(c) ||
            (m.reflect(c).negate(),
            m.add(u),
            d.extractRotation(A.matrixWorld),
            p.set(0, 0, -1),
            p.applyMatrix4(d),
            p.add(h),
            v.subVectors(u, p),
            v.reflect(c).negate(),
            v.add(u),
            y.position.copy(m),
            y.up.set(0, 1, 0),
            y.up.applyMatrix4(d),
            y.up.reflect(c),
            y.lookAt(v),
            (y.far = A.far),
            y.updateMatrixWorld(),
            y.projectionMatrix.copy(A.projectionMatrix),
            (y.userData.recursion = 0),
            w.set(0.5, 0, 0, 0.5, 0, 0.5, 0, 0.5, 0, 0, 0.5, 0.5, 0, 0, 0, 1),
            w.multiply(y.projectionMatrix),
            w.multiply(y.matrixWorldInverse),
            w.multiply(a.matrixWorld),
            l.setFromNormalAndCoplanarPoint(c, u),
            l.applyMatrix4(y.matrixWorldInverse),
            f.set(l.normal.x, l.normal.y, l.normal.z, l.constant),
            (r = y.projectionMatrix),
            (B.x = (Math.sign(f.x) + r.elements[8]) / r.elements[0]),
            (B.y = (Math.sign(f.y) + r.elements[9]) / r.elements[5]),
            (B.z = -1),
            (B.w = (1 + r.elements[10]) / r.elements[14]),
            f.multiplyScalar(2 / f.dot(B)),
            (r.elements[2] = f.x),
            (r.elements[6] = f.y),
            (r.elements[10] = f.z + 1 - o),
            (r.elements[14] = f.w),
            (a.visible = !1),
            (r = e.getRenderTarget()),
            (n = e.vr.enabled),
            (i = e.shadowMap.autoUpdate),
            (e.vr.enabled = !1),
            (e.shadowMap.autoUpdate = !1),
            e.render(t, y, E, !0),
            (e.vr.enabled = n),
            (e.shadowMap.autoUpdate = i),
            e.setRenderTarget(r),
            void 0 !== (t = A.bounds) &&
              ((n = e.getSize()),
              (i = e.getPixelRatio()),
              (g.x = t.x * n.width * i),
              (g.y = t.y * n.height * i),
              (g.z = t.z * n.width * i),
              (g.w = t.w * n.height * i),
              e.state.viewport(g)),
            (a.visible = !0));
      }),
      (this.getRenderTarget = function () {
        return E;
      });
  }),
  (THREE.Reflector.prototype = Object.create(THREE.Mesh.prototype)),
  (THREE.Reflector.prototype.constructor = THREE.Reflector),
  (THREE.Reflector.ReflectorShader = {
    uniforms: {
      color: { type: 'c', value: null },
      tDiffuse: { type: 't', value: null },
      textureMatrix: { type: 'm4', value: null },
    },
    vertexShader: [
      'uniform mat4 textureMatrix;',
      'varying vec4 vUv;',
      'void main() {',
      '\tvUv = textureMatrix * vec4( position, 1.0 );',
      '\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',
      '}',
    ].join('\n'),
    fragmentShader: [
      'uniform vec3 color;',
      'uniform sampler2D tDiffuse;',
      'varying vec4 vUv;',
      'float blendOverlay( float base, float blend ) {',
      '\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );',
      '}',
      'vec3 blendOverlay( vec3 base, vec3 blend ) {',
      '\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );',
      '}',
      'void main() {',
      '\tvec4 base = texture2DProj( tDiffuse, vUv );',
      '\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );',
      '}',
    ].join('\n'),
  }),
  (THREE.Water = function (e, t) {
    THREE.Mesh.call(this, e), (this.type = 'Water');
    var i,
      a = this,
      A =
        void 0 !== (t = t || {}).color
          ? new THREE.Color(t.color)
          : new THREE.Color(16777215),
      r = t.hasOwnProperty('opacity') ? t.opacity : 1,
      n = t.textureWidth || 512,
      o = t.textureHeight || 512,
      s = t.clipBias || 0,
      l = t.flowDirection || new THREE.Vector2(1, 0),
      c = t.flowSpeed || 0.03,
      u = t.reflectivity || 0.3,
      h = t.scale || 1,
      d = t.shader || THREE.Water.WaterShader,
      p = new THREE.TextureLoader(),
      f = t.resource,
      g =
        (t.flowMap, t.normalMap0 || p.load(f + 'images/Water_1_M_Normal.jpg')),
      t = t.normalMap1 || p.load(f + 'images/Water_2_M_Normal.jpg'),
      m = 0.15,
      v = 0.5 * m,
      B = new THREE.Matrix4(),
      w = new THREE.Clock();
    void 0 === THREE.Reflector
      ? console.error(
          'THREE.Water: Required component THREE.Reflector not found.',
        )
      : (((i = new THREE.Reflector(e, {
          textureWidth: n,
          textureHeight: o,
          clipBias: s,
        })).matrixAutoUpdate = !1),
        (this.material = new THREE.ShaderMaterial({
          uniforms: THREE.UniformsUtils.merge([
            THREE.UniformsLib.fog,
            d.uniforms,
          ]),
          vertexShader: d.vertexShader,
          fragmentShader: d.fragmentShader,
          transparent: !0,
          fog: !0,
        })),
        (this.material.uniforms.flowDirection = { type: 'v2', value: l }),
        (g.wrapS = g.wrapT = THREE.RepeatWrapping),
        (t.wrapS = t.wrapT = THREE.RepeatWrapping),
        (this.material.uniforms.tReflectionMap.value =
          i.getRenderTarget().texture),
        (this.material.uniforms.tNormalMap0.value = g),
        (this.material.uniforms.tNormalMap1.value = t),
        (this.material.uniforms.color.value = A),
        (this.material.uniforms.opacity.value = r),
        (this.material.uniforms.reflectivity.value = u),
        (this.material.uniforms.textureMatrix.value = B),
        (this.material.uniforms.config.value.x = 0),
        (this.material.uniforms.config.value.y = v),
        (this.material.uniforms.config.value.z = v),
        (this.material.uniforms.config.value.w = h),
        (this.onBeforeRender = function (e, t, A) {
          var r, n;
          (r = A),
            B.set(0.5, 0, 0, 0.5, 0, 0.5, 0, 0.5, 0, 0, 0.5, 0.5, 0, 0, 0, 1),
            B.multiply(r.projectionMatrix),
            B.multiply(r.matrixWorldInverse),
            B.multiply(a.matrixWorld),
            (r = w.getDelta()),
            ((n = a.material.uniforms.config).value.x += c * r),
            (n.value.y = n.value.x + v),
            n.value.x >= m
              ? ((n.value.x = 0), (n.value.y = v))
              : n.value.y >= m && (n.value.y = n.value.y - m),
            (a.visible = !1),
            i.matrixWorld.copy(a.matrixWorld),
            i.onBeforeRender(e, t, A),
            (a.visible = !0);
        }));
  }),
  (THREE.Water.prototype = Object.create(THREE.Mesh.prototype)),
  (THREE.Water.prototype.constructor = THREE.Water),
  (THREE.Water.WaterShader = {
    uniforms: {
      color: { type: 'c', value: null },
      opacity: { type: 'f', value: 1 },
      reflectivity: { type: 'f', value: 0 },
      tReflectionMap: { type: 't', value: null },
      tNormalMap0: { type: 't', value: null },
      tNormalMap1: { type: 't', value: null },
      textureMatrix: { type: 'm4', value: null },
      config: { type: 'v4', value: new THREE.Vector4() },
    },
    vertexShader: [
      '#include <fog_pars_vertex>',
      'uniform mat4 textureMatrix;',
      'varying vec4 vCoord;',
      'varying vec2 vUv;',
      'varying vec3 vToEye;',
      'void main() {',
      '\tvUv = uv;',
      '\tvCoord = textureMatrix * vec4( position, 1.0 );',
      '\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );',
      '\tvToEye = cameraPosition - worldPosition.xyz;',
      '\tvec4 mvPosition =  viewMatrix * worldPosition;',
      '\tgl_Position = projectionMatrix * mvPosition;',
      '\t#include <fog_vertex>',
      '}',
    ].join('\n'),
    fragmentShader: [
      '#include <common>',
      '#include <fog_pars_fragment>',
      'uniform sampler2D tReflectionMap;',
      'uniform sampler2D tNormalMap0;',
      'uniform sampler2D tNormalMap1;',
      'uniform vec2 flowDirection;',
      'uniform vec3 color;',
      'uniform float opacity;',
      'uniform float reflectivity;',
      'uniform vec4 config;',
      'varying vec4 vCoord;',
      'varying vec2 vUv;',
      'varying vec3 vToEye;',
      'void main() {',
      '\tfloat flowMapOffset0 = config.x;',
      '\tfloat flowMapOffset1 = config.y;',
      '\tfloat halfCycle = config.z;',
      '\tfloat scale = config.w;',
      '\tvec3 toEye = normalize( vToEye );',
      '\tvec2 flow = flowDirection;',
      '\tflow.x *= - 1.0;',
      '\tvec4 normalColor0 = texture2D( tNormalMap0, ( vUv * scale ) + flow * flowMapOffset0 );',
      '\tvec4 normalColor1 = texture2D( tNormalMap1, ( vUv * scale ) + flow * flowMapOffset1 );',
      '\tfloat flowLerp = abs( halfCycle - flowMapOffset0 ) / halfCycle;',
      '\tvec4 normalColor = mix( normalColor0, normalColor1, flowLerp );',
      '\tvec3 normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );',
      '\tfloat theta = max( dot( toEye, normal ), 0.0 );',
      '\tfloat reflectance = reflectivity + reflectivity * ( 1.0 - reflectivity ) * pow( ( 1.0 - theta ), 5.0 );',
      '\tvec3 coord = vCoord.xyz / vCoord.w;',
      '\tvec2 uv = coord.xy + coord.z * normal.xz * 0.05;',
      '\tvec4 reflectColor = texture2D( tReflectionMap, vec2( 1.0 - uv.x, uv.y ) );',
      '\tvec4 outColor = mix( vec4(color, 1.0), reflectColor, reflectance );',
      '\tgl_FragColor = vec4(outColor.rgb, outColor.a * opacity);',
      '\t#include <tonemapping_fragment>',
      '\t#include <encodings_fragment>',
      '\t#include <fog_fragment>',
      '}',
    ].join('\n'),
  }),
  (function (e, t) {
    'object' == typeof exports && 'undefined' != typeof module
      ? (module.exports = t())
      : 'function' == typeof define && define.amd
      ? define(t)
      : ((e =
          'undefined' != typeof globalThis
            ? globalThis
            : e || self).html2canvas = t());
  })(this, function () {
    'use strict';
    var R = function (e, t) {
      return (R =
        Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array
          ? function (e, t) {
              e.__proto__ = t;
            }
          : function (e, t) {
              for (var A in t)
                Object.prototype.hasOwnProperty.call(t, A) && (e[A] = t[A]);
            }))(e, t);
    };
    function e(e, t) {
      if ('function' != typeof t && null !== t)
        throw new TypeError(
          'Class extends value ' + String(t) + ' is not a constructor or null',
        );
      function A() {
        this.constructor = e;
      }
      R(e, t),
        (e.prototype =
          null === t
            ? Object.create(t)
            : ((A.prototype = t.prototype), new A()));
    }
    var P = function () {
      return (P =
        Object.assign ||
        function (e) {
          for (var t, A = 1, r = arguments.length; A < r; A++)
            for (var n in (t = arguments[A]))
              Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
          return e;
        }).apply(this, arguments);
    };
    function u(e, a, o, s) {
      return new (o = o || Promise)(function (A, t) {
        function r(e) {
          try {
            i(s.next(e));
          } catch (e) {
            t(e);
          }
        }
        function n(e) {
          try {
            i(s.throw(e));
          } catch (e) {
            t(e);
          }
        }
        function i(e) {
          var t;
          e.done
            ? A(e.value)
            : ((t = e.value) instanceof o
                ? t
                : new o(function (e) {
                    e(t);
                  })
              ).then(r, n);
        }
        i((s = s.apply(e, a || [])).next());
      });
    }
    function Q(r, n) {
      var i,
        a,
        o,
        s = {
          label: 0,
          sent: function () {
            if (1 & o[0]) throw o[1];
            return o[1];
          },
          trys: [],
          ops: [],
        },
        e = { next: t(0), throw: t(1), return: t(2) };
      return (
        'function' == typeof Symbol &&
          (e[Symbol.iterator] = function () {
            return this;
          }),
        e
      );
      function t(A) {
        return function (e) {
          var t = [A, e];
          if (i) throw new TypeError('Generator is already executing.');
          for (; s; )
            try {
              if (
                ((i = 1),
                a &&
                  (o =
                    2 & t[0]
                      ? a.return
                      : t[0]
                      ? a.throw || ((o = a.return) && o.call(a), 0)
                      : a.next) &&
                  !(o = o.call(a, t[1])).done)
              )
                return o;
              switch (((a = 0), (t = o ? [2 & t[0], o.value] : t)[0])) {
                case 0:
                case 1:
                  o = t;
                  break;
                case 4:
                  return s.label++, { value: t[1], done: !1 };
                case 5:
                  s.label++, (a = t[1]), (t = [0]);
                  continue;
                case 7:
                  (t = s.ops.pop()), s.trys.pop();
                  continue;
                default:
                  if (
                    !(o = 0 < (o = s.trys).length && o[o.length - 1]) &&
                    (6 === t[0] || 2 === t[0])
                  ) {
                    s = 0;
                    continue;
                  }
                  if (3 === t[0] && (!o || (t[1] > o[0] && t[1] < o[3])))
                    s.label = t[1];
                  else if (6 === t[0] && s.label < o[1])
                    (s.label = o[1]), (o = t);
                  else {
                    if (!(o && s.label < o[2])) {
                      o[2] && s.ops.pop(), s.trys.pop();
                      continue;
                    }
                    (s.label = o[2]), s.ops.push(t);
                  }
              }
              t = n.call(r, s);
            } catch (e) {
              (t = [6, e]), (a = 0);
            } finally {
              i = o = 0;
            }
          if (5 & t[0]) throw t[1];
          return { value: t[0] ? t[1] : void 0, done: !0 };
        };
      }
    }
    function D(e, t, A) {
      if (A || 2 === arguments.length)
        for (var r, n = 0, i = t.length; n < i; n++)
          (!r && n in t) ||
            ((r = r || Array.prototype.slice.call(t, 0, n))[n] = t[n]);
      return e.concat(r || t);
    }
    (n.prototype.add = function (e, t, A, r) {
      return new n(
        this.left + e,
        this.top + t,
        this.width + A,
        this.height + r,
      );
    }),
      (n.fromClientRect = function (e, t) {
        return new n(
          t.left + e.windowBounds.left,
          t.top + e.windowBounds.top,
          t.width,
          t.height,
        );
      }),
      (n.fromDOMRectList = function (e, t) {
        t = Array.from(t).find(function (e) {
          return 0 !== e.width;
        });
        return t
          ? new n(
              t.left + e.windowBounds.left,
              t.top + e.windowBounds.top,
              t.width,
              t.height,
            )
          : n.EMPTY;
      }),
      (n.EMPTY = new n(0, 0, 0, 0));
    var B = n;
    function n(e, t, A, r) {
      (this.left = e), (this.top = t), (this.width = A), (this.height = r);
    }
    for (
      var O = function (e, t) {
          return B.fromClientRect(e, t.getBoundingClientRect());
        },
        N = function (e) {
          var t,
            A = e.body,
            e = e.documentElement;
          if (A && e)
            return (
              (t = Math.max(
                Math.max(A.scrollWidth, e.scrollWidth),
                Math.max(A.offsetWidth, e.offsetWidth),
                Math.max(A.clientWidth, e.clientWidth),
              )),
              (A = Math.max(
                Math.max(A.scrollHeight, e.scrollHeight),
                Math.max(A.offsetHeight, e.offsetHeight),
                Math.max(A.clientHeight, e.clientHeight),
              )),
              new B(0, 0, t, A)
            );
          throw new Error('Unable to get document size');
        },
        G = function (e) {
          for (var t = [], A = 0, r = e.length; A < r; ) {
            var n,
              i = e.charCodeAt(A++);
            55296 <= i && i <= 56319 && A < r
              ? 56320 == (64512 & (n = e.charCodeAt(A++)))
                ? t.push(((1023 & i) << 10) + (1023 & n) + 65536)
                : (t.push(i), A--)
              : t.push(i);
          }
          return t;
        },
        h = function () {
          for (var e = [], t = 0; t < arguments.length; t++)
            e[t] = arguments[t];
          if (String.fromCodePoint)
            return String.fromCodePoint.apply(String, e);
          var A = e.length;
          if (!A) return '';
          for (var r = [], n = -1, i = ''; ++n < A; ) {
            var a = e[n];
            a <= 65535
              ? r.push(a)
              : r.push(55296 + ((a -= 65536) >> 10), (a % 1024) + 56320),
              (n + 1 === A || 16384 < r.length) &&
                ((i += String.fromCharCode.apply(String, r)), (r.length = 0));
          }
          return i;
        },
        V = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',
        k = 'undefined' == typeof Uint8Array ? [] : new Uint8Array(256),
        z = 0;
      z < V.length;
      z++
    )
      k[V.charCodeAt(z)] = z;
    for (
      var K =
          'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',
        X = 'undefined' == typeof Uint8Array ? [] : new Uint8Array(256),
        j = 0;
      j < K.length;
      j++
    )
      X[K.charCodeAt(j)] = j;
    function W(e, t, A) {
      return e.slice
        ? e.slice(t, A)
        : new Uint16Array(Array.prototype.slice.call(e, t, A));
    }
    J.prototype.get = function (e) {
      var t;
      if (0 <= e) {
        if (e < 55296 || (56319 < e && e <= 65535))
          return (t = this.index[e >> 5]), this.data[(t = (t << 2) + (31 & e))];
        if (e <= 65535)
          return (
            (t = this.index[2048 + ((e - 55296) >> 5)]),
            this.data[(t = (t << 2) + (31 & e))]
          );
        if (e < this.highStart)
          return (
            (t = this.index[(t = 2080 + (e >> 11))]),
            (t = this.index[(t += (e >> 5) & 63)]),
            this.data[(t = (t << 2) + (31 & e))]
          );
        if (e <= 1114111) return this.data[this.highValueIndex];
      }
      return this.errorValue;
    };
    var Y = J;
    function J(e, t, A, r, n, i) {
      (this.initialValue = e),
        (this.errorValue = t),
        (this.highStart = A),
        (this.highValueIndex = r),
        (this.index = n),
        (this.data = i);
    }
    for (
      var Z =
          'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',
        q = 'undefined' == typeof Uint8Array ? [] : new Uint8Array(256),
        $ = 0;
      $ < Z.length;
      $++
    )
      q[Z.charCodeAt($)] = $;
    function ee(e, t, A, r) {
      var n = r[A];
      if (Array.isArray(e) ? -1 !== e.indexOf(n) : e === n)
        for (var i = A; i <= r.length; ) {
          if ((o = r[++i]) === t) return 1;
          if (10 !== o) break;
        }
      if (10 === n)
        for (i = A; 0 < i; ) {
          var a = r[--i];
          if (Array.isArray(e) ? -1 !== e.indexOf(a) : e === a)
            for (var o, s = A; s <= r.length; ) {
              if ((o = r[++s]) === t) return 1;
              if (10 !== o) break;
            }
          if (10 !== a) break;
        }
    }
    function te(e, t) {
      for (var A = e; 0 <= A; ) {
        var r = t[A];
        if (10 !== r) return r;
        A--;
      }
      return 0;
    }
    function Ae(A, e) {
      void 0 ===
        (r = (e = e || { lineBreak: 'normal', wordBreak: 'normal' })
          .lineBreak) && (r = 'strict'),
        (n = []),
        (i = []),
        (a = []),
        A.forEach(function (e, t) {
          var A = ne.get(e);
          if (
            (50 < A ? (a.push(!0), (A -= 50)) : a.push(!1),
            -1 !== ['normal', 'auto', 'loose'].indexOf(r) &&
              -1 !== [8208, 8211, 12316, 12448].indexOf(e))
          )
            return i.push(t), n.push(16);
          if (4 !== A && 11 !== A)
            return (
              i.push(t),
              31 === A
                ? n.push('strict' === r ? 21 : 37)
                : 42 === A || 29 === A
                ? n.push(30)
                : 43 === A
                ? n.push(
                    (131072 <= e && e <= 196605) || (196608 <= e && e <= 262141)
                      ? 37
                      : 30,
                  )
                : void n.push(A)
            );
          if (0 !== t && -1 === se.indexOf((e = n[t - 1])))
            return i.push(i[t - 1]), n.push(e);
          return i.push(t), n.push(30);
        });
      var r,
        n,
        i,
        a,
        t = (s = [i, n, a])[0],
        o = s[1],
        s = s[2],
        e =
          (('break-all' !== e.wordBreak && 'break-word' !== e.wordBreak) ||
            (o = o.map(function (e) {
              return -1 !== [25, 30, 42].indexOf(e) ? 37 : e;
            })),
          'keep-all' === e.wordBreak
            ? s.map(function (e, t) {
                return e && 19968 <= A[t] && A[t] <= 40959;
              })
            : void 0);
      return [t, o, e];
    }
    var re = [9001, 65288],
      ne =
        ((o = (function (e) {
          for (
            var t,
              A,
              r,
              n,
              i = 0.75 * e.length,
              a = e.length,
              o = 0,
              i =
                ('=' === e[e.length - 1] &&
                  (i--, '=' === e[e.length - 2]) &&
                  i--,
                new ('undefined' != typeof ArrayBuffer &&
                'undefined' != typeof Uint8Array &&
                void 0 !== Uint8Array.prototype.slice
                  ? ArrayBuffer
                  : Array)(i)),
              s = Array.isArray(i) ? i : new Uint8Array(i),
              l = 0;
            l < a;
            l += 4
          )
            (t = X[e.charCodeAt(l)]),
              (A = X[e.charCodeAt(l + 1)]),
              (r = X[e.charCodeAt(l + 2)]),
              (n = X[e.charCodeAt(l + 3)]),
              (s[o++] = (t << 2) | (A >> 4)),
              (s[o++] = ((15 & A) << 4) | (r >> 2)),
              (s[o++] = ((3 & r) << 6) | (63 & n));
          return i;
        })(
          (o =
            'KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=='),
        )),
        (E = Array.isArray(o)
          ? (function (e) {
              for (var t = e.length, A = [], r = 0; r < t; r += 4)
                A.push(
                  (e[r + 3] << 24) | (e[r + 2] << 16) | (e[r + 1] << 8) | e[r],
                );
              return A;
            })(o)
          : new Uint32Array(o)),
        (o = Array.isArray(o)
          ? (function (e) {
              for (var t = e.length, A = [], r = 0; r < t; r += 2)
                A.push((e[r + 1] << 8) | e[r]);
              return A;
            })(o)
          : new Uint16Array(o)),
        (xr = W(o, 12, E[4] / 2)),
        (o =
          2 === E[5]
            ? W(o, (24 + E[4]) / 2)
            : ((o = E),
              (zt = Math.ceil((24 + E[4]) / 4)),
              o.slice
                ? o.slice(zt, s)
                : new Uint32Array(Array.prototype.slice.call(o, zt, s)))),
        new Y(E[0], E[1], E[2], E[3], xr, o)),
      d = [30, 36],
      ie = [1, 2, 3, 5],
      ae = [10, 8],
      oe = [27, 26],
      se = ie.concat(ae),
      le = [38, 39, 40, 34, 35],
      ce = [15, 13],
      ue =
        ((he.prototype.slice = function () {
          return h.apply(void 0, this.codePoints.slice(this.start, this.end));
        }),
        he);
    function he(e, t, A, r) {
      (this.codePoints = e),
        (this.required = '!' === t),
        (this.start = A),
        (this.end = r);
    }
    function p(e) {
      return Ee <= e && e <= 57;
    }
    function de(e) {
      return p(e) || (65 <= e && e <= 70) || (97 <= e && e <= 102);
    }
    function pe(e) {
      return 10 === e || 9 === e || 32 === e;
    }
    function fe(e) {
      return xe(e) || be(e) || e === ye;
    }
    function ge(e) {
      return fe(e) || p(e) || 45 === e;
    }
    function me(e, t) {
      return 92 === e && 10 !== t;
    }
    function ve(e, t, A) {
      return 45 === e ? fe(t) || me(t, A) : !!fe(e) || (92 === e && 10 !== t);
    }
    function Be(e, t, A) {
      return 43 === e || 45 === e
        ? !!p(t) || (46 === t && p(A))
        : p(46 === e ? t : e);
    }
    var we = function (e, t) {
        var A = G(e),
          e = Ae(A, t),
          r = e[0],
          n = e[1],
          i = e[2],
          a = A.length,
          o = 0,
          s = 0;
        return {
          next: function () {
            if (a <= s) return { done: !0, value: null };
            for (
              var e, t = '';
              s < a &&
              '' ===
                (t = (function (e, t, A, r, n) {
                  if (0 === A[r]) return '';
                  r -= 1;
                  if (Array.isArray(n) && !0 === n[r]) return '';
                  var n = r - 1,
                    i = 1 + r,
                    a = t[r],
                    o = 0 <= n ? t[n] : 0,
                    s = t[i];
                  if (2 === a && 3 === s) return '';
                  if (-1 !== ie.indexOf(a)) return '!';
                  if (-1 !== ie.indexOf(s)) return '';
                  if (-1 !== ae.indexOf(s)) return '';
                  if (8 === te(r, t)) return '';
                  if (11 === ne.get(e[r])) return '';
                  if ((32 === a || 33 === a) && 11 === ne.get(e[i])) return '';
                  if (7 === a || 7 === s) return '';
                  if (9 === a) return '';
                  if (-1 === [10, 13, 15].indexOf(a) && 9 === s) return '';
                  if (-1 !== [17, 18, 19, 24, 28].indexOf(s)) return '';
                  if (22 === te(r, t)) return '';
                  if (ee(23, 22, r, t)) return '';
                  if (ee([17, 18], 21, r, t)) return '';
                  if (ee(12, 12, r, t)) return '';
                  if (10 === a) return '';
                  if (23 === a || 23 === s) return '';
                  if (16 === s || 16 === a) return '';
                  if (-1 !== [13, 15, 21].indexOf(s) || 14 === a) return '';
                  if (36 === o && -1 !== ce.indexOf(a)) return '';
                  if (28 === a && 36 === s) return '';
                  if (20 === s) return '';
                  if (
                    (-1 !== d.indexOf(s) && 25 === a) ||
                    (-1 !== d.indexOf(a) && 25 === s)
                  )
                    return '';
                  if (
                    (27 === a && -1 !== [37, 32, 33].indexOf(s)) ||
                    (-1 !== [37, 32, 33].indexOf(a) && 26 === s)
                  )
                    return '';
                  if (
                    (-1 !== d.indexOf(a) && -1 !== oe.indexOf(s)) ||
                    (-1 !== oe.indexOf(a) && -1 !== d.indexOf(s))
                  )
                    return '';
                  if (
                    (-1 !== [27, 26].indexOf(a) &&
                      (25 === s ||
                        (-1 !== [22, 15].indexOf(s) && 25 === t[1 + i]))) ||
                    (-1 !== [22, 15].indexOf(a) && 25 === s) ||
                    (25 === a && -1 !== [25, 28, 24].indexOf(s))
                  )
                    return '';
                  if (-1 !== [25, 28, 24, 17, 18].indexOf(s))
                    for (var l = r; 0 <= l; ) {
                      if (25 === (c = t[l])) return '';
                      if (-1 === [28, 24].indexOf(c)) break;
                      l--;
                    }
                  if (-1 !== [27, 26].indexOf(s))
                    for (
                      var c, l = -1 !== [17, 18].indexOf(a) ? n : r;
                      0 <= l;

                    ) {
                      if (25 === (c = t[l])) return '';
                      if (-1 === [28, 24].indexOf(c)) break;
                      l--;
                    }
                  if (
                    (38 === a && -1 !== [38, 39, 34, 35].indexOf(s)) ||
                    (-1 !== [39, 34].indexOf(a) &&
                      -1 !== [39, 40].indexOf(s)) ||
                    (-1 !== [40, 35].indexOf(a) && 40 === s)
                  )
                    return '';
                  if (
                    (-1 !== le.indexOf(a) && -1 !== [20, 26].indexOf(s)) ||
                    (-1 !== le.indexOf(s) && 27 === a)
                  )
                    return '';
                  if (-1 !== d.indexOf(a) && -1 !== d.indexOf(s)) return '';
                  if (24 === a && -1 !== d.indexOf(s)) return '';
                  if (
                    (-1 !== d.concat(25).indexOf(a) &&
                      22 === s &&
                      -1 === re.indexOf(e[i])) ||
                    (-1 !== d.concat(25).indexOf(s) && 18 === a)
                  )
                    return '';
                  if (41 === a && 41 === s) {
                    for (var u = A[r], h = 1; 0 < u && 41 === t[--u]; ) h++;
                    if (h % 2 != 0) return '';
                  }
                  return 32 === a && 33 === s ? '' : '';
                })(A, n, r, ++s, i));

            );
            return '' !== t || s === a
              ? ((e = new ue(A, t, o, s)), (o = s), { value: e, done: !1 })
              : { done: !0, value: null };
          },
        };
      },
      ye = 95,
      Ee = 48,
      xe = function (e) {
        return (97 <= (t = e) && t <= 122) || (65 <= (t = e) && t <= 90);
        var t;
      },
      be = function (e) {
        return 128 <= e;
      },
      Ce = { type: 2 },
      Fe = { type: 3 },
      Te = { type: 4 },
      _e = { type: 13 },
      Ue = { type: 8 },
      Me = { type: 21 },
      Se = { type: 9 },
      Qe = { type: 10 },
      Le = { type: 11 },
      He = { type: 12 },
      Ie = { type: 14 },
      Re = { type: 23 },
      Pe = { type: 1 },
      De = { type: 25 },
      Oe = { type: 24 },
      Ne = { type: 26 },
      Ge = { type: 27 },
      Ve = { type: 28 },
      ke = { type: 29 },
      ze = { type: 31 },
      Ke = { type: 32 },
      Xe =
        ((t.prototype.write = function (e) {
          this._value = this._value.concat(G(e));
        }),
        (t.prototype.read = function () {
          for (var e = [], t = this.consumeToken(); t !== Ke; )
            e.push(t), (t = this.consumeToken());
          return e;
        }),
        (t.prototype.consumeToken = function () {
          var e = this.consumeCodePoint();
          switch (e) {
            case 34:
              return this.consumeStringToken(34);
            case 35:
              var t = this.peekCodePoint(0),
                A = this.peekCodePoint(1),
                r = this.peekCodePoint(2);
              if (ge(t) || me(A, r))
                return (
                  (t = ve(t, A, r) ? 2 : 1),
                  { type: 5, value: this.consumeName(), flags: t }
                );
              break;
            case 36:
              if (61 === this.peekCodePoint(0))
                return this.consumeCodePoint(), _e;
              break;
            case 39:
              return this.consumeStringToken(39);
            case 40:
              return Ce;
            case 41:
              return Fe;
            case 42:
              if (61 === this.peekCodePoint(0))
                return this.consumeCodePoint(), Ie;
              break;
            case 43:
              if (Be(e, this.peekCodePoint(0), this.peekCodePoint(1)))
                return this.reconsumeCodePoint(e), this.consumeNumericToken();
              break;
            case 44:
              return Te;
            case 45:
              (A = e), (r = this.peekCodePoint(0)), (t = this.peekCodePoint(1));
              if (Be(A, r, t))
                return this.reconsumeCodePoint(e), this.consumeNumericToken();
              if (ve(A, r, t))
                return this.reconsumeCodePoint(e), this.consumeIdentLikeToken();
              if (45 === r && 62 === t)
                return this.consumeCodePoint(), this.consumeCodePoint(), Oe;
              break;
            case 46:
              if (Be(e, this.peekCodePoint(0), this.peekCodePoint(1)))
                return this.reconsumeCodePoint(e), this.consumeNumericToken();
              break;
            case 47:
              if (42 === this.peekCodePoint(0))
                for (this.consumeCodePoint(); ; ) {
                  var n = this.consumeCodePoint();
                  if (42 === n && 47 === (n = this.consumeCodePoint()))
                    return this.consumeToken();
                  if (-1 === n) return this.consumeToken();
                }
              break;
            case 58:
              return Ne;
            case 59:
              return Ge;
            case 60:
              if (
                33 === this.peekCodePoint(0) &&
                45 === this.peekCodePoint(1) &&
                45 === this.peekCodePoint(2)
              )
                return this.consumeCodePoint(), this.consumeCodePoint(), De;
              break;
            case 64:
              (A = this.peekCodePoint(0)),
                (r = this.peekCodePoint(1)),
                (t = this.peekCodePoint(2));
              if (ve(A, r, t)) return { type: 7, value: this.consumeName() };
              break;
            case 91:
              return Ve;
            case 92:
              if (me(e, this.peekCodePoint(0)))
                return this.reconsumeCodePoint(e), this.consumeIdentLikeToken();
              break;
            case 93:
              return ke;
            case 61:
              if (61 === this.peekCodePoint(0))
                return this.consumeCodePoint(), Ue;
              break;
            case 123:
              return Le;
            case 125:
              return He;
            case 117:
            case 85:
              (A = this.peekCodePoint(0)), (r = this.peekCodePoint(1));
              return (
                43 !== A ||
                  (!de(r) && 63 !== r) ||
                  (this.consumeCodePoint(), this.consumeUnicodeRangeToken()),
                this.reconsumeCodePoint(e),
                this.consumeIdentLikeToken()
              );
            case 124:
              if (61 === this.peekCodePoint(0))
                return this.consumeCodePoint(), Se;
              if (124 === this.peekCodePoint(0))
                return this.consumeCodePoint(), Me;
              break;
            case 126:
              if (61 === this.peekCodePoint(0))
                return this.consumeCodePoint(), Qe;
              break;
            case -1:
              return Ke;
          }
          return pe(e)
            ? (this.consumeWhiteSpace(), ze)
            : p(e)
            ? (this.reconsumeCodePoint(e), this.consumeNumericToken())
            : fe(e)
            ? (this.reconsumeCodePoint(e), this.consumeIdentLikeToken())
            : { type: 6, value: h(e) };
        }),
        (t.prototype.consumeCodePoint = function () {
          var e = this._value.shift();
          return void 0 === e ? -1 : e;
        }),
        (t.prototype.reconsumeCodePoint = function (e) {
          this._value.unshift(e);
        }),
        (t.prototype.peekCodePoint = function (e) {
          return e >= this._value.length ? -1 : this._value[e];
        }),
        (t.prototype.consumeUnicodeRangeToken = function () {
          for (var e = [], t = this.consumeCodePoint(); de(t) && e.length < 6; )
            e.push(t), (t = this.consumeCodePoint());
          for (var A = !1; 63 === t && e.length < 6; )
            e.push(t), (t = this.consumeCodePoint()), (A = !0);
          if (A)
            return {
              type: 30,
              start: parseInt(
                h.apply(
                  void 0,
                  e.map(function (e) {
                    return 63 === e ? Ee : e;
                  }),
                ),
                16,
              ),
              end: parseInt(
                h.apply(
                  void 0,
                  e.map(function (e) {
                    return 63 === e ? 70 : e;
                  }),
                ),
                16,
              ),
            };
          var r = parseInt(h.apply(void 0, e), 16);
          if (45 === this.peekCodePoint(0) && de(this.peekCodePoint(1))) {
            this.consumeCodePoint();
            for (
              var t = this.consumeCodePoint(), n = [];
              de(t) && n.length < 6;

            )
              n.push(t), (t = this.consumeCodePoint());
            return {
              type: 30,
              start: r,
              end: parseInt(h.apply(void 0, n), 16),
            };
          }
          return { type: 30, start: r, end: r };
        }),
        (t.prototype.consumeIdentLikeToken = function () {
          var e = this.consumeName();
          return 'url' === e.toLowerCase() && 40 === this.peekCodePoint(0)
            ? (this.consumeCodePoint(), this.consumeUrlToken())
            : 40 === this.peekCodePoint(0)
            ? (this.consumeCodePoint(), { type: 19, value: e })
            : { type: 20, value: e };
        }),
        (t.prototype.consumeUrlToken = function () {
          var e = [];
          if ((this.consumeWhiteSpace(), -1 === this.peekCodePoint(0)))
            return { type: 22, value: '' };
          var t,
            A = this.peekCodePoint(0);
          if (39 === A || 34 === A)
            return 0 ===
              (A = this.consumeStringToken(this.consumeCodePoint())).type &&
              (this.consumeWhiteSpace(),
              -1 === this.peekCodePoint(0) || 41 === this.peekCodePoint(0))
              ? (this.consumeCodePoint(), { type: 22, value: A.value })
              : (this.consumeBadUrlRemnants(), Re);
          for (;;) {
            var r = this.consumeCodePoint();
            if (-1 === r || 41 === r)
              return { type: 22, value: h.apply(void 0, e) };
            if (pe(r))
              return (
                this.consumeWhiteSpace(),
                -1 === this.peekCodePoint(0) || 41 === this.peekCodePoint(0)
                  ? (this.consumeCodePoint(),
                    { type: 22, value: h.apply(void 0, e) })
                  : (this.consumeBadUrlRemnants(), Re)
              );
            if (
              34 === r ||
              39 === r ||
              40 === r ||
              (0 <= (t = r) && t <= 8) ||
              11 === t ||
              (14 <= t && t <= 31) ||
              127 === t
            )
              return this.consumeBadUrlRemnants(), Re;
            if (92 === r) {
              if (!me(r, this.peekCodePoint(0)))
                return this.consumeBadUrlRemnants(), Re;
              e.push(this.consumeEscapedCodePoint());
            } else e.push(r);
          }
        }),
        (t.prototype.consumeWhiteSpace = function () {
          for (; pe(this.peekCodePoint(0)); ) this.consumeCodePoint();
        }),
        (t.prototype.consumeBadUrlRemnants = function () {
          for (;;) {
            var e = this.consumeCodePoint();
            if (41 === e || -1 === e) return;
            me(e, this.peekCodePoint(0)) && this.consumeEscapedCodePoint();
          }
        }),
        (t.prototype.consumeStringSlice = function (e) {
          for (var t = ''; 0 < e; ) {
            var A = Math.min(5e4, e);
            (t += h.apply(void 0, this._value.splice(0, A))), (e -= A);
          }
          return this._value.shift(), t;
        }),
        (t.prototype.consumeStringToken = function (e) {
          for (var t = '', A = 0; ; ) {
            var r,
              n = this._value[A];
            if (-1 === n || void 0 === n || n === e)
              return { type: 0, value: (t += this.consumeStringSlice(A)) };
            if (10 === n) return this._value.splice(0, A), Pe;
            92 === n &&
              -1 !== (r = this._value[A + 1]) &&
              void 0 !== r &&
              (10 === r
                ? ((t += this.consumeStringSlice(A)),
                  (A = -1),
                  this._value.shift())
                : me(n, r) &&
                  ((t =
                    (t += this.consumeStringSlice(A)) +
                    h(this.consumeEscapedCodePoint())),
                  (A = -1))),
              A++;
          }
        }),
        (t.prototype.consumeNumber = function () {
          var e = [],
            t = 4;
          for (
            (43 !== (A = this.peekCodePoint(0)) && 45 !== A) ||
            e.push(this.consumeCodePoint());
            p(this.peekCodePoint(0));

          )
            e.push(this.consumeCodePoint());
          var A = this.peekCodePoint(0),
            r = this.peekCodePoint(1);
          if (46 === A && p(r))
            for (
              e.push(this.consumeCodePoint(), this.consumeCodePoint()), t = 8;
              p(this.peekCodePoint(0));

            )
              e.push(this.consumeCodePoint());
          A = this.peekCodePoint(0);
          var r = this.peekCodePoint(1),
            n = this.peekCodePoint(2);
          if (
            (69 === A || 101 === A) &&
            (((43 === r || 45 === r) && p(n)) || p(r))
          )
            for (
              e.push(this.consumeCodePoint(), this.consumeCodePoint()), t = 8;
              p(this.peekCodePoint(0));

            )
              e.push(this.consumeCodePoint());
          return [
            (function (e) {
              for (
                var t = 0,
                  A = 1,
                  r =
                    ((43 !== e[t] && 45 !== e[t]) ||
                      (45 === e[t] && (A = -1), t++),
                    []);
                p(e[t]);

              )
                r.push(e[t++]);
              for (
                var n = r.length ? parseInt(h.apply(void 0, r), 10) : 0,
                  i = (46 === e[t] && t++, []);
                p(e[t]);

              )
                i.push(e[t++]);
              for (
                var a = i.length,
                  o = a ? parseInt(h.apply(void 0, i), 10) : 0,
                  s = ((69 !== e[t] && 101 !== e[t]) || t++, 1),
                  l =
                    ((43 !== e[t] && 45 !== e[t]) ||
                      (45 === e[t] && (s = -1), t++),
                    []);
                p(e[t]);

              )
                l.push(e[t++]);
              var c = l.length ? parseInt(h.apply(void 0, l), 10) : 0;
              return A * (n + o * Math.pow(10, -a)) * Math.pow(10, s * c);
            })(e),
            t,
          ];
        }),
        (t.prototype.consumeNumericToken = function () {
          var e = this.consumeNumber(),
            t = e[0],
            e = e[1],
            A = this.peekCodePoint(0),
            r = this.peekCodePoint(1),
            n = this.peekCodePoint(2);
          return ve(A, r, n)
            ? { type: 15, number: t, flags: e, unit: this.consumeName() }
            : 37 === A
            ? (this.consumeCodePoint(), { type: 16, number: t, flags: e })
            : { type: 17, number: t, flags: e };
        }),
        (t.prototype.consumeEscapedCodePoint = function () {
          var e,
            t = this.consumeCodePoint();
          if (de(t)) {
            for (var A = h(t); de(this.peekCodePoint(0)) && A.length < 6; )
              A += h(this.consumeCodePoint());
            pe(this.peekCodePoint(0)) && this.consumeCodePoint();
            var r = parseInt(A, 16);
            return 0 === r || (55296 <= (e = r) && e <= 57343) || 1114111 < r
              ? 65533
              : r;
          }
          return -1 === t ? 65533 : t;
        }),
        (t.prototype.consumeName = function () {
          for (var e = ''; ; ) {
            var t = this.consumeCodePoint();
            if (ge(t)) e += h(t);
            else {
              if (!me(t, this.peekCodePoint(0)))
                return this.reconsumeCodePoint(t), e;
              e += h(this.consumeEscapedCodePoint());
            }
          }
        }),
        t);
    function t() {
      this._value = [];
    }
    (A.create = function (e) {
      var t = new Xe();
      return t.write(e), new A(t.read());
    }),
      (A.parseValue = function (e) {
        return A.create(e).parseComponentValue();
      }),
      (A.parseValues = function (e) {
        return A.create(e).parseComponentValues();
      }),
      (A.prototype.parseComponentValue = function () {
        for (var e = this.consumeToken(); 31 === e.type; )
          e = this.consumeToken();
        if (32 === e.type)
          throw new SyntaxError(
            'Error parsing CSS component value, unexpected EOF',
          );
        this.reconsumeToken(e);
        for (
          var t = this.consumeComponentValue();
          31 === (e = this.consumeToken()).type;

        );
        if (32 === e.type) return t;
        throw new SyntaxError(
          'Error parsing CSS component value, multiple values found when expecting only one',
        );
      }),
      (A.prototype.parseComponentValues = function () {
        for (var e = []; ; ) {
          var t = this.consumeComponentValue();
          if (32 === t.type) return e;
          e.push(t), e.push();
        }
      }),
      (A.prototype.consumeComponentValue = function () {
        var e = this.consumeToken();
        switch (e.type) {
          case 11:
          case 28:
          case 2:
            return this.consumeSimpleBlock(e.type);
          case 19:
            return this.consumeFunction(e);
        }
        return e;
      }),
      (A.prototype.consumeSimpleBlock = function (e) {
        for (var t = { type: e, values: [] }, A = this.consumeToken(); ; ) {
          if (32 === A.type || at(A, e)) return t;
          this.reconsumeToken(A),
            t.values.push(this.consumeComponentValue()),
            (A = this.consumeToken());
        }
      }),
      (A.prototype.consumeFunction = function (e) {
        for (var t = { name: e.value, values: [], type: 18 }; ; ) {
          var A = this.consumeToken();
          if (32 === A.type || 3 === A.type) return t;
          this.reconsumeToken(A), t.values.push(this.consumeComponentValue());
        }
      }),
      (A.prototype.consumeToken = function () {
        var e = this._tokens.shift();
        return void 0 === e ? Ke : e;
      }),
      (A.prototype.reconsumeToken = function (e) {
        this._tokens.unshift(e);
      });
    var je = A;
    function A(e) {
      this._tokens = e;
    }
    function We(e) {
      return 17 === e.type;
    }
    function Ye(e) {
      return 0 === e.type;
    }
    function Je(e, t) {
      return f(e) && e.value === t;
    }
    function Ze(e) {
      return 31 !== e.type;
    }
    function qe(e) {
      return 31 !== e.type && 4 !== e.type;
    }
    function l(e) {
      var t = [],
        A = [];
      return (
        e.forEach(function (e) {
          if (4 === e.type) {
            if (0 === A.length)
              throw new Error(
                'Error parsing function args, zero tokens for arg',
              );
            t.push(A), (A = []);
          } else 31 !== e.type && A.push(e);
        }),
        A.length && t.push(A),
        t
      );
    }
    function $e(e) {
      return 1 < e.length ? [e[0], e[1]] : [e[0]];
    }
    function et(e) {
      return (
        15 === e.type &&
        (e.unit === ut || e.unit === ht || e.unit === dt || e.unit === pt)
      );
    }
    function tt(e) {
      switch (
        e
          .filter(f)
          .map(function (e) {
            return e.value;
          })
          .join(' ')
      ) {
        case 'to bottom right':
        case 'to right bottom':
        case 'left top':
        case 'top left':
          return [g, g];
        case 'to top':
        case 'bottom':
          return a(0);
        case 'to bottom left':
        case 'to left bottom':
        case 'right top':
        case 'top right':
          return [g, lt];
        case 'to right':
        case 'left':
          return a(90);
        case 'to top left':
        case 'to left top':
        case 'right bottom':
        case 'bottom right':
          return [lt, lt];
        case 'to bottom':
        case 'top':
          return a(180);
        case 'to top right':
        case 'to right top':
        case 'left bottom':
        case 'bottom left':
          return [lt, g];
        case 'to left':
        case 'right':
          return a(270);
      }
      return 0;
    }
    function At(e) {
      return 0 == (255 & e);
    }
    function L(e) {
      var t = 255 & e,
        A = 255 & (e >> 8),
        r = 255 & (e >> 16),
        e = 255 & (e >> 24);
      return t < 255
        ? 'rgba(' + e + ',' + r + ',' + A + ',' + t / 255 + ')'
        : 'rgb(' + e + ',' + r + ',' + A + ')';
    }
    function rt(e, t) {
      var A;
      return 17 === e.type
        ? e.number
        : 16 === e.type
        ? ((A = 3 === t ? 1 : 255),
          3 === t ? (e.number / 100) * A : Math.round((e.number / 100) * A))
        : 0;
    }
    function nt(e, t) {
      var A, r, n;
      return 3 === (t = t.filter(qe)).length
        ? ((A = (n = t.map(rt))[0]), (r = n[1]), (n = n[2]), mt(A, r, n, 1))
        : 4 === t.length
        ? ((A = (t = t.map(rt))[0]),
          (r = t[1]),
          (n = t[2]),
          (t = t[3]),
          mt(A, r, n, t))
        : 0;
    }
    var it = function (e) {
        return 15 === e.type;
      },
      f = function (e) {
        return 20 === e.type;
      },
      at = function (e, t) {
        return (
          (11 === t && 12 === e.type) ||
          (28 === t && 29 === e.type) ||
          (2 === t && 3 === e.type)
        );
      },
      ot = function (e) {
        return 17 === e.type || 15 === e.type;
      },
      c = function (e) {
        return 16 === e.type || ot(e);
      },
      g = { type: 17, number: 0, flags: 4 },
      st = { type: 16, number: 50, flags: 4 },
      lt = { type: 16, number: 100, flags: 4 },
      ct = function (e, t, A) {
        var r = e[0],
          e = e[1];
        return [H(r, t), H(void 0 !== e ? e : r, A)];
      },
      H = function (e, t) {
        if (16 === e.type) return (e.number / 100) * t;
        if (it(e))
          switch (e.unit) {
            case 'rem':
            case 'em':
              return 16 * e.number;
            default:
              return e.number;
          }
        return e.number;
      },
      ut = 'deg',
      ht = 'grad',
      dt = 'rad',
      pt = 'turn',
      ft = function (e, t) {
        if (15 === t.type)
          switch (t.unit) {
            case ut:
              return (Math.PI * t.number) / 180;
            case ht:
              return (Math.PI / 200) * t.number;
            case dt:
              return t.number;
            case pt:
              return 2 * Math.PI * t.number;
          }
        throw new Error('Unsupported angle type');
      },
      a = function (e) {
        return (Math.PI * e) / 180;
      },
      gt = {
        name: 'color',
        parse: function (e, t) {
          if (18 === t.type) {
            var A = Ct[t.name];
            if (void 0 === A)
              throw new Error(
                'Attempting to parse an unsupported color function "' +
                  t.name +
                  '"',
              );
            return A(e, t.values);
          }
          if (5 === t.type) {
            var r, n, i, a;
            if (3 === t.value.length)
              return (
                (r = t.value.substring(0, 1)),
                (n = t.value.substring(1, 2)),
                (i = t.value.substring(2, 3)),
                mt(
                  parseInt(r + r, 16),
                  parseInt(n + n, 16),
                  parseInt(i + i, 16),
                  1,
                )
              );
            if (4 === t.value.length)
              return (
                (r = t.value.substring(0, 1)),
                (n = t.value.substring(1, 2)),
                (i = t.value.substring(2, 3)),
                (a = t.value.substring(3, 4)),
                mt(
                  parseInt(r + r, 16),
                  parseInt(n + n, 16),
                  parseInt(i + i, 16),
                  parseInt(a + a, 16) / 255,
                )
              );
            if (6 === t.value.length)
              return (
                (r = t.value.substring(0, 2)),
                (n = t.value.substring(2, 4)),
                (i = t.value.substring(4, 6)),
                mt(parseInt(r, 16), parseInt(n, 16), parseInt(i, 16), 1)
              );
            if (8 === t.value.length)
              return (
                (r = t.value.substring(0, 2)),
                (n = t.value.substring(2, 4)),
                (i = t.value.substring(4, 6)),
                (a = t.value.substring(6, 8)),
                mt(
                  parseInt(r, 16),
                  parseInt(n, 16),
                  parseInt(i, 16),
                  parseInt(a, 16) / 255,
                )
              );
          }
          if (20 === t.type) {
            A = w[t.value.toUpperCase()];
            if (void 0 !== A) return A;
          }
          return w.TRANSPARENT;
        },
      },
      mt = function (e, t, A, r) {
        return (
          ((e << 24) | (t << 16) | (A << 8) | (Math.round(255 * r) << 0)) >>> 0
        );
      };
    function vt(e, t, A) {
      return (
        A < 0 && (A += 1),
        1 <= A && --A,
        A < 1 / 6
          ? (t - e) * A * 6 + e
          : A < 0.5
          ? t
          : A < 2 / 3
          ? 6 * (t - e) * (2 / 3 - A) + e
          : e
      );
    }
    function Bt(e, t) {
      var A,
        r = (t = t.filter(qe))[0],
        n = t[1],
        i = t[2],
        t = t[3],
        e = (17 === r.type ? a(r.number) : ft(e, r)) / (2 * Math.PI),
        r = c(n) ? n.number / 100 : 0,
        n = c(i) ? i.number / 100 : 0,
        i = void 0 !== t && c(t) ? H(t, 1) : 1;
      return 0 == r
        ? mt(255 * n, 255 * n, 255 * n, 1)
        : ((r = vt(
            (n = 2 * n - (t = n <= 0.5 ? n * (1 + r) : n + r - n * r)),
            t,
            e + 1 / 3,
          )),
          (A = vt(n, t, e)),
          (n = vt(n, t, e - 1 / 3)),
          mt(255 * r, 255 * A, 255 * n, i));
    }
    function wt(e, t) {
      return gt.parse(e, je.create(t).parseComponentValue());
    }
    function yt(e, t) {
      return (
        (e = gt.parse(e, t[0])),
        (t = t[1]) && c(t) ? { color: e, stop: t } : { color: e, stop: null }
      );
    }
    function Et(e, A) {
      for (
        var t = e[0],
          r = e[e.length - 1],
          n =
            (null === t.stop && (t.stop = g),
            null === r.stop && (r.stop = lt),
            []),
          i = 0,
          a = 0;
        a < e.length;
        a++
      ) {
        var o = e[a].stop;
        null !== o
          ? ((o = H(o, A)), n.push(i < o ? o : i), (i = o))
          : n.push(null);
      }
      for (var s = null, a = 0; a < n.length; a++) {
        var l = n[a];
        if (null === l) null === s && (s = a);
        else if (null !== s) {
          for (var c = a - s, u = (l - n[s - 1]) / (1 + c), h = 1; h <= c; h++)
            n[s + h - 1] = u * h;
          s = null;
        }
      }
      return e.map(function (e, t) {
        return { color: e.color, stop: Math.max(Math.min(1, n[t] / A), 0) };
      });
    }
    function xt(A, e) {
      var r = a(180),
        n = [];
      return (
        l(e).forEach(function (e, t) {
          if (0 === t) {
            t = e[0];
            if (
              20 === t.type &&
              -1 !== ['top', 'left', 'right', 'bottom'].indexOf(t.value)
            )
              return void (r = tt(e));
            if (et(t)) return void (r = (ft(A, t) + a(270)) % a(360));
          }
          t = yt(A, e);
          n.push(t);
        }),
        { angle: r, stops: n, type: 1 }
      );
    }
    function bt(r, e) {
      var n = 0,
        i = 3,
        a = [],
        o = [];
      return (
        l(e).forEach(function (e, t) {
          var A = !0;
          0 === t
            ? (A = e.reduce(function (e, t) {
                if (f(t))
                  switch (t.value) {
                    case 'center':
                      return o.push(st), !1;
                    case 'top':
                    case 'left':
                      return o.push(g), !1;
                    case 'right':
                    case 'bottom':
                      return o.push(lt), !1;
                  }
                else if (c(t) || ot(t)) return o.push(t), !1;
                return e;
              }, A))
            : 1 === t &&
              (A = e.reduce(function (e, t) {
                if (f(t))
                  switch (t.value) {
                    case 'circle':
                      return (n = 0), !1;
                    case 'ellipse':
                      return !(n = 1);
                    case 'contain':
                    case Mt:
                      return (i = 0), !1;
                    case St:
                      return !(i = 1);
                    case Qt:
                      return !(i = 2);
                    case 'cover':
                    case Lt:
                      return !(i = 3);
                  }
                else if (ot(t) || c(t))
                  return (i = Array.isArray(i) ? i : []).push(t), !1;
                return e;
              }, A)),
            A && ((t = yt(r, e)), a.push(t));
        }),
        { size: i, shape: n, stops: a, position: o, type: 2 }
      );
    }
    var Ct = { hsl: Bt, hsla: Bt, rgb: nt, rgba: nt },
      w = {
        ALICEBLUE: 4042850303,
        ANTIQUEWHITE: 4209760255,
        AQUA: 16777215,
        AQUAMARINE: 2147472639,
        AZURE: 4043309055,
        BEIGE: 4126530815,
        BISQUE: 4293182719,
        BLACK: 255,
        BLANCHEDALMOND: 4293643775,
        BLUE: 65535,
        BLUEVIOLET: 2318131967,
        BROWN: 2771004159,
        BURLYWOOD: 3736635391,
        CADETBLUE: 1604231423,
        CHARTREUSE: 2147418367,
        CHOCOLATE: 3530104575,
        CORAL: 4286533887,
        CORNFLOWERBLUE: 1687547391,
        CORNSILK: 4294499583,
        CRIMSON: 3692313855,
        CYAN: 16777215,
        DARKBLUE: 35839,
        DARKCYAN: 9145343,
        DARKGOLDENROD: 3095837695,
        DARKGRAY: 2846468607,
        DARKGREEN: 6553855,
        DARKGREY: 2846468607,
        DARKKHAKI: 3182914559,
        DARKMAGENTA: 2332068863,
        DARKOLIVEGREEN: 1433087999,
        DARKORANGE: 4287365375,
        DARKORCHID: 2570243327,
        DARKRED: 2332033279,
        DARKSALMON: 3918953215,
        DARKSEAGREEN: 2411499519,
        DARKSLATEBLUE: 1211993087,
        DARKSLATEGRAY: 793726975,
        DARKSLATEGREY: 793726975,
        DARKTURQUOISE: 13554175,
        DARKVIOLET: 2483082239,
        DEEPPINK: 4279538687,
        DEEPSKYBLUE: 12582911,
        DIMGRAY: 1768516095,
        DIMGREY: 1768516095,
        DODGERBLUE: 512819199,
        FIREBRICK: 2988581631,
        FLORALWHITE: 4294635775,
        FORESTGREEN: 579543807,
        FUCHSIA: 4278255615,
        GAINSBORO: 3705462015,
        GHOSTWHITE: 4177068031,
        GOLD: 4292280575,
        GOLDENROD: 3668254975,
        GRAY: 2155905279,
        GREEN: 8388863,
        GREENYELLOW: 2919182335,
        GREY: 2155905279,
        HONEYDEW: 4043305215,
        HOTPINK: 4285117695,
        INDIANRED: 3445382399,
        INDIGO: 1258324735,
        IVORY: 4294963455,
        KHAKI: 4041641215,
        LAVENDER: 3873897215,
        LAVENDERBLUSH: 4293981695,
        LAWNGREEN: 2096890111,
        LEMONCHIFFON: 4294626815,
        LIGHTBLUE: 2916673279,
        LIGHTCORAL: 4034953471,
        LIGHTCYAN: 3774873599,
        LIGHTGOLDENRODYELLOW: 4210742015,
        LIGHTGRAY: 3553874943,
        LIGHTGREEN: 2431553791,
        LIGHTGREY: 3553874943,
        LIGHTPINK: 4290167295,
        LIGHTSALMON: 4288707327,
        LIGHTSEAGREEN: 548580095,
        LIGHTSKYBLUE: 2278488831,
        LIGHTSLATEGRAY: 2005441023,
        LIGHTSLATEGREY: 2005441023,
        LIGHTSTEELBLUE: 2965692159,
        LIGHTYELLOW: 4294959359,
        LIME: 16711935,
        LIMEGREEN: 852308735,
        LINEN: 4210091775,
        MAGENTA: 4278255615,
        MAROON: 2147483903,
        MEDIUMAQUAMARINE: 1724754687,
        MEDIUMBLUE: 52735,
        MEDIUMORCHID: 3126187007,
        MEDIUMPURPLE: 2473647103,
        MEDIUMSEAGREEN: 1018393087,
        MEDIUMSLATEBLUE: 2070474495,
        MEDIUMSPRINGGREEN: 16423679,
        MEDIUMTURQUOISE: 1221709055,
        MEDIUMVIOLETRED: 3340076543,
        MIDNIGHTBLUE: 421097727,
        MINTCREAM: 4127193855,
        MISTYROSE: 4293190143,
        MOCCASIN: 4293178879,
        NAVAJOWHITE: 4292783615,
        NAVY: 33023,
        OLDLACE: 4260751103,
        OLIVE: 2155872511,
        OLIVEDRAB: 1804477439,
        ORANGE: 4289003775,
        ORANGERED: 4282712319,
        ORCHID: 3664828159,
        PALEGOLDENROD: 4008225535,
        PALEGREEN: 2566625535,
        PALETURQUOISE: 2951671551,
        PALEVIOLETRED: 3681588223,
        PAPAYAWHIP: 4293907967,
        PEACHPUFF: 4292524543,
        PERU: 3448061951,
        PINK: 4290825215,
        PLUM: 3718307327,
        POWDERBLUE: 2967529215,
        PURPLE: 2147516671,
        REBECCAPURPLE: 1714657791,
        RED: 4278190335,
        ROSYBROWN: 3163525119,
        ROYALBLUE: 1097458175,
        SADDLEBROWN: 2336560127,
        SALMON: 4202722047,
        SANDYBROWN: 4104413439,
        SEAGREEN: 780883967,
        SEASHELL: 4294307583,
        SIENNA: 2689740287,
        SILVER: 3233857791,
        SKYBLUE: 2278484991,
        SLATEBLUE: 1784335871,
        SLATEGRAY: 1887473919,
        SLATEGREY: 1887473919,
        SNOW: 4294638335,
        SPRINGGREEN: 16744447,
        STEELBLUE: 1182971135,
        TAN: 3535047935,
        TEAL: 8421631,
        THISTLE: 3636451583,
        TOMATO: 4284696575,
        TRANSPARENT: 0,
        TURQUOISE: 1088475391,
        VIOLET: 4001558271,
        WHEAT: 4125012991,
        WHITE: 4294967295,
        WHITESMOKE: 4126537215,
        YELLOW: 4294902015,
        YELLOWGREEN: 2597139199,
      },
      Ft = {
        name: 'background-clip',
        initialValue: 'border-box',
        prefix: !1,
        type: 1,
        parse: function (e, t) {
          return t.map(function (e) {
            if (f(e))
              switch (e.value) {
                case 'padding-box':
                  return 1;
                case 'content-box':
                  return 2;
              }
            return 0;
          });
        },
      },
      Tt = {
        name: 'background-color',
        initialValue: 'transparent',
        prefix: !1,
        type: 3,
        format: 'color',
      },
      _t = function (e, t, A) {
        var r = t / 2,
          n = A / 2,
          t = H(e[0], t) - r,
          r = n - H(e[1], A);
        return (Math.atan2(r, t) + 2 * Math.PI) % (2 * Math.PI);
      },
      I = function (e, t) {
        return Math.sqrt(e * e + t * t);
      },
      Ut = function (e, t, n, i, a) {
        return [
          [0, 0],
          [0, t],
          [e, 0],
          [e, t],
        ].reduce(
          function (e, t) {
            var A = t[0],
              r = t[1],
              A = I(n - A, i - r);
            return (a ? A < e.optimumDistance : A > e.optimumDistance)
              ? { optimumCorner: t, optimumDistance: A }
              : e;
          },
          { optimumDistance: a ? 1 / 0 : -1 / 0, optimumCorner: null },
        ).optimumCorner;
      },
      Mt = 'closest-side',
      St = 'farthest-side',
      Qt = 'closest-corner',
      Lt = 'farthest-corner',
      Ht = function (e, t) {
        if (22 === t.type)
          return (A = { url: t.value, type: 0 }), e.cache.addImage(t.value), A;
        if (18 !== t.type) throw new Error('Unsupported image type ' + t.type);
        var A = jt[t.name];
        if (void 0 === A)
          throw new Error(
            'Attempting to parse an unsupported image function "' +
              t.name +
              '"',
          );
        return A(e, t.values);
      };
    function It(e) {
      return {
        name: 'border-' + e + '-color',
        initialValue: 'transparent',
        prefix: !1,
        type: 3,
        format: 'color',
      };
    }
    function Rt(e) {
      return {
        name: 'border-radius-' + e,
        initialValue: '0 0',
        prefix: !1,
        type: 1,
        parse: function (e, t) {
          return $e(t.filter(c));
        },
      };
    }
    function Pt(e) {
      return {
        name: 'border-' + e + '-style',
        initialValue: 'solid',
        prefix: !1,
        type: 2,
        parse: function (e, t) {
          switch (t) {
            case 'none':
              return 0;
            case 'dashed':
              return 2;
            case 'dotted':
              return 3;
            case 'double':
              return 4;
          }
          return 1;
        },
      };
    }
    function Dt(e) {
      return {
        name: 'border-' + e + '-width',
        initialValue: '0',
        type: 0,
        prefix: !1,
        parse: function (e, t) {
          return it(t) ? t.number : 0;
        },
      };
    }
    function Ot(e, t) {
      return f(e) && 'normal' === e.value
        ? 1.2 * t
        : 17 === e.type
        ? t * e.number
        : c(e)
        ? H(e, t)
        : t;
    }
    function Nt(e) {
      return { name: 'margin-' + e, initialValue: '0', prefix: !1, type: 4 };
    }
    function Gt(e) {
      return {
        name: 'padding-' + e,
        initialValue: '0',
        prefix: !1,
        type: 3,
        format: 'length-percentage',
      };
    }
    function Vt(e, t, A) {
      return e && (t = e[Math.min(t, e.length - 1)])
        ? A
          ? t.open
          : t.close
        : '';
    }
    var kt,
      zt,
      Kt,
      Xt,
      jt = {
        'linear-gradient': function (A, e) {
          var r = a(180),
            n = [];
          return (
            l(e).forEach(function (e, t) {
              if (0 === t) {
                t = e[0];
                if (20 === t.type && 'to' === t.value) return void (r = tt(e));
                if (et(t)) return void (r = ft(A, t));
              }
              t = yt(A, e);
              n.push(t);
            }),
            { angle: r, stops: n, type: 1 }
          );
        },
        '-moz-linear-gradient': xt,
        '-ms-linear-gradient': xt,
        '-o-linear-gradient': xt,
        '-webkit-linear-gradient': xt,
        'radial-gradient': function (n, e) {
          var i = 0,
            a = 3,
            o = [],
            s = [];
          return (
            l(e).forEach(function (e, t) {
              var A,
                r = !0;
              0 === t &&
                ((A = !1),
                (r = e.reduce(function (e, t) {
                  if (A)
                    if (f(t))
                      switch (t.value) {
                        case 'center':
                          return s.push(st), e;
                        case 'top':
                        case 'left':
                          return s.push(g), e;
                        case 'right':
                        case 'bottom':
                          return s.push(lt), e;
                      }
                    else (c(t) || ot(t)) && s.push(t);
                  else if (f(t))
                    switch (t.value) {
                      case 'circle':
                        return (i = 0), !1;
                      case 'ellipse':
                        return !(i = 1);
                      case 'at':
                        return !(A = !0);
                      case Mt:
                        return (a = 0), !1;
                      case 'cover':
                      case St:
                        return !(a = 1);
                      case 'contain':
                      case Qt:
                        return !(a = 2);
                      case Lt:
                        return !(a = 3);
                    }
                  else if (ot(t) || c(t))
                    return (a = Array.isArray(a) ? a : []).push(t), !1;
                  return e;
                }, r))),
                r && ((t = yt(n, e)), o.push(t));
            }),
            { size: a, shape: i, stops: o, position: s, type: 2 }
          );
        },
        '-moz-radial-gradient': bt,
        '-ms-radial-gradient': bt,
        '-o-radial-gradient': bt,
        '-webkit-radial-gradient': bt,
        '-webkit-gradient': function (r, e) {
          var t = a(180),
            n = [],
            i = 1;
          return (
            l(e).forEach(function (e, t) {
              var A,
                e = e[0];
              if (0 === t) {
                if (f(e) && 'linear' === e.value) return void (i = 1);
                if (f(e) && 'radial' === e.value) return void (i = 2);
              }
              18 === e.type &&
                ('from' === e.name
                  ? ((A = gt.parse(r, e.values[0])),
                    n.push({ stop: g, color: A }))
                  : 'to' === e.name
                  ? ((A = gt.parse(r, e.values[0])),
                    n.push({ stop: lt, color: A }))
                  : 'color-stop' === e.name &&
                    2 === (t = e.values.filter(qe)).length &&
                    ((A = gt.parse(r, t[1])), (e = t[0]), We(e)) &&
                    n.push({
                      stop: {
                        type: 16,
                        number: 100 * e.number,
                        flags: e.flags,
                      },
                      color: A,
                    }));
            }),
            1 === i
              ? { angle: (t + a(180)) % a(360), stops: n, type: i }
              : { size: 3, shape: 0, stops: n, position: [], type: i }
          );
        },
      },
      Wt = {
        name: 'background-image',
        initialValue: 'none',
        type: 1,
        prefix: !1,
        parse: function (t, e) {
          var A;
          return 0 === e.length ||
            (20 === (A = e[0]).type && 'none' === A.value)
            ? []
            : e
                .filter(function (e) {
                  return (
                    qe(e) &&
                    !(
                      (20 === (e = e).type && 'none' === e.value) ||
                      (18 === e.type && !jt[e.name])
                    )
                  );
                })
                .map(function (e) {
                  return Ht(t, e);
                });
        },
      },
      Yt = {
        name: 'background-origin',
        initialValue: 'border-box',
        prefix: !1,
        type: 1,
        parse: function (e, t) {
          return t.map(function (e) {
            if (f(e))
              switch (e.value) {
                case 'padding-box':
                  return 1;
                case 'content-box':
                  return 2;
              }
            return 0;
          });
        },
      },
      Jt = {
        name: 'background-position',
        initialValue: '0% 0%',
        type: 1,
        prefix: !1,
        parse: function (e, t) {
          return l(t)
            .map(function (e) {
              return e.filter(c);
            })
            .map($e);
        },
      },
      Zt = {
        name: 'background-repeat',
        initialValue: 'repeat',
        prefix: !1,
        type: 1,
        parse: function (e, t) {
          return l(t)
            .map(function (e) {
              return e
                .filter(f)
                .map(function (e) {
                  return e.value;
                })
                .join(' ');
            })
            .map(qt);
        },
      },
      qt = function (e) {
        switch (e) {
          case 'no-repeat':
            return 1;
          case 'repeat-x':
          case 'repeat no-repeat':
            return 2;
          case 'repeat-y':
          case 'no-repeat repeat':
            return 3;
          default:
            return 0;
        }
      },
      $t =
        (((zt = kt = kt || {}).AUTO = 'auto'),
        (zt.CONTAIN = 'contain'),
        {
          name: 'background-size',
          initialValue: '0',
          prefix: !(zt.COVER = 'cover'),
          type: 1,
          parse: function (e, t) {
            return l(t).map(function (e) {
              return e.filter(eA);
            });
          },
        }),
      eA = function (e) {
        return f(e) || c(e);
      },
      tA = It('top'),
      AA = It('right'),
      rA = It('bottom'),
      nA = It('left'),
      iA = Rt('top-left'),
      aA = Rt('top-right'),
      oA = Rt('bottom-right'),
      sA = Rt('bottom-left'),
      lA = Pt('top'),
      cA = Pt('right'),
      uA = Pt('bottom'),
      hA = Pt('left'),
      dA = Dt('top'),
      pA = Dt('right'),
      fA = Dt('bottom'),
      gA = Dt('left'),
      mA = {
        name: 'color',
        initialValue: 'transparent',
        prefix: !1,
        type: 3,
        format: 'color',
      },
      vA = {
        name: 'direction',
        initialValue: 'ltr',
        prefix: !1,
        type: 2,
        parse: function (e, t) {
          return 'rtl' !== t ? 0 : 1;
        },
      },
      BA = {
        name: 'display',
        initialValue: 'inline-block',
        prefix: !1,
        type: 1,
        parse: function (e, t) {
          return t.filter(f).reduce(function (e, t) {
            return e | wA(t.value);
          }, 0);
        },
      },
      wA = function (e) {
        switch (e) {
          case 'block':
          case '-webkit-box':
            return 2;
          case 'inline':
            return 4;
          case 'run-in':
            return 8;
          case 'flow':
            return 16;
          case 'flow-root':
            return 32;
          case 'table':
            return 64;
          case 'flex':
          case '-webkit-flex':
            return 128;
          case 'grid':
          case '-ms-grid':
            return 256;
          case 'ruby':
            return 512;
          case 'subgrid':
            return 1024;
          case 'list-item':
            return 2048;
          case 'table-row-group':
            return 4096;
          case 'table-header-group':
            return 8192;
          case 'table-footer-group':
            return 16384;
          case 'table-row':
            return 32768;
          case 'table-cell':
            return 65536;
          case 'table-column-group':
            return 131072;
          case 'table-column':
            return 262144;
          case 'table-caption':
            return 524288;
          case 'ruby-base':
            return 1048576;
          case 'ruby-text':
            return 2097152;
          case 'ruby-base-container':
            return 4194304;
          case 'ruby-text-container':
            return 8388608;
          case 'contents':
            return 16777216;
          case 'inline-block':
            return 33554432;
          case 'inline-list-item':
            return 67108864;
          case 'inline-table':
            return 134217728;
          case 'inline-flex':
            return 268435456;
          case 'inline-grid':
            return 536870912;
        }
        return 0;
      },
      yA = {
        name: 'float',
        initialValue: 'none',
        prefix: !1,
        type: 2,
        parse: function (e, t) {
          switch (t) {
            case 'left':
              return 1;
            case 'right':
              return 2;
            case 'inline-start':
              return 3;
            case 'inline-end':
              return 4;
          }
          return 0;
        },
      },
      EA = {
        name: 'letter-spacing',
        initialValue: '0',
        prefix: !1,
        type: 0,
        parse: function (e, t) {
          return !(
            (20 === t.type && 'normal' === t.value) ||
            (17 !== t.type && 15 !== t.type)
          )
            ? t.number
            : 0;
        },
      },
      xA = {
        name: 'line-break',
        initialValue: ((s = Kt = Kt || {}).NORMAL = 'normal'),
        prefix: !(s.STRICT = 'strict'),
        type: 2,
        parse: function (e, t) {
          return 'strict' !== t ? Kt.NORMAL : Kt.STRICT;
        },
      },
      bA = { name: 'line-height', initialValue: 'normal', prefix: !1, type: 4 },
      CA = {
        name: 'list-style-image',
        initialValue: 'none',
        type: 0,
        prefix: !1,
        parse: function (e, t) {
          return 20 === t.type && 'none' === t.value ? null : Ht(e, t);
        },
      },
      FA = {
        name: 'list-style-position',
        initialValue: 'outside',
        prefix: !1,
        type: 2,
        parse: function (e, t) {
          return 'inside' !== t ? 1 : 0;
        },
      },
      TA = {
        name: 'list-style-type',
        initialValue: 'none',
        prefix: !1,
        type: 2,
        parse: function (e, t) {
          switch (t) {
            case 'disc':
              return 0;
            case 'circle':
              return 1;
            case 'square':
              return 2;
            case 'decimal':
              return 3;
            case 'cjk-decimal':
              return 4;
            case 'decimal-leading-zero':
              return 5;
            case 'lower-roman':
              return 6;
            case 'upper-roman':
              return 7;
            case 'lower-greek':
              return 8;
            case 'lower-alpha':
              return 9;
            case 'upper-alpha':
              return 10;
            case 'arabic-indic':
              return 11;
            case 'armenian':
              return 12;
            case 'bengali':
              return 13;
            case 'cambodian':
              return 14;
            case 'cjk-earthly-branch':
              return 15;
            case 'cjk-heavenly-stem':
              return 16;
            case 'cjk-ideographic':
              return 17;
            case 'devanagari':
              return 18;
            case 'ethiopic-numeric':
              return 19;
            case 'georgian':
              return 20;
            case 'gujarati':
              return 21;
            case 'gurmukhi':
            case 'hebrew':
              return 22;
            case 'hiragana':
              return 23;
            case 'hiragana-iroha':
              return 24;
            case 'japanese-formal':
              return 25;
            case 'japanese-informal':
              return 26;
            case 'kannada':
              return 27;
            case 'katakana':
              return 28;
            case 'katakana-iroha':
              return 29;
            case 'khmer':
              return 30;
            case 'korean-hangul-formal':
              return 31;
            case 'korean-hanja-formal':
              return 32;
            case 'korean-hanja-informal':
              return 33;
            case 'lao':
              return 34;
            case 'lower-armenian':
              return 35;
            case 'malayalam':
              return 36;
            case 'mongolian':
              return 37;
            case 'myanmar':
              return 38;
            case 'oriya':
              return 39;
            case 'persian':
              return 40;
            case 'simp-chinese-formal':
              return 41;
            case 'simp-chinese-informal':
              return 42;
            case 'tamil':
              return 43;
            case 'telugu':
              return 44;
            case 'thai':
              return 45;
            case 'tibetan':
              return 46;
            case 'trad-chinese-formal':
              return 47;
            case 'trad-chinese-informal':
              return 48;
            case 'upper-armenian':
              return 49;
            case 'disclosure-open':
              return 50;
            case 'disclosure-closed':
              return 51;
            default:
              return -1;
          }
        },
      },
      _A = Nt('top'),
      UA = Nt('right'),
      MA = Nt('bottom'),
      SA = Nt('left'),
      QA = {
        name: 'overflow',
        initialValue: 'visible',
        prefix: !1,
        type: 1,
        parse: function (e, t) {
          return t.filter(f).map(function (e) {
            switch (e.value) {
              case 'hidden':
                return 1;
              case 'scroll':
                return 2;
              case 'clip':
                return 3;
              case 'auto':
                return 4;
              default:
                return 0;
            }
          });
        },
      },
      LA = {
        name: 'overflow-wrap',
        initialValue: 'normal',
        prefix: !1,
        type: 2,
        parse: function (e, t) {
          return 'break-word' !== t ? 'normal' : 'break-word';
        },
      },
      HA = Gt('top'),
      IA = Gt('right'),
      RA = Gt('bottom'),
      PA = Gt('left'),
      DA = {
        name: 'text-align',
        initialValue: 'left',
        prefix: !1,
        type: 2,
        parse: function (e, t) {
          switch (t) {
            case 'right':
              return 2;
            case 'center':
            case 'justify':
              return 1;
            default:
              return 0;
          }
        },
      },
      OA = {
        name: 'position',
        initialValue: 'static',
        prefix: !1,
        type: 2,
        parse: function (e, t) {
          switch (t) {
            case 'relative':
              return 1;
            case 'absolute':
              return 2;
            case 'fixed':
              return 3;
            case 'sticky':
              return 4;
          }
          return 0;
        },
      },
      NA = {
        name: 'text-shadow',
        initialValue: 'none',
        type: 1,
        prefix: !1,
        parse: function (i, e) {
          return 1 === e.length && Je(e[0], 'none')
            ? []
            : l(e).map(function (e) {
                for (
                  var t = {
                      color: w.TRANSPARENT,
                      offsetX: g,
                      offsetY: g,
                      blur: g,
                    },
                    A = 0,
                    r = 0;
                  r < e.length;
                  r++
                ) {
                  var n = e[r];
                  ot(n)
                    ? (0 === A
                        ? (t.offsetX = n)
                        : 1 === A
                        ? (t.offsetY = n)
                        : (t.blur = n),
                      A++)
                    : (t.color = gt.parse(i, n));
                }
                return t;
              });
        },
      },
      GA = {
        name: 'text-transform',
        initialValue: 'none',
        prefix: !1,
        type: 2,
        parse: function (e, t) {
          switch (t) {
            case 'uppercase':
              return 2;
            case 'lowercase':
              return 1;
            case 'capitalize':
              return 3;
          }
          return 0;
        },
      },
      VA = {
        name: 'transform',
        initialValue: 'none',
        prefix: !0,
        type: 0,
        parse: function (e, t) {
          if (20 === t.type && 'none' === t.value) return null;
          if (18 !== t.type) return null;
          var A = kA[t.name];
          if (void 0 === A)
            throw new Error(
              'Attempting to parse an unsupported transform function "' +
                t.name +
                '"',
            );
          return A(t.values);
        },
      },
      kA = {
        matrix: function (e) {
          e = e
            .filter(function (e) {
              return 17 === e.type;
            })
            .map(function (e) {
              return e.number;
            });
          return 6 === e.length ? e : null;
        },
        matrix3d: function (e) {
          var e = e
              .filter(function (e) {
                return 17 === e.type;
              })
              .map(function (e) {
                return e.number;
              }),
            t = e[0],
            A = e[1],
            r = (e[2], e[3], e[4]),
            n = e[5],
            i = (e[6], e[7], e[8], e[9], e[10], e[11], e[12]),
            a = e[13];
          return e[14], e[15], 16 === e.length ? [t, A, r, n, i, a] : null;
        },
      },
      Y = { type: 16, number: 50, flags: 4 },
      zA = [Y, Y],
      KA = {
        name: 'transform-origin',
        initialValue: '50% 50%',
        prefix: !0,
        type: 1,
        parse: function (e, t) {
          t = t.filter(c);
          return 2 !== t.length ? zA : [t[0], t[1]];
        },
      },
      XA = {
        name: 'visible',
        initialValue: 'none',
        prefix: !1,
        type: 2,
        parse: function (e, t) {
          switch (t) {
            case 'hidden':
              return 1;
            case 'collapse':
              return 2;
            default:
              return 0;
          }
        },
      },
      jA =
        (((E = Xt = Xt || {}).NORMAL = 'normal'),
        (E.BREAK_ALL = 'break-all'),
        {
          name: 'word-break',
          initialValue: 'normal',
          prefix: !(E.KEEP_ALL = 'keep-all'),
          type: 2,
          parse: function (e, t) {
            switch (t) {
              case 'break-all':
                return Xt.BREAK_ALL;
              case 'keep-all':
                return Xt.KEEP_ALL;
              default:
                return Xt.NORMAL;
            }
          },
        }),
      WA = {
        name: 'z-index',
        initialValue: 'auto',
        prefix: !1,
        type: 0,
        parse: function (e, t) {
          if (20 === t.type) return { auto: !0, order: 0 };
          if (We(t)) return { auto: !1, order: t.number };
          throw new Error('Invalid z-index number parsed');
        },
      },
      YA = function (e, t) {
        if (15 === t.type)
          switch (t.unit.toLowerCase()) {
            case 's':
              return 1e3 * t.number;
            case 'ms':
              return t.number;
          }
        throw new Error('Unsupported time type');
      },
      JA = {
        name: 'opacity',
        initialValue: '1',
        type: 0,
        prefix: !1,
        parse: function (e, t) {
          return We(t) ? t.number : 1;
        },
      },
      ZA = {
        name: 'text-decoration-color',
        initialValue: 'transparent',
        prefix: !1,
        type: 3,
        format: 'color',
      },
      qA = {
        name: 'text-decoration-line',
        initialValue: 'none',
        prefix: !1,
        type: 1,
        parse: function (e, t) {
          return t
            .filter(f)
            .map(function (e) {
              switch (e.value) {
                case 'underline':
                  return 1;
                case 'overline':
                  return 2;
                case 'line-through':
                  return 3;
                case 'none':
                  return 4;
              }
              return 0;
            })
            .filter(function (e) {
              return 0 !== e;
            });
        },
      },
      $A = {
        name: 'font-family',
        initialValue: '',
        prefix: !1,
        type: 1,
        parse: function (e, t) {
          var A = [],
            r = [];
          return (
            t.forEach(function (e) {
              switch (e.type) {
                case 20:
                case 0:
                  A.push(e.value);
                  break;
                case 17:
                  A.push(e.number.toString());
                  break;
                case 4:
                  r.push(A.join(' ')), (A.length = 0);
              }
            }),
            A.length && r.push(A.join(' ')),
            r.map(function (e) {
              return -1 === e.indexOf(' ') ? e : "'" + e + "'";
            })
          );
        },
      },
      er = {
        name: 'font-size',
        initialValue: '0',
        prefix: !1,
        type: 3,
        format: 'length',
      },
      tr = {
        name: 'font-weight',
        initialValue: 'normal',
        type: 0,
        prefix: !1,
        parse: function (e, t) {
          return We(t) ? t.number : !f(t) || 'bold' !== t.value ? 400 : 700;
        },
      },
      Ar = {
        name: 'font-variant',
        initialValue: 'none',
        type: 1,
        prefix: !1,
        parse: function (e, t) {
          return t.filter(f).map(function (e) {
            return e.value;
          });
        },
      },
      rr = {
        name: 'font-style',
        initialValue: 'normal',
        prefix: !1,
        type: 2,
        parse: function (e, t) {
          switch (t) {
            case 'oblique':
              return 'oblique';
            case 'italic':
              return 'italic';
            default:
              return 'normal';
          }
        },
      },
      m = function (e, t) {
        return 0 != (e & t);
      },
      nr = {
        name: 'content',
        initialValue: 'none',
        type: 1,
        prefix: !1,
        parse: function (e, t) {
          var A;
          return 0 === t.length ||
            (20 === (A = t[0]).type && 'none' === A.value)
            ? []
            : t;
        },
      },
      ir = {
        name: 'counter-increment',
        initialValue: 'none',
        prefix: !0,
        type: 1,
        parse: function (e, t) {
          if (0 === t.length) return null;
          var A = t[0];
          if (20 === A.type && 'none' === A.value) return null;
          for (var r = [], n = t.filter(Ze), i = 0; i < n.length; i++) {
            var a = n[i],
              o = n[i + 1];
            20 === a.type &&
              ((o = o && We(o) ? o.number : 1),
              r.push({ counter: a.value, increment: o }));
          }
          return r;
        },
      },
      ar = {
        name: 'counter-reset',
        initialValue: 'none',
        prefix: !0,
        type: 1,
        parse: function (e, t) {
          if (0 === t.length) return [];
          for (var A = [], r = t.filter(Ze), n = 0; n < r.length; n++) {
            var i = r[n],
              a = r[n + 1];
            f(i) &&
              'none' !== i.value &&
              ((a = a && We(a) ? a.number : 0),
              A.push({ counter: i.value, reset: a }));
          }
          return A;
        },
      },
      or = {
        name: 'duration',
        initialValue: '0s',
        prefix: !1,
        type: 1,
        parse: function (t, e) {
          return e.filter(it).map(function (e) {
            return YA(t, e);
          });
        },
      },
      sr = {
        name: 'quotes',
        initialValue: 'none',
        prefix: !0,
        type: 1,
        parse: function (e, t) {
          if (0 === t.length) return null;
          var A = t[0];
          if (20 === A.type && 'none' === A.value) return null;
          var r = [],
            n = t.filter(Ye);
          if (n.length % 2 != 0) return null;
          for (var i = 0; i < n.length; i += 2) {
            var a = n[i].value,
              o = n[i + 1].value;
            r.push({ open: a, close: o });
          }
          return r;
        },
      },
      lr = {
        name: 'box-shadow',
        initialValue: 'none',
        type: 1,
        prefix: !1,
        parse: function (i, e) {
          return 1 === e.length && Je(e[0], 'none')
            ? []
            : l(e).map(function (e) {
                for (
                  var t = {
                      color: 255,
                      offsetX: g,
                      offsetY: g,
                      blur: g,
                      spread: g,
                      inset: !1,
                    },
                    A = 0,
                    r = 0;
                  r < e.length;
                  r++
                ) {
                  var n = e[r];
                  Je(n, 'inset')
                    ? (t.inset = !0)
                    : ot(n)
                    ? (0 === A
                        ? (t.offsetX = n)
                        : 1 === A
                        ? (t.offsetY = n)
                        : 2 === A
                        ? (t.blur = n)
                        : (t.spread = n),
                      A++)
                    : (t.color = gt.parse(i, n));
                }
                return t;
              });
        },
      },
      cr = {
        name: 'paint-order',
        initialValue: 'normal',
        prefix: !1,
        type: 1,
        parse: function (e, t) {
          var A = [];
          return (
            t.filter(f).forEach(function (e) {
              switch (e.value) {
                case 'stroke':
                  A.push(1);
                  break;
                case 'fill':
                  A.push(0);
                  break;
                case 'markers':
                  A.push(2);
              }
            }),
            [0, 1, 2].forEach(function (e) {
              -1 === A.indexOf(e) && A.push(e);
            }),
            A
          );
        },
      },
      ur = {
        name: '-webkit-text-stroke-color',
        initialValue: 'currentcolor',
        prefix: !1,
        type: 3,
        format: 'color',
      },
      hr = {
        name: '-webkit-text-stroke-width',
        initialValue: '0',
        type: 0,
        prefix: !1,
        parse: function (e, t) {
          return it(t) ? t.number : 0;
        },
      },
      dr =
        ((pr.prototype.isVisible = function () {
          return 0 < this.display && 0 < this.opacity && 0 === this.visibility;
        }),
        (pr.prototype.isTransparent = function () {
          return At(this.backgroundColor);
        }),
        (pr.prototype.isTransformed = function () {
          return null !== this.transform;
        }),
        (pr.prototype.isPositioned = function () {
          return 0 !== this.position;
        }),
        (pr.prototype.isPositionedWithZIndex = function () {
          return this.isPositioned() && !this.zIndex.auto;
        }),
        (pr.prototype.isFloating = function () {
          return 0 !== this.float;
        }),
        (pr.prototype.isInlineLevel = function () {
          return (
            m(this.display, 4) ||
            m(this.display, 33554432) ||
            m(this.display, 268435456) ||
            m(this.display, 536870912) ||
            m(this.display, 67108864) ||
            m(this.display, 134217728)
          );
        }),
        pr);
    function pr(e, t) {
      (this.animationDuration = r(e, or, t.animationDuration)),
        (this.backgroundClip = r(e, Ft, t.backgroundClip)),
        (this.backgroundColor = r(e, Tt, t.backgroundColor)),
        (this.backgroundImage = r(e, Wt, t.backgroundImage)),
        (this.backgroundOrigin = r(e, Yt, t.backgroundOrigin)),
        (this.backgroundPosition = r(e, Jt, t.backgroundPosition)),
        (this.backgroundRepeat = r(e, Zt, t.backgroundRepeat)),
        (this.backgroundSize = r(e, $t, t.backgroundSize)),
        (this.borderTopColor = r(e, tA, t.borderTopColor)),
        (this.borderRightColor = r(e, AA, t.borderRightColor)),
        (this.borderBottomColor = r(e, rA, t.borderBottomColor)),
        (this.borderLeftColor = r(e, nA, t.borderLeftColor)),
        (this.borderTopLeftRadius = r(e, iA, t.borderTopLeftRadius)),
        (this.borderTopRightRadius = r(e, aA, t.borderTopRightRadius)),
        (this.borderBottomRightRadius = r(e, oA, t.borderBottomRightRadius)),
        (this.borderBottomLeftRadius = r(e, sA, t.borderBottomLeftRadius)),
        (this.borderTopStyle = r(e, lA, t.borderTopStyle)),
        (this.borderRightStyle = r(e, cA, t.borderRightStyle)),
        (this.borderBottomStyle = r(e, uA, t.borderBottomStyle)),
        (this.borderLeftStyle = r(e, hA, t.borderLeftStyle)),
        (this.borderTopWidth = r(e, dA, t.borderTopWidth)),
        (this.borderRightWidth = r(e, pA, t.borderRightWidth)),
        (this.borderBottomWidth = r(e, fA, t.borderBottomWidth)),
        (this.borderLeftWidth = r(e, gA, t.borderLeftWidth)),
        (this.boxShadow = r(e, lr, t.boxShadow)),
        (this.color = r(e, mA, t.color)),
        (this.direction = r(e, vA, t.direction)),
        (this.display = r(e, BA, t.display)),
        (this.float = r(e, yA, t.cssFloat)),
        (this.fontFamily = r(e, $A, t.fontFamily)),
        (this.fontSize = r(e, er, t.fontSize)),
        (this.fontStyle = r(e, rr, t.fontStyle)),
        (this.fontVariant = r(e, Ar, t.fontVariant)),
        (this.fontWeight = r(e, tr, t.fontWeight)),
        (this.letterSpacing = r(e, EA, t.letterSpacing)),
        (this.lineBreak = r(e, xA, t.lineBreak)),
        (this.lineHeight = r(e, bA, t.lineHeight)),
        (this.listStyleImage = r(e, CA, t.listStyleImage)),
        (this.listStylePosition = r(e, FA, t.listStylePosition)),
        (this.listStyleType = r(e, TA, t.listStyleType)),
        (this.marginTop = r(e, _A, t.marginTop)),
        (this.marginRight = r(e, UA, t.marginRight)),
        (this.marginBottom = r(e, MA, t.marginBottom)),
        (this.marginLeft = r(e, SA, t.marginLeft)),
        (this.opacity = r(e, JA, t.opacity));
      var A = r(e, QA, t.overflow);
      (this.overflowX = A[0]),
        (this.overflowY = A[1 < A.length ? 1 : 0]),
        (this.overflowWrap = r(e, LA, t.overflowWrap)),
        (this.paddingTop = r(e, HA, t.paddingTop)),
        (this.paddingRight = r(e, IA, t.paddingRight)),
        (this.paddingBottom = r(e, RA, t.paddingBottom)),
        (this.paddingLeft = r(e, PA, t.paddingLeft)),
        (this.paintOrder = r(e, cr, t.paintOrder)),
        (this.position = r(e, OA, t.position)),
        (this.textAlign = r(e, DA, t.textAlign)),
        (this.textDecorationColor = r(
          e,
          ZA,
          null != (A = t.textDecorationColor) ? A : t.color,
        )),
        (this.textDecorationLine = r(
          e,
          qA,
          null != (A = t.textDecorationLine) ? A : t.textDecoration,
        )),
        (this.textShadow = r(e, NA, t.textShadow)),
        (this.textTransform = r(e, GA, t.textTransform)),
        (this.transform = r(e, VA, t.transform)),
        (this.transformOrigin = r(e, KA, t.transformOrigin)),
        (this.visibility = r(e, XA, t.visibility)),
        (this.webkitTextStrokeColor = r(e, ur, t.webkitTextStrokeColor)),
        (this.webkitTextStrokeWidth = r(e, hr, t.webkitTextStrokeWidth)),
        (this.wordBreak = r(e, jA, t.wordBreak)),
        (this.zIndex = r(e, WA, t.zIndex));
    }
    for (
      var fr = function (e, t) {
          (this.content = r(e, nr, t.content)),
            (this.quotes = r(e, sr, t.quotes));
        },
        gr = function (e, t) {
          (this.counterIncrement = r(e, ir, t.counterIncrement)),
            (this.counterReset = r(e, ar, t.counterReset));
        },
        r = function (e, t, A) {
          var r = new Xe(),
            A = null != A ? A.toString() : t.initialValue,
            n = (r.write(A), new je(r.read()));
          switch (t.type) {
            case 2:
              var i = n.parseComponentValue();
              return t.parse(e, f(i) ? i.value : t.initialValue);
            case 0:
              return t.parse(e, n.parseComponentValue());
            case 1:
              return t.parse(e, n.parseComponentValues());
            case 4:
              return n.parseComponentValue();
            case 3:
              switch (t.format) {
                case 'angle':
                  return ft(e, n.parseComponentValue());
                case 'color':
                  return gt.parse(e, n.parseComponentValue());
                case 'image':
                  return Ht(e, n.parseComponentValue());
                case 'length':
                  var a = n.parseComponentValue();
                  return ot(a) ? a : g;
                case 'length-percentage':
                  a = n.parseComponentValue();
                  return c(a) ? a : g;
                case 'time':
                  return YA(e, n.parseComponentValue());
              }
          }
        },
        mr = function (e) {
          switch (e.getAttribute('data-html2canvas-debug')) {
            case 'all':
              return 1;
            case 'clone':
              return 2;
            case 'parse':
              return 3;
            case 'render':
              return 4;
            default:
              return 0;
          }
        },
        vr = function (e, t) {
          e = mr(e);
          return 1 === e || t === e;
        },
        i = function (e, t) {
          (this.context = e),
            (this.textNodes = []),
            (this.elements = []),
            (this.flags = 0),
            vr(t, 3),
            (this.styles = new dr(e, window.getComputedStyle(t, null))),
            In(t) &&
              (this.styles.animationDuration.some(function (e) {
                return 0 < e;
              }) && (t.style.animationDuration = '0s'),
              null !== this.styles.transform) &&
              (t.style.transform = 'none'),
            (this.bounds = O(this.context, t)),
            vr(t, 4) && (this.flags |= 16);
        },
        Br = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',
        wr = 'undefined' == typeof Uint8Array ? [] : new Uint8Array(256),
        yr = 0;
      yr < Br.length;
      yr++
    )
      wr[Br.charCodeAt(yr)] = yr;
    function Er(e, t, A) {
      return e.slice
        ? e.slice(t, A)
        : new Uint16Array(Array.prototype.slice.call(e, t, A));
    }
    br.prototype.get = function (e) {
      var t;
      if (0 <= e) {
        if (e < 55296 || (56319 < e && e <= 65535))
          return (t = this.index[e >> 5]), this.data[(t = (t << 2) + (31 & e))];
        if (e <= 65535)
          return (
            (t = this.index[2048 + ((e - 55296) >> 5)]),
            this.data[(t = (t << 2) + (31 & e))]
          );
        if (e < this.highStart)
          return (
            (t = this.index[(t = 2080 + (e >> 11))]),
            (t = this.index[(t += (e >> 5) & 63)]),
            this.data[(t = (t << 2) + (31 & e))]
          );
        if (e <= 1114111) return this.data[this.highValueIndex];
      }
      return this.errorValue;
    };
    var xr = br;
    function br(e, t, A, r, n, i) {
      (this.initialValue = e),
        (this.errorValue = t),
        (this.highStart = A),
        (this.highValueIndex = r),
        (this.index = n),
        (this.data = i);
    }
    for (
      var Cr =
          'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',
        Fr = 'undefined' == typeof Uint8Array ? [] : new Uint8Array(256),
        Tr = 0;
      Tr < Cr.length;
      Tr++
    )
      Fr[Cr.charCodeAt(Tr)] = Tr;
    function _r(e) {
      return Hr.get(e);
    }
    function Ur(e) {
      return 0 === e[0] && 255 === e[1] && 0 === e[2] && 255 === e[3];
    }
    function Mr(e, t, A, r, n) {
      var i = 'http://www.w3.org/2000/svg',
        a = document.createElementNS(i, 'svg'),
        i = document.createElementNS(i, 'foreignObject');
      return (
        a.setAttributeNS(null, 'width', e.toString()),
        a.setAttributeNS(null, 'height', t.toString()),
        i.setAttributeNS(null, 'width', '100%'),
        i.setAttributeNS(null, 'height', '100%'),
        i.setAttributeNS(null, 'x', A.toString()),
        i.setAttributeNS(null, 'y', r.toString()),
        i.setAttributeNS(null, 'externalResourcesRequired', 'true'),
        a.appendChild(i),
        i.appendChild(n),
        a
      );
    }
    function Sr(r) {
      return new Promise(function (e, t) {
        var A = new Image();
        (A.onload = function () {
          return e(A);
        }),
          (A.onerror = t),
          (A.src =
            'data:image/svg+xml;charset=utf-8,' +
            encodeURIComponent(new XMLSerializer().serializeToString(r)));
      });
    }
    function Qr(e, t) {
      if (v.SUPPORT_NATIVE_TEXT_SEGMENTATION)
        return (
          (n = new Intl.Segmenter(void 0, { granularity: 'word' })),
          Array.from(n.segment(e)).map(function (e) {
            return e.segment;
          })
        );
      function A() {
        var e, t;
        r.value &&
          ((e = r.value.slice()),
          (e = G(e)),
          (t = ''),
          e.forEach(function (e) {
            -1 === Gr.indexOf(e)
              ? (t += h(e))
              : (t.length && a.push(t), a.push(h(e)), (t = ''));
          }),
          t.length) &&
          a.push(t);
      }
      for (
        var r,
          n = t,
          i = we(e, {
            lineBreak: n.lineBreak,
            wordBreak:
              'break-word' === n.overflowWrap ? 'break-word' : n.wordBreak,
          }),
          a = [];
        !(r = i.next()).done;

      )
        A();
      return a;
    }
    (o = (function (e) {
      for (
        var t,
          A,
          r,
          n,
          i = 0.75 * e.length,
          a = e.length,
          o = 0,
          i =
            ('=' === e[e.length - 1] && (i--, '=' === e[e.length - 2]) && i--,
            new ('undefined' != typeof ArrayBuffer &&
            'undefined' != typeof Uint8Array &&
            void 0 !== Uint8Array.prototype.slice
              ? ArrayBuffer
              : Array)(i)),
          s = Array.isArray(i) ? i : new Uint8Array(i),
          l = 0;
        l < a;
        l += 4
      )
        (t = wr[e.charCodeAt(l)]),
          (A = wr[e.charCodeAt(l + 1)]),
          (r = wr[e.charCodeAt(l + 2)]),
          (n = wr[e.charCodeAt(l + 3)]),
          (s[o++] = (t << 2) | (A >> 4)),
          (s[o++] = ((15 & A) << 4) | (r >> 2)),
          (s[o++] = ((3 & r) << 6) | (63 & n));
      return i;
    })(
      (o =
        'AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA='),
    )),
      (s = Array.isArray(o)
        ? (function (e) {
            for (var t = e.length, A = [], r = 0; r < t; r += 4)
              A.push(
                (e[r + 3] << 24) | (e[r + 2] << 16) | (e[r + 1] << 8) | e[r],
              );
            return A;
          })(o)
        : new Uint32Array(o)),
      (o = Array.isArray(o)
        ? (function (e) {
            for (var t = e.length, A = [], r = 0; r < t; r += 2)
              A.push((e[r + 1] << 8) | e[r]);
            return A;
          })(o)
        : new Uint16Array(o)),
      (Y = Er(o, 12, s[4] / 2)),
      (o =
        2 === s[5]
          ? Er(o, (24 + s[4]) / 2)
          : ((o = s),
            (E = Math.ceil((24 + s[4]) / 4)),
            o.slice
              ? o.slice(E, T)
              : new Uint32Array(Array.prototype.slice.call(o, E, T))));
    var o,
      s,
      Lr,
      Hr = new xr(s[0], s[1], s[2], s[3], Y, o),
      Ir = function (e) {
        var A = (function (e) {
            for (var t = [], A = 0, r = e.length; A < r; ) {
              var n,
                i = e.charCodeAt(A++);
              55296 <= i && i <= 56319 && A < r
                ? 56320 == (64512 & (n = e.charCodeAt(A++)))
                  ? t.push(((1023 & i) << 10) + (1023 & n) + 65536)
                  : (t.push(i), A--)
                : t.push(i);
            }
            return t;
          })(e),
          r = A.length,
          n = 0,
          i = 0,
          a = A.map(_r);
        return {
          next: function () {
            if (r <= n) return { done: !0, value: null };
            for (
              var e, t = '';
              n < r &&
              '' ===
                (t = (function (e, t) {
                  var A = t - 2,
                    r = e[A],
                    n = e[t - 1],
                    t = e[t];
                  if (2 === n && 3 === t) return '';
                  if (
                    2 !== n &&
                    3 !== n &&
                    4 !== n &&
                    2 !== t &&
                    3 !== t &&
                    4 !== t
                  ) {
                    if (8 === n && -1 !== [8, 9, 11, 12].indexOf(t)) return '';
                    if (!((11 !== n && 9 !== n) || (9 !== t && 10 !== t)))
                      return '';
                    if ((12 === n || 10 === n) && 10 === t) return '';
                    if (13 === t || 5 === t) return '';
                    if (7 === t) return '';
                    if (1 === n) return '';
                    if (13 === n && 14 === t) {
                      for (; 5 === r; ) r = e[--A];
                      if (14 === r) return '';
                    }
                    if (15 === n && 15 === t) {
                      for (var i = 0; 15 === r; ) i++, (r = e[--A]);
                      if (i % 2 == 0) return '';
                    }
                  }
                  return '';
                })(a, ++n));

            );
            return '' !== t || n === r
              ? ((e = function () {
                  for (var e = [], t = 0; t < arguments.length; t++)
                    e[t] = arguments[t];
                  if (String.fromCodePoint)
                    return String.fromCodePoint.apply(String, e);
                  var A = e.length;
                  if (!A) return '';
                  for (var r = [], n = -1, i = ''; ++n < A; ) {
                    var a = e[n];
                    a <= 65535
                      ? r.push(a)
                      : r.push(
                          55296 + ((a -= 65536) >> 10),
                          (a % 1024) + 56320,
                        ),
                      (n + 1 === A || 16384 < r.length) &&
                        ((i += String.fromCharCode.apply(String, r)),
                        (r.length = 0));
                  }
                  return i;
                }.apply(null, A.slice(i, n))),
                (i = n),
                { value: e, done: !1 })
              : { done: !0, value: null };
          },
        };
      },
      v = {
        get SUPPORT_RANGE_BOUNDS() {
          var e = (function (e) {
            if (e.createRange) {
              var t = e.createRange();
              if (t.getBoundingClientRect) {
                var A = e.createElement('boundtest'),
                  t =
                    ((A.style.height = '123px'),
                    (A.style.display = 'block'),
                    e.body.appendChild(A),
                    t.selectNode(A),
                    t.getBoundingClientRect()),
                  t = Math.round(t.height);
                if ((e.body.removeChild(A), 123 === t)) return !0;
              }
            }
            return !1;
          })(document);
          return (
            Object.defineProperty(v, 'SUPPORT_RANGE_BOUNDS', { value: e }), e
          );
        },
        get SUPPORT_WORD_BREAKING() {
          var e,
            r,
            n,
            t,
            i,
            a,
            A =
              v.SUPPORT_RANGE_BOUNDS &&
              ((A = document),
              ((e = A.createElement('boundtest')).style.width = '50px'),
              (e.style.display = 'block'),
              (e.style.fontSize = '12px'),
              (e.style.letterSpacing = '0px'),
              (e.style.wordSpacing = '0px'),
              A.body.appendChild(e),
              (r = A.createRange()),
              (e.innerHTML =
                'function' == typeof ''.repeat ? '&#128104;'.repeat(10) : ''),
              (n = e.firstChild),
              (t = G(n.data).map(function (e) {
                return h(e);
              })),
              (i = 0),
              (a = {}),
              (t = t.every(function (e, t) {
                r.setStart(n, i), r.setEnd(n, i + e.length);
                var A = r.getBoundingClientRect(),
                  e = ((i += e.length), A.x > a.x || A.y > a.y);
                return (a = A), 0 === t || e;
              })),
              A.body.removeChild(e),
              t);
          return (
            Object.defineProperty(v, 'SUPPORT_WORD_BREAKING', { value: A }), A
          );
        },
        get SUPPORT_SVG_DRAWING() {
          var e = (function (e) {
            var t = new Image(),
              e = e.createElement('canvas'),
              A = e.getContext('2d');
            if (!A) return !1;
            t.src =
              "data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";
            try {
              A.drawImage(t, 0, 0), e.toDataURL();
            } catch (e) {
              return !1;
            }
            return !0;
          })(document);
          return (
            Object.defineProperty(v, 'SUPPORT_SVG_DRAWING', { value: e }), e
          );
        },
        get SUPPORT_FOREIGNOBJECT_DRAWING() {
          var e =
            'function' == typeof Array.from && 'function' == typeof window.fetch
              ? (function (A) {
                  var e = A.createElement('canvas'),
                    r = ((e.width = 100), (e.height = 100), e.getContext('2d'));
                  if (!r) return Promise.reject(!1);
                  (r.fillStyle = 'rgb(0, 255, 0)'), r.fillRect(0, 0, 100, 100);
                  var t = new Image(),
                    n = e.toDataURL(),
                    e = ((t.src = n), Mr(100, 100, 0, 0, t));
                  return (
                    (r.fillStyle = 'red'),
                    r.fillRect(0, 0, 100, 100),
                    Sr(e)
                      .then(function (e) {
                        r.drawImage(e, 0, 0);
                        var e = r.getImageData(0, 0, 100, 100).data,
                          t =
                            ((r.fillStyle = 'red'),
                            r.fillRect(0, 0, 100, 100),
                            A.createElement('div'));
                        return (
                          (t.style.backgroundImage = 'url(' + n + ')'),
                          (t.style.height = '100px'),
                          Ur(e) ? Sr(Mr(100, 100, 0, 0, t)) : Promise.reject(!1)
                        );
                      })
                      .then(function (e) {
                        return (
                          r.drawImage(e, 0, 0),
                          Ur(r.getImageData(0, 0, 100, 100).data)
                        );
                      })
                      .catch(function () {
                        return !1;
                      })
                  );
                })(document)
              : Promise.resolve(!1);
          return (
            Object.defineProperty(v, 'SUPPORT_FOREIGNOBJECT_DRAWING', {
              value: e,
            }),
            e
          );
        },
        get SUPPORT_CORS_IMAGES() {
          var e = void 0 !== new Image().crossOrigin;
          return (
            Object.defineProperty(v, 'SUPPORT_CORS_IMAGES', { value: e }), e
          );
        },
        get SUPPORT_RESPONSE_TYPE() {
          var e = 'string' == typeof new XMLHttpRequest().responseType;
          return (
            Object.defineProperty(v, 'SUPPORT_RESPONSE_TYPE', { value: e }), e
          );
        },
        get SUPPORT_CORS_XHR() {
          var e = 'withCredentials' in new XMLHttpRequest();
          return Object.defineProperty(v, 'SUPPORT_CORS_XHR', { value: e }), e;
        },
        get SUPPORT_NATIVE_TEXT_SEGMENTATION() {
          var e = !('undefined' == typeof Intl || !Intl.Segmenter);
          return (
            Object.defineProperty(v, 'SUPPORT_NATIVE_TEXT_SEGMENTATION', {
              value: e,
            }),
            e
          );
        },
      },
      Rr = function (e, t) {
        (this.text = e), (this.bounds = t);
      },
      Pr = function (e, t) {
        var A = t.ownerDocument;
        if (A) {
          var A = A.createElement('html2canvaswrapper'),
            r = (A.appendChild(t.cloneNode(!0)), t.parentNode);
          if (r)
            return (
              r.replaceChild(A, t),
              (t = O(e, A)),
              A.firstChild && r.replaceChild(A.firstChild, A),
              t
            );
        }
        return B.EMPTY;
      },
      Dr = function (e, t, A) {
        var r = e.ownerDocument;
        if (r)
          return (r = r.createRange()).setStart(e, t), r.setEnd(e, t + A), r;
        throw new Error('Node has no owner document');
      },
      Or = function (e) {
        var t;
        if (v.SUPPORT_NATIVE_TEXT_SEGMENTATION)
          return (
            (t = new Intl.Segmenter(void 0, { granularity: 'grapheme' })),
            Array.from(t.segment(e)).map(function (e) {
              return e.segment;
            })
          );
        for (var A, r = Ir(e), n = []; !(A = r.next()).done; )
          A.value && n.push(A.value.slice());
        return n;
      },
      Nr = function (e, t) {
        return 0 !== t.letterSpacing ? Or(e) : Qr(e, t);
      },
      Gr = [32, 160, 4961, 65792, 65793, 4153, 4241],
      Vr = function (e, t, A) {
        var n, i, a, o, s;
        (this.text = kr(t.data, A.textTransform)),
          (this.textBounds =
            ((n = e),
            (e = this.text),
            (a = t),
            (e = Nr(e, (i = A))),
            (o = []),
            (s = 0),
            e.forEach(function (e) {
              var t, A, r;
              i.textDecorationLine.length || 0 < e.trim().length
                ? v.SUPPORT_RANGE_BOUNDS
                  ? 1 < (t = Dr(a, s, e.length).getClientRects()).length
                    ? ((r = Or(e)),
                      (A = 0),
                      r.forEach(function (e) {
                        o.push(
                          new Rr(
                            e,
                            B.fromDOMRectList(
                              n,
                              Dr(a, A + s, e.length).getClientRects(),
                            ),
                          ),
                        ),
                          (A += e.length);
                      }))
                    : o.push(new Rr(e, B.fromDOMRectList(n, t)))
                  : ((r = a.splitText(e.length)),
                    o.push(new Rr(e, Pr(n, a))),
                    (a = r))
                : v.SUPPORT_RANGE_BOUNDS || (a = a.splitText(e.length)),
                (s += e.length);
            }),
            o));
      },
      kr = function (e, t) {
        switch (t) {
          case 1:
            return e.toLowerCase();
          case 3:
            return e.replace(zr, Kr);
          case 2:
            return e.toUpperCase();
          default:
            return e;
        }
      },
      zr = /(^|\s|:|-|\(|\))([a-z])/g,
      Kr = function (e, t, A) {
        return 0 < e.length ? t + A.toUpperCase() : e;
      },
      Xr = (e(jr, (Lr = i)), jr);
    function jr(e, t) {
      e = Lr.call(this, e, t) || this;
      return (
        (e.src = t.currentSrc || t.src),
        (e.intrinsicWidth = t.naturalWidth),
        (e.intrinsicHeight = t.naturalHeight),
        e.context.cache.addImage(e.src),
        e
      );
    }
    e(Jr, (Wr = i));
    var Wr,
      Yr = Jr;
    function Jr(e, t) {
      e = Wr.call(this, e, t) || this;
      return (
        (e.canvas = t),
        (e.intrinsicWidth = t.width),
        (e.intrinsicHeight = t.height),
        e
      );
    }
    e($r, (Zr = i));
    var Zr,
      qr = $r;
    function $r(e, t) {
      var A = Zr.call(this, e, t) || this,
        r = new XMLSerializer(),
        e = O(e, t);
      return (
        t.setAttribute('width', e.width + 'px'),
        t.setAttribute('height', e.height + 'px'),
        (A.svg =
          'data:image/svg+xml,' + encodeURIComponent(r.serializeToString(t))),
        (A.intrinsicWidth = t.width.baseVal.value),
        (A.intrinsicHeight = t.height.baseVal.value),
        A.context.cache.addImage(A.svg),
        A
      );
    }
    e(An, (en = i));
    var en,
      tn = An;
    function An(e, t) {
      e = en.call(this, e, t) || this;
      return (e.value = t.value), e;
    }
    e(an, (rn = i));
    var rn,
      nn = an;
    function an(e, t) {
      e = rn.call(this, e, t) || this;
      return (
        (e.start = t.start),
        (e.reversed = 'boolean' == typeof t.reversed && !0 === t.reversed),
        e
      );
    }
    var on,
      sn = [{ type: 15, flags: 0, unit: 'px', number: 3 }],
      ln = [{ type: 16, flags: 0, number: 50 }],
      cn = 'checkbox',
      un = 'radio',
      hn = 'password',
      dn = (e(pn, (on = i)), pn);
    function pn(e, t) {
      var A = on.call(this, e, t) || this;
      switch (
        ((A.type = t.type.toLowerCase()),
        (A.checked = t.checked),
        (A.value =
          0 ===
          (t =
            (e = t).type === hn
              ? new Array(e.value.length + 1).join('')
              : e.value).length
            ? e.placeholder || ''
            : t),
        (A.type !== cn && A.type !== un) ||
          ((A.styles.backgroundColor = 3739148031),
          (A.styles.borderTopColor =
            A.styles.borderRightColor =
            A.styles.borderBottomColor =
            A.styles.borderLeftColor =
              2779096575),
          (A.styles.borderTopWidth =
            A.styles.borderRightWidth =
            A.styles.borderBottomWidth =
            A.styles.borderLeftWidth =
              1),
          (A.styles.borderTopStyle =
            A.styles.borderRightStyle =
            A.styles.borderBottomStyle =
            A.styles.borderLeftStyle =
              1),
          (A.styles.backgroundClip = [0]),
          (A.styles.backgroundOrigin = [0]),
          (A.bounds =
            (e = A.bounds).width > e.height
              ? new B(
                  e.left + (e.width - e.height) / 2,
                  e.top,
                  e.height,
                  e.height,
                )
              : e.width < e.height
              ? new B(
                  e.left,
                  e.top + (e.height - e.width) / 2,
                  e.width,
                  e.width,
                )
              : e)),
        A.type)
      ) {
        case cn:
          A.styles.borderTopRightRadius =
            A.styles.borderTopLeftRadius =
            A.styles.borderBottomRightRadius =
            A.styles.borderBottomLeftRadius =
              sn;
          break;
        case un:
          A.styles.borderTopRightRadius =
            A.styles.borderTopLeftRadius =
            A.styles.borderBottomRightRadius =
            A.styles.borderBottomLeftRadius =
              ln;
      }
      return A;
    }
    e(mn, (fn = i));
    var fn,
      gn = mn;
    function mn(e, t) {
      (e = fn.call(this, e, t) || this), (t = t.options[t.selectedIndex || 0]);
      return (e.value = (t && t.text) || ''), e;
    }
    e(wn, (vn = i));
    var vn,
      Bn = wn;
    function wn(e, t) {
      e = vn.call(this, e, t) || this;
      return (e.value = t.value), e;
    }
    e(xn, (yn = i));
    var yn,
      En = xn;
    function xn(e, t) {
      var A,
        r,
        n = yn.call(this, e, t) || this;
      (n.src = t.src),
        (n.width = parseInt(t.width, 10) || 0),
        (n.height = parseInt(t.height, 10) || 0),
        (n.backgroundColor = n.styles.backgroundColor);
      try {
        t.contentWindow &&
          t.contentWindow.document &&
          t.contentWindow.document.documentElement &&
          ((n.tree = Mn(e, t.contentWindow.document.documentElement)),
          (A = t.contentWindow.document.documentElement
            ? wt(
                e,
                getComputedStyle(t.contentWindow.document.documentElement)
                  .backgroundColor,
              )
            : w.TRANSPARENT),
          (r = t.contentWindow.document.body
            ? wt(
                e,
                getComputedStyle(t.contentWindow.document.body).backgroundColor,
              )
            : w.TRANSPARENT),
          (n.backgroundColor = At(A)
            ? At(r)
              ? n.styles.backgroundColor
              : r
            : A));
      } catch (e) {}
      return n;
    }
    function bn(e) {
      return 'VIDEO' === e.tagName;
    }
    function Cn(e) {
      return 'STYLE' === e.tagName;
    }
    function Fn(e) {
      return 0 < e.tagName.indexOf('-');
    }
    var Tn = ['OL', 'UL', 'MENU'],
      _n = function (t, e, A, r) {
        for (var n = e.firstChild; n; n = a) {
          var i,
            a = n.nextSibling;
          Ln(n) && 0 < n.data.trim().length
            ? A.textNodes.push(new Vr(t, n, A.styles))
            : Hn(n) &&
              (Wn(n) && n.assignedNodes
                ? n.assignedNodes().forEach(function (e) {
                    return _n(t, e, A, r);
                  })
                : (i = Un(t, n)).styles.isVisible() &&
                  (Sn(n, i, r)
                    ? (i.flags |= 4)
                    : Qn(i.styles) && (i.flags |= 2),
                  -1 !== Tn.indexOf(n.tagName) && (i.flags |= 8),
                  A.elements.push(i),
                  n.slot,
                  n.shadowRoot
                    ? _n(t, n.shadowRoot, i, r)
                    : Xn(n) || Gn(n) || jn(n) || _n(t, n, i, r)));
        }
      },
      Un = function (e, t) {
        return new (
          zn(t)
            ? Xr
            : kn(t)
            ? Yr
            : Gn(t)
            ? qr
            : Pn(t)
            ? tn
            : Dn(t)
            ? nn
            : On(t)
            ? dn
            : jn(t)
            ? gn
            : Xn(t)
            ? Bn
            : Kn(t)
            ? En
            : i
        )(e, t);
      },
      Mn = function (e, t) {
        var A = Un(e, t);
        return (A.flags |= 4), _n(e, t, A, A), A;
      },
      Sn = function (e, t, A) {
        return (
          t.styles.isPositionedWithZIndex() ||
          t.styles.opacity < 1 ||
          t.styles.isTransformed() ||
          (Vn(e) && A.styles.isTransparent())
        );
      },
      Qn = function (e) {
        return e.isPositioned() || e.isFloating();
      },
      Ln = function (e) {
        return e.nodeType === Node.TEXT_NODE;
      },
      Hn = function (e) {
        return e.nodeType === Node.ELEMENT_NODE;
      },
      In = function (e) {
        return Hn(e) && void 0 !== e.style && !Rn(e);
      },
      Rn = function (e) {
        return 'object' == typeof e.className;
      },
      Pn = function (e) {
        return 'LI' === e.tagName;
      },
      Dn = function (e) {
        return 'OL' === e.tagName;
      },
      On = function (e) {
        return 'INPUT' === e.tagName;
      },
      Nn = function (e) {
        return 'HTML' === e.tagName;
      },
      Gn = function (e) {
        return 'svg' === e.tagName;
      },
      Vn = function (e) {
        return 'BODY' === e.tagName;
      },
      kn = function (e) {
        return 'CANVAS' === e.tagName;
      },
      zn = function (e) {
        return 'IMG' === e.tagName;
      },
      Kn = function (e) {
        return 'IFRAME' === e.tagName;
      },
      Xn = function (e) {
        return 'TEXTAREA' === e.tagName;
      },
      jn = function (e) {
        return 'SELECT' === e.tagName;
      },
      Wn = function (e) {
        return 'SLOT' === e.tagName;
      },
      Yn =
        ((Jn.prototype.getCounterValue = function (e) {
          e = this.counters[e];
          return e && e.length ? e[e.length - 1] : 1;
        }),
        (Jn.prototype.getCounterValues = function (e) {
          e = this.counters[e];
          return e || [];
        }),
        (Jn.prototype.pop = function (e) {
          var t = this;
          e.forEach(function (e) {
            return t.counters[e].pop();
          });
        }),
        (Jn.prototype.parse = function (e) {
          var A = this,
            t = e.counterIncrement,
            e = e.counterReset,
            r = !0,
            n =
              (null !== t &&
                t.forEach(function (e) {
                  var t = A.counters[e.counter];
                  t &&
                    0 !== e.increment &&
                    ((r = !1),
                    t.length || t.push(1),
                    (t[Math.max(0, t.length - 1)] += e.increment));
                }),
              []);
          return (
            r &&
              e.forEach(function (e) {
                var t = A.counters[e.counter];
                n.push(e.counter),
                  (t = t || (A.counters[e.counter] = [])).push(e.reset);
              }),
            n
          );
        }),
        Jn);
    function Jn() {
      this.counters = {};
    }
    function Zn(r, e, t, n, A, i) {
      return r < e || t < r
        ? ci(r, A, 0 < i.length)
        : n.integers.reduce(function (e, t, A) {
            for (; t <= r; ) (r -= t), (e += n.values[A]);
            return e;
          }, '') + i;
    }
    function y(e, t, A, r, n) {
      var i = A - t + 1;
      return (
        (e < 0 ? '-' : '') +
        (ii(Math.abs(e), i, r, function (e) {
          return h(Math.floor(e % i) + t);
        }) +
          n)
      );
    }
    function qn(e, t, A) {
      void 0 === A && (A = '. ');
      var r = t.length;
      return (
        ii(Math.abs(e), r, !1, function (e) {
          return t[Math.floor(e % r)];
        }) + A
      );
    }
    function $n(e, t, A, r, n, i) {
      if (e < -9999 || 9999 < e) return ci(e, 4, 0 < n.length);
      var a = Math.abs(e),
        o = n;
      if (0 === a) return t[0] + o;
      for (var s = 0; 0 < a && s <= 4; s++) {
        var l = a % 10;
        0 == l && m(i, ai) && '' !== o
          ? (o = t[l] + o)
          : 1 < l ||
            (1 == l && 0 === s) ||
            (1 == l && 1 === s && m(i, oi)) ||
            (1 == l && 1 === s && m(i, si) && 100 < e) ||
            (1 == l && 1 < s && m(i, li))
          ? (o = t[l] + (0 < s ? A[s - 1] : '') + o)
          : 1 == l && 0 < s && (o = A[s - 1] + o),
          (a = Math.floor(a / 10));
      }
      return (e < 0 ? r : '') + o;
    }
    var ei,
      E,
      ti = {
        integers: [1e3, 900, 500, 400, 100, 90, 50, 40, 10, 9, 5, 4, 1],
        values: [
          'M',
          'CM',
          'D',
          'CD',
          'C',
          'XC',
          'L',
          'XL',
          'X',
          'IX',
          'V',
          'IV',
          'I',
        ],
      },
      Ai = {
        integers: [
          9e3, 8e3, 7e3, 6e3, 5e3, 4e3, 3e3, 2e3, 1e3, 900, 800, 700, 600, 500,
          400, 300, 200, 100, 90, 80, 70, 60, 50, 40, 30, 20, 10, 9, 8, 7, 6, 5,
          4, 3, 2, 1,
        ],
        values: [
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
        ],
      },
      ri = {
        integers: [
          1e4, 9e3, 8e3, 7e3, 6e3, 5e3, 4e3, 3e3, 2e3, 1e3, 400, 300, 200, 100,
          90, 80, 70, 60, 50, 40, 30, 20, 19, 18, 17, 16, 15, 10, 9, 8, 7, 6, 5,
          4, 3, 2, 1,
        ],
        values: [
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
        ],
      },
      ni = {
        integers: [
          1e4, 9e3, 8e3, 7e3, 6e3, 5e3, 4e3, 3e3, 2e3, 1e3, 900, 800, 700, 600,
          500, 400, 300, 200, 100, 90, 80, 70, 60, 50, 40, 30, 20, 10, 9, 8, 7,
          6, 5, 4, 3, 2, 1,
        ],
        values: [
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
        ],
      },
      ii = function (e, t, A, r) {
        for (var n = ''; A || e--, (n = r(e) + n), t <= (e /= t) * t; );
        return n;
      },
      ai = 1,
      oi = 2,
      si = 4,
      li = 8,
      ci = function (e, t, A) {
        var r = A ? '. ' : '',
          n = A ? '' : '',
          i = A ? ', ' : '',
          a = A ? ' ' : '';
        switch (t) {
          case 0:
            return '' + a;
          case 1:
            return '' + a;
          case 2:
            return '' + a;
          case 5:
            var o = y(e, 48, 57, !0, r);
            return o.length < 4 ? '0' + o : o;
          case 4:
            return qn(e, '', n);
          case 6:
            return Zn(e, 1, 3999, ti, 3, r).toLowerCase();
          case 7:
            return Zn(e, 1, 3999, ti, 3, r);
          case 8:
            return y(e, 945, 969, !1, r);
          case 9:
            return y(e, 97, 122, !1, r);
          case 10:
            return y(e, 65, 90, !1, r);
          case 11:
            return y(e, 1632, 1641, !0, r);
          case 12:
          case 49:
            return Zn(e, 1, 9999, Ai, 3, r);
          case 35:
            return Zn(e, 1, 9999, Ai, 3, r).toLowerCase();
          case 13:
            return y(e, 2534, 2543, !0, r);
          case 14:
          case 30:
            return y(e, 6112, 6121, !0, r);
          case 15:
            return qn(e, '', n);
          case 16:
            return qn(e, '', n);
          case 17:
          case 48:
            return $n(
              e,
              '',
              '',
              '',
              n,
              oi | si | li,
            );
          case 47:
            return $n(
              e,
              '',
              '',
              '',
              n,
              ai | oi | si | li,
            );
          case 42:
            return $n(
              e,
              '',
              '',
              '',
              n,
              oi | si | li,
            );
          case 41:
            return $n(
              e,
              '',
              '',
              '',
              n,
              ai | oi | si | li,
            );
          case 26:
            return $n(e, '', '', '', n, 0);
          case 25:
            return $n(
              e,
              '',
              '',
              '',
              n,
              ai | oi | si,
            );
          case 31:
            return $n(
              e,
              '',
              '',
              '',
              i,
              ai | oi | si,
            );
          case 33:
            return $n(e, '', '', '', i, 0);
          case 32:
            return $n(
              e,
              '',
              '',
              '',
              i,
              ai | oi | si,
            );
          case 18:
            return y(e, 2406, 2415, !0, r);
          case 20:
            return Zn(e, 1, 19999, ni, 3, r);
          case 21:
            return y(e, 2790, 2799, !0, r);
          case 22:
            return y(e, 2662, 2671, !0, r);
          case 22:
            return Zn(e, 1, 10999, ri, 3, r);
          case 23:
            return qn(
              e,
              '',
            );
          case 24:
            return qn(
              e,
              '',
            );
          case 27:
            return y(e, 3302, 3311, !0, r);
          case 28:
            return qn(
              e,
              '',
              n,
            );
          case 29:
            return qn(
              e,
              '',
              n,
            );
          case 34:
            return y(e, 3792, 3801, !0, r);
          case 37:
            return y(e, 6160, 6169, !0, r);
          case 38:
            return y(e, 4160, 4169, !0, r);
          case 39:
            return y(e, 2918, 2927, !0, r);
          case 40:
            return y(e, 1776, 1785, !0, r);
          case 43:
            return y(e, 3046, 3055, !0, r);
          case 44:
            return y(e, 3174, 3183, !0, r);
          case 45:
            return y(e, 3664, 3673, !0, r);
          case 46:
            return y(e, 3872, 3881, !0, r);
          default:
            return y(e, 48, 57, !0, r);
        }
      },
      ui = 'data-html2canvas-ignore',
      hi =
        ((x.prototype.toIFrame = function (e, r) {
          var t,
            n,
            i,
            A,
            a = this,
            o = pi(e, r);
          return o.contentWindow
            ? ((t = e.defaultView.pageXOffset),
              (e = e.defaultView.pageYOffset),
              (n = o.contentWindow),
              (i = n.document),
              (A = gi(o).then(function () {
                return u(a, void 0, void 0, function () {
                  var t, A;
                  return Q(this, function (e) {
                    switch (e.label) {
                      case 0:
                        return (this.scrolledElements.forEach(yi),
                        n &&
                          (n.scrollTo(r.left, r.top),
                          !/(iPad|iPhone|iPod)/g.test(navigator.userAgent) ||
                            (n.scrollY === r.top && n.scrollX === r.left) ||
                            (this.context.logger.warn(
                              'Unable to restore scroll position for cloned document',
                            ),
                            (this.context.windowBounds =
                              this.context.windowBounds.add(
                                n.scrollX - r.left,
                                n.scrollY - r.top,
                                0,
                                0,
                              )))),
                        (t = this.options.onclone),
                        void 0 === (A = this.clonedReferenceElement))
                          ? [
                              2,
                              Promise.reject(
                                'Error finding the ' +
                                  this.referenceElement.nodeName +
                                  ' in the cloned document',
                              ),
                            ]
                          : i.fonts && i.fonts.ready
                          ? [4, i.fonts.ready]
                          : [3, 2];
                      case 1:
                        e.sent(), (e.label = 2);
                      case 2:
                        return /(AppleWebKit)/g.test(navigator.userAgent)
                          ? [4, fi(i)]
                          : [3, 4];
                      case 3:
                        e.sent(), (e.label = 4);
                      case 4:
                        return 'function' == typeof t
                          ? [
                              2,
                              Promise.resolve()
                                .then(function () {
                                  return t(i, A);
                                })
                                .then(function () {
                                  return o;
                                }),
                            ]
                          : [2, o];
                    }
                  });
                });
              })),
              i.open(),
              i.write(Bi(document.doctype) + '<html></html>'),
              wi(this.referenceElement.ownerDocument, t, e),
              i.replaceChild(
                i.adoptNode(this.documentElement),
                i.documentElement,
              ),
              i.close(),
              A)
            : Promise.reject('Unable to find iframe window');
        }),
        (x.prototype.createElementClone = function (e) {
          var t;
          return (
            vr(e, 2),
            kn(e)
              ? this.createCanvasClone(e)
              : bn(e)
              ? this.createVideoClone(e)
              : Cn(e)
              ? this.createStyleClone(e)
              : ((t = e.cloneNode(!1)),
                zn(t) &&
                  (zn(e) &&
                    e.currentSrc &&
                    e.currentSrc !== e.src &&
                    ((t.src = e.currentSrc), (t.srcset = '')),
                  'lazy' === t.loading) &&
                  (t.loading = 'eager'),
                Fn(t) ? this.createCustomElementClone(t) : t)
          );
        }),
        (x.prototype.createCustomElementClone = function (e) {
          var t = document.createElement('html2canvascustomelement');
          return vi(e.style, t), t;
        }),
        (x.prototype.createStyleClone = function (e) {
          try {
            var t,
              A,
              r = e.sheet;
            if (r && r.cssRules)
              return (
                (t = [].slice.call(r.cssRules, 0).reduce(function (e, t) {
                  return t && 'string' == typeof t.cssText ? e + t.cssText : e;
                }, '')),
                ((A = e.cloneNode(!1)).textContent = t),
                A
              );
          } catch (e) {
            if (
              (this.context.logger.error(
                'Unable to access cssRules property',
                e,
              ),
              'SecurityError' !== e.name)
            )
              throw e;
          }
          return e.cloneNode(!1);
        }),
        (x.prototype.createCanvasClone = function (t) {
          var e;
          if (this.options.inlineImages && t.ownerDocument) {
            var A = t.ownerDocument.createElement('img');
            try {
              return (A.src = t.toDataURL()), A;
            } catch (e) {
              this.context.logger.info(
                'Unable to inline canvas contents, canvas is tainted',
                t,
              );
            }
          }
          A = t.cloneNode(!1);
          try {
            (A.width = t.width), (A.height = t.height);
            var r,
              n,
              i = t.getContext('2d'),
              a = A.getContext('2d');
            a &&
              (!this.options.allowTaint && i
                ? a.putImageData(i.getImageData(0, 0, t.width, t.height), 0, 0)
                : ((r =
                    null != (e = t.getContext('webgl2'))
                      ? e
                      : t.getContext('webgl')) &&
                    !1 ===
                      (null == (n = r.getContextAttributes())
                        ? void 0
                        : n.preserveDrawingBuffer) &&
                    this.context.logger.warn(
                      'Unable to clone WebGL context as it has preserveDrawingBuffer=false',
                      t,
                    ),
                  a.drawImage(t, 0, 0)));
          } catch (e) {
            this.context.logger.info(
              'Unable to clone canvas as it is tainted',
              t,
            );
          }
          return A;
        }),
        (x.prototype.createVideoClone = function (t) {
          var e = t.ownerDocument.createElement('canvas'),
            A =
              ((e.width = t.offsetWidth),
              (e.height = t.offsetHeight),
              e.getContext('2d'));
          try {
            return (
              A &&
                (A.drawImage(t, 0, 0, e.width, e.height),
                this.options.allowTaint ||
                  A.getImageData(0, 0, e.width, e.height)),
              e
            );
          } catch (e) {
            this.context.logger.info(
              'Unable to clone video as it is tainted',
              t,
            );
          }
          A = t.ownerDocument.createElement('canvas');
          return (A.width = t.offsetWidth), (A.height = t.offsetHeight), A;
        }),
        (x.prototype.appendChildNode = function (e, t, A) {
          (Hn(t) &&
            ('SCRIPT' === t.tagName ||
              t.hasAttribute(ui) ||
              ('function' == typeof this.options.ignoreElements &&
                this.options.ignoreElements(t)))) ||
            (this.options.copyStyles && Hn(t) && Cn(t)) ||
            e.appendChild(this.cloneNode(t, A));
        }),
        (x.prototype.cloneChildNodes = function (e, t, A) {
          for (
            var r, n = this, i = (e.shadowRoot || e).firstChild;
            i;
            i = i.nextSibling
          )
            Hn(i) && Wn(i) && 'function' == typeof i.assignedNodes
              ? (r = i.assignedNodes()).length &&
                r.forEach(function (e) {
                  return n.appendChildNode(t, e, A);
                })
              : this.appendChildNode(t, i, A);
        }),
        (x.prototype.cloneNode = function (e, t) {
          var A, r, n, i, a;
          return Ln(e)
            ? document.createTextNode(e.data)
            : e.ownerDocument &&
              (n = e.ownerDocument.defaultView) &&
              Hn(e) &&
              (In(e) || Rn(e))
            ? (((A = this.createElementClone(e)).style.transitionProperty =
                'none'),
              (r = n.getComputedStyle(e)),
              (a = n.getComputedStyle(e, ':before')),
              (n = n.getComputedStyle(e, ':after')),
              this.referenceElement === e &&
                In(A) &&
                (this.clonedReferenceElement = A),
              Vn(A) && Ci(A),
              (i = this.counters.parse(new gr(this.context, r))),
              (a = this.resolvePseudoContent(e, A, a, ei.BEFORE)),
              Fn(e) && (t = !0),
              bn(e) || this.cloneChildNodes(e, A, t),
              a && A.insertBefore(a, A.firstChild),
              (a = this.resolvePseudoContent(e, A, n, ei.AFTER)) &&
                A.appendChild(a),
              this.counters.pop(i),
              ((r && (this.options.copyStyles || Rn(e)) && !Kn(e)) || t) &&
                vi(r, A),
              (0 === e.scrollTop && 0 === e.scrollLeft) ||
                this.scrolledElements.push([A, e.scrollLeft, e.scrollTop]),
              (Xn(e) || jn(e)) && (Xn(A) || jn(A)) && (A.value = e.value),
              A)
            : e.cloneNode(!1);
        }),
        (x.prototype.resolvePseudoContent = function (a, e, t, A) {
          var o = this;
          if (t) {
            var s,
              l,
              r = t.content,
              c = e.ownerDocument;
            if (
              c &&
              r &&
              'none' !== r &&
              '-moz-alt-content' !== r &&
              'none' !== t.display
            )
              return (
                this.counters.parse(new gr(this.context, t)),
                (s = new fr(this.context, t)),
                (l = c.createElement('html2canvaspseudoelement')),
                vi(t, l),
                s.content.forEach(function (e) {
                  if (0 === e.type) l.appendChild(c.createTextNode(e.value));
                  else if (22 === e.type) {
                    var t = c.createElement('img');
                    (t.src = e.value),
                      (t.style.opacity = '1'),
                      l.appendChild(t);
                  } else if (18 === e.type) {
                    var A, r, n, i;
                    'attr' === e.name
                      ? (t = e.values.filter(f)).length &&
                        l.appendChild(
                          c.createTextNode(a.getAttribute(t[0].value) || ''),
                        )
                      : 'counter' === e.name
                      ? ((n = (t = e.values.filter(qe))[0]),
                        (i = t[1]),
                        n &&
                          f(n) &&
                          ((t = o.counters.getCounterValue(n.value)),
                          (A = i && f(i) ? TA.parse(o.context, i.value) : 3),
                          l.appendChild(c.createTextNode(ci(t, A, !1)))))
                      : 'counters' === e.name &&
                        ((n = (t = e.values.filter(qe))[0]),
                        (A = t[1]),
                        (i = t[2]),
                        n) &&
                        f(n) &&
                        ((t = o.counters.getCounterValues(n.value)),
                        (r = i && f(i) ? TA.parse(o.context, i.value) : 3),
                        (n = A && 0 === A.type ? A.value : ''),
                        (i = t
                          .map(function (e) {
                            return ci(e, r, !1);
                          })
                          .join(n)),
                        l.appendChild(c.createTextNode(i)));
                  } else if (20 === e.type)
                    switch (e.value) {
                      case 'open-quote':
                        l.appendChild(
                          c.createTextNode(Vt(s.quotes, o.quoteDepth++, !0)),
                        );
                        break;
                      case 'close-quote':
                        l.appendChild(
                          c.createTextNode(Vt(s.quotes, --o.quoteDepth, !1)),
                        );
                        break;
                      default:
                        l.appendChild(c.createTextNode(e.value));
                    }
                }),
                (l.className = Ei + ' ' + xi),
                (r = A === ei.BEFORE ? ' ' + Ei : ' ' + xi),
                Rn(e) ? (e.className.baseValue += r) : (e.className += r),
                l
              );
          }
        }),
        (x.destroy = function (e) {
          return !!e.parentNode && (e.parentNode.removeChild(e), !0);
        }),
        x);
    function x(e, t, A) {
      if (
        ((this.context = e),
        (this.options = A),
        (this.scrolledElements = []),
        (this.referenceElement = t),
        (this.counters = new Yn()),
        (this.quoteDepth = 0),
        !t.ownerDocument)
      )
        throw new Error('Cloned element does not have an owner document');
      this.documentElement = this.cloneNode(
        t.ownerDocument.documentElement,
        !1,
      );
    }
    ((E = ei = ei || {})[(E.BEFORE = 0)] = 'BEFORE'),
      (E[(E.AFTER = 1)] = 'AFTER');
    function di(t) {
      return new Promise(function (e) {
        !t.complete && t.src ? ((t.onload = e), (t.onerror = e)) : e();
      });
    }
    var pi = function (e, t) {
        var A = e.createElement('iframe');
        return (
          (A.className = 'html2canvas-container'),
          (A.style.visibility = 'hidden'),
          (A.style.position = 'fixed'),
          (A.style.left = '-10000px'),
          (A.style.top = '0px'),
          (A.style.border = '0'),
          (A.width = t.width.toString()),
          (A.height = t.height.toString()),
          (A.scrolling = 'no'),
          A.setAttribute(ui, 'true'),
          e.body.appendChild(A),
          A
        );
      },
      fi = function (e) {
        return Promise.all([].slice.call(e.images, 0).map(di));
      },
      gi = function (n) {
        return new Promise(function (t, e) {
          var A = n.contentWindow;
          if (!A) return e('No window assigned for iframe');
          var r = A.document;
          A.onload = n.onload = function () {
            A.onload = n.onload = null;
            var e = setInterval(function () {
              0 < r.body.childNodes.length &&
                'complete' === r.readyState &&
                (clearInterval(e), t(n));
            }, 50);
          };
        });
      },
      mi = ['all', 'd', 'content'],
      vi = function (e, t) {
        for (var A = e.length - 1; 0 <= A; A--) {
          var r = e.item(A);
          -1 === mi.indexOf(r) && t.style.setProperty(r, e.getPropertyValue(r));
        }
        return t;
      },
      Bi = function (e) {
        var t = '';
        return (
          e &&
            ((t += '<!DOCTYPE '),
            e.name && (t += e.name),
            e.internalSubset && (t += e.internalSubset),
            e.publicId && (t += '"' + e.publicId + '"'),
            e.systemId && (t += '"' + e.systemId + '"'),
            (t += '>')),
          t
        );
      },
      wi = function (e, t, A) {
        e &&
          e.defaultView &&
          (t !== e.defaultView.pageXOffset ||
            A !== e.defaultView.pageYOffset) &&
          e.defaultView.scrollTo(t, A);
      },
      yi = function (e) {
        var t = e[0],
          A = e[1],
          e = e[2];
        (t.scrollLeft = A), (t.scrollTop = e);
      },
      Ei = '___html2canvas___pseudoelement_before',
      xi = '___html2canvas___pseudoelement_after',
      bi = '{\n    content: "" !important;\n    display: none !important;\n}',
      Ci = function (e) {
        Fi(e, '.' + Ei + ':before' + bi + '\n         .' + xi + ':after' + bi);
      },
      Fi = function (e, t) {
        var A = e.ownerDocument;
        A &&
          (((A = A.createElement('style')).textContent = t), e.appendChild(A));
      },
      Ti =
        ((b.getOrigin = function (e) {
          var t = b._link;
          return t
            ? ((t.href = e),
              (t.href = t.href),
              t.protocol + t.hostname + t.port)
            : 'about:blank';
        }),
        (b.isSameOrigin = function (e) {
          return b.getOrigin(e) === b._origin;
        }),
        (b.setContext = function (e) {
          (b._link = e.document.createElement('a')),
            (b._origin = b.getOrigin(e.location.href));
        }),
        (b._origin = 'about:blank'),
        b);
    function b() {}
    (Ui.prototype.addImage = function (e) {
      var t = Promise.resolve();
      return (
        this.has(e) ||
          ((Ri(e) || Li(e)) &&
            (this._cache[e] = this.loadImage(e)).catch(function () {})),
        t
      );
    }),
      (Ui.prototype.match = function (e) {
        return this._cache[e];
      }),
      (Ui.prototype.loadImage = function (a) {
        return u(this, void 0, void 0, function () {
          var t,
            r,
            A,
            n,
            i = this;
          return Q(this, function (e) {
            switch (e.label) {
              case 0:
                return ((t = Ti.isSameOrigin(a)),
                (r =
                  !Hi(a) &&
                  !0 === this._options.useCORS &&
                  v.SUPPORT_CORS_IMAGES &&
                  !t),
                (A =
                  !Hi(a) &&
                  !t &&
                  !Ri(a) &&
                  'string' == typeof this._options.proxy &&
                  v.SUPPORT_CORS_XHR &&
                  !r),
                t ||
                  !1 !== this._options.allowTaint ||
                  Hi(a) ||
                  Ri(a) ||
                  A ||
                  r)
                  ? ((n = a), A ? [4, this.proxy(n)] : [3, 2])
                  : [2];
              case 1:
                (n = e.sent()), (e.label = 2);
              case 2:
                return (
                  this.context.logger.debug(
                    'Added image ' + a.substring(0, 256),
                  ),
                  [
                    4,
                    new Promise(function (e, t) {
                      var A = new Image();
                      (A.onload = function () {
                        return e(A);
                      }),
                        (A.onerror = t),
                        (Ii(n) || r) && (A.crossOrigin = 'anonymous'),
                        (A.src = n),
                        !0 === A.complete &&
                          setTimeout(function () {
                            return e(A);
                          }, 500),
                        0 < i._options.imageTimeout &&
                          setTimeout(function () {
                            return t(
                              'Timed out (' +
                                i._options.imageTimeout +
                                'ms) loading image',
                            );
                          }, i._options.imageTimeout);
                    }),
                  ]
                );
              case 3:
                return [2, e.sent()];
            }
          });
        });
      }),
      (Ui.prototype.has = function (e) {
        return void 0 !== this._cache[e];
      }),
      (Ui.prototype.keys = function () {
        return Promise.resolve(Object.keys(this._cache));
      }),
      (Ui.prototype.proxy = function (a) {
        var o,
          s = this,
          l = this._options.proxy;
        if (l)
          return (
            (o = a.substring(0, 256)),
            new Promise(function (t, A) {
              var e,
                r = v.SUPPORT_RESPONSE_TYPE ? 'blob' : 'text',
                n = new XMLHttpRequest(),
                i =
                  ((n.onload = function () {
                    var e;
                    200 === n.status
                      ? 'text' == r
                        ? t(n.response)
                        : ((e = new FileReader()).addEventListener(
                            'load',
                            function () {
                              return t(e.result);
                            },
                            !1,
                          ),
                          e.addEventListener(
                            'error',
                            function (e) {
                              return A(e);
                            },
                            !1,
                          ),
                          e.readAsDataURL(n.response))
                      : A(
                          'Failed to proxy resource ' +
                            o +
                            ' with status code ' +
                            n.status,
                        );
                  }),
                  (n.onerror = A),
                  -1 < l.indexOf('?') ? '&' : '?');
              n.open(
                'GET',
                l + i + 'url=' + encodeURIComponent(a) + '&responseType=' + r,
              ),
                'text' != r &&
                  n instanceof XMLHttpRequest &&
                  (n.responseType = r),
                s._options.imageTimeout &&
                  ((e = s._options.imageTimeout),
                  (n.timeout = e),
                  (n.ontimeout = function () {
                    return A('Timed out (' + e + 'ms) proxying ' + o);
                  })),
                n.send();
            })
          );
        throw new Error('No proxy defined');
      });
    var _i = Ui;
    function Ui(e, t) {
      (this.context = e), (this._options = t), (this._cache = {});
    }
    var Mi = /^data:image\/svg\+xml/i,
      Si = /^data:image\/.*;base64,/i,
      Qi = /^data:image\/.*/i,
      Li = function (e) {
        return v.SUPPORT_SVG_DRAWING || !Pi(e);
      },
      Hi = function (e) {
        return Qi.test(e);
      },
      Ii = function (e) {
        return Si.test(e);
      },
      Ri = function (e) {
        return 'blob' === e.substr(0, 4);
      },
      Pi = function (e) {
        return 'svg' === e.substr(-3).toLowerCase() || Mi.test(e);
      },
      C =
        ((Di.prototype.add = function (e, t) {
          return new Di(this.x + e, this.y + t);
        }),
        Di);
    function Di(e, t) {
      (this.type = 0), (this.x = e), (this.y = t);
    }
    function Oi(e, t, A) {
      return new C(e.x + (t.x - e.x) * A, e.y + (t.y - e.y) * A);
    }
    (Gi.prototype.subdivide = function (e, t) {
      var A = Oi(this.start, this.startControl, e),
        r = Oi(this.startControl, this.endControl, e),
        n = Oi(this.endControl, this.end, e),
        i = Oi(A, r, e),
        r = Oi(r, n, e),
        e = Oi(i, r, e);
      return t ? new Gi(this.start, A, i, e) : new Gi(e, r, n, this.end);
    }),
      (Gi.prototype.add = function (e, t) {
        return new Gi(
          this.start.add(e, t),
          this.startControl.add(e, t),
          this.endControl.add(e, t),
          this.end.add(e, t),
        );
      }),
      (Gi.prototype.reverse = function () {
        return new Gi(this.end, this.endControl, this.startControl, this.start);
      });
    var Ni = Gi;
    function Gi(e, t, A, r) {
      (this.type = 1),
        (this.start = e),
        (this.startControl = t),
        (this.endControl = A),
        (this.end = r);
    }
    function Vi(e) {
      return [
        e.topLeftBorderBox,
        e.topRightBorderBox,
        e.bottomRightBorderBox,
        e.bottomLeftBorderBox,
      ];
    }
    function ki(e) {
      return [
        e.topLeftPaddingBox,
        e.topRightPaddingBox,
        e.bottomRightPaddingBox,
        e.bottomLeftPaddingBox,
      ];
    }
    function zi(e) {
      return 1 === e.type;
    }
    function Ki(e, A) {
      return (
        e.length === A.length &&
        e.some(function (e, t) {
          return e === A[t];
        })
      );
    }
    var F,
      T,
      _ = function (e) {
        return 1 === e.type;
      },
      Xi = function (e) {
        var t = e.styles,
          A = e.bounds,
          r = (n = ct(t.borderTopLeftRadius, A.width, A.height))[0],
          n = n[1],
          i = (a = ct(t.borderTopRightRadius, A.width, A.height))[0],
          a = a[1],
          o = (s = ct(t.borderBottomRightRadius, A.width, A.height))[0],
          s = s[1],
          l = (c = ct(t.borderBottomLeftRadius, A.width, A.height))[0],
          c = c[1];
        (u = []).push((r + i) / A.width),
          u.push((l + o) / A.width),
          u.push((n + c) / A.height),
          u.push((a + s) / A.height);
        1 < (u = Math.max.apply(Math, u)) &&
          ((r /= u),
          (n /= u),
          (i /= u),
          (a /= u),
          (o /= u),
          (s /= u),
          (l /= u),
          (c /= u));
        var u = A.width - i,
          h = A.height - s,
          d = A.width - o,
          p = A.height - c,
          f = t.borderTopWidth,
          g = t.borderRightWidth,
          m = t.borderBottomWidth,
          v = t.borderLeftWidth,
          B = H(t.paddingTop, e.bounds.width),
          w = H(t.paddingRight, e.bounds.width),
          y = H(t.paddingBottom, e.bounds.width),
          t = H(t.paddingLeft, e.bounds.width);
        (this.topLeftBorderDoubleOuterBox =
          0 < r || 0 < n
            ? U(A.left + v / 3, A.top + f / 3, r - v / 3, n - f / 3, F.TOP_LEFT)
            : new C(A.left + v / 3, A.top + f / 3)),
          (this.topRightBorderDoubleOuterBox =
            0 < r || 0 < n
              ? U(A.left + u, A.top + f / 3, i - g / 3, a - f / 3, F.TOP_RIGHT)
              : new C(A.left + A.width - g / 3, A.top + f / 3)),
          (this.bottomRightBorderDoubleOuterBox =
            0 < o || 0 < s
              ? U(A.left + d, A.top + h, o - g / 3, s - m / 3, F.BOTTOM_RIGHT)
              : new C(A.left + A.width - g / 3, A.top + A.height - m / 3)),
          (this.bottomLeftBorderDoubleOuterBox =
            0 < l || 0 < c
              ? U(
                  A.left + v / 3,
                  A.top + p,
                  l - v / 3,
                  c - m / 3,
                  F.BOTTOM_LEFT,
                )
              : new C(A.left + v / 3, A.top + A.height - m / 3)),
          (this.topLeftBorderDoubleInnerBox =
            0 < r || 0 < n
              ? U(
                  A.left + (2 * v) / 3,
                  A.top + (2 * f) / 3,
                  r - (2 * v) / 3,
                  n - (2 * f) / 3,
                  F.TOP_LEFT,
                )
              : new C(A.left + (2 * v) / 3, A.top + (2 * f) / 3)),
          (this.topRightBorderDoubleInnerBox =
            0 < r || 0 < n
              ? U(
                  A.left + u,
                  A.top + (2 * f) / 3,
                  i - (2 * g) / 3,
                  a - (2 * f) / 3,
                  F.TOP_RIGHT,
                )
              : new C(A.left + A.width - (2 * g) / 3, A.top + (2 * f) / 3)),
          (this.bottomRightBorderDoubleInnerBox =
            0 < o || 0 < s
              ? U(
                  A.left + d,
                  A.top + h,
                  o - (2 * g) / 3,
                  s - (2 * m) / 3,
                  F.BOTTOM_RIGHT,
                )
              : new C(
                  A.left + A.width - (2 * g) / 3,
                  A.top + A.height - (2 * m) / 3,
                )),
          (this.bottomLeftBorderDoubleInnerBox =
            0 < l || 0 < c
              ? U(
                  A.left + (2 * v) / 3,
                  A.top + p,
                  l - (2 * v) / 3,
                  c - (2 * m) / 3,
                  F.BOTTOM_LEFT,
                )
              : new C(A.left + (2 * v) / 3, A.top + A.height - (2 * m) / 3)),
          (this.topLeftBorderStroke =
            0 < r || 0 < n
              ? U(
                  A.left + v / 2,
                  A.top + f / 2,
                  r - v / 2,
                  n - f / 2,
                  F.TOP_LEFT,
                )
              : new C(A.left + v / 2, A.top + f / 2)),
          (this.topRightBorderStroke =
            0 < r || 0 < n
              ? U(A.left + u, A.top + f / 2, i - g / 2, a - f / 2, F.TOP_RIGHT)
              : new C(A.left + A.width - g / 2, A.top + f / 2)),
          (this.bottomRightBorderStroke =
            0 < o || 0 < s
              ? U(A.left + d, A.top + h, o - g / 2, s - m / 2, F.BOTTOM_RIGHT)
              : new C(A.left + A.width - g / 2, A.top + A.height - m / 2)),
          (this.bottomLeftBorderStroke =
            0 < l || 0 < c
              ? U(
                  A.left + v / 2,
                  A.top + p,
                  l - v / 2,
                  c - m / 2,
                  F.BOTTOM_LEFT,
                )
              : new C(A.left + v / 2, A.top + A.height - m / 2)),
          (this.topLeftBorderBox =
            0 < r || 0 < n
              ? U(A.left, A.top, r, n, F.TOP_LEFT)
              : new C(A.left, A.top)),
          (this.topRightBorderBox =
            0 < i || 0 < a
              ? U(A.left + u, A.top, i, a, F.TOP_RIGHT)
              : new C(A.left + A.width, A.top)),
          (this.bottomRightBorderBox =
            0 < o || 0 < s
              ? U(A.left + d, A.top + h, o, s, F.BOTTOM_RIGHT)
              : new C(A.left + A.width, A.top + A.height)),
          (this.bottomLeftBorderBox =
            0 < l || 0 < c
              ? U(A.left, A.top + p, l, c, F.BOTTOM_LEFT)
              : new C(A.left, A.top + A.height)),
          (this.topLeftPaddingBox =
            0 < r || 0 < n
              ? U(
                  A.left + v,
                  A.top + f,
                  Math.max(0, r - v),
                  Math.max(0, n - f),
                  F.TOP_LEFT,
                )
              : new C(A.left + v, A.top + f)),
          (this.topRightPaddingBox =
            0 < i || 0 < a
              ? U(
                  A.left + Math.min(u, A.width - g),
                  A.top + f,
                  u > A.width + g ? 0 : Math.max(0, i - g),
                  Math.max(0, a - f),
                  F.TOP_RIGHT,
                )
              : new C(A.left + A.width - g, A.top + f)),
          (this.bottomRightPaddingBox =
            0 < o || 0 < s
              ? U(
                  A.left + Math.min(d, A.width - v),
                  A.top + Math.min(h, A.height - m),
                  Math.max(0, o - g),
                  Math.max(0, s - m),
                  F.BOTTOM_RIGHT,
                )
              : new C(A.left + A.width - g, A.top + A.height - m)),
          (this.bottomLeftPaddingBox =
            0 < l || 0 < c
              ? U(
                  A.left + v,
                  A.top + Math.min(p, A.height - m),
                  Math.max(0, l - v),
                  Math.max(0, c - m),
                  F.BOTTOM_LEFT,
                )
              : new C(A.left + v, A.top + A.height - m)),
          (this.topLeftContentBox =
            0 < r || 0 < n
              ? U(
                  A.left + v + t,
                  A.top + f + B,
                  Math.max(0, r - (v + t)),
                  Math.max(0, n - (f + B)),
                  F.TOP_LEFT,
                )
              : new C(A.left + v + t, A.top + f + B)),
          (this.topRightContentBox =
            0 < i || 0 < a
              ? U(
                  A.left + Math.min(u, A.width + v + t),
                  A.top + f + B,
                  u > A.width + v + t ? 0 : i - v + t,
                  a - (f + B),
                  F.TOP_RIGHT,
                )
              : new C(A.left + A.width - (g + w), A.top + f + B)),
          (this.bottomRightContentBox =
            0 < o || 0 < s
              ? U(
                  A.left + Math.min(d, A.width - (v + t)),
                  A.top + Math.min(h, A.height + f + B),
                  Math.max(0, o - (g + w)),
                  s - (m + y),
                  F.BOTTOM_RIGHT,
                )
              : new C(A.left + A.width - (g + w), A.top + A.height - (m + y))),
          (this.bottomLeftContentBox =
            0 < l || 0 < c
              ? U(
                  A.left + v + t,
                  A.top + p,
                  Math.max(0, l - (v + t)),
                  c - (m + y),
                  F.BOTTOM_LEFT,
                )
              : new C(A.left + v + t, A.top + A.height - (m + y)));
      },
      U =
        (((T = F = F || {})[(T.TOP_LEFT = 0)] = 'TOP_LEFT'),
        (T[(T.TOP_RIGHT = 1)] = 'TOP_RIGHT'),
        (T[(T.BOTTOM_RIGHT = 2)] = 'BOTTOM_RIGHT'),
        (T[(T.BOTTOM_LEFT = 3)] = 'BOTTOM_LEFT'),
        function (e, t, A, r, n) {
          var i = ((Math.sqrt(2) - 1) / 3) * 4,
            a = A * i,
            o = r * i,
            s = e + A,
            l = t + r;
          switch (n) {
            case F.TOP_LEFT:
              return new Ni(
                new C(e, l),
                new C(e, l - o),
                new C(s - a, t),
                new C(s, t),
              );
            case F.TOP_RIGHT:
              return new Ni(
                new C(e, t),
                new C(e + a, t),
                new C(s, l - o),
                new C(s, l),
              );
            case F.BOTTOM_RIGHT:
              return new Ni(
                new C(s, t),
                new C(s, t + o),
                new C(e + a, l),
                new C(e, l),
              );
            default:
              F.BOTTOM_LEFT;
              return new Ni(
                new C(s, l),
                new C(s - a, l),
                new C(e, t + o),
                new C(e, t),
              );
          }
        }),
      ji = function (e, t, A) {
        (this.offsetX = e),
          (this.offsetY = t),
          (this.matrix = A),
          (this.type = 0),
          (this.target = 6);
      },
      Wi = function (e, t) {
        (this.path = e), (this.target = t), (this.type = 1);
      },
      Yi = function (e) {
        (this.opacity = e), (this.type = 2), (this.target = 6);
      },
      Ji = function (e) {
        (this.element = e),
          (this.inlineLevel = []),
          (this.nonInlineLevel = []),
          (this.negativeZIndex = []),
          (this.zeroOrAutoZIndexOrTransformedOrOpacity = []),
          (this.positiveZIndex = []),
          (this.nonPositionedFloats = []),
          (this.nonPositionedInlineLevel = []);
      },
      Zi =
        ((qi.prototype.getEffects = function (t) {
          for (
            var e = -1 === [2, 3].indexOf(this.container.styles.position),
              A = this.parent,
              r = this.effects.slice(0);
            A;

          ) {
            var n,
              i,
              a = A.effects.filter(function (e) {
                return !zi(e);
              });
            e || 0 !== A.container.styles.position || !A.parent
              ? (r.unshift.apply(r, a),
                (e = -1 === [2, 3].indexOf(A.container.styles.position)),
                0 !== A.container.styles.overflowX &&
                  ((n = Vi(A.curves)),
                  (i = ki(A.curves)),
                  Ki(n, i) || r.unshift(new Wi(i, 6))))
              : r.unshift.apply(r, a),
              (A = A.parent);
          }
          return r.filter(function (e) {
            return m(e.target, t);
          });
        }),
        qi);
    function qi(e, t) {
      var A;
      (this.container = e),
        (this.parent = t),
        (this.effects = []),
        (this.curves = new Xi(this.container)),
        this.container.styles.opacity < 1 &&
          this.effects.push(new Yi(this.container.styles.opacity)),
        null !== this.container.styles.transform &&
          ((e =
            this.container.bounds.left +
            this.container.styles.transformOrigin[0].number),
          (t =
            this.container.bounds.top +
            this.container.styles.transformOrigin[1].number),
          (A = this.container.styles.transform),
          this.effects.push(new ji(e, t, A))),
        0 !== this.container.styles.overflowX &&
          ((e = Vi(this.curves)),
          (t = ki(this.curves)),
          Ki(e, t)
            ? this.effects.push(new Wi(e, 6))
            : (this.effects.push(new Wi(e, 2)),
              this.effects.push(new Wi(t, 4))));
    }
    function $i(e, t) {
      switch (t) {
        case 0:
          return M(
            e.topLeftBorderBox,
            e.topLeftPaddingBox,
            e.topRightBorderBox,
            e.topRightPaddingBox,
          );
        case 1:
          return M(
            e.topRightBorderBox,
            e.topRightPaddingBox,
            e.bottomRightBorderBox,
            e.bottomRightPaddingBox,
          );
        case 2:
          return M(
            e.bottomRightBorderBox,
            e.bottomRightPaddingBox,
            e.bottomLeftBorderBox,
            e.bottomLeftPaddingBox,
          );
        default:
          return M(
            e.bottomLeftBorderBox,
            e.bottomLeftPaddingBox,
            e.topLeftBorderBox,
            e.topLeftPaddingBox,
          );
      }
    }
    function ea(e, t) {
      var A = [];
      return (
        _(e) ? A.push(e.subdivide(0.5, !1)) : A.push(e),
        _(t) ? A.push(t.subdivide(0.5, !0)) : A.push(t),
        A
      );
    }
    function M(e, t, A, r) {
      var n = [];
      return (
        _(e) ? n.push(e.subdivide(0.5, !1)) : n.push(e),
        _(A) ? n.push(A.subdivide(0.5, !0)) : n.push(A),
        _(r) ? n.push(r.subdivide(0.5, !0).reverse()) : n.push(r),
        _(t) ? n.push(t.subdivide(0.5, !1).reverse()) : n.push(t),
        n
      );
    }
    function ta(e) {
      var t = e.bounds,
        e = e.styles;
      return t.add(
        e.borderLeftWidth,
        e.borderTopWidth,
        -(e.borderRightWidth + e.borderLeftWidth),
        -(e.borderTopWidth + e.borderBottomWidth),
      );
    }
    function Aa(e) {
      var t = e.styles,
        e = e.bounds,
        A = H(t.paddingLeft, e.width),
        r = H(t.paddingRight, e.width),
        n = H(t.paddingTop, e.width),
        i = H(t.paddingBottom, e.width);
      return e.add(
        A + t.borderLeftWidth,
        n + t.borderTopWidth,
        -(t.borderRightWidth + t.borderLeftWidth + A + r),
        -(t.borderTopWidth + t.borderBottomWidth + n + i),
      );
    }
    function ra(e, t, A) {
      var r = sa(ua(e.styles.backgroundOrigin, t), e),
        n = la(ua(e.styles.backgroundClip, t), e),
        i = (A = ca(ua(e.styles.backgroundSize, t), A, r))[0],
        a = A[1],
        o = ct(ua(e.styles.backgroundPosition, t), r.width - i, r.height - a);
      return [
        ha(ua(e.styles.backgroundRepeat, t), o, A, r, n),
        Math.round(r.left + o[0]),
        Math.round(r.top + o[1]),
        i,
        a,
      ];
    }
    function na(e) {
      return f(e) && e.value === kt.AUTO;
    }
    function ia(e) {
      return 'number' == typeof e;
    }
    var aa = function (l, c, u, h) {
        l.container.elements.forEach(function (e) {
          var t,
            A,
            r,
            n,
            i = m(e.flags, 4),
            a = m(e.flags, 2),
            o = new Zi(e, l),
            s =
              (m(e.styles.display, 2048) && h.push(o), m(e.flags, 8) ? [] : h);
          i || a
            ? ((a = i || e.styles.isPositioned() ? u : c),
              (t = new Ji(o)),
              e.styles.isPositioned() ||
              e.styles.opacity < 1 ||
              e.styles.isTransformed()
                ? (A = e.styles.zIndex.order) < 0
                  ? ((r = 0),
                    a.negativeZIndex.some(function (e, t) {
                      return A > e.element.container.styles.zIndex.order
                        ? ((r = t), !1)
                        : 0 < r;
                    }),
                    a.negativeZIndex.splice(r, 0, t))
                  : 0 < A
                  ? ((n = 0),
                    a.positiveZIndex.some(function (e, t) {
                      return A >= e.element.container.styles.zIndex.order
                        ? ((n = t + 1), !1)
                        : 0 < n;
                    }),
                    a.positiveZIndex.splice(n, 0, t))
                  : a.zeroOrAutoZIndexOrTransformedOrOpacity.push(t)
                : (e.styles.isFloating()
                    ? a.nonPositionedFloats
                    : a.nonPositionedInlineLevel
                  ).push(t),
              aa(o, t, i ? t : u, s))
            : ((e.styles.isInlineLevel()
                ? c.inlineLevel
                : c.nonInlineLevel
              ).push(o),
              aa(o, c, u, s)),
            m(e.flags, 8) && oa(e, s);
        });
      },
      oa = function (e, t) {
        for (
          var A = e instanceof nn ? e.start : 1,
            r = e instanceof nn && e.reversed,
            n = 0;
          n < t.length;
          n++
        ) {
          var i = t[n];
          i.container instanceof tn &&
            'number' == typeof i.container.value &&
            0 !== i.container.value &&
            (A = i.container.value),
            (i.listValue = ci(A, i.container.styles.listStyleType, !0)),
            (A += r ? -1 : 1);
        }
      },
      sa = function (e, t) {
        return 0 === e ? t.bounds : (2 === e ? Aa : ta)(t);
      },
      la = function (e, t) {
        return 0 === e ? t.bounds : (2 === e ? Aa : ta)(t);
      },
      ca = function (e, t, A) {
        var r = t[0],
          n = t[1],
          t = t[2],
          i = e[0],
          e = e[1];
        if (!i) return [0, 0];
        if (c(i) && e && c(e)) return [H(i, A.width), H(e, A.height)];
        var a = ia(t);
        if (f(i) && (i.value === kt.CONTAIN || i.value === kt.COVER))
          return ia(t)
            ? A.width / A.height < t != (i.value === kt.COVER)
              ? [A.width, A.width / t]
              : [A.height * t, A.height]
            : [A.width, A.height];
        var o = ia(r),
          s = ia(n),
          l = o || s;
        if (na(i) && (!e || na(e)))
          return o && s
            ? [r, n]
            : a || l
            ? l && a
              ? [o ? r : n * t, s ? n : r / t]
              : [o ? r : A.width, s ? n : A.height]
            : [A.width, A.height];
        if (a)
          return (
            (a = l = 0),
            c(i) ? (l = H(i, A.width)) : c(e) && (a = H(e, A.height)),
            na(i) ? (l = a * t) : (e && !na(e)) || (a = l / t),
            [l, a]
          );
        (t = null), (l = null);
        if (
          (c(i) ? (t = H(i, A.width)) : e && c(e) && (l = H(e, A.height)),
          null !==
            (t =
              null !==
                (l =
                  null === t || (e && !na(e))
                    ? l
                    : o && s
                    ? (t / r) * n
                    : A.height) && na(i)
                ? o && s
                  ? (l / n) * r
                  : A.width
                : t) && null !== l)
        )
          return [t, l];
        throw new Error('Unable to calculate background-size for element');
      },
      ua = function (e, t) {
        t = e[t];
        return void 0 === t ? e[0] : t;
      },
      ha = function (e, t, A, r, n) {
        var i = t[0],
          a = t[1],
          o = A[0],
          s = A[1];
        switch (e) {
          case 2:
            return [
              new C(Math.round(r.left), Math.round(r.top + a)),
              new C(Math.round(r.left + r.width), Math.round(r.top + a)),
              new C(Math.round(r.left + r.width), Math.round(s + r.top + a)),
              new C(Math.round(r.left), Math.round(s + r.top + a)),
            ];
          case 3:
            return [
              new C(Math.round(r.left + i), Math.round(r.top)),
              new C(Math.round(r.left + i + o), Math.round(r.top)),
              new C(Math.round(r.left + i + o), Math.round(r.height + r.top)),
              new C(Math.round(r.left + i), Math.round(r.height + r.top)),
            ];
          case 1:
            return [
              new C(Math.round(r.left + i), Math.round(r.top + a)),
              new C(Math.round(r.left + i + o), Math.round(r.top + a)),
              new C(Math.round(r.left + i + o), Math.round(r.top + a + s)),
              new C(Math.round(r.left + i), Math.round(r.top + a + s)),
            ];
          default:
            return [
              new C(Math.round(n.left), Math.round(n.top)),
              new C(Math.round(n.left + n.width), Math.round(n.top)),
              new C(Math.round(n.left + n.width), Math.round(n.height + n.top)),
              new C(Math.round(n.left), Math.round(n.height + n.top)),
            ];
        }
      },
      da = 'Hidden Text',
      pa =
        ((fa.prototype.parseMetrics = function (e, t) {
          var A = this._document.createElement('div'),
            r = this._document.createElement('img'),
            n = this._document.createElement('span'),
            i = this._document.body,
            e =
              ((A.style.visibility = 'hidden'),
              (A.style.fontFamily = e),
              (A.style.fontSize = t),
              (A.style.margin = '0'),
              (A.style.padding = '0'),
              (A.style.whiteSpace = 'nowrap'),
              i.appendChild(A),
              (r.src =
                'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7'),
              (r.width = 1),
              (r.height = 1),
              (r.style.margin = '0'),
              (r.style.padding = '0'),
              (r.style.verticalAlign = 'baseline'),
              (n.style.fontFamily = e),
              (n.style.fontSize = t),
              (n.style.margin = '0'),
              (n.style.padding = '0'),
              n.appendChild(this._document.createTextNode(da)),
              A.appendChild(n),
              A.appendChild(r),
              r.offsetTop - n.offsetTop + 2),
            t =
              (A.removeChild(n),
              A.appendChild(this._document.createTextNode(da)),
              (A.style.lineHeight = 'normal'),
              (r.style.verticalAlign = 'super'),
              r.offsetTop - A.offsetTop + 2);
          return i.removeChild(A), { baseline: e, middle: t };
        }),
        (fa.prototype.getMetrics = function (e, t) {
          var A = e + ' ' + t;
          return (
            void 0 === this._data[A] &&
              (this._data[A] = this.parseMetrics(e, t)),
            this._data[A]
          );
        }),
        fa);
    function fa(e) {
      (this._data = {}), (this._document = e);
    }
    function ga(e, t) {
      (this.context = e), (this.options = t);
    }
    e(S, (ma = ga)),
      (S.prototype.applyEffects = function (e) {
        for (var t = this; this._activeEffects.length; ) this.popEffect();
        e.forEach(function (e) {
          return t.applyEffect(e);
        });
      }),
      (S.prototype.applyEffect = function (e) {
        this.ctx.save(),
          2 === e.type && (this.ctx.globalAlpha = e.opacity),
          0 === e.type &&
            (this.ctx.translate(e.offsetX, e.offsetY),
            this.ctx.transform(
              e.matrix[0],
              e.matrix[1],
              e.matrix[2],
              e.matrix[3],
              e.matrix[4],
              e.matrix[5],
            ),
            this.ctx.translate(-e.offsetX, -e.offsetY)),
          zi(e) && (this.path(e.path), this.ctx.clip()),
          this._activeEffects.push(e);
      }),
      (S.prototype.popEffect = function () {
        this._activeEffects.pop(), this.ctx.restore();
      }),
      (S.prototype.renderStack = function (t) {
        return u(this, void 0, void 0, function () {
          return Q(this, function (e) {
            switch (e.label) {
              case 0:
                return t.element.container.styles.isVisible()
                  ? [4, this.renderStackContent(t)]
                  : [3, 2];
              case 1:
                e.sent(), (e.label = 2);
              case 2:
                return [2];
            }
          });
        });
      }),
      (S.prototype.renderNode = function (t) {
        return u(this, void 0, void 0, function () {
          return Q(this, function (e) {
            switch (e.label) {
              case 0:
                return (m(t.container.flags, 16),
                t.container.styles.isVisible())
                  ? [4, this.renderNodeBackgroundAndBorders(t)]
                  : [3, 3];
              case 1:
                return e.sent(), [4, this.renderNodeContent(t)];
              case 2:
                e.sent(), (e.label = 3);
              case 3:
                return [2];
            }
          });
        });
      }),
      (S.prototype.renderTextWithLetterSpacing = function (A, e, r) {
        var n = this;
        0 === e
          ? this.ctx.fillText(A.text, A.bounds.left, A.bounds.top + r)
          : Or(A.text).reduce(function (e, t) {
              return (
                n.ctx.fillText(t, e, A.bounds.top + r),
                e + n.ctx.measureText(t).width
              );
            }, A.bounds.left);
      }),
      (S.prototype.createFontStyle = function (e) {
        var t = e.fontVariant
            .filter(function (e) {
              return 'normal' === e || 'small-caps' === e;
            })
            .join(''),
          A = ba(e.fontFamily).join(', '),
          r = it(e.fontSize)
            ? '' + e.fontSize.number + e.fontSize.unit
            : e.fontSize.number + 'px';
        return [[e.fontStyle, t, e.fontWeight, r, A].join(' '), A, r];
      }),
      (S.prototype.renderTextNode = function (s, l) {
        return u(this, void 0, void 0, function () {
          var t,
            A,
            r,
            n,
            i,
            a,
            o = this;
          return Q(this, function (e) {
            return (
              (A = this.createFontStyle(l)),
              (r = A[0]),
              (t = A[1]),
              (A = A[2]),
              (this.ctx.font = r),
              (this.ctx.direction = 1 === l.direction ? 'rtl' : 'ltr'),
              (this.ctx.textAlign = 'left'),
              (this.ctx.textBaseline = 'alphabetic'),
              (r = this.fontMetrics.getMetrics(t, A)),
              (n = r.baseline),
              (i = r.middle),
              (a = l.paintOrder),
              s.textBounds.forEach(function (A) {
                a.forEach(function (e) {
                  switch (e) {
                    case 0:
                      (o.ctx.fillStyle = L(l.color)),
                        o.renderTextWithLetterSpacing(A, l.letterSpacing, n);
                      var t = l.textShadow;
                      t.length &&
                        A.text.trim().length &&
                        (t
                          .slice(0)
                          .reverse()
                          .forEach(function (e) {
                            (o.ctx.shadowColor = L(e.color)),
                              (o.ctx.shadowOffsetX =
                                e.offsetX.number * o.options.scale),
                              (o.ctx.shadowOffsetY =
                                e.offsetY.number * o.options.scale),
                              (o.ctx.shadowBlur = e.blur.number),
                              o.renderTextWithLetterSpacing(
                                A,
                                l.letterSpacing,
                                n,
                              );
                          }),
                        (o.ctx.shadowColor = ''),
                        (o.ctx.shadowOffsetX = 0),
                        (o.ctx.shadowOffsetY = 0),
                        (o.ctx.shadowBlur = 0)),
                        l.textDecorationLine.length &&
                          ((o.ctx.fillStyle = L(
                            l.textDecorationColor || l.color,
                          )),
                          l.textDecorationLine.forEach(function (e) {
                            switch (e) {
                              case 1:
                                o.ctx.fillRect(
                                  A.bounds.left,
                                  Math.round(A.bounds.top + n),
                                  A.bounds.width,
                                  1,
                                );
                                break;
                              case 2:
                                o.ctx.fillRect(
                                  A.bounds.left,
                                  Math.round(A.bounds.top),
                                  A.bounds.width,
                                  1,
                                );
                                break;
                              case 3:
                                o.ctx.fillRect(
                                  A.bounds.left,
                                  Math.ceil(A.bounds.top + i),
                                  A.bounds.width,
                                  1,
                                );
                            }
                          }));
                      break;
                    case 1:
                      l.webkitTextStrokeWidth &&
                        A.text.trim().length &&
                        ((o.ctx.strokeStyle = L(l.webkitTextStrokeColor)),
                        (o.ctx.lineWidth = l.webkitTextStrokeWidth),
                        (o.ctx.lineJoin = window.chrome ? 'miter' : 'round'),
                        o.ctx.strokeText(
                          A.text,
                          A.bounds.left,
                          A.bounds.top + n,
                        )),
                        (o.ctx.strokeStyle = ''),
                        (o.ctx.lineWidth = 0),
                        (o.ctx.lineJoin = 'miter');
                  }
                });
              }),
              [2]
            );
          });
        });
      }),
      (S.prototype.renderReplacedElement = function (e, t, A) {
        var r;
        A &&
          0 < e.intrinsicWidth &&
          0 < e.intrinsicHeight &&
          ((r = Aa(e)),
          (t = ki(t)),
          this.path(t),
          this.ctx.save(),
          this.ctx.clip(),
          this.ctx.drawImage(
            A,
            0,
            0,
            e.intrinsicWidth,
            e.intrinsicHeight,
            r.left,
            r.top,
            r.width,
            r.height,
          ),
          this.ctx.restore());
      }),
      (S.prototype.renderNodeContent = function (p) {
        return u(this, void 0, void 0, function () {
          var t, A, r, n, i, a, o, s, l, c, u, h, d;
          return Q(this, function (e) {
            switch (e.label) {
              case 0:
                this.applyEffects(p.getEffects(4)),
                  (t = p.container),
                  (A = p.curves),
                  (r = t.styles),
                  (n = 0),
                  (i = t.textNodes),
                  (e.label = 1);
              case 1:
                return n < i.length
                  ? ((a = i[n]), [4, this.renderTextNode(a, r)])
                  : [3, 4];
              case 2:
                e.sent(), (e.label = 3);
              case 3:
                return n++, [3, 1];
              case 4:
                if (!(t instanceof Xr)) return [3, 8];
                e.label = 5;
              case 5:
                return (
                  e.trys.push([5, 7, , 8]), [4, this.context.cache.match(t.src)]
                );
              case 6:
                return (
                  (c = e.sent()), this.renderReplacedElement(t, A, c), [3, 8]
                );
              case 7:
                return (
                  e.sent(),
                  this.context.logger.error('Error loading image ' + t.src),
                  [3, 8]
                );
              case 8:
                if (
                  (t instanceof Yr &&
                    this.renderReplacedElement(t, A, t.canvas),
                  !(t instanceof qr))
                )
                  return [3, 12];
                e.label = 9;
              case 9:
                return (
                  e.trys.push([9, 11, , 12]),
                  [4, this.context.cache.match(t.svg)]
                );
              case 10:
                return (
                  (c = e.sent()), this.renderReplacedElement(t, A, c), [3, 12]
                );
              case 11:
                return (
                  e.sent(),
                  this.context.logger.error(
                    'Error loading svg ' + t.svg.substring(0, 255),
                  ),
                  [3, 12]
                );
              case 12:
                return t instanceof En && t.tree
                  ? [
                      4,
                      new S(this.context, {
                        scale: this.options.scale,
                        backgroundColor: t.backgroundColor,
                        x: 0,
                        y: 0,
                        width: t.width,
                        height: t.height,
                      }).render(t.tree),
                    ]
                  : [3, 14];
              case 13:
                (a = e.sent()),
                  t.width &&
                    t.height &&
                    this.ctx.drawImage(
                      a,
                      0,
                      0,
                      t.width,
                      t.height,
                      t.bounds.left,
                      t.bounds.top,
                      t.bounds.width,
                      t.bounds.height,
                    ),
                  (e.label = 14);
              case 14:
                if (
                  (t instanceof dn &&
                    ((o = Math.min(t.bounds.width, t.bounds.height)),
                    t.type === cn
                      ? t.checked &&
                        (this.ctx.save(),
                        this.path([
                          new C(
                            t.bounds.left + 0.39363 * o,
                            t.bounds.top + 0.79 * o,
                          ),
                          new C(
                            t.bounds.left + 0.16 * o,
                            t.bounds.top + 0.5549 * o,
                          ),
                          new C(
                            t.bounds.left + 0.27347 * o,
                            t.bounds.top + 0.44071 * o,
                          ),
                          new C(
                            t.bounds.left + 0.39694 * o,
                            t.bounds.top + 0.5649 * o,
                          ),
                          new C(
                            t.bounds.left + 0.72983 * o,
                            t.bounds.top + 0.23 * o,
                          ),
                          new C(
                            t.bounds.left + 0.84 * o,
                            t.bounds.top + 0.34085 * o,
                          ),
                          new C(
                            t.bounds.left + 0.39363 * o,
                            t.bounds.top + 0.79 * o,
                          ),
                        ]),
                        (this.ctx.fillStyle = L(707406591)),
                        this.ctx.fill(),
                        this.ctx.restore())
                      : t.type === un &&
                        t.checked &&
                        (this.ctx.save(),
                        this.ctx.beginPath(),
                        this.ctx.arc(
                          t.bounds.left + o / 2,
                          t.bounds.top + o / 2,
                          o / 4,
                          0,
                          2 * Math.PI,
                          !0,
                        ),
                        (this.ctx.fillStyle = L(707406591)),
                        this.ctx.fill(),
                        this.ctx.restore())),
                  wa(t) && t.value.length)
                ) {
                  switch (
                    ((o = this.createFontStyle(r)),
                    (h = o[0]),
                    (u = o[1]),
                    (u = this.fontMetrics.getMetrics(h, u).baseline),
                    (this.ctx.font = h),
                    (this.ctx.fillStyle = L(r.color)),
                    (this.ctx.textBaseline = 'alphabetic'),
                    (this.ctx.textAlign = Ea(t.styles.textAlign)),
                    (d = Aa(t)),
                    (s = 0),
                    t.styles.textAlign)
                  ) {
                    case 1:
                      s += d.width / 2;
                      break;
                    case 2:
                      s += d.width;
                  }
                  (l = d.add(s, 0, 0, -d.height / 2 + 1)),
                    this.ctx.save(),
                    this.path([
                      new C(d.left, d.top),
                      new C(d.left + d.width, d.top),
                      new C(d.left + d.width, d.top + d.height),
                      new C(d.left, d.top + d.height),
                    ]),
                    this.ctx.clip(),
                    this.renderTextWithLetterSpacing(
                      new Rr(t.value, l),
                      r.letterSpacing,
                      u,
                    ),
                    this.ctx.restore(),
                    (this.ctx.textBaseline = 'alphabetic'),
                    (this.ctx.textAlign = 'left');
                }
                if (!m(t.styles.display, 2048)) return [3, 20];
                if (null === t.styles.listStyleImage) return [3, 19];
                if (0 !== (l = t.styles.listStyleImage).type) return [3, 18];
                (c = void 0), (u = l.url), (e.label = 15);
              case 15:
                return (
                  e.trys.push([15, 17, , 18]), [4, this.context.cache.match(u)]
                );
              case 16:
                return (
                  (c = e.sent()),
                  this.ctx.drawImage(
                    c,
                    t.bounds.left - (c.width + 10),
                    t.bounds.top,
                  ),
                  [3, 18]
                );
              case 17:
                return (
                  e.sent(),
                  this.context.logger.error(
                    'Error loading list-style-image ' + u,
                  ),
                  [3, 18]
                );
              case 18:
                return [3, 20];
              case 19:
                p.listValue &&
                  -1 !== t.styles.listStyleType &&
                  ((h = this.createFontStyle(r)[0]),
                  (this.ctx.font = h),
                  (this.ctx.fillStyle = L(r.color)),
                  (this.ctx.textBaseline = 'middle'),
                  (this.ctx.textAlign = 'right'),
                  (d = new B(
                    t.bounds.left,
                    t.bounds.top + H(t.styles.paddingTop, t.bounds.width),
                    t.bounds.width,
                    Ot(r.lineHeight, r.fontSize.number) / 2 + 1,
                  )),
                  this.renderTextWithLetterSpacing(
                    new Rr(p.listValue, d),
                    r.letterSpacing,
                    Ot(r.lineHeight, r.fontSize.number) / 2 + 2,
                  ),
                  (this.ctx.textBaseline = 'bottom'),
                  (this.ctx.textAlign = 'left')),
                  (e.label = 20);
              case 20:
                return [2];
            }
          });
        });
      }),
      (S.prototype.renderStackContent = function (g) {
        return u(this, void 0, void 0, function () {
          var t, A, r, n, i, a, o, s, l, c, u, h, d, p, f;
          return Q(this, function (e) {
            switch (e.label) {
              case 0:
                return (
                  m(g.element.container.flags, 16),
                  [4, this.renderNodeBackgroundAndBorders(g.element)]
                );
              case 1:
                e.sent(), (t = 0), (A = g.negativeZIndex), (e.label = 2);
              case 2:
                return t < A.length
                  ? ((f = A[t]), [4, this.renderStack(f)])
                  : [3, 5];
              case 3:
                e.sent(), (e.label = 4);
              case 4:
                return t++, [3, 2];
              case 5:
                return [4, this.renderNodeContent(g.element)];
              case 6:
                e.sent(), (r = 0), (n = g.nonInlineLevel), (e.label = 7);
              case 7:
                return r < n.length
                  ? ((f = n[r]), [4, this.renderNode(f)])
                  : [3, 10];
              case 8:
                e.sent(), (e.label = 9);
              case 9:
                return r++, [3, 7];
              case 10:
                (i = 0), (a = g.nonPositionedFloats), (e.label = 11);
              case 11:
                return i < a.length
                  ? ((f = a[i]), [4, this.renderStack(f)])
                  : [3, 14];
              case 12:
                e.sent(), (e.label = 13);
              case 13:
                return i++, [3, 11];
              case 14:
                (o = 0), (s = g.nonPositionedInlineLevel), (e.label = 15);
              case 15:
                return o < s.length
                  ? ((f = s[o]), [4, this.renderStack(f)])
                  : [3, 18];
              case 16:
                e.sent(), (e.label = 17);
              case 17:
                return o++, [3, 15];
              case 18:
                (l = 0), (c = g.inlineLevel), (e.label = 19);
              case 19:
                return l < c.length
                  ? ((f = c[l]), [4, this.renderNode(f)])
                  : [3, 22];
              case 20:
                e.sent(), (e.label = 21);
              case 21:
                return l++, [3, 19];
              case 22:
                (u = 0),
                  (h = g.zeroOrAutoZIndexOrTransformedOrOpacity),
                  (e.label = 23);
              case 23:
                return u < h.length
                  ? ((f = h[u]), [4, this.renderStack(f)])
                  : [3, 26];
              case 24:
                e.sent(), (e.label = 25);
              case 25:
                return u++, [3, 23];
              case 26:
                (d = 0), (p = g.positiveZIndex), (e.label = 27);
              case 27:
                return d < p.length
                  ? ((f = p[d]), [4, this.renderStack(f)])
                  : [3, 30];
              case 28:
                e.sent(), (e.label = 29);
              case 29:
                return d++, [3, 27];
              case 30:
                return [2];
            }
          });
        });
      }),
      (S.prototype.mask = function (e) {
        this.ctx.beginPath(),
          this.ctx.moveTo(0, 0),
          this.ctx.lineTo(this.canvas.width, 0),
          this.ctx.lineTo(this.canvas.width, this.canvas.height),
          this.ctx.lineTo(0, this.canvas.height),
          this.ctx.lineTo(0, 0),
          this.formatPath(e.slice(0).reverse()),
          this.ctx.closePath();
      }),
      (S.prototype.path = function (e) {
        this.ctx.beginPath(), this.formatPath(e), this.ctx.closePath();
      }),
      (S.prototype.formatPath = function (e) {
        var r = this;
        e.forEach(function (e, t) {
          var A = _(e) ? e.start : e;
          0 === t ? r.ctx.moveTo(A.x, A.y) : r.ctx.lineTo(A.x, A.y),
            _(e) &&
              r.ctx.bezierCurveTo(
                e.startControl.x,
                e.startControl.y,
                e.endControl.x,
                e.endControl.y,
                e.end.x,
                e.end.y,
              );
        });
      }),
      (S.prototype.renderRepeat = function (e, t, A, r) {
        this.path(e),
          (this.ctx.fillStyle = t),
          this.ctx.translate(A, r),
          this.ctx.fill(),
          this.ctx.translate(-A, -r);
      }),
      (S.prototype.resizeImage = function (e, t, A) {
        var r;
        return e.width === t && e.height === A
          ? e
          : (((r = (
              null != (r = this.canvas.ownerDocument) ? r : document
            ).createElement('canvas')).width = Math.max(1, t)),
            (r.height = Math.max(1, A)),
            r
              .getContext('2d')
              .drawImage(e, 0, 0, e.width, e.height, 0, 0, t, A),
            r);
      }),
      (S.prototype.renderBackgroundImage = function (S) {
        return u(this, void 0, void 0, function () {
          var U, t, M, A, r, n;
          return Q(this, function (e) {
            switch (e.label) {
              case 0:
                (U = S.styles.backgroundImage.length - 1),
                  (t = function (o) {
                    var s,
                      l,
                      c,
                      u,
                      h,
                      d,
                      p,
                      f,
                      g,
                      m,
                      v,
                      B,
                      w,
                      y,
                      E,
                      x,
                      b,
                      C,
                      F,
                      T,
                      _;
                    return Q(this, function (e) {
                      switch (e.label) {
                        case 0:
                          if (0 !== o.type) return [3, 5];
                          (s = void 0), (l = o.url), (e.label = 1);
                        case 1:
                          return (
                            e.trys.push([1, 3, , 4]),
                            [4, M.context.cache.match(l)]
                          );
                        case 2:
                          return (s = e.sent()), [3, 4];
                        case 3:
                          return (
                            e.sent(),
                            M.context.logger.error(
                              'Error loading background-image ' + l,
                            ),
                            [3, 4]
                          );
                        case 4:
                          return (
                            s &&
                              ((m = ra(S, U, [
                                s.width,
                                s.height,
                                s.width / s.height,
                              ])),
                              (d = m[0]),
                              (B = m[1]),
                              (w = m[2]),
                              (g = m[3]),
                              (m = m[4]),
                              (u = M.ctx.createPattern(
                                M.resizeImage(s, g, m),
                                'repeat',
                              )),
                              M.renderRepeat(d, u, B, w)),
                            [3, 6]
                          );
                        case 5:
                          1 === o.type
                            ? ((v = ra(S, U, [null, null, null])),
                              (d = v[0]),
                              (B = v[1]),
                              (w = v[2]),
                              (g = v[3]),
                              (m = v[4]),
                              (t = o.angle),
                              (A = g),
                              (r = m),
                              (t = 'number' == typeof t ? t : _t(t, A, r)),
                              (n =
                                Math.abs(A * Math.sin(t)) +
                                Math.abs(r * Math.cos(t))),
                              (A /= 2),
                              (r /= 2),
                              (i = n / 2),
                              (a = Math.sin(t - Math.PI / 2) * i),
                              (t = Math.cos(t - Math.PI / 2) * i),
                              (y = (v = [n, A - t, A + t, r - a, r + a])[0]),
                              (h = v[1]),
                              (f = v[2]),
                              (p = v[3]),
                              (v = v[4]),
                              ((x = document.createElement('canvas')).width =
                                g),
                              (x.height = m),
                              (E = x.getContext('2d')),
                              (c = E.createLinearGradient(h, p, f, v)),
                              Et(o.stops, y).forEach(function (e) {
                                return c.addColorStop(e.stop, L(e.color));
                              }),
                              (E.fillStyle = c),
                              E.fillRect(0, 0, g, m),
                              0 < g &&
                                0 < m &&
                                ((u = M.ctx.createPattern(x, 'repeat')),
                                M.renderRepeat(d, u, B, w)))
                            : 2 === o.type &&
                              ((h = ra(S, U, [null, null, null])),
                              (d = h[0]),
                              (p = h[1]),
                              (f = h[2]),
                              (g = h[3]),
                              (m = h[4]),
                              (v = 0 === o.position.length ? [st] : o.position),
                              (B = H(v[0], g)),
                              (w = H(v[v.length - 1], m)),
                              (y = (function (e, t, A, r, n) {
                                var i,
                                  a,
                                  o,
                                  s,
                                  l = 0,
                                  c = 0;
                                switch (e.size) {
                                  case 0:
                                    0 === e.shape
                                      ? (l = c =
                                          Math.min(
                                            Math.abs(t),
                                            Math.abs(t - r),
                                            Math.abs(A),
                                            Math.abs(A - n),
                                          ))
                                      : 1 === e.shape &&
                                        ((l = Math.min(
                                          Math.abs(t),
                                          Math.abs(t - r),
                                        )),
                                        (c = Math.min(
                                          Math.abs(A),
                                          Math.abs(A - n),
                                        )));
                                    break;
                                  case 2:
                                    0 === e.shape
                                      ? (l = c =
                                          Math.min(
                                            I(t, A),
                                            I(t, A - n),
                                            I(t - r, A),
                                            I(t - r, A - n),
                                          ))
                                      : 1 === e.shape &&
                                        ((i =
                                          Math.min(
                                            Math.abs(A),
                                            Math.abs(A - n),
                                          ) /
                                          Math.min(
                                            Math.abs(t),
                                            Math.abs(t - r),
                                          )),
                                        (o = (s = Ut(r, n, t, A, !0))[0]),
                                        (s = s[1]),
                                        (c = i * (l = I(o - t, (s - A) / i))));
                                    break;
                                  case 1:
                                    0 === e.shape
                                      ? (l = c =
                                          Math.max(
                                            Math.abs(t),
                                            Math.abs(t - r),
                                            Math.abs(A),
                                            Math.abs(A - n),
                                          ))
                                      : 1 === e.shape &&
                                        ((l = Math.max(
                                          Math.abs(t),
                                          Math.abs(t - r),
                                        )),
                                        (c = Math.max(
                                          Math.abs(A),
                                          Math.abs(A - n),
                                        )));
                                    break;
                                  case 3:
                                    0 === e.shape
                                      ? (l = c =
                                          Math.max(
                                            I(t, A),
                                            I(t, A - n),
                                            I(t - r, A),
                                            I(t - r, A - n),
                                          ))
                                      : 1 === e.shape &&
                                        ((i =
                                          Math.max(
                                            Math.abs(A),
                                            Math.abs(A - n),
                                          ) /
                                          Math.max(
                                            Math.abs(t),
                                            Math.abs(t - r),
                                          )),
                                        (o = (a = Ut(r, n, t, A, !1))[0]),
                                        (s = a[1]),
                                        (c = i * (l = I(o - t, (s - A) / i))));
                                }
                                return (
                                  Array.isArray(e.size) &&
                                    ((l = H(e.size[0], r)),
                                    (c =
                                      2 === e.size.length
                                        ? H(e.size[1], n)
                                        : l)),
                                  [l, c]
                                );
                              })(o, B, w, g, m)),
                              (E = y[0]),
                              (x = y[1]),
                              0 < E) &&
                              0 < x &&
                              ((b = M.ctx.createRadialGradient(
                                p + B,
                                f + w,
                                0,
                                p + B,
                                f + w,
                                E,
                              )),
                              Et(o.stops, 2 * E).forEach(function (e) {
                                return b.addColorStop(e.stop, L(e.color));
                              }),
                              M.path(d),
                              (M.ctx.fillStyle = b),
                              E !== x
                                ? ((C = S.bounds.left + 0.5 * S.bounds.width),
                                  (F = S.bounds.top + 0.5 * S.bounds.height),
                                  (_ = 1 / (T = x / E)),
                                  M.ctx.save(),
                                  M.ctx.translate(C, F),
                                  M.ctx.transform(1, 0, 0, T, 0, 0),
                                  M.ctx.translate(-C, -F),
                                  M.ctx.fillRect(p, _ * (f - F) + F, g, m * _),
                                  M.ctx.restore())
                                : M.ctx.fill()),
                            (e.label = 6);
                        case 6:
                          return U--, [2];
                      }
                      var t, A, r, n, i, a;
                    });
                  }),
                  (M = this),
                  (A = 0),
                  (r = S.styles.backgroundImage.slice(0).reverse()),
                  (e.label = 1);
              case 1:
                return A < r.length ? ((n = r[A]), [5, t(n)]) : [3, 4];
              case 2:
                e.sent(), (e.label = 3);
              case 3:
                return A++, [3, 1];
              case 4:
                return [2];
            }
          });
        });
      }),
      (S.prototype.renderSolidBorder = function (t, A, r) {
        return u(this, void 0, void 0, function () {
          return Q(this, function (e) {
            return (
              this.path($i(r, A)),
              (this.ctx.fillStyle = L(t)),
              this.ctx.fill(),
              [2]
            );
          });
        });
      }),
      (S.prototype.renderDoubleBorder = function (A, r, n, i) {
        return u(this, void 0, void 0, function () {
          var t;
          return Q(this, function (e) {
            switch (e.label) {
              case 0:
                return r < 3 ? [4, this.renderSolidBorder(A, n, i)] : [3, 2];
              case 1:
                return e.sent(), [2];
              case 2:
                return (
                  (t = (function (e, t) {
                    switch (t) {
                      case 0:
                        return M(
                          e.topLeftBorderBox,
                          e.topLeftBorderDoubleOuterBox,
                          e.topRightBorderBox,
                          e.topRightBorderDoubleOuterBox,
                        );
                      case 1:
                        return M(
                          e.topRightBorderBox,
                          e.topRightBorderDoubleOuterBox,
                          e.bottomRightBorderBox,
                          e.bottomRightBorderDoubleOuterBox,
                        );
                      case 2:
                        return M(
                          e.bottomRightBorderBox,
                          e.bottomRightBorderDoubleOuterBox,
                          e.bottomLeftBorderBox,
                          e.bottomLeftBorderDoubleOuterBox,
                        );
                      default:
                        return M(
                          e.bottomLeftBorderBox,
                          e.bottomLeftBorderDoubleOuterBox,
                          e.topLeftBorderBox,
                          e.topLeftBorderDoubleOuterBox,
                        );
                    }
                  })(i, n)),
                  this.path(t),
                  (this.ctx.fillStyle = L(A)),
                  this.ctx.fill(),
                  (t = (function (e, t) {
                    switch (t) {
                      case 0:
                        return M(
                          e.topLeftBorderDoubleInnerBox,
                          e.topLeftPaddingBox,
                          e.topRightBorderDoubleInnerBox,
                          e.topRightPaddingBox,
                        );
                      case 1:
                        return M(
                          e.topRightBorderDoubleInnerBox,
                          e.topRightPaddingBox,
                          e.bottomRightBorderDoubleInnerBox,
                          e.bottomRightPaddingBox,
                        );
                      case 2:
                        return M(
                          e.bottomRightBorderDoubleInnerBox,
                          e.bottomRightPaddingBox,
                          e.bottomLeftBorderDoubleInnerBox,
                          e.bottomLeftPaddingBox,
                        );
                      default:
                        return M(
                          e.bottomLeftBorderDoubleInnerBox,
                          e.bottomLeftPaddingBox,
                          e.topLeftBorderDoubleInnerBox,
                          e.topLeftPaddingBox,
                        );
                    }
                  })(i, n)),
                  this.path(t),
                  this.ctx.fill(),
                  [2]
                );
            }
          });
        });
      }),
      (S.prototype.renderNodeBackgroundAndBorders = function (c) {
        return u(this, void 0, void 0, function () {
          var t,
            A,
            r,
            n,
            i,
            a,
            o,
            s,
            l = this;
          return Q(this, function (e) {
            switch (e.label) {
              case 0:
                return (this.applyEffects(c.getEffects(2)),
                (t = c.container.styles),
                (A = !At(t.backgroundColor) || t.backgroundImage.length),
                (r = [
                  {
                    style: t.borderTopStyle,
                    color: t.borderTopColor,
                    width: t.borderTopWidth,
                  },
                  {
                    style: t.borderRightStyle,
                    color: t.borderRightColor,
                    width: t.borderRightWidth,
                  },
                  {
                    style: t.borderBottomStyle,
                    color: t.borderBottomColor,
                    width: t.borderBottomWidth,
                  },
                  {
                    style: t.borderLeftStyle,
                    color: t.borderLeftColor,
                    width: t.borderLeftWidth,
                  },
                ]),
                (n = ya(ua(t.backgroundClip, 0), c.curves)),
                A || t.boxShadow.length)
                  ? (this.ctx.save(),
                    this.path(n),
                    this.ctx.clip(),
                    At(t.backgroundColor) ||
                      ((this.ctx.fillStyle = L(t.backgroundColor)),
                      this.ctx.fill()),
                    [4, this.renderBackgroundImage(c.container)])
                  : [3, 2];
              case 1:
                e.sent(),
                  this.ctx.restore(),
                  t.boxShadow
                    .slice(0)
                    .reverse()
                    .forEach(function (e) {
                      l.ctx.save();
                      var A,
                        r,
                        n,
                        i,
                        t = Vi(c.curves),
                        a = e.inset ? 0 : 1e4,
                        o =
                          ((A = -a + (e.inset ? 1 : -1) * e.spread.number),
                          (r = (e.inset ? 1 : -1) * e.spread.number),
                          (n = e.spread.number * (e.inset ? -2 : 2)),
                          (i = e.spread.number * (e.inset ? -2 : 2)),
                          t.map(function (e, t) {
                            switch (t) {
                              case 0:
                                return e.add(A, r);
                              case 1:
                                return e.add(A + n, r);
                              case 2:
                                return e.add(A + n, r + i);
                              case 3:
                                return e.add(A, r + i);
                            }
                            return e;
                          }));
                      e.inset
                        ? (l.path(t), l.ctx.clip(), l.mask(o))
                        : (l.mask(t), l.ctx.clip(), l.path(o)),
                        (l.ctx.shadowOffsetX = e.offsetX.number + a),
                        (l.ctx.shadowOffsetY = e.offsetY.number),
                        (l.ctx.shadowColor = L(e.color)),
                        (l.ctx.shadowBlur = e.blur.number),
                        (l.ctx.fillStyle = e.inset
                          ? L(e.color)
                          : 'rgba(0,0,0,1)'),
                        l.ctx.fill(),
                        l.ctx.restore();
                    }),
                  (e.label = 2);
              case 2:
                (a = i = 0), (o = r), (e.label = 3);
              case 3:
                return a < o.length
                  ? 0 !== (s = o[a]).style && !At(s.color) && 0 < s.width
                    ? 2 !== s.style
                      ? [3, 5]
                      : [
                          4,
                          this.renderDashedDottedBorder(
                            s.color,
                            s.width,
                            i,
                            c.curves,
                            2,
                          ),
                        ]
                    : [3, 11]
                  : [3, 13];
              case 4:
                return e.sent(), [3, 11];
              case 5:
                return 3 !== s.style
                  ? [3, 7]
                  : [
                      4,
                      this.renderDashedDottedBorder(
                        s.color,
                        s.width,
                        i,
                        c.curves,
                        3,
                      ),
                    ];
              case 6:
                return e.sent(), [3, 11];
              case 7:
                return 4 !== s.style
                  ? [3, 9]
                  : [4, this.renderDoubleBorder(s.color, s.width, i, c.curves)];
              case 8:
                return e.sent(), [3, 11];
              case 9:
                return [4, this.renderSolidBorder(s.color, i, c.curves)];
              case 10:
                e.sent(), (e.label = 11);
              case 11:
                i++, (e.label = 12);
              case 12:
                return a++, [3, 3];
              case 13:
                return [2];
            }
          });
        });
      }),
      (S.prototype.renderDashedDottedBorder = function (h, d, p, f, g) {
        return u(this, void 0, void 0, function () {
          var t, A, r, n, i, a, o, s, l, c, u;
          return Q(this, function (e) {
            return (
              this.ctx.save(),
              (i = (function (e, t) {
                switch (t) {
                  case 0:
                    return ea(e.topLeftBorderStroke, e.topRightBorderStroke);
                  case 1:
                    return ea(
                      e.topRightBorderStroke,
                      e.bottomRightBorderStroke,
                    );
                  case 2:
                    return ea(
                      e.bottomRightBorderStroke,
                      e.bottomLeftBorderStroke,
                    );
                  default:
                    return ea(e.bottomLeftBorderStroke, e.topLeftBorderStroke);
                }
              })(f, p)),
              (t = $i(f, p)),
              2 === g && (this.path(t), this.ctx.clip()),
              (l = (
                _(t[0])
                  ? ((A = t[0].start.x), t[0].start)
                  : ((A = t[0].x), t[0])
              ).y),
              (n = (
                _(t[1]) ? ((r = t[1].end.x), t[1].end) : ((r = t[1].x), t[1])
              ).y),
              (l = 0 === p || 2 === p ? Math.abs(A - r) : Math.abs(l - n)),
              this.ctx.beginPath(),
              3 === g ? this.formatPath(i) : this.formatPath(t.slice(0, 2)),
              (n = d < 3 ? 3 * d : 2 * d),
              (i = d < 3 ? 2 * d : d),
              3 === g && (i = n = d),
              (a = !0),
              l <= 2 * n
                ? (a = !1)
                : l <= 2 * n + i
                ? ((n *= o = l / (2 * n + i)), (i *= o))
                : ((o = Math.floor((l + i) / (n + i))),
                  (s = (l - o * n) / (o - 1)),
                  (i =
                    (l = (l - (o + 1) * n) / o) <= 0 ||
                    Math.abs(i - s) < Math.abs(i - l)
                      ? s
                      : l)),
              a &&
                (3 === g
                  ? this.ctx.setLineDash([0, n + i])
                  : this.ctx.setLineDash([n, i])),
              3 === g
                ? ((this.ctx.lineCap = 'round'), (this.ctx.lineWidth = d))
                : (this.ctx.lineWidth = 2 * d + 1.1),
              (this.ctx.strokeStyle = L(h)),
              this.ctx.stroke(),
              this.ctx.setLineDash([]),
              2 === g &&
                (_(t[0]) &&
                  ((c = t[3]),
                  (u = t[0]),
                  this.ctx.beginPath(),
                  this.formatPath([
                    new C(c.end.x, c.end.y),
                    new C(u.start.x, u.start.y),
                  ]),
                  this.ctx.stroke()),
                _(t[1])) &&
                ((c = t[1]),
                (u = t[2]),
                this.ctx.beginPath(),
                this.formatPath([
                  new C(c.end.x, c.end.y),
                  new C(u.start.x, u.start.y),
                ]),
                this.ctx.stroke()),
              this.ctx.restore(),
              [2]
            );
          });
        });
      }),
      (S.prototype.render = function (n) {
        return u(this, void 0, void 0, function () {
          return Q(this, function (e) {
            switch (e.label) {
              case 0:
                return (
                  this.options.backgroundColor &&
                    ((this.ctx.fillStyle = L(this.options.backgroundColor)),
                    this.ctx.fillRect(
                      this.options.x,
                      this.options.y,
                      this.options.width,
                      this.options.height,
                    )),
                  (t = new Zi((t = n), null)),
                  (A = new Ji(t)),
                  aa(t, A, A, (r = [])),
                  oa(t.container, r),
                  [4, this.renderStack(A)]
                );
              case 1:
                return e.sent(), this.applyEffects([]), [2, this.canvas];
            }
            var t, A, r;
          });
        });
      });
    var ma,
      va = S;
    function S(e, t) {
      e = ma.call(this, e, t) || this;
      return (
        (e._activeEffects = []),
        (e.canvas = t.canvas || document.createElement('canvas')),
        (e.ctx = e.canvas.getContext('2d')),
        t.canvas ||
          ((e.canvas.width = Math.floor(t.width * t.scale)),
          (e.canvas.height = Math.floor(t.height * t.scale)),
          (e.canvas.style.width = t.width + 'px'),
          (e.canvas.style.height = t.height + 'px')),
        (e.fontMetrics = new pa(document)),
        e.ctx.scale(e.options.scale, e.options.scale),
        e.ctx.translate(-t.x, -t.y),
        (e.ctx.textBaseline = 'bottom'),
        (e._activeEffects = []),
        e.context.logger.debug(
          'Canvas renderer initialized (' +
            t.width +
            'x' +
            t.height +
            ') with scale ' +
            t.scale,
        ),
        e
      );
    }
    var Ba,
      wa = function (e) {
        return (
          e instanceof Bn ||
          e instanceof gn ||
          (e instanceof dn && e.type !== un && e.type !== cn)
        );
      },
      ya = function (e, t) {
        switch (e) {
          case 0:
            return Vi(t);
          case 2:
            return [
              t.topLeftContentBox,
              t.topRightContentBox,
              t.bottomRightContentBox,
              t.bottomLeftContentBox,
            ];
          default:
            return ki(t);
        }
      },
      Ea = function (e) {
        switch (e) {
          case 1:
            return 'center';
          case 2:
            return 'right';
          default:
            return 'left';
        }
      },
      xa = ['-apple-system', 'system-ui'],
      ba = function (e) {
        return /iPhone OS 15_(0|1)/.test(window.navigator.userAgent)
          ? e.filter(function (e) {
              return -1 === xa.indexOf(e);
            })
          : e;
      },
      Ca =
        (e(Fa, (Ba = ga)),
        (Fa.prototype.render = function (A) {
          return u(this, void 0, void 0, function () {
            var t;
            return Q(this, function (e) {
              switch (e.label) {
                case 0:
                  return (
                    (t = Mr(
                      this.options.width * this.options.scale,
                      this.options.height * this.options.scale,
                      this.options.scale,
                      this.options.scale,
                      A,
                    )),
                    [4, Ta(t)]
                  );
                case 1:
                  return (
                    (t = e.sent()),
                    this.options.backgroundColor &&
                      ((this.ctx.fillStyle = L(this.options.backgroundColor)),
                      this.ctx.fillRect(
                        0,
                        0,
                        this.options.width * this.options.scale,
                        this.options.height * this.options.scale,
                      )),
                    this.ctx.drawImage(
                      t,
                      -this.options.x * this.options.scale,
                      -this.options.y * this.options.scale,
                    ),
                    [2, this.canvas]
                  );
              }
            });
          });
        }),
        Fa);
    function Fa(e, t) {
      e = Ba.call(this, e, t) || this;
      return (
        (e.canvas = t.canvas || document.createElement('canvas')),
        (e.ctx = e.canvas.getContext('2d')),
        (e.options = t),
        (e.canvas.width = Math.floor(t.width * t.scale)),
        (e.canvas.height = Math.floor(t.height * t.scale)),
        (e.canvas.style.width = t.width + 'px'),
        (e.canvas.style.height = t.height + 'px'),
        e.ctx.scale(e.options.scale, e.options.scale),
        e.ctx.translate(-t.x, -t.y),
        e.context.logger.debug(
          'EXPERIMENTAL ForeignObject renderer initialized (' +
            t.width +
            'x' +
            t.height +
            ' at ' +
            t.x +
            ',' +
            t.y +
            ') with scale ' +
            t.scale,
        ),
        e
      );
    }
    var Ta = function (r) {
        return new Promise(function (e, t) {
          var A = new Image();
          (A.onload = function () {
            e(A);
          }),
            (A.onerror = t),
            (A.src =
              'data:image/svg+xml;charset=utf-8,' +
              encodeURIComponent(new XMLSerializer().serializeToString(r)));
        });
      },
      _a =
        ((Ua.prototype.debug = function () {
          for (var e = [], t = 0; t < arguments.length; t++)
            e[t] = arguments[t];
          this.enabled &&
            ('undefined' != typeof window &&
            window.console &&
            'function' == typeof console.debug
              ? console.debug.apply(
                  console,
                  D([this.id, this.getTime() + 'ms'], e),
                )
              : this.info.apply(this, e));
        }),
        (Ua.prototype.getTime = function () {
          return Date.now() - this.start;
        }),
        (Ua.prototype.info = function () {
          for (var e = [], t = 0; t < arguments.length; t++)
            e[t] = arguments[t];
          this.enabled &&
            'undefined' != typeof window &&
            window.console &&
            'function' == typeof console.info &&
            console.info.apply(console, D([this.id, this.getTime() + 'ms'], e));
        }),
        (Ua.prototype.warn = function () {
          for (var e = [], t = 0; t < arguments.length; t++)
            e[t] = arguments[t];
          this.enabled &&
            ('undefined' != typeof window &&
            window.console &&
            'function' == typeof console.warn
              ? console.warn.apply(
                  console,
                  D([this.id, this.getTime() + 'ms'], e),
                )
              : this.info.apply(this, e));
        }),
        (Ua.prototype.error = function () {
          for (var e = [], t = 0; t < arguments.length; t++)
            e[t] = arguments[t];
          this.enabled &&
            ('undefined' != typeof window &&
            window.console &&
            'function' == typeof console.error
              ? console.error.apply(
                  console,
                  D([this.id, this.getTime() + 'ms'], e),
                )
              : this.info.apply(this, e));
        }),
        (Ua.instances = {}),
        Ua);
    function Ua(e) {
      var t = e.id,
        e = e.enabled;
      (this.id = t), (this.enabled = e), (this.start = Date.now());
    }
    Sa.instanceCount = 1;
    var Ma = Sa;
    function Sa(e, t) {
      (this.windowBounds = t),
        (this.instanceName = '#' + Sa.instanceCount++),
        (this.logger = new _a({ id: this.instanceName, enabled: e.logging })),
        (this.cache = null != (t = e.cache) ? t : new _i(this, e));
    }
    'undefined' != typeof window && Ti.setContext(window);
    var Qa = function (e, t, A) {
      var r = t.ownerDocument,
        n = r.documentElement
          ? wt(e, getComputedStyle(r.documentElement).backgroundColor)
          : w.TRANSPARENT,
        i = r.body
          ? wt(e, getComputedStyle(r.body).backgroundColor)
          : w.TRANSPARENT,
        e =
          'string' == typeof A
            ? wt(e, A)
            : null === A
            ? w.TRANSPARENT
            : 4294967295;
      return t === r.documentElement ? (At(n) ? (At(i) ? e : i) : n) : e;
    };
    return function (e, t) {
      return (
        (m = e),
        (v = t = void 0 === t ? {} : t),
        u(void 0, void 0, void 0, function () {
          var t, A, r, n, i, a, o, s, l, c, u, h, d, p, f, g;
          return Q(this, function (e) {
            switch (e.label) {
              case 0:
                if (!m || 'object' != typeof m)
                  return [
                    2,
                    Promise.reject(
                      'Invalid element provided as first argument',
                    ),
                  ];
                if (!(d = m.ownerDocument))
                  throw new Error('Element is not attached to a Document');
                if ((t = d.defaultView))
                  return (
                    (p = {
                      allowTaint: null != (p = v.allowTaint) && p,
                      imageTimeout: null != (p = v.imageTimeout) ? p : 15e3,
                      proxy: v.proxy,
                      useCORS: null != (p = v.useCORS) && p,
                    }),
                    (c = P(
                      { logging: null == (c = v.logging) || c, cache: v.cache },
                      p,
                    )),
                    (p = {
                      windowWidth:
                        null != (p = v.windowWidth) ? p : t.innerWidth,
                      windowHeight:
                        null != (p = v.windowHeight) ? p : t.innerHeight,
                      scrollX: null != (p = v.scrollX) ? p : t.pageXOffset,
                      scrollY: null != (p = v.scrollY) ? p : t.pageYOffset,
                    }),
                    (p = new B(
                      p.scrollX,
                      p.scrollY,
                      p.windowWidth,
                      p.windowHeight,
                    )),
                    (c = new Ma(c, p)),
                    (u = null != (u = v.foreignObjectRendering) && u),
                    (h = {
                      allowTaint: null != (h = v.allowTaint) && h,
                      onclone: v.onclone,
                      ignoreElements: v.ignoreElements,
                      inlineImages: u,
                      copyStyles: u,
                    }),
                    c.logger.debug(
                      'Starting document clone with size ' +
                        p.width +
                        'x' +
                        p.height +
                        ' scrolled to ' +
                        -p.left +
                        ',' +
                        -p.top,
                    ),
                    (h = new hi(c, m, h)),
                    (A = h.clonedReferenceElement)
                      ? [4, h.toIFrame(d, p)]
                      : [
                          2,
                          Promise.reject(
                            'Unable to find element in cloned iframe',
                          ),
                        ]
                  );
                throw new Error('Document is not attached to a Window');
              case 1:
                return ((r = e.sent()),
                (h = Vn(A) || Nn(A) ? N(A.ownerDocument) : O(c, A)),
                (n = h.width),
                (i = h.height),
                (a = h.left),
                (o = h.top),
                (s = Qa(c, A, v.backgroundColor)),
                (f = {
                  canvas: v.canvas,
                  backgroundColor: s,
                  scale:
                    null != (p = null != (d = v.scale) ? d : t.devicePixelRatio)
                      ? p
                      : 1,
                  x: (null != (f = v.x) ? f : 0) + a,
                  y: (null != (f = v.y) ? f : 0) + o,
                  width: null != (f = v.width) ? f : Math.ceil(n),
                  height: null != (f = v.height) ? f : Math.ceil(i),
                }),
                u)
                  ? (c.logger.debug(
                      'Document cloned, using foreign object rendering',
                    ),
                    [4, new Ca(c, f).render(A)])
                  : [3, 3];
              case 2:
                return (l = e.sent()), [3, 5];
              case 3:
                return (
                  c.logger.debug(
                    'Document cloned, element located at ' +
                      a +
                      ',' +
                      o +
                      ' with size ' +
                      n +
                      'x' +
                      i +
                      ' using computed rendering',
                  ),
                  c.logger.debug('Starting DOM parsing'),
                  (g = Mn(c, A)),
                  s === g.styles.backgroundColor &&
                    (g.styles.backgroundColor = w.TRANSPARENT),
                  c.logger.debug(
                    'Starting renderer for element at ' +
                      f.x +
                      ',' +
                      f.y +
                      ' with size ' +
                      f.width +
                      'x' +
                      f.height,
                  ),
                  [4, new va(c, f).render(g)]
                );
              case 4:
                (l = e.sent()), (e.label = 5);
              case 5:
                return (
                  (null != (g = v.removeContainer) && !g) ||
                    hi.destroy(r) ||
                    c.logger.error(
                      'Cannot detach cloned iframe as it is not in the DOM anymore',
                    ),
                  c.logger.debug('Finished rendering'),
                  [2, l]
                );
            }
          });
        })
      );
      var m, v;
    };
  });
